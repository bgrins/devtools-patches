# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  f915da42169e70bdd6711457966620e80f9fa774
Bug 1587142 - Remove XBL tests in dom/

diff --git a/dom/base/crashtests/348049-1.xhtml b/dom/base/crashtests/348049-1.xhtml
deleted file mode 100644
--- a/dom/base/crashtests/348049-1.xhtml
+++ /dev/null
@@ -1,40 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" xmlns:html="http://www.w3.org/1999/xhtml" class="reftest-wait">
-<head>
-
-<bindings xmlns="http://www.mozilla.org/xbl">
-
-<binding id="td">
-  <content>
-    <html:td><children/></html:td>
-  </content>
-</binding>
-
-<binding id="foo">
-  <content>
-    <html:span/>
-  </content>
-</binding>
-
-</bindings>
-
-
-<script>
-function f1()
-{
-  document.getElementById("inner").style.MozBinding = "url(#foo)";
-  document.documentElement.removeAttribute("class");
-}
-</script>
-
-</head>
-
-
-<body onload="setTimeout(f1, 30);">
-
-
-<div id="outer" style="-moz-binding: url(#td)"><div id="inner">M</div></div>
-
-
-</body>
-
-</html>
diff --git a/dom/base/crashtests/395469-1.xhtml b/dom/base/crashtests/395469-1.xhtml
deleted file mode 100644
--- a/dom/base/crashtests/395469-1.xhtml
+++ /dev/null
@@ -1,29 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-<head>
-
-<bindings xmlns="http://www.mozilla.org/xbl"><binding id="empty"><content></content></binding></bindings>
-
-<style>
-
-.bef:before { content: counter(c); }
-
-.fl:first-letter { }
-
-</style>
-
-<script>
-
-function boom()
-{
-  document.getElementById("xblize").style.MozBinding = "url('#empty')";
-}
-
-</script>
-</head>
-
-<body onload="boom();">
-
-<div class="fl"><span class="bef" id="xblize"></span><span class="bef"></span></div>
-
-</body>
-</html>
diff --git a/dom/base/crashtests/395469-2.xhtml b/dom/base/crashtests/395469-2.xhtml
deleted file mode 100644
--- a/dom/base/crashtests/395469-2.xhtml
+++ /dev/null
@@ -1,45 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" class="reftest-wait">
-<head>
-
-<bindings xmlns="http://www.mozilla.org/xbl"><binding id="empty"><content></content></binding></bindings>
-
-<style>
-
-.bef:before { content: counter(c); }
-
-.fl:first-letter { }
-
-</style>
-
-<script>
-
-var xblize, div;
-
-function boom()
-{
-  xblize = document.getElementById("xblize");
-  div = document.getElementById("div");
-  
-  xblize.style.MozBinding = "url('#empty')";
-
-  // Give the XBL extra time to settle
-  setTimeout(boom2, 200);
-}
-
-function boom2()
-{
-  div.removeChild(xblize);
-  div.appendChild(xblize);
-  
-  document.documentElement.removeAttribute("class");
-}
-
-</script>
-</head>
-
-<body onload="boom();">
-
-<div class="fl" id="div"><span class="bef" id="xblize"></span><span class="bef"></span></div>
-
-</body>
-</html>
diff --git a/dom/base/crashtests/401993-1.html b/dom/base/crashtests/401993-1.html
deleted file mode 100644
--- a/dom/base/crashtests/401993-1.html
+++ /dev/null
@@ -1,38 +0,0 @@
-<html class="reftest-wait">
-<head>
-<script>
-
-function s()
-{
-  var x = document.getElementById("x");
-  x.style.MozBinding = "url(401993-1.xml#foo)";
-  
-  setTimeout(boom, 0);
-  
-  function boom()
-  {
-    var nodes = SpecialPowers.unwrap(SpecialPowers.wrap(document).getAnonymousNodes(x));
-    if (!nodes) {
-      setTimeout(boom, 10);
-      return;
-    }
-
-    var newSpan = document.createElement("span");
-    newSpan.contentEditable = "true";
-    nodes[0].appendChild(newSpan);
-    x.remove();
-    
-    document.documentElement.removeAttribute("class");
-  }
-}
-</script>
-</head>
-
-<body onload="s();">
-
-<span contenteditable="true"></span>
-
-<div id="x"></div>
-
-</body>
-</html>
diff --git a/dom/base/crashtests/404869-1.xul b/dom/base/crashtests/404869-1.xul
deleted file mode 100644
--- a/dom/base/crashtests/404869-1.xul
+++ /dev/null
@@ -1,23 +0,0 @@
-<?xml version="1.0"?>
-<window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul" onload="boom();">
-        
-<bindings xmlns="http://www.mozilla.org/xbl">
-  <binding id="empty"><content></content></binding>
-</bindings>
-
-<script type="text/javascript">
-
-function boom()
-{
-  var menupopup = document.getElementById("menupopup");
-  var x = SpecialPowers.wrap(document).getAnonymousNodes(menupopup)[0];
-  menupopup.style.MozBinding = "url('#empty')";
-  for (var ppp in x) {
-  }
-}
-
-</script>
-
-<menupopup id="menupopup"/>
-
-</window>
diff --git a/dom/base/crashtests/crashtests.list b/dom/base/crashtests/crashtests.list
--- a/dom/base/crashtests/crashtests.list
+++ b/dom/base/crashtests/crashtests.list
@@ -24,17 +24,16 @@ load 338674-1.xhtml
 load 340733-1.html
 load 343730-1.xhtml
 load 343850-1.xhtml
 load 343889-1.html
 load 344434-1.xhtml
 load 344882-1.html
 load 345837-1.xhtml
 load 346381-1.html
-skip-if(!xbl) load 348049-1.xhtml
 load 349355-1.html
 load 359432-1.xhtml
 load 360599-1.html
 load 366200-1.xhtml
 load 369219-1.xhtml
 load 369413-1.html
 load 371124-1.html
 load 371124-2.html
@@ -43,22 +42,18 @@ load 372554-1.html
 load 375399-1.html
 load 377360-1.xhtml
 load 377960-1.html
 load 377960-2.html
 load 384663-1.html
 load 386000-1.html
 load 386794-1.html
 load 387460-1.html
-skip-if(!xbl) load 395469-1.xhtml
-skip-if(!xbl) load 395469-2.xhtml
 load 399712-1.html
 load 400763-1.html
-skip-if(!xbl) load 401993-1.html
-skip-if(!xbl) load chrome://reftest/content/crashtests/dom/base/crashtests/404869-1.xul
 load 407818.html
 load 410860-1.xml
 load 411882-1.xhtml
 load 416734-1.html
 load 417852-1.html
 load 418928-1.html
 load 420620-1.html
 load 424276-1.html
diff --git a/dom/base/test/mochitest.ini b/dom/base/test/mochitest.ini
--- a/dom/base/test/mochitest.ini
+++ b/dom/base/test/mochitest.ini
@@ -281,18 +281,16 @@ tags = audiochannel
 skip-if = (os == "win" && processor == "aarch64") # bug 1535775
 [test_audioNotificationNavigationWebAudio.html]
 tags = audiochannel
 skip-if = (os == "win" && processor == "aarch64") # bug 1535775
 [test_audioNotificationWithEarlyPlay.html]
 tags = audiochannel
 skip-if = (os == "win" && processor == "aarch64") # bug 1535775
 [test_base.xhtml]
-[test_base_xbl.xhtml]
-skip-if = !xbl
 [test_bug5141.html]
 [test_bug28293.html]
 [test_bug28293.xhtml]
 [test_bug51034.html]
 [test_bug116083.html]
 tags = clipboard
 skip-if = headless # fails in clipboard mode
 [test_bug166235.html]
@@ -309,18 +307,16 @@ skip-if = headless # headless != clipboa
 [test_bug282547.html]
 [test_bug298064.html]
 [test_bug300992.html]
 [test_bug311681.xml]
 [test_bug313646.html]
 [test_bug320799.html]
 [test_bug322317.html]
 [test_bug326337.html]
-[test_bug330925.xhtml]
-skip-if = !xbl
 [test_bug331959.html]
 [test_bug333064.html]
 skip-if = headless # Headless: Bug 1405868
 [test_bug333198.html]
 [test_bug333673.html]
 [test_bug337631.html]
 [test_bug338541.xhtml]
 [test_bug338583.html]
@@ -346,18 +342,16 @@ support-files = file_bug357450.js
 [test_bug366944.html]
 [test_bug366946.html]
 [test_bug367164.html]
 [test_bug368972.html]
 [test_bug371576-2.html]
 [test_bug371576-3.html]
 [test_bug371576-4.html]
 [test_bug371576-5.html]
-[test_bug372086.html]
-skip-if = !xbl
 [test_bug372964-2.html]
 [test_bug372964.html]
 [test_bug373181.xhtml]
 [test_bug375314.html]
 [test_bug378969.html]
 [test_bug380418.html]
 support-files = test_bug380418.html^headers^
 [test_bug382113.html]
@@ -405,18 +399,16 @@ support-files = test_bug402150.html^head
 [test_bug428847.html]
 [test_bug429157.html]
 [test_bug431082.html]
 [test_bug431701.html]
 [test_bug431833.html]
 [test_bug433533.html]
 [test_bug433662.html]
 [test_bug435425.html]
-[test_bug444030.xhtml]
-skip-if = !xbl
 [test_bug444322.html]
 [test_bug444546.html]
 disabled = Disabled for now. Mochitest isn't reliable enough for these.
 support-files = bug444546.sjs
 [test_bug444722.html]
 [test_bug448993.html]
 [test_bug450160.html]
 [test_bug451376.html]
diff --git a/dom/base/test/test_base_xbl.xhtml b/dom/base/test/test_base_xbl.xhtml
deleted file mode 100644
--- a/dom/base/test/test_base_xbl.xhtml
+++ /dev/null
@@ -1,34 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-<head>
-  <title>Test for base URIs</title>
-  <script src="/tests/SimpleTest/SimpleTest.js"></script>
-  <link rel="stylesheet" type="text/css" href="/tests/SimpleTest/test.css"/>
-  <base href="/tests/dom/base/" />
-  <style>
-    #bound { -moz-binding: url("test/file_base_xbl.xml#test"); }
-  </style>
-</head>
-<body>
-<div id="bound"/>
-<pre id="test">
-<script type="application/javascript">
-SimpleTest.waitForExplicitFinish();
-addLoadEvent(function() {
-  var svgExpected =
-    ["http://mochi.test:8888/tests/dom/base/",
-     "http://mochi.test:8888/tests/dom/base/",
-     "http://mochi.test:8888/tests/dom/base/",
-     ];
-  let node = SpecialPowers.wrap(document).getAnonymousNodes(document.getElementById("bound"))[0];
-  while(node) {
-    is(node.baseURI, svgExpected.shift(), "node base");
-    node = node.firstChild;
-  }
-  is(svgExpected.length, 0, "found all expected nodes");
-
-  SimpleTest.finish();
-});
-</script>
-</pre>
-</body>
-</html>
diff --git a/dom/base/test/test_bug330925.xhtml b/dom/base/test/test_bug330925.xhtml
deleted file mode 100644
--- a/dom/base/test/test_bug330925.xhtml
+++ /dev/null
@@ -1,74 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-<!--
-https://bugzilla.mozilla.org/show_bug.cgi?id=330925
--->
-<head>
-  <title>Test for Bug 330925</title>
-  <script src="/tests/SimpleTest/SimpleTest.js"></script>
-  <link rel="stylesheet" type="text/css" href="/tests/SimpleTest/test.css" />
-
-<style type="text/css">
-#t {
--moz-binding: url(#randomxbl);
-}
-</style>
-
-<bindings xmlns="http://www.mozilla.org/xbl">
-<binding id="randomxbl" inheritstyle="false">
-<content>
-xbl textnode1
-<div>
-xbl textnode2
-<children xmlns="http://www.mozilla.org/xbl"/>
-</div>
-</content>
-</binding>
-</bindings>
-
-</head>
-<body>
-<a target="_blank" href="https://bugzilla.mozilla.org/show_bug.cgi?id=330925">Mozilla Bug 330925</a>
-
-<p id="display">
-<div id="t" />
-</p>
-
-<pre id="test">
-<script class="testbody" type="text/javascript">
-<![CDATA[
-
-/** Test for Bug 330925 **/
-
-// We have to wait until onload because XBL doesn't bind immediately.
-SimpleTest.waitForExplicitFinish();
-addLoadEvent(init);
-
-function init()
-{
-  var t = document.getElementById("t");
-  var d = SpecialPowers.wrap(document);
-
-  is(SpecialPowers.unwrap(d.getBindingParent(d.getAnonymousNodes(t)[0])),
-     t,
-     "Wrong binding parent for anonymous node");
-     
-  is(SpecialPowers.unwrap(d.getBindingParent(d.getAnonymousNodes(t)[1].childNodes[0])),
-     t,
-     "Wrong binding parent for child of anonymous node");
-     
-  is(d.getBindingParent(t), 
-     null,
-     "Non-anonymous node should not have a binding parent");
-     
-  is(d.getBindingParent(document.documentElement), 
-     null,
-     "Document element should not have a binding parent");
-     
-  SimpleTest.finish();
-}
-
-]]>
-</script>
-</pre>
-</body>
-</html>
diff --git a/dom/base/test/test_bug372086.html b/dom/base/test/test_bug372086.html
deleted file mode 100644
--- a/dom/base/test/test_bug372086.html
+++ /dev/null
@@ -1,96 +0,0 @@
-<!DOCTYPE HTML>
-<html>
-<!--
-https://bugzilla.mozilla.org/show_bug.cgi?id=372086
--->
-<head>
-  <title>Test for Bug 372086</title>
-  <script src="/tests/SimpleTest/SimpleTest.js"></script>        
-  <link rel="stylesheet" type="text/css" href="/tests/SimpleTest/test.css" />
-</head>
-<body>
-<a target="_blank" href="https://bugzilla.mozilla.org/show_bug.cgi?id=372086">Mozilla Bug 372086</a>
-<p id="display">
-  <!-- Binding is:
-       <bindings xmlns="http://www.mozilla.org/xbl">
-         <binding id="test">
-           <content>ghi<children/>jkl</content>
-         </binding>
-       </bindings>
-    -->
-  <div id="d" style="-moz-binding: url(file_bug372086.xml)">abc</div>def
-</p>
-<div id="content" style="display: none">
-  
-</div>
-<pre id="test">
-<script class="testbody" type="text/javascript">
-
-/** Test for Bug 372086 **/
-
-// Note that we could avoid a lot of SpecialPowers.unwrap calls if the SpecialPowers
-// wrappers could be made to preserve identity. See bug 718543.
-
-function runTest() {
-  var range = SpecialPowers.wrap(document.createRange());
-
-  var c = $("d").firstChild;
-  var a = $("d").nextSibling;
-  
-  range.setStart(c, 1);
-  range.setEnd(c, 3);
-  is(SpecialPowers.unwrap(range.startContainer), c, "Unexpected start container");
-  is(range.startOffset, 1, "Unexpected start offset");
-  is(SpecialPowers.unwrap(range.endContainer), c, "Unexpected end container");
-  is(range.endOffset, 3, "Unexpected end offset");
-  is(range.toString(), "bc", "Unexpected range serialization");
-
-  var anon = SpecialPowers.wrap(document).getAnonymousNodes($("d"))[0];
-  // Should collapse the range, because can't determine order
-  range.setEnd(anon, 2);
-  is(SpecialPowers.unwrap(range.startContainer), SpecialPowers.unwrap(anon),
-     "Unexpected collapsed start container");
-  is(range.startOffset, 2, "Unexpected collapsed start offset");
-  is(SpecialPowers.unwrap(range.endContainer), SpecialPowers.unwrap(anon),
-     "Unexpected collapsed end container");
-  is(range.endOffset, 2, "Unexpected collapsed end offset");
-  is(range.toString(), "", "Unexpected collapsed range serialization");
-
-  range.setEnd(a, 2);
-  range.setStart(a, 0);
-  is(SpecialPowers.unwrap(range.startContainer), a, "Unexpected start container after");
-  is(range.startOffset, 0, "Unexpected start offset after");
-  is(SpecialPowers.unwrap(range.endContainer), a, "Unexpected end container after");
-  is(range.endOffset, 2, "Unexpected end offset after");
-  is(range.toString(), "de", "Unexpected range serialization after");
-
-  anon = SpecialPowers.wrap(document).getAnonymousNodes($("d"))[2];
-  // Collapses because one endpoint is anonymous from point of view of
-  // the other.  
-  range.setStart(anon, 1);
-  is(SpecialPowers.unwrap(range.startContainer),
-     SpecialPowers.unwrap(anon), "Unexpected newly collapsed start container");
-  is(range.startOffset, 1, "Unexpected newly collapsed start offset");
-  is(SpecialPowers.unwrap(range.endContainer), SpecialPowers.unwrap(anon),
-     "Unexpected newly collapsed end container");
-  is(range.endOffset, 1, "Unexpected newly collapsed end offset");
-  is(range.toString(), "", "Unexpected collapsed range serialization");
-
-  range.setEnd(anon, 3);
-  is(SpecialPowers.unwrap(range.startContainer),
-     SpecialPowers.unwrap(anon), "Unexpected anon start container");
-  is(range.startOffset, 1, "Unexpected anon start offset");
-  is(SpecialPowers.unwrap(range.endContainer),
-     SpecialPowers.unwrap(anon), "Unexpected anon end container");
-  is(range.endOffset, 3, "Unexpected anon end offset");
-  is(range.toString(), "kl", "Unexpected anon range serialization");
-}
-
-SimpleTest.waitForExplicitFinish();
-addLoadEvent(runTest);
-addLoadEvent(SimpleTest.finish)
-</script>
-</pre>
-</body>
-</html>
-
diff --git a/dom/base/test/test_bug444030.xhtml b/dom/base/test/test_bug444030.xhtml
deleted file mode 100644
--- a/dom/base/test/test_bug444030.xhtml
+++ /dev/null
@@ -1,50 +0,0 @@
-<?xml version="1.0"?>
-<html xmlns="http://www.w3.org/1999/xhtml">
-<!--
-https://bugzilla.mozilla.org/show_bug.cgi?id=444030
--->
-<head>
-  <title>Test for Bug 444030</title>
-  <script src="/tests/SimpleTest/SimpleTest.js"></script>
-  <link rel="stylesheet" type="text/css" href="/tests/SimpleTest/test.css" />
-  <bindings xmlns="http://www.mozilla.org/xbl">
-    <binding id="e">
-      <content>e</content>
-    </binding>
-  </bindings>
-</head>
-<body>
-<a target="_blank" href="https://bugzilla.mozilla.org/show_bug.cgi?id=444030">Mozilla Bug 444030</a>
-<p id="display"></p>
-<div id="content" style="display: none">
-  
-</div>
-<pre id="test">
-<script class="testbody" type="text/javascript">
-<![CDATA[
-
-/** Test for Bug 444030 **/
-
-function doTest() {
-  var anonTextNode = SpecialPowers.unwrap(SpecialPowers.wrap(document).getAnonymousNodes(document.getElementById("boundElement")))[0];
-  var hadException = false;
-  try {
-    var wholeText = anonTextNode.wholeText;
-  } catch(e) {
-    hadException = true;
-  }
-  ok(hadException,
-     "Should have got an exception when using .wholeText with a text node child of the binding parent");
-  SimpleTest.finish();
-}
-
-SimpleTest.waitForExplicitFinish();
-addLoadEvent(doTest);
-
-]]>
-</script>
-</pre>
-<div style="-moz-binding: url(#e)" id="boundElement"></div>
-</body>
-</html>
-
diff --git a/dom/events/crashtests/422009-1.xhtml b/dom/events/crashtests/422009-1.xhtml
deleted file mode 100644
--- a/dom/events/crashtests/422009-1.xhtml
+++ /dev/null
@@ -1,31 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-<head>
-
-<bindings xmlns="http://www.mozilla.org/xbl">
-  <binding id="g">
-    <implementation>
-      <constructor>
-        throw 3;
-      </constructor>
-    </implementation>
-  </binding>
-</bindings>
-
-<script type="text/javascript">
-
-function boom()
-{
-  var HTML_NS = "http://www.w3.org/1999/xhtml";
-  var span = document.createElementNS(HTML_NS, 'span');
-  span.style.MozBinding = "url(#g)";
-  document.removeChild(document.documentElement)
-  var w = document.createElementNS(HTML_NS, 'body');
-  w.setAttribute('onload', "/");
-  document.appendChild(span);
-}
-
-</script>
-</head>
-
-<body onload="boom();"></body>
-</html>
diff --git a/dom/events/crashtests/crashtests.list b/dom/events/crashtests/crashtests.list
--- a/dom/events/crashtests/crashtests.list
+++ b/dom/events/crashtests/crashtests.list
@@ -1,12 +1,11 @@
 load 104310-1.html
 load 116206-1.html
 load 135345-1.html
-skip-if(!xbl) load 422009-1.xhtml
 load 457776-1.html
 load 496308-1.html
 load 682637-1.html
 load 938341.html
 load 1033343.html
 load 1035654-1.html
 load 1035654-2.html
 needs-focus load 1072137-1.html
diff --git a/dom/events/test/chrome.ini b/dom/events/test/chrome.ini
--- a/dom/events/test/chrome.ini
+++ b/dom/events/test/chrome.ini
@@ -7,18 +7,16 @@ support-files =
   bug591249_iframe.xul
   bug602962.xul
   file_bug679494.html
   window_bug617528.xul
   window_bug1412775.xul
   test_bug336682.js
 
 [test_bug336682_2.xul]
-[test_bug391568.xhtml]
-skip-if = !xbl
 [test_bug415498.xul]
 [test_bug418986-3.xul]
 [test_bug524674.xul]
 [test_bug586961.xul]
 [test_bug591249.xul]
 [test_bug602962.xul]
 [test_bug617528.xul]
 [test_bug679494.xul]
diff --git a/dom/events/test/test_bug391568.xhtml b/dom/events/test/test_bug391568.xhtml
deleted file mode 100644
--- a/dom/events/test/test_bug391568.xhtml
+++ /dev/null
@@ -1,77 +0,0 @@
-<?xml version="1.0"?>
-<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xbl="http://www.mozilla.org/xbl">
-<!--
-https://bugzilla.mozilla.org/show_bug.cgi?id=391568
--->
-<head>
-  <title>Test for Bug 391568</title>
-  <script src="chrome://mochikit/content/tests/SimpleTest/SimpleTest.js"></script>
-  <link rel="stylesheet" type="text/css" href="chrome://mochikit/content/tests/SimpleTest/test.css"/>
-  <script>
-    var constructorFired = 0;
-  </script>
-  <xbl:bindings>
-    <xbl:binding id="test">
-      <xbl:content><span>
-        (anonumous content)
-        <span><xbl:children/></span>
-        (anonumous content)</span>
-      </xbl:content>
-  
-      <xbl:implementation>
-        <xbl:constructor>
-          var win = window;
-          ++win.constructorFired;
-          document.getAnonymousNodes(this)[0].addEventListener(
-            "DOMCharacterDataModified", 
-            function(evt) {
-              ++win.characterdatamodified;
-            },
-            true);
-        </xbl:constructor>
-      </xbl:implementation>
-    </xbl:binding>
-  </xbl:bindings>
-</head>
-<body>
-<a target="_blank" href="https://bugzilla.mozilla.org/show_bug.cgi?id=391568">Mozilla Bug 391568</a>
-<p id="display"></p>
-<div id="content">
-  <span style="-moz-binding: url(#test);"><span id="real1">(real content)</span></span>
-  <span style="-moz-binding: url(#test);"><span id="real2">(real content)</span></span>
-</div>
-<pre id="test">
-<script class="testbody" type="text/javascript">
-<![CDATA[
-
-/** Test for Bug 391568 **/
-
-var characterdatamodified = 0;
-
-document.getElementById('real1').addEventListener(
-  "DOMCharacterDataModified", 
-  function(evt) {},
-  true);
-
-function testListeners() {
-  if (constructorFired < 2) {
-    setTimeout(testListeners, 0);
-    return;
-  }
-  document.getElementById('real1').firstChild.data = "(real content 2)";
-  ok(characterdatamodified == 1,
-     "There is a DOMCharacterDataModified listener in anonymous content which didn't get called (1)!");
-  document.getElementById('real2').firstChild.data = "(real content 2)";
-  ok(characterdatamodified == 2,
-     "There is a DOMCharacterDataModified listener in anonymous content which didn't get called (2)!");
-  SimpleTest.finish();
-}
-
-SimpleTest.waitForExplicitFinish();
-addLoadEvent(testListeners);
-]]>
-</script>
-</pre>
-</body>
-</html>
-
diff --git a/dom/html/crashtests/465466-1.xhtml b/dom/html/crashtests/465466-1.xhtml
deleted file mode 100644
--- a/dom/html/crashtests/465466-1.xhtml
+++ /dev/null
@@ -1,23 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-<head>
-
-<bindings xmlns="http://www.mozilla.org/xbl"><binding id="u">
-<content><foopy><children xmlns="http://www.mozilla.org/xbl"/></foopy></content>
-</binding></bindings>
-
-
-<script type="text/javascript">
-
-function boom()
-{
-  var f = document.getElementById("f");
-  var anon = SpecialPowers.unwrap(SpecialPowers.wrap(document).getAnonymousNodes(f))[0];
-  document.body.removeChild(f);
-  anon.appendChild(document.createElement("label"));
-}
-
-</script>
-</head>
-
-<body onload="boom();"><form id="f" style="-moz-binding: url(#u);"><label></label></form></body>
-</html>
diff --git a/dom/html/crashtests/564461.xhtml b/dom/html/crashtests/564461.xhtml
deleted file mode 100644
--- a/dom/html/crashtests/564461.xhtml
+++ /dev/null
@@ -1,26 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-<head>
-
-
-<bindings xmlns="http://www.mozilla.org/xbl">
-  <binding id="editable"><content><div contenteditable="true" xmlns="http://www.w3.org/1999/xhtml"></div></content></binding>
-</bindings>
-
-<script type="text/javascript">
-<![CDATA[
-
-function boom()
-{
-  while (document.documentElement.firstChild) document.documentElement.firstChild.remove();
-  
-  document.addEventListener("DOMSubtreeModified", function(){});
-  document.addEventListener("DOMNodeInsertedIntoDocument", function(){});
-  document.documentElement.appendChild(document.createElementNS("http://www.w3.org/1999/xhtml", "body"));
-  document.body.style.MozBinding = 'url(#editable)';
-}
-
-]]>
-</script></head>
-
-<body onload="boom();"></body>
-</html>
diff --git a/dom/html/crashtests/680922-1.xul b/dom/html/crashtests/680922-1.xul
deleted file mode 100644
--- a/dom/html/crashtests/680922-1.xul
+++ /dev/null
@@ -1,9 +0,0 @@
-<?xml-stylesheet href="chrome://browser/skin/" type="text/css"?>
-<window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul" xmlns:html="http://www.w3.org/1999/xhtml">
-
-<box id="e">
-<box id="b" name="e" style="-moz-binding:url(680922-binding.xml#xbl);">
-</box>
-</box>
-
-</window>
diff --git a/dom/html/crashtests/crashtests.list b/dom/html/crashtests/crashtests.list
--- a/dom/html/crashtests/crashtests.list
+++ b/dom/html/crashtests/crashtests.list
@@ -14,26 +14,24 @@ load 388183-1.html
 load 395340-1.html
 load 399694-1.html
 load 407053.html
 load 423371-1.html
 load 448564.html
 load 451123-1.html
 load 453406-1.html
 load 464197-1.html
-skip-if(!xbl) load 465466-1.xhtml
 load 468562-1.html
 load 468562-2.html
 load 494225.html
 load 495543.svg
 load 495546-1.html
 load 504183-1.html
 load 515829-1.html
 load 515829-2.html
-skip-if(!xbl) load 564461.xhtml
 load 570566-1.html
 load 571428-1.html
 load 580507-1.xhtml
 load 590387.html
 load 596785-1.html
 load 596785-2.html
 load 601422.html
 load 602117.html
@@ -42,17 +40,16 @@ load 605264.html
 load 606430-1.html
 load 613027.html
 load 614279.html
 load 614988-1.html
 load 620078-1.html
 load 620078-2.html
 load 631421.html
 load 673853.html
-skip-if(!xbl) load chrome://reftest/content/crashtests/dom/html/crashtests/680922-1.xul
 load 682058.xhtml
 load 682460.html
 load 738744.xhtml
 load 741218.json
 load 741250.xhtml
 load 768344.html
 load 795221-1.html
 load 795221-2.html
diff --git a/dom/smil/crashtests/537157-1.svg b/dom/smil/crashtests/537157-1.svg
deleted file mode 100644
--- a/dom/smil/crashtests/537157-1.svg
+++ /dev/null
@@ -1,11 +0,0 @@
-<svg xmlns="http://www.w3.org/2000/svg" style="-moz-binding:url(#xbl)">
-<bindings xmlns="http://www.mozilla.org/xbl">
-<binding id="xbl" inheritstyle="false">
-<content>
-<svg xmlns="http://www.w3.org/2000/svg">
-<animate attributeName="font-size"/>
-</svg>
-</content>
-</binding>
-</bindings>
-</svg>
diff --git a/dom/smil/crashtests/554202-1.svg b/dom/smil/crashtests/554202-1.svg
deleted file mode 100644
--- a/dom/smil/crashtests/554202-1.svg
+++ /dev/null
@@ -1,31 +0,0 @@
-<?xml version="1.0" encoding="UTF-8"?>
-<svg xmlns="http://www.w3.org/2000/svg">
-
-<bindings xmlns="http://www.mozilla.org/xbl">
-  <binding id="foo">
-    <content>
-      <animate xmlns="http://www.w3.org/2000/svg" begin="a.begin">
-        <children xmlns="http://www.mozilla.org/xbl"/>
-      </animate>
-    </content>
-  </binding>
-</bindings>
-
-<animate id="a" begin="b.begin; 3s"/>
-<animate id="b" begin="a.begin"/>
-
-<script type="text/javascript">
-
-function boom()
-{
-  document.documentElement.pauseAnimations();
-  document.documentElement.setCurrentTime(0);
-  document.getElementById('a').beginElementAt(1);
-  document.documentElement.style.MozBinding = 'url(#foo)';
-}
-
-window.addEventListener("load", boom, false);
-
-</script>
-
-</svg>
diff --git a/dom/smil/crashtests/crashtests.list b/dom/smil/crashtests/crashtests.list
--- a/dom/smil/crashtests/crashtests.list
+++ b/dom/smil/crashtests/crashtests.list
@@ -2,23 +2,21 @@ load 483584-1.svg
 load 483584-2.svg
 load 523188-1.svg
 load 525099-1.svg
 load 526536-1.svg
 load 526875-1.svg
 load 526875-2.svg
 load 529387-1.xhtml
 load 531550-1.svg
-skip-if(!xbl) load 537157-1.svg
 load 541297-1.svg
 load 547333-1.svg
 load 548899-1.svg
 load 551620-1.svg
 load 554141-1.svg
-skip-if(!xbl) load 554202-1.svg
 load 554202-2.svg
 load 555026-1.svg
 load 556841-1.svg
 load 572938-1.svg
 load 572938-2.svg
 load 572938-3.svg
 load 572938-4.svg
 load 588287-1.svg
diff --git a/dom/tests/mochitest/chrome/chrome.ini b/dom/tests/mochitest/chrome/chrome.ini
--- a/dom/tests/mochitest/chrome/chrome.ini
+++ b/dom/tests/mochitest/chrome/chrome.ini
@@ -53,18 +53,16 @@ skip-if = os != 'mac' || os_version == '
 [test_callback_wrapping.xul]
 [test_clonewrapper.xul]
 [test_cyclecollector.xul]
 [test_docshell_swap.xul]
 [test_elements_proto.xul]
 [test_focus.xul]
 skip-if = os == 'linux' && !debug # bug 1296622
 [test_focus_docnav.xul]
-[test_focus_switchbinding.xul]
-skip-if = !xbl
 [test_focused_link_scroll.xul]
 [test_fullscreen.xul]
 tags = fullscreen
 # disabled on linux for timeouts--bug-867745
 skip-if = os == 'linux'
 [test_geolocation.xul]
 [test_getTransformTo.html]
 [test_indexedSetter.html]
diff --git a/dom/tests/mochitest/chrome/test_focus_switchbinding.xul b/dom/tests/mochitest/chrome/test_focus_switchbinding.xul
deleted file mode 100644
--- a/dom/tests/mochitest/chrome/test_focus_switchbinding.xul
+++ /dev/null
@@ -1,56 +0,0 @@
-<?xml version="1.0"?>
-<?xml-stylesheet href="chrome://global/skin" type="text/css"?>
-<?xml-stylesheet href="chrome://mochikit/content/tests/SimpleTest/test.css" type="text/css"?>
-
-<window title="Focus Switch Binding Test"
-        xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
-
-  <script src="chrome://mochikit/content/tests/SimpleTest/SimpleTest.js"/>
-
-<script>
-SimpleTest.waitForExplicitFinish();
-
-function switchBinding()
-{
-  $("box").style.MozBinding = "url(#second)";
-}
-</script>
-
-<xbl:bindings xmlns:xbl="http://www.mozilla.org/xbl"
-              xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
-  <xbl:binding id="first">
-    <xbl:content>
-      <xul:button label="First"/>
-    </xbl:content>
-    <xbl:implementation>
-      <xbl:constructor>
-        document.getAnonymousNodes(this)[0].focus();
-        setTimeout(switchBinding, 0);
-      </xbl:constructor>
-    </xbl:implementation>
-  </xbl:binding>
-  <xbl:binding id="second">
-    <xbl:content>
-      <xul:button label="Second"/>
-    </xbl:content>
-    <xbl:implementation>
-      <xbl:constructor>
-        $("after").focus();
-      </xbl:constructor>
-    </xbl:implementation>
-  </xbl:binding>
-</xbl:bindings>
-
-<box id="box" style="-moz-binding: url(#first)"/>
-<button id="after" label="After" onfocus="is(document.activeElement, $('after'), 'focus set'); SimpleTest.finish()"/>
-
-<body xmlns="http://www.w3.org/1999/xhtml">
-<p id="display">
-</p>
-<div id="content" style="display: none">
-</div>
-<pre id="test">
-</pre>
-</body>
-
-</window>
diff --git a/dom/xbl/crashtests/1382357.xhtml b/dom/xbl/crashtests/1382357.xhtml
deleted file mode 100644
--- a/dom/xbl/crashtests/1382357.xhtml
+++ /dev/null
@@ -1,36 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" class="reftest-wait">
-<head>
-
-<bindings xmlns="http://www.mozilla.org/xbl">
-  <binding id="foo"><content><span xmlns="http://www.w3.org/1999/xhtml"/></content></binding>
-</bindings>
-
-<script type="text/javascript">
-// <![CDATA[
-
-function boom()
-{
-  // Apply an invalid binding, and wait two ticks of the refresh driver for the async load.
-  var d = document.getElementById("d");
-  d.style.MozBinding = "url(#bar)";
-  requestAnimationFrame(function() {
-  requestAnimationFrame(function() {
-    // Trigger the InnerText getter.
-    document.getElementById("s").innerText;
-    document.documentElement.removeAttribute("class");
-  });
-  });
-}
-
-]]>
-</script>
-</head>
-
-<body onload="boom();">
-
-<div id="d">
-    <span id="s">SpanText</span>
-</div>
-
-</body>
-</html>
diff --git a/dom/xbl/crashtests/205735-1.xhtml b/dom/xbl/crashtests/205735-1.xhtml
deleted file mode 100644
--- a/dom/xbl/crashtests/205735-1.xhtml
+++ /dev/null
@@ -1,27 +0,0 @@
-<?xml version="1.0"?>
-<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
-    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
-<html xmlns="http://www.w3.org/1999/xhtml">
-<head>
-<title>Bug 205735</title>
-<xbl:bindings xmlns:xbl="http://www.mozilla.org/xbl" xmlns="http://www.mozilla.org/xbl">
-<binding id="rd">
-<xbl:content xmlns="http://www.w3.org/1999/xhtml" xmlns:xbl="http://www.mozilla.org/xbl"><div><div>binding content<xbl:children/></div></div></xbl:content>
-  <implementation>
-    <constructor>
-    <![CDATA[
-  var x=document.getAnonymousNodes(this)[0];
-  x.removeChild(x.childNodes[0]);
-    ]]>
-    </constructor>  
-  </implementation>
-</binding>
-</xbl:bindings>
-<style type="text/css">
-.chapter{-moz-binding:url(#rd);}
-</style>
-</head>
-<body>
-<div class="chapter">test</div>
-</body>
-</html>
diff --git a/dom/xbl/crashtests/223799-1.xul b/dom/xbl/crashtests/223799-1.xul
deleted file mode 100644
--- a/dom/xbl/crashtests/223799-1.xul
+++ /dev/null
@@ -1,27 +0,0 @@
-<?xml version="1.0"?>
-<?xml-stylesheet href="chrome://global/skin/" type="text/css"?>
-<window
-  xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
-  xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
-  xmlns:html="http://www.w3.org/1999/xhtml"
-  >
-  <bindings xmlns="http://www.mozilla.org/xbl">
-    <binding id="foo">
-      <content><xul:box><xul:box><children/></xul:box></xul:box></content>
-    </binding>
-      <implementation>
-        <field name="box">document.getAnonymousNodes(this)[0]</field>
-      </implementation>
-  </bindings>
-  <html:style type="text/css">
-  <!-- CSS style rules for XBL bindings go here -->
-  <![CDATA[
-foo {
-  -moz-binding: url("#foo");
-}
-  ]]>
-  </html:style>
-  <!-- XUL application goes here -->
-
-  <foo><description>World</description></foo>
-</window>
diff --git a/dom/xbl/crashtests/226744-1.xhtml b/dom/xbl/crashtests/226744-1.xhtml
deleted file mode 100644
--- a/dom/xbl/crashtests/226744-1.xhtml
+++ /dev/null
@@ -1,35 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<html xmlns="http://www.w3.org/1999/xhtml"
-    xmlns:html="http://www.w3.org/1999/xhtml"
-    xmlns:xbl="http://www.mozilla.org/xbl">
-
-    <xbl:bindings>
-        <xbl:binding id="rd">
-				<xbl:resources>
-<xbl:stylesheet src="data:text/html;charset=utf-8,"/>
-</xbl:resources>
-            <xbl:content>
-<xbl:children/>
-            </xbl:content>
-        </xbl:binding>
-
-    </xbl:bindings>
-
-    <head>
-        <title>testcase bug ?</title>
-        
-        <style type="text/css">
-        .hoofdstuk {
-            -moz-binding: url(#rd);
-        }
-        </style>
-    </head>
-    
-    <body>    
-<div class="hoofdstuk">test
-</div>
-<div class="hoofdstuk">test
-</div>
-    </body>
-
-</html>
diff --git a/dom/xbl/crashtests/232095-1.xul b/dom/xbl/crashtests/232095-1.xul
deleted file mode 100644
--- a/dom/xbl/crashtests/232095-1.xul
+++ /dev/null
@@ -1,44 +0,0 @@
-<?xml version="1.0"?>
-<?xml-stylesheet href="chrome://global/skin/" type="text/css"?>
-<window
-  xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
-  xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
-  xmlns:xbl="http://www.mozilla.org/xbl"
-  xmlns:html="http://www.w3.org/1999/xhtml"
-  >
-<bindings xmlns="http://www.mozilla.org/xbl">
-  <binding id="serverpost_base">
-    <implementation>
-      <method name="getSuccessfulControls">
-        <parameter name="aNode"/>
-        <body><![CDATA[
-          dump("<html:input type="file"/> has not been tested yet!  This may not work!!!\n");
-        ]]></body>
-      </method>
-
-      <method name='finalizeAndSubmit'>
-        <body>
-	  return true;
-        </body>
-      </method>
-    </implementation>
-  </binding>
-</bindings>
-
-  <html:style type="text/css"><![CDATA[
-  @namespace xbl url("http://www.mozilla.org/xbl");
-  @namespace xul url("http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul");
-
-  xbl|bindings {
-    display: none;
-  }
-
-  xul|serverpost {
-    -moz-binding: url("#serverpost_base");
-  }
-
-  ]]></html:style>
-
-  <serverpost/>
-  <serverpost/>
-</window>
diff --git a/dom/xbl/crashtests/277523-1.xhtml b/dom/xbl/crashtests/277523-1.xhtml
deleted file mode 100644
--- a/dom/xbl/crashtests/277523-1.xhtml
+++ /dev/null
@@ -1,24 +0,0 @@
-<?xml version="1.0"?>
-<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
-    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
-<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xbl="http://www.mozilla.org/xbl">
-<head>
-<title>Testcase bug 277208 - appendChild to a hidden box from a binding crashes</title>
-
-<xbl:bindings><xbl:binding id="crash"><xbl:content>
-<span style="display:none"><xbl:children includes="span"/></span>
-</xbl:content></xbl:binding></xbl:bindings>
-
-<style type="text/css">
-#test{-moz-binding:url(#crash);}
-</style>
-</head>
-<body onload="init()">
-<span id="test"></span>
-<script>
-function init(){
-         document.getElementById('test').appendChild(document.createElement('span'));
-}
-</script>
-</body>
-</html>
diff --git a/dom/xbl/crashtests/277950-1.xhtml b/dom/xbl/crashtests/277950-1.xhtml
deleted file mode 100644
--- a/dom/xbl/crashtests/277950-1.xhtml
+++ /dev/null
@@ -1,20 +0,0 @@
-<?xml version="1.0"?>
-<html xmlns="http://www.w3.org/1999/xhtml">
-<head>
-<title>Testcase</title>
-<xbl:bindings xmlns="http://www.mozilla.org/xbl"
-  xmlns:xbl="http://www.mozilla.org/xbl">
-  <binding id="test">
-    <implementation>
-      <property/>
-    </implementation>
-  </binding>
-</xbl:bindings>
-<style type="text/css">
-  p{ -moz-binding: url(#test); }
-</style>
-</head>
-<body>
-<p></p>
-</body>
-</html>
diff --git a/dom/xbl/crashtests/336744-1-inner.html b/dom/xbl/crashtests/336744-1-inner.html
deleted file mode 100644
--- a/dom/xbl/crashtests/336744-1-inner.html
+++ /dev/null
@@ -1,6 +0,0 @@
-<html><head>
-<title>Testcase bug 336744 - Crash when window gets destroyed during popuphiding event</title>
-</head><body>
-This should not crash Mozilla within 1 second<br>
-<iframe src="data:application/vnd.mozilla.xul+xml;charset=utf-8,%3C%3Fxml%20version%3D%221.0%22%3F%3E%0A%3C%3Fxml-stylesheet%20href%3D%22chrome%3A//global/skin%22%20type%3D%22text/css%22%3F%3E%0A%0A%3Cwindow%20xmlns%3Ahtml%3D%22http%3A//www.w3.org/1999/xhtml%22%0A%20%20%20%20%20%20%20%20xmlns%3D%22http%3A//www.mozilla.org/keymaster/gatekeeper/there.is.only.xul%22%3E%0A%3Chtml%3Ascript%3E%0Adocument.addEventListener%28%22popuphiding%22%2C%20doe%2C%20true%29%3B%0Afunction%20doe%28e%29%20%7B%0Avar%20x%3D%20parent.document.getElementsByTagName%28%27iframe%27%29%5B0%5D%3B%0Ax.parentNode.removeChild%28x%29%3B%0A%7D%0AsetTimeout%28function%28%29%20%7B%20document.getElementsByTagName%28%22menupopup%22%29%5B0%5D.showPopup%28%29%3B%20%7D%2C%20800%29%3B%0AsetTimeout%28function%28%29%20%7B%20document.getElementsByTagName%28%22menupopup%22%29%5B0%5D.hidePopup%28%29%3B%20%7D%2C%201000%29%3B%0A%3C/html%3Ascript%3E%0A%3Cscript%3E%0A%0A%3C/script%3E%0A%3Cmenupopup%3E%0A%20%20%3Cmenuitem%20label%3D%22One%22/%3E%0A%3C/menupopup%3E%0A%3C/window%3E%0A"></iframe>
-</body></html>
\ No newline at end of file
diff --git a/dom/xbl/crashtests/336744-1.html b/dom/xbl/crashtests/336744-1.html
deleted file mode 100644
--- a/dom/xbl/crashtests/336744-1.html
+++ /dev/null
@@ -1,9 +0,0 @@
-<html class="reftest-wait">
-<head>
-<script>
-setTimeout('document.documentElement.className = ""', 1000);
-</script>
-<body>
-<iframe src="336744-1-inner.html"></iframe>
-</body>
-</html>
diff --git a/dom/xbl/crashtests/336960-1-inner.xhtml b/dom/xbl/crashtests/336960-1-inner.xhtml
deleted file mode 100644
--- a/dom/xbl/crashtests/336960-1-inner.xhtml
+++ /dev/null
@@ -1,29 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-<head>
-  <script>
-    var x=document.createElementNS('http://www.w3.org/1999/xhtml','style');
-    document.documentElement.appendChild(x);
-    function doe(){
-      var y=document.getElementsByTagName('style')[0];
-    }
-    setTimeout(doe,500);
-  </script>
-
-  <style>
-  style {-moz-binding:url(#randomxbl);}
-  </style>
-
-  <bindings xmlns="http://www.mozilla.org/xbl">
-    <binding id="randomxbl">
-      <implementation>
-        <constructor>
-          var x= parent.document.getElementsByTagName('iframe')[0];
-x.parentNode.removeChild(x);
-        </constructor>
-      </implementation>
-    </binding>
-  </bindings>
-</head>
-<body>
-</body>
-</html>
diff --git a/dom/xbl/crashtests/336960-1.html b/dom/xbl/crashtests/336960-1.html
deleted file mode 100644
--- a/dom/xbl/crashtests/336960-1.html
+++ /dev/null
@@ -1,13 +0,0 @@
-<html class="reftest-wait">
-<head>
-
-<title>Testcase bug 336960 - Crash when window gets destroyed when constructor of xbl is running</title>
-<script>
-setTimeout('document.documentElement.className = ""', 500);
-</script>
-</head><body>
-This page should not crash Mozilla, you should see no iframe<br>
-<iframe src="./336960-1-inner.xhtml"></iframe>
-
-</body>
-</html>
\ No newline at end of file
diff --git a/dom/xbl/crashtests/342954-1.xhtml b/dom/xbl/crashtests/342954-1.xhtml
deleted file mode 100644
--- a/dom/xbl/crashtests/342954-1.xhtml
+++ /dev/null
@@ -1,46 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xbl="http://www.mozilla.org/xbl">
-
-
-<head>
-
-<script>
-<![CDATA[
-
-function boo()
-{
-  s1 = document.getElementById("s1");  
-  marq = document.getElementById("marq");
-  marqAnonymousSomething = document.getAnonymousNodes(marq)[0].childNodes[0];
-
-  removeNode(marqAnonymousSomething);
-  s1.appendChild(document.createElement("div"));
-}
-
-function removeNode(q1) { q1.remove(); }
-
-]]>
-</script>
-
-<xbl:bindings id="marqueeBindings">
-  <xbl:binding id="marquee-horizontal-12">
-    <xbl:content>
-      <div>
-        <xbl:children/>
-      </div>
-    </xbl:content>
-  </xbl:binding>
-</xbl:bindings>
-
-</head>
-
-
-<body onload="boo()">
-
-<span id="s1">Span</span>
-
-<div id="marq" style="-moz-binding: url('#marquee-horizontal-12');">Marquee</div>
-
-</body>
-
-
-</html>
diff --git a/dom/xbl/crashtests/342954-2-xbl.xml b/dom/xbl/crashtests/342954-2-xbl.xml
deleted file mode 100644
--- a/dom/xbl/crashtests/342954-2-xbl.xml
+++ /dev/null
@@ -1,19 +0,0 @@
-<?xml version="1.0"?>
-
-<bindings id="marqueeBindings"
-          xmlns="http://www.mozilla.org/xbl"
-          xmlns:html="http://www.w3.org/1999/xhtml"
-          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
-          xmlns:xbl="http://www.mozilla.org/xbl">
-
-  <binding id="marquee-horizontal-10">
-
-    <content>
-      <html:div>
-        <children/>
-      </html:div>
-    </content>
-
-  </binding>
-
-</bindings>
diff --git a/dom/xbl/crashtests/342954-2.xhtml b/dom/xbl/crashtests/342954-2.xhtml
deleted file mode 100644
--- a/dom/xbl/crashtests/342954-2.xhtml
+++ /dev/null
@@ -1,29 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-<head>
-<script>
-<![CDATA[
-
-function boo()
-{
-  s1 = document.getElementById("s1");  
-  marq = document.getElementById("marq");
-  marqAnonymousSomething = document.getAnonymousNodes(marq)[0].childNodes[0];
-
-  removeNode(marqAnonymousSomething);
-  s1.appendChild(document.createElement("div"));
-}
-
-function removeNode(q1) { q1.remove(); }
-
-]]>
-</script>
-</head>
-
-<body onload="boo()">
-
-<span id="s1">Span</span>
-
-<div id="marq" style="-moz-binding: url('342954-2-xbl.xml#marquee-horizontal-10');">Marquee</div>
-
-</body>
-</html>
diff --git a/dom/xbl/crashtests/368276-1.xhtml b/dom/xbl/crashtests/368276-1.xhtml
deleted file mode 100644
--- a/dom/xbl/crashtests/368276-1.xhtml
+++ /dev/null
@@ -1,33 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml"
-      xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
-      class="reftest-wait">
-
-<head>
-<script>
-
-function boom()
-{
-  var quote = document.getElementById("quote");
-  var para = document.getElementById("para");
-  var dialog = document.getElementById("dialog");
-  var e = document.getElementById("e");
-
-  dialog.appendChild(quote);
-  e.insertBefore(quote, para);
-  
-  document.documentElement.removeAttribute("class");
-}
-
-</script>
-</head>
-
-<body onload="setTimeout(boom, 30)">
-
-<p>He said <q id="quote">J<xul:hbox/></q></p>
-
-<xul:dialog id="dialog"/>
-
-<div id="e"><p id="para">Foopy</p></div>
-
-</body>
-</html>
diff --git a/dom/xbl/crashtests/368641-1.xhtml b/dom/xbl/crashtests/368641-1.xhtml
deleted file mode 100644
--- a/dom/xbl/crashtests/368641-1.xhtml
+++ /dev/null
@@ -1,22 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml"
-      xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
-
-<head>
-<script>
-
-function boom()
-{
-  var yaz = document.getElementById("yaz");
-
-  document.body.appendChild(yaz);
-}
-
-</script>
-</head>
-
-<body onload="boom()">
-  
-  <xul:tabs><span id="yaz"><xul:hbox><xul:popup/><xul:template/></xul:hbox></span></xul:tabs>
-</body>
-
-</html>
diff --git a/dom/xbl/crashtests/378521-1.xhtml b/dom/xbl/crashtests/378521-1.xhtml
deleted file mode 100644
--- a/dom/xbl/crashtests/378521-1.xhtml
+++ /dev/null
@@ -1,18 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" xmlns:html="http://www.w3.org/1999/xhtml">
-<head>
-<bindings xmlns="http://www.mozilla.org/xbl">
-  <binding id="foo" extends="html:input">
-    <content>
-      Foo?
-      <children/>
-    </content>
-  </binding>
-</bindings>
-</head>
-
-<body>
-<div>Hi!</div>
-<div style="-moz-binding: url(#foo)">XXX</div>
-</body>
-
-</html>
\ No newline at end of file
diff --git a/dom/xbl/crashtests/382376-1.xhtml b/dom/xbl/crashtests/382376-1.xhtml
deleted file mode 100644
--- a/dom/xbl/crashtests/382376-1.xhtml
+++ /dev/null
@@ -1,37 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" class="reftest-wait">
-<head>
-<script>
-
-function boom1()
-{
-  var c = document.getElementById("c");
-  c.style.MozBinding = "url('#foo')";
-  
-  setTimeout(boom2, 30);
-}
-
-function boom2()
-{
-  var v = document.getElementById("v");
-  v.parentNode.removeChild(v);
-  document.documentElement.removeAttribute("class");
-}
-
-</script>
-
-<bindings xmlns="http://www.mozilla.org/xbl"><binding id="foo">
-  <content>x x x x x <children/></content>
-</binding></bindings>
-
-</head>
-
-<body style="font-family: monospace; width: 10ch;" onload="setTimeout(boom1, 30);">
-
-<div style="background: lightblue; border: 1px solid blue; margin-bottom: 1em;">
-  <span id="c">y y<span id="v">Z<div/></span></span>
-</div>
-
-<div style="background: lightgreen; border: 1px solid green; height: 2000px;">s</div>
-
-</body>
-</html>
diff --git a/dom/xbl/crashtests/382376-2.xhtml b/dom/xbl/crashtests/382376-2.xhtml
deleted file mode 100644
--- a/dom/xbl/crashtests/382376-2.xhtml
+++ /dev/null
@@ -1,27 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" class="reftest-wait">
-<head>
-<script>
-
-function boom()
-{
-  var v = document.getElementById("v");
-  v.parentNode.removeChild(v);
-  document.documentElement.removeAttribute("class");
-}
-
-</script>
-
-<bindings xmlns="http://www.mozilla.org/xbl"><binding id="foo">
-  <content>x x x x x <children/></content>
-</binding></bindings>
-
-</head>
-
-<body onload="setTimeout(boom, 30);">
-
-<div style="background: lightblue; border: 1px solid blue; width: 300px">
-  <span style="-moz-binding: url(#foo);" >y y<span id="v">Z<div/></span></span>
-</div>
-
-</body>
-</html>
diff --git a/dom/xbl/crashtests/397596-1.xhtml b/dom/xbl/crashtests/397596-1.xhtml
deleted file mode 100644
--- a/dom/xbl/crashtests/397596-1.xhtml
+++ /dev/null
@@ -1,29 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-<head>
-<title>Testcase bug - 100% cpu usage with binding setting position: fixed in constructor</title>
-
-<bindings xmlns="http://www.mozilla.org/xbl">
-<binding id="b" inheritstyle="false">
-<content>
-<div xmlns="http://www.w3.org/1999/xhtml" style=" -moz-binding: url(#a);"/>
-<children/>
-</content>
-</binding>
-
-<binding id="a">
-<implementation>
-<constructor>
-  this.style.position='fixed';
-</constructor>
-</implementation>
-<content>
-<children xmlns="http://www.mozilla.org/xbl"/>
-</content>
-</binding>
-</bindings>
-
-</head>
-<body>
-<span style="-moz-binding:url();"></span>
-</body>
-</html>
\ No newline at end of file
diff --git a/dom/xbl/crashtests/406900-1.xul b/dom/xbl/crashtests/406900-1.xul
deleted file mode 100644
--- a/dom/xbl/crashtests/406900-1.xul
+++ /dev/null
@@ -1,33 +0,0 @@
-<?xml version="1.0"?>
-<?xml-stylesheet href="chrome://global/skin/" type="text/css"?>
-<window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
-        xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
-        onload="boom();">
-
-<bindings xmlns="http://www.mozilla.org/xbl">
-  <binding id="lit">
-    <content>
-      <children>
-        <xul:hbox/>
-      </children>
-    </content>
-  </binding>
-</bindings>
-
-<script type="text/javascript"> 
-
-function boom()
-{
-  var x = document.getElementById("x");
-  var anon = document.getAnonymousNodes(x)[0];
-  document.documentElement.removeChild(x);
-  document.documentElement.appendChild(x);
-  var hbox = document.createXULElement('hbox');
-  anon.appendChild(hbox);
-}
-
-</script>
-
-<hbox id="x" style="-moz-binding: url(#lit)" />
-
-</window>
diff --git a/dom/xbl/crashtests/406904-1.xhtml b/dom/xbl/crashtests/406904-1.xhtml
deleted file mode 100644
--- a/dom/xbl/crashtests/406904-1.xhtml
+++ /dev/null
@@ -1,25 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xbl="http://www.mozilla.org/xbl">
-<head>
-
-<xbl:bindings xmlns="http://www.mozilla.org/xbl"><xbl:binding id="a"><xbl:content>
-<span>foo<xbl:children/></span>
-</xbl:content></xbl:binding></xbl:bindings>
-
-<script type="text/javascript">
-
-function boom()
-{
-  var s = document.getElementById("s");
-  var anon = document.getAnonymousNodes(s)[0];
-
-  while (anon.firstChild)
-    anon.removeChild(anon.firstChild);
-
-  document.documentElement.style.MozBinding = "url('data:text/xml,%3Cbindings%20xmlns%3D%22http%3A%2F%2Fwww.mozilla.org%2Fxbl%22%3E%3Cbinding%20id%3D%22foo%22%3E%3Ccontent%3EQ%3C%2Fcontent%3E%3C%2Fbinding%3E%3C%2Fbindings%3E%0A')";
-}
-
-</script>
-</head>
-
-<body onload="boom();"><span id="s" style="-moz-binding: url('#a');"></span></body>
-</html>
diff --git a/dom/xbl/crashtests/406904-2.xhtml b/dom/xbl/crashtests/406904-2.xhtml
deleted file mode 100644
--- a/dom/xbl/crashtests/406904-2.xhtml
+++ /dev/null
@@ -1,25 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xbl="http://www.mozilla.org/xbl">
-<head>
-
-<xbl:bindings xmlns="http://www.mozilla.org/xbl"><xbl:binding id="a"><xbl:content>
-<span><span></span><xbl:children/></span>
-</xbl:content></xbl:binding></xbl:bindings>
-
-<script type="text/javascript">
-
-function boom()
-{
-  var s = document.getElementById("s");
-  var anon = document.getAnonymousNodes(s)[0];
-
-  while (anon.firstChild)
-    anon.removeChild(anon.firstChild);
-
-  document.documentElement.style.MozBinding = "url('data:text/xml,%3Cbindings%20xmlns%3D%22http%3A%2F%2Fwww.mozilla.org%2Fxbl%22%3E%3Cbinding%20id%3D%22foo%22%3E%3Ccontent%3EQ%3C%2Fcontent%3E%3C%2Fbinding%3E%3C%2Fbindings%3E%0A')";
-}
-
-</script>
-</head>
-
-<body onload="boom();"><span id="s" style="-moz-binding: url('#a');"></span></body>
-</html>
diff --git a/dom/xbl/crashtests/415192-1.xul b/dom/xbl/crashtests/415192-1.xul
deleted file mode 100644
--- a/dom/xbl/crashtests/415192-1.xul
+++ /dev/null
@@ -1,22 +0,0 @@
-<?xml version="1.0"?>
-<?xml-stylesheet href="chrome://global/skin/global.css"?>
-<window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul" onload="boom();">
-<script type="text/javascript">
-
-function boom()
-{
-  var XUL_NS = "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul";
-
-  var wizard = document.createElementNS(XUL_NS, "wizard");
-  var space = document.createTextNode(" ");
-  var hbox = document.createElementNS(XUL_NS, "hbox");
-  hbox.setAttribute("anonid", "Buttons");
-
-  document.documentElement.appendChild(wizard);
-  wizard.appendChild(space);
-  wizard.appendChild(hbox);
-  wizard.cloneNode(true);
-}
-
-</script>
-</window>
diff --git a/dom/xbl/crashtests/418133-1.xhtml b/dom/xbl/crashtests/418133-1.xhtml
deleted file mode 100644
--- a/dom/xbl/crashtests/418133-1.xhtml
+++ /dev/null
@@ -1,22 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml"
-      xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
-<head>
-<script type="text/javascript">
-
-function boom()
-{
-  for(var p in document.getElementById("prefs")) {
-  }
-  
-  for(var p in window) {
-  }
-}
-
-</script>
-</head>
-<body onload="boom();">
-
-<xul:preferences id="prefs" />
-
-</body>
-</html>
diff --git a/dom/xbl/crashtests/420233-1.xhtml b/dom/xbl/crashtests/420233-1.xhtml
deleted file mode 100644
--- a/dom/xbl/crashtests/420233-1.xhtml
+++ /dev/null
@@ -1,21 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" xmlns:html="http://www.w3.org/1999/xhtml">
-<head>
-
-<bindings xmlns="http://www.mozilla.org/xbl">
-  <binding id="ab"><content><html:span>a b<children/></html:span></content></binding>
-  <binding id="empty"><content></content></binding>
-</bindings>
-
-<script type="text/javascript">
-
-function boom()
-{
-  document.getElementById("td").style.MozBinding = "url('#empty')";
-}
-
-</script>
-
-</head>
-
-<body onload="boom();"><div style="width: 1px;"><span style="-moz-binding: url(#ab);"><td id="td"/></span></div></body>
-</html>
diff --git a/dom/xbl/crashtests/421997-1.xhtml b/dom/xbl/crashtests/421997-1.xhtml
deleted file mode 100644
--- a/dom/xbl/crashtests/421997-1.xhtml
+++ /dev/null
@@ -1,27 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-<head>
-
-<bindings xmlns="http://www.mozilla.org/xbl">
-  <binding id="g">
-    <implementation>
-      <constructor>
-        throw 3;
-      </constructor>
-    </implementation>
-  </binding>
-</bindings>
-
-<script type="text/javascript">
-
-function e()
-{
-  var listboxbody = document.createElementNS("http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul", "listboxbody");
-  document.getElementById("s").appendChild(listboxbody);
-}
-
-</script>
-</head>
-
-<body onerror="e();"><span id="s" style="-moz-binding: url(#g)"></span></body>
-
-</html>
diff --git a/dom/xbl/crashtests/432813-1-xbl.xml b/dom/xbl/crashtests/432813-1-xbl.xml
deleted file mode 100644
--- a/dom/xbl/crashtests/432813-1-xbl.xml
+++ /dev/null
@@ -1,7 +0,0 @@
-<bindings xmlns="http://www.mozilla.org/xbl">
-<binding id="a">
-<content>
-<div xmlns="http://www.w3.org/1999/xhtml" style="-moz-binding: inherit;"/>
-</content>
-</binding>
-</bindings>
diff --git a/dom/xbl/crashtests/432813-1.xhtml b/dom/xbl/crashtests/432813-1.xhtml
deleted file mode 100644
--- a/dom/xbl/crashtests/432813-1.xhtml
+++ /dev/null
@@ -1,3 +0,0 @@
-<window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
-  <box style="-moz-binding:url(432813-1-xbl.xml);"/>
-</window>
diff --git a/dom/xbl/crashtests/454820-1.html b/dom/xbl/crashtests/454820-1.html
deleted file mode 100644
--- a/dom/xbl/crashtests/454820-1.html
+++ /dev/null
@@ -1,17 +0,0 @@
-<!DOCTYPE HTML>
-<html><head>
-    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
-    <title>Testcase for bug 454820</title>
-</head>
-<body>
-
-<p>PASS if Firefox does not crash.</p>
-<script type="text/javascript">
-var evObj = document.createEvent('UIEvents');
-evObj.initUIEvent( 'keypress', true, true, window, 1 );
-document.getElementsByTagName('p')[0].dispatchEvent(evObj);
-</script>
-
-
-</body>
-</html>
diff --git a/dom/xbl/crashtests/460665-1.xhtml b/dom/xbl/crashtests/460665-1.xhtml
deleted file mode 100644
--- a/dom/xbl/crashtests/460665-1.xhtml
+++ /dev/null
@@ -1,28 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-<head>
-
-<bindings xmlns="http://www.mozilla.org/xbl">
-  <binding id="a">
-    <content></content>
-    <implementation>
-      <field>t</field>
-      <field/>
-      <property/>
-      <property>
-        <getter>x</getter>
-        <setter>y</setter>
-      </property>
-      <method/>
-      <method>
-        <body/>
-      </method>
-      <method>
-        <body>a</body>
-      </method>
-    </implementation>
-  </binding>
-</bindings>
-</head>
-
-<body><span id="s" style="-moz-binding: url('#a');"></span></body>
-</html>
diff --git a/dom/xbl/crashtests/464863-1.xhtml b/dom/xbl/crashtests/464863-1.xhtml
deleted file mode 100644
--- a/dom/xbl/crashtests/464863-1.xhtml
+++ /dev/null
@@ -1,22 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-<head>
-
-<bindings xmlns="http://www.mozilla.org/xbl"><binding id="foo"><content><qqq><children xmlns="http://www.mozilla.org/xbl"/></qqq></content></binding></bindings>
-
-<script type="text/javascript">
-// <![CDATA[
-
-function boom()
-{
-  var s = document.getElementById("s");
-  var o = document.getAnonymousNodes(s)[0];
-  (document.body).appendChild(s);
-  o.appendChild(document.createTextNode("F"));
-}
-
-// ]]>
-</script>
-</head>
-
-<body onload="boom();"><span id="s" style="-moz-binding: url(#foo)"></span></body>
-</html>
diff --git a/dom/xbl/crashtests/472260-1.xhtml b/dom/xbl/crashtests/472260-1.xhtml
deleted file mode 100644
--- a/dom/xbl/crashtests/472260-1.xhtml
+++ /dev/null
@@ -1,35 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" class="reftest-wait">
-<head>
-
-<bindings xmlns="http://www.mozilla.org/xbl">
-  <binding id="foo"><content><span xmlns="http://www.w3.org/1999/xhtml"/></content></binding>
-  <binding id="bar"><content></content></binding>
-</bindings>
-
-<script type="text/javascript">
-// <![CDATA[
-
-function boom()
-{
-  var bo = document.getElementById("bo");
-  var anon = SpecialPowers.wrap(document).getAnonymousNodes(bo)[0];
-
-  bo.style.MozBinding = "url(#bar)";
-
-  var fr = document.createElementNS("http://www.w3.org/1999/xhtml", "iframe");
-  fr.setAttribute("src", "javascript:void 0;"); 
-  anon.appendChild(fr);
-  
-  document.documentElement.removeAttribute("class");
-}
-
-]]>
-</script>
-</head>
-
-<body onload="setTimeout(boom, 100);">
-
-<span style="-moz-binding: url(#foo)" id="bo"></span>
-
-</body>
-</html>
diff --git a/dom/xbl/crashtests/477878-1.html b/dom/xbl/crashtests/477878-1.html
deleted file mode 100644
--- a/dom/xbl/crashtests/477878-1.html
+++ /dev/null
@@ -1,4 +0,0 @@
-<html>
-<head></head>
-<body><iframe style="display:none" src="data:text/html,<marquee>Marquee</marquee>" onload="this.style.display = '';"></iframe></body>
-</html>
diff --git a/dom/xbl/crashtests/492978-1.xul b/dom/xbl/crashtests/492978-1.xul
deleted file mode 100644
--- a/dom/xbl/crashtests/492978-1.xul
+++ /dev/null
@@ -1,15 +0,0 @@
-<window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul" xmlns:html="http://www.w3.org/1999/xhtml">
-
-<bindings xmlns="http://www.mozilla.org/xbl">
-<binding id="a" inheritstyle="false">
-<content>
-<style xmlns="http://www.w3.org/1999/xhtml">
-window::after, box::after, bindings::after { content:"m"; float:right;}
-</style>
-</content>
-</binding>
-</bindings>
-
-<box style="-moz-binding:url(crash1.xul);overflow: scroll;"/>
-
-</window>
\ No newline at end of file
diff --git a/dom/xbl/crashtests/493123-1.xhtml b/dom/xbl/crashtests/493123-1.xhtml
deleted file mode 100644
--- a/dom/xbl/crashtests/493123-1.xhtml
+++ /dev/null
@@ -1,34 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" class="reftest-wait">
-<head>
-
-<bindings xmlns="http://www.mozilla.org/xbl">
-  <binding id="a"><content></content></binding>
-  <binding id="b"><content><style xmlns="http://www.w3.org/1999/xhtml" style="display: none;">* { overflow: hidden; }</style><children xmlns="http://www.mozilla.org/xbl"/></content></binding>
-</bindings>
-
-<script type="text/javascript" style="display: none">
-
-function one()
-{
-  while (document.documentElement.firstChild) document.documentElement.removeChild(document.documentElement.firstChild)
-  document.documentElement.style.MozBinding = 'url("#a")';
-  setTimeout(two, 1);
-}
-
-function two()
-{
-  document.documentElement.style.MozBinding = 'url("#b")';
-  setTimeout(three, 1);
-}
-
-function three()
-{
-  document.documentElement.style.MozBinding = 'url("#a")';
-  document.documentElement.removeAttribute("class");
-}
-
-</script>
-</head>
-
-<body onload="one();"></body>
-</html>
diff --git a/dom/xbl/crashtests/495354-1.xhtml b/dom/xbl/crashtests/495354-1.xhtml
deleted file mode 100644
--- a/dom/xbl/crashtests/495354-1.xhtml
+++ /dev/null
@@ -1,8 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-<head>
-<bindings xmlns="http://www.mozilla.org/xbl"><binding id="x"><content><caption xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"><children xmlns="http://www.mozilla.org/xbl"/></caption></content></binding></bindings>
-</head>
-<body onload="document.getElementById('x').innerHTML = '9';">
-<span id="x" style="-moz-binding: url(#x)"><div></div></span>
-</body>
-</html>
diff --git a/dom/xbl/crashtests/507628-1.xhtml b/dom/xbl/crashtests/507628-1.xhtml
deleted file mode 100644
--- a/dom/xbl/crashtests/507628-1.xhtml
+++ /dev/null
@@ -1,12 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-<bindings xmlns="http://www.mozilla.org/xbl">
-<binding id="b" inheritstyle="false">
-<content>
-<span xmlns="http://www.w3.org/1999/xhtml"/><span xmlns="http://www.w3.org/1999/xhtml"><embed style="display: block;" type="*"/></span>
-</content>
-</binding>
-</bindings>
-
-<div style="-moz-binding:url();"/>
-
-</html>
\ No newline at end of file
diff --git a/dom/xbl/crashtests/507991-1.xhtml b/dom/xbl/crashtests/507991-1.xhtml
deleted file mode 100644
--- a/dom/xbl/crashtests/507991-1.xhtml
+++ /dev/null
@@ -1,18 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-
-<head>
-<title>Crash [@ nsSprocketLayout::PopulateBoxSizes] with object and position:absolute;overflow:scroll in binding</title>
-<bindings xmlns="http://www.mozilla.org/xbl">
-<binding id="a" inheritstyle="false">
-<content>
-<object xmlns="http://www.w3.org/1999/xhtml" style="display: table;"/>
-<div xmlns="http://www.w3.org/1999/xhtml" style="position: absolute;overflow: scroll; "/>
-</content>
-</binding>
-</bindings>
-</head>
-
-<body>
-<span style="-moz-binding:url()"></span>
-</body>
-</html>
\ No newline at end of file
diff --git a/dom/xbl/crashtests/830614-1.xul b/dom/xbl/crashtests/830614-1.xul
deleted file mode 100644
--- a/dom/xbl/crashtests/830614-1.xul
+++ /dev/null
@@ -1,24 +0,0 @@
-<window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
-        onload="document.getElementById('trigger');">
-  <box style="display: none">
-    <bindings xmlns="http://www.mozilla.org/xbl">
-      <binding id="crash">
-        <implementation>
-          <constructor>
-            // Fetch it
-            var obj = this.getElementsByTagName("box")[0];
-            // And make it preserve its wrapper.  Note that this will happen
-            // while we're wrapping our box as the parent for id="trigger",
-            // so then we'll unwind and things will be bad.
-            if (obj) obj.expando = 5;
-          </constructor>
-        </implementation>
-      </binding>
-    </bindings>
-    <box style="-moz-binding:url(#crash);">
-      <box id="trigger"/>
-    </box>
-  </box>
-  <!-- Make sure we load our XBL before we try to run our test -->
-  <box style="-moz-binding:url(#crash);"/>
-</window>
diff --git a/dom/xbl/crashtests/895805-1.xhtml b/dom/xbl/crashtests/895805-1.xhtml
deleted file mode 100644
--- a/dom/xbl/crashtests/895805-1.xhtml
+++ /dev/null
@@ -1,30 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<html xmlns="http://www.w3.org/1999/xhtml"
-      xmlns:xbl="http://www.mozilla.org/xbl">
-<head>
-<title>Bug 895805 - Adopting bound element to another document.</title>
-<xbl:bindings>
-  <xbl:binding id="crash">
-    <xbl:content>
-      <xbl:children />
-      Bug 895805 dummy binding
-    </xbl:content>
-  </xbl:binding>
-</xbl:bindings>
-<style type="text/css">
-#test {
-  -moz-binding:url(#crash);
-}
-</style>
-</head>
-<body onload="init()">
-<span id="test">Test</span>
-<script>
-function init() {
-  var boundElement = document.getElementById('test');
-  var otherDoc = document.implementation.createDocument('', '', null);
-  otherDoc.adoptNode(boundElement);
-}
-</script>
-</body>
-</html>
diff --git a/dom/xbl/crashtests/crashtests.list b/dom/xbl/crashtests/crashtests.list
deleted file mode 100644
--- a/dom/xbl/crashtests/crashtests.list
+++ /dev/null
@@ -1,38 +0,0 @@
-load 205735-1.xhtml
-load chrome://reftest/content/crashtests/dom/xbl/crashtests/223799-1.xul
-load 226744-1.xhtml
-load chrome://reftest/content/crashtests/dom/xbl/crashtests/232095-1.xul
-load 277523-1.xhtml
-load 277950-1.xhtml
-load 336744-1.html
-load 336960-1.html
-load 342954-1.xhtml
-load 342954-2.xhtml
-load 368276-1.xhtml
-load 368641-1.xhtml
-load 378521-1.xhtml
-load 382376-1.xhtml
-load 382376-2.xhtml
-load 397596-1.xhtml
-load chrome://reftest/content/crashtests/dom/xbl/crashtests/406900-1.xul
-load 406904-1.xhtml
-load 406904-2.xhtml
-load chrome://reftest/content/crashtests/dom/xbl/crashtests/415192-1.xul
-load 418133-1.xhtml
-load 420233-1.xhtml
-load 421997-1.xhtml
-load 432813-1.xhtml
-load 454820-1.html
-load 460665-1.xhtml
-load 464863-1.xhtml
-load 472260-1.xhtml
-load 477878-1.html
-load chrome://reftest/content/crashtests/dom/xbl/crashtests/492978-1.xul
-load 493123-1.xhtml
-load 495354-1.xhtml
-load 507628-1.xhtml
-load 507991-1.xhtml
-load chrome://reftest/content/crashtests/dom/xbl/crashtests/830614-1.xul
-load 895805-1.xhtml
-load set-field-bad-this.xhtml
-load 1382357.xhtml
diff --git a/dom/xbl/crashtests/set-field-bad-this.xhtml b/dom/xbl/crashtests/set-field-bad-this.xhtml
deleted file mode 100644
--- a/dom/xbl/crashtests/set-field-bad-this.xhtml
+++ /dev/null
@@ -1,31 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml">
-
-<head>
-  <title>Gracefully handle setting a field on a bad |this|</title>
-
-  <bindings xmlns="http://www.mozilla.org/xbl">
-    <binding id="a">
-      <implementation>
-        <field name="f">17</field>
-      </implementation>
-    </binding>
-  </bindings>
-
-  <script type="application/javascript">
-    window.onload = function()
-    {
-      var bound = document.getElementById("bound");
-      try
-      {
-        Object.getPrototypeOf(bound).f = 42;
-      }
-      catch (e) { /* Throwing's fine, crashing isn't. */ }
-    };
-  </script>
-</head>
-
-<body>
-  <div id="bound" style="-moz-binding: url(#a)"></div>
-</body>
-
-</html>
diff --git a/dom/xslt/tests/mochitest/mochitest.ini b/dom/xslt/tests/mochitest/mochitest.ini
--- a/dom/xslt/tests/mochitest/mochitest.ini
+++ b/dom/xslt/tests/mochitest/mochitest.ini
@@ -1,13 +1,11 @@
 [DEFAULT]
 
 [test_bug1072116.html]
-[test_bug319374.xhtml]
-skip-if = !xbl
 [test_bug427060.html]
 [test_bug440974.html]
 [test_bug453441.html]
 [test_bug468208.html]
 [test_bug511487.html]
 [test_bug551412.html]
 [test_bug551654.html]
 [test_bug566629.html]
diff --git a/dom/xslt/tests/mochitest/test_bug319374.xhtml b/dom/xslt/tests/mochitest/test_bug319374.xhtml
deleted file mode 100644
--- a/dom/xslt/tests/mochitest/test_bug319374.xhtml
+++ /dev/null
@@ -1,109 +0,0 @@
-<?xml version="1.0"?>
-<html xmlns="http://www.w3.org/1999/xhtml"
-      xmlns:xbl="http://www.mozilla.org/xbl">
-<!--
-https://bugzilla.mozilla.org/show_bug.cgi?id=319374
--->
-<head>
-  <title>Test for Bug 319374</title>
-  <script src="/tests/SimpleTest/SimpleTest.js"></script>
-  <link rel="stylesheet" type="text/css" href="/tests/SimpleTest/test.css" />
-  <xbl:bindings>                                  
-    <xbl:binding id="test">
-      <xbl:content>
-        <span attr="attribute"><span></span></span><span> anon text </span><br/>
-      </xbl:content>
-    </xbl:binding>
-  </xbl:bindings>
-</head>
-<body>
-<a target="_blank" href="https://bugzilla.mozilla.org/show_bug.cgi?id=319374">Mozilla Bug 319374</a>
-<p id="display"></p>
-<div id="content"><span style="-moz-binding: url(#test)"/><span style="-moz-binding: url(#test)"/><span style="-moz-binding: url(#test)"/></div>
-<pre id="test">
-<script class="testbody" type="text/javascript">
-<![CDATA[
-
-/** Test for Bug 319374 **/
-
-  function testChangesInAnonymousTree() {
-    // Test 1: Make sure that modifying anonymous content doesn't 
-    //         cause non-anonymous XPath result to throw exceptions..
-    var counter = 0;
-    var error = null;
-    function getAnonymousNodes(e) {
-      return SpecialPowers.wrap(document).getAnonymousNodes(e);
-    }
-    try {
-      var xp = new XPathEvaluator();
-      var result = xp.evaluate("*",
-                               document.getElementById('content'),
-                               null,
-                               XPathResult.UNORDERED_NODE_ITERATOR_TYPE,
-                               null);
-      var res = null;
-      while (res = result.iterateNext()) {
-        ++counter; 
-        var anon = getAnonymousNodes(res);
-        anon[0].firstChild.remove(); // Removing a child node
-        anon[0].removeAttribute("attr1"); // Removing an attribute
-        anon[1].firstChild.data = "anon text changed" // Modifying text data
-      }
-    } catch (e) {
-      error = e;
-    }
-    ok(!error, error);
-    ok(counter == 3, "XPathEvaluator should have found 3 elements.")
-
-    // Test 2: If the context node is in anonymous content, changing some
-    //         other anonymous tree shouldn't cause XPath result to throw.
-    var anonAttr1 =
-      getAnonymousNodes(document.getElementById('content').
-        firstChild)[0].getAttributeNode('attr');
-    var anonAttr2 =
-      getAnonymousNodes(document.getElementById('content').
-        lastChild)[0].getAttributeNode('attr');
-    var resultAttr = null;
-    try {
-      var xp2 = SpecialPowers.wrap(xp).evaluate(".",
-                            anonAttr1,
-                            null,
-                            XPathResult.UNORDERED_NODE_ITERATOR_TYPE,
-                            null);
-      // Attribute changing in a different anonymous tree.
-      anonAttr2.value = "foo";
-      resultAttr = xp2.iterateNext();
-      ok(SpecialPowers.compare(resultAttr, anonAttr1), "XPathEvaluator returned wrong attribute!")
-    } catch (e) {
-      ok(false, e);
-    }
-
-    // Test 3: If the anonymous tree in which context node is in is modified,
-    //         XPath result should throw when iterateNext() is called.
-    resultAttr = null;
-    try {
-      var xp3 = xp.evaluate(".",
-                            anonAttr1,
-                            null,
-                            XPathResult.UNORDERED_NODE_ITERATOR_TYPE,
-                            null);
-      // Attribute changing in the same anonymous tree.
-      anonAttr1.ownerElement.setAttribute("foo", "bar");
-      resultAttr = xp3.iterateNext();
-      ok(resultAttr == anonAttr1,
-         "XPathEvaluator should have thrown an exception!")
-    } catch (e) {
-      ok(true, e);
-    }
-
-    SimpleTest.finish();
-  }
-
-  SimpleTest.waitForExplicitFinish();
-  addLoadEvent(testChangesInAnonymousTree);
-]]>
-</script>
-</pre>
-</body>
-</html>
-
diff --git a/dom/xul/crashtests/252448-1.xul b/dom/xul/crashtests/252448-1.xul
deleted file mode 100644
--- a/dom/xul/crashtests/252448-1.xul
+++ /dev/null
@@ -1,10 +0,0 @@
-<?xml version="1.0"?>
-<?xml-stylesheet type="text/css" href="chrome://global/skin/"?>
-<window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
-  onload="document.documentElement.firstChild.focus();">
-  <menulist>
-    <menupopup style="-moz-binding: none;">
-      <spacer/>
-    </menupopup>
-  </menulist>
-</window>
diff --git a/dom/xul/crashtests/386947-1.xul b/dom/xul/crashtests/386947-1.xul
deleted file mode 100644
--- a/dom/xul/crashtests/386947-1.xul
+++ /dev/null
@@ -1,12 +0,0 @@
-<?xml version="1.0"?>
-<window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
-        style="background-color: red" onload="boom();">
-        
-<script><![CDATA[
-        
-function boom() {
-  document.documentElement.style.MozBinding = "url('#t')";
-}
-
-]]></script>
-</window>
diff --git a/dom/xul/crashtests/468211-1.xul b/dom/xul/crashtests/468211-1.xul
deleted file mode 100644
--- a/dom/xul/crashtests/468211-1.xul
+++ /dev/null
@@ -1,23 +0,0 @@
-<window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul" style="-moz-binding:url(#xbl2)" class="reftest-wait">
-<tooltip/>
-
-<script id="script" xmlns="http://www.w3.org/1999/xhtml">
-function doe() {
-document.getElementsByTagName('tooltip')[0].setAttribute('style', '-moz-binding:url(#xbl)');
-document.getElementsByTagName('tooltip')[0].setAttribute('onDOMAttrModified', 'this.focus()');
-document.documentElement.removeAttribute("class");
-}
-setTimeout(doe, 1);
-</script>
-
-<bindings xmlns="http://www.mozilla.org/xbl" xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
-<binding id="xbl">
-<content>
-<xul:box onbroadcast="document.documentElement.setAttribute('a','a')" id="g"/>
-<xul:box onDOMAttrModified="document.documentElement.style.display = 'none'" observes="g"/>
-</content>
-</binding>
-
-<binding id="xbl2"></binding>
-</bindings>
-</window>
\ No newline at end of file
diff --git a/dom/xul/crashtests/468211-2-binding.xml b/dom/xul/crashtests/468211-2-binding.xml
deleted file mode 100644
--- a/dom/xul/crashtests/468211-2-binding.xml
+++ /dev/null
@@ -1,12 +0,0 @@
-<bindings xmlns="http://www.mozilla.org/xbl">
-
-<binding id="xbl">
-
-<content>
-<mrow xmlns="http://www.w3.org/1998/Math/MathML" id="f">
-<box observes="f" xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"/>
-</mrow>
-</content>
-
-</binding>
-</bindings>
\ No newline at end of file
diff --git a/dom/xul/crashtests/468211-2.xul b/dom/xul/crashtests/468211-2.xul
deleted file mode 100644
--- a/dom/xul/crashtests/468211-2.xul
+++ /dev/null
@@ -1,10 +0,0 @@
-<?xml-stylesheet href="chrome://browser/skin/" type="text/css"?>
-
-<window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul" xmlns:html="http://www.w3.org/1999/xhtml">
-
-<html:div onDOMAttrModified="this.parentNode.removeChild(this)">
-<html:div/>
-<html:style>div {-moz-binding:url(468211-2-binding.xml#xbl);</html:style>
-</html:div>
-
-</window>
\ No newline at end of file
diff --git a/dom/xul/crashtests/468211-3.xul b/dom/xul/crashtests/468211-3.xul
deleted file mode 100644
--- a/dom/xul/crashtests/468211-3.xul
+++ /dev/null
@@ -1,18 +0,0 @@
-<?xml-stylesheet href="chrome://browser/skin/" type="text/css"?>
-<window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
-<box style="-moz-binding:url(#xbl)"/>
-
-
-<bindings xmlns="http://www.mozilla.org/xbl">
-<binding id="xbl" inheritstyle="false">
-<content>
-<g xmlns="http://www.w3.org/2000/svg" onDOMAttrModified="document.removeChild(document.documentElement)" id="a"/>
-<box xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul" observes="a"/>
-
-<children xmlns="http://www.mozilla.org/xbl"/>
-
-</content>
-</binding>
-</bindings>
-
-</window>
\ No newline at end of file
diff --git a/dom/xul/crashtests/crashtests.list b/dom/xul/crashtests/crashtests.list
--- a/dom/xul/crashtests/crashtests.list
+++ b/dom/xul/crashtests/crashtests.list
@@ -1,24 +1,18 @@
 load 107518-1.xml
-skip-if(!xbl) load chrome://reftest/content/crashtests/dom/xul/crashtests/252448-1.xul
 load chrome://reftest/content/crashtests/dom/xul/crashtests/253479-1.xul
 load chrome://reftest/content/crashtests/dom/xul/crashtests/253479-2.xul
 load chrome://reftest/content/crashtests/dom/xul/crashtests/326204-1.xul
 load 326644-1.html
 load chrome://reftest/content/crashtests/dom/xul/crashtests/326875-1.xul
 load 329982-1.xhtml
 load 336096-1.xhtml
 load chrome://reftest/content/crashtests/dom/xul/crashtests/344215-1.xul
 load 354611-1.html
-skip-if(!xbl) load 360078-1.xhtml
 load chrome://reftest/content/crashtests/dom/xul/crashtests/363791-1.xul
 load chrome://reftest/content/crashtests/dom/xul/crashtests/384740-1.xul
 load 384877-1.html
 load 386914-1.html
-skip-if(!xbl) asserts(1) load chrome://reftest/content/crashtests/dom/xul/crashtests/386947-1.xul
 load chrome://reftest/content/crashtests/dom/xul/crashtests/425821-1.xul
 load chrome://reftest/content/crashtests/dom/xul/crashtests/428951-1.xul
 load 431906-1.html
 load 461917-1.xhtml
-skip-if(!xbl) load chrome://reftest/content/crashtests/dom/xul/crashtests/468211-1.xul
-skip-if(!xbl) load chrome://reftest/content/crashtests/dom/xul/crashtests/468211-2.xul
-skip-if(!xbl) load chrome://reftest/content/crashtests/dom/xul/crashtests/468211-3.xul
diff --git a/dom/xul/test/chrome.ini b/dom/xul/test/chrome.ini
--- a/dom/xul/test/chrome.ini
+++ b/dom/xul/test/chrome.ini
@@ -1,23 +1,19 @@
 [DEFAULT]
 support-files =
   398289-resource.xul
   window_bug583948.xul
   window_bug757137.xul
 
 [test_bug199692.xul]
-[test_bug233643.xul]
-skip-if = !xbl
 [test_bug311681.xul]
 [test_bug391002.xul]
 [test_bug398289.html]
 [test_bug403868.xul]
-[test_bug414907.xul]
-skip-if = !xbl
 [test_bug418216.xul]
 [test_bug445177.xul]
 [test_bug449457.xul]
 [test_bug468176.xul]
 [test_bug583948.xul]
 [test_bug757137.xul]
 [test_bug775972.xul]
 [test_bug1070049_throw_from_script.xul]
diff --git a/dom/xul/test/test_bug233643.xul b/dom/xul/test/test_bug233643.xul
deleted file mode 100644
--- a/dom/xul/test/test_bug233643.xul
+++ /dev/null
@@ -1,76 +0,0 @@
-<?xml version="1.0"?>
-<?xml-stylesheet href="chrome://global/skin" type="text/css"?>
-<?xml-stylesheet href="chrome://mochikit/content/tests/SimpleTest/test.css" type="text/css"?>
-<window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
-        xmlns:html="http://www.w3.org/1999/xhtml"
-        title="Test for Bug 233643">
-<!--
-https://bugzilla.mozilla.org/show_bug.cgi?id=233643
--->
-  <script src="chrome://mochikit/content/tests/SimpleTest/SimpleTest.js"></script>
-
-  <!-- NOTE: This testcase depends on the patch for bug 366770
-       (ability to apply bindings with data: URIs). -->
-
-  <!-- The data URI: below corresponds to:
-    <?xml version="1.0"?>
-    <bindings xmlns="http://www.mozilla.org/xbl"
-              xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
-      <binding id="label">
-        <content>
-          <xul:label anonid="foo" style="display: none; color: green;" value="PASS"/>
-        </content>
-        <implementation>
-          <property name="fooDisplay">
-            <setter>document.getAnonymousElementByAttribute(this, "anonid", "foo").style.display = val;</setter>
-            <getter>return document.getAnonymousElementByAttribute(this, "anonid", "foo").style.display;</getter>
-          </property>
-        </implementation>
-      </binding>
-    </bindings>
-  -->
-  <html:style type="text/css">
-    foo {
-      -moz-binding: url(data:text/xml,%3C%3Fxml%20version%3D%221.0%22%3F%3E%0A%3Cbindings%20xmlns%3D%22http%3A//www.mozilla.org/xbl%22%0A%20%20%20%20%20%20%20%20%20%20xmlns%3Axul%3D%22http%3A//www.mozilla.org/keymaster/gatekeeper/there.is.only.xul%22%3E%0A%20%20%3Cbinding%20id%3D%22label%22%3E%0A%20%20%20%20%3Ccontent%3E%0A%20%20%20%20%20%20%3Cxul%3Alabel%20anonid%3D%22foo%22%20style%3D%22display%3A%20none%3B%20color%3A%20green%3B%22%20value%3D%22PASS%22/%3E%0A%20%20%20%20%3C/content%3E%0A%20%20%20%20%3Cimplementation%3E%0A%20%20%20%20%20%20%3Cproperty%20name%3D%22fooDisplay%22%3E%0A%20%20%20%20%20%20%20%20%3Csetter%3Edocument.getAnonymousElementByAttribute%28this%2C%20%22anonid%22%2C%20%22foo%22%29.style.display%20%3D%20val%3B%3C/setter%3E%0A%20%20%20%20%20%20%20%20%3Cgetter%3Ereturn%20document.getAnonymousElementByAttribute%28this%2C%20%22anonid%22%2C%20%22foo%22%29.style.display%3B%3C/getter%3E%0A%20%20%20%20%20%20%3C/property%3E%0A%20%20%20%20%3C/implementation%3E%0A%20%20%3C/binding%3E%0A%3C/bindings%3E);
-    }
-  </html:style>
-  <body xmlns="http://www.w3.org/1999/xhtml">
-    <a target="_blank" href="https://bugzilla.mozilla.org/show_bug.cgi?id=233643">Mozilla Bug 233643</a>
-    <p id="display">
-      <foo xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"/>
-      <foo xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"/>
-    </p>
-    <div id="content" style="display: none">
-      <script class="testbody" type="text/javascript">
-      <![CDATA[
-        SimpleTest.waitForExplicitFinish();
-
-        function test_233643() {
-          var foos = document.getElementsByTagName("foo");
-          ok(foos.length == 2, "Found 2 <foo> elements");
-
-          // Make sure that the binding was applied successfully
-          ok(foos[0].fooDisplay !== undefined, "Binding applied");
-
-          // Show both both child elements by setting their display to "".
-          foos[0].fooDisplay = "";
-          foos[1].fooDisplay = "";
-
-          // Hide the second one. In a build with bug 233643, this hides both.
-          foos[1].fooDisplay = "none";
-
-          // Check that changing the second didn't affect the first.
-          ok(foos[0].fooDisplay != foos[1].fooDisplay, "XUL Element have their own style rules");
-
-          SimpleTest.finish();
-        }
-
-        function do_test() {
-          setTimeout(test_233643, 0);
-        }
-        addLoadEvent(do_test);
-      ]]>
-      </script>
-    </div>
-  </body>
-</window>
diff --git a/dom/xul/test/test_bug414907.xul b/dom/xul/test/test_bug414907.xul
deleted file mode 100644
--- a/dom/xul/test/test_bug414907.xul
+++ /dev/null
@@ -1,53 +0,0 @@
-<?xml version="1.0"?>
-<?xml-stylesheet href="chrome://global/skin" type="text/css"?>
-<?xml-stylesheet href="chrome://mochikit/content/tests/SimpleTest/test.css" type="text/css"?>
-<!--
-https://bugzilla.mozilla.org/show_bug.cgi?id=414907
--->
-<window title="Mozilla Bug 414907"
-  xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
-  <script src="chrome://mochikit/content/tests/SimpleTest/SimpleTest.js"/>
-
-  <vbox hidden="true">
-    <bindings xmlns="http://www.mozilla.org/xbl" style="display: block;"
-                xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
-      <binding id="anon">
-        <implementation>
-          <constructor>
-            <![CDATA[
-              var node = this.firstChild;
-              this.palette = node;
-              this.removeChild(node);
-            ]]>
-          </constructor>
-        </implementation>
-      </binding>
-    </bindings>
-  </vbox>
-
-  <!-- test results are displayed in the html:body -->
-  <body xmlns="http://www.w3.org/1999/xhtml">
-  <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=414907"
-     target="_blank">Mozilla Bug 414907</a>
-  </body>
-
-  <!-- test code goes here -->
-  <script type="application/javascript"><![CDATA[
-
-  SimpleTest.waitForExplicitFinish();
-  window.onload = function onload() {
-    is($("box").palette.getAttribute("label"), $("command").getAttribute("label"));
-    SimpleTest.finish();
-  }
-
-  ]]></script>
-
-    <command id="command" label="label"/>
-
-    <box id="box" style="-moz-binding:url('#anon');">
-        <button observes="command"/>
-    </box>
-
-
-
-</window>
diff --git a/testing/crashtest/crashtests.list b/testing/crashtest/crashtests.list
--- a/testing/crashtest/crashtests.list
+++ b/testing/crashtest/crashtests.list
@@ -24,17 +24,16 @@ include ../../dom/media/test/crashtests/
 skip-if(!webrtc) include ../../dom/media/tests/crashtests/crashtests.list
 include ../../dom/media/webspeech/synth/crashtests/crashtests.list
 include ../../dom/offline/crashtests/crashtests.list
 include ../../dom/plugins/test/crashtests/crashtests.list
 include ../../dom/security/test/crashtests/crashtests.list
 include ../../dom/smil/crashtests/crashtests.list
 include ../../dom/svg/crashtests/crashtests.list
 include ../../dom/workers/test/crashtests/crashtests.list
-skip-if(!xbl) include ../../dom/xbl/crashtests/crashtests.list
 include ../../dom/xhr/tests/crashtests/crashtests.list
 include ../../dom/xml/crashtests/crashtests.list
 include ../../dom/xslt/crashtests/crashtests.list
 include ../../dom/xul/crashtests/crashtests.list
 
 include ../../editor/composer/crashtests/crashtests.list
 include ../../editor/libeditor/crashtests/crashtests.list
 include ../../editor/txmgr/tests/crashtests/crashtests.list
