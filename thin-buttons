# HG changeset patch
# Parent 84b81b0ee2938df91ee50ef48d34b3e2924e4d28
# User Brian Grinstead <bgrinstead@mozilla.com>
Bug 942292 - DevTools themes - make the toolbars thinner part 2

diff --git a/browser/devtools/debugger/debugger-view.js b/browser/devtools/debugger/debugger-view.js
--- a/browser/devtools/debugger/debugger-view.js
+++ b/browser/devtools/debugger/debugger-view.js
@@ -523,19 +523,21 @@ let DebuggerView = {
   toggleInstrumentsPane: function(aFlags, aTabIndex) {
     let pane = this._instrumentsPane;
     let button = this._instrumentsPaneToggleButton;
 
     ViewHelpers.togglePane(aFlags, pane);
 
     if (aFlags.visible) {
       button.removeAttribute("pane-collapsed");
+      button.setAttribute("pane-opened", "");
       button.setAttribute("tooltiptext", this._collapsePaneString);
     } else {
       button.setAttribute("pane-collapsed", "");
+      button.removeAttribute("pane-opened");
       button.setAttribute("tooltiptext", this._expandPaneString);
     }
 
     if (aTabIndex !== undefined) {
       pane.selectedIndex = aTabIndex;
     }
   },
 
diff --git a/browser/devtools/debugger/debugger.xul b/browser/devtools/debugger/debugger.xul
--- a/browser/devtools/debugger/debugger.xul
+++ b/browser/devtools/debugger/debugger.xul
@@ -331,17 +331,17 @@
       <vbox id="stackframes" flex="1"/>
       <textbox id="searchbox"
                class="devtools-searchinput" type="search"/>
       <toolbarbutton id="instruments-pane-toggle"
                      class="devtools-toolbarbutton"
                      tooltiptext="&debuggerUI.panesButton.tooltip;"
                      tabindex="0"/>
       <toolbarbutton id="debugger-options"
-                     class="devtools-option-toolbarbutton"
+                     class="devtools-toolbarbutton"
                      tooltiptext="&debuggerUI.optsButton.tooltip;"
                      popup="debuggerPrefsContextMenu"
                      tabindex="0"/>
     </toolbar>
     <vbox id="globalsearch" orient="vertical" hidden="true"/>
     <splitter class="devtools-horizontal-splitter" hidden="true"/>
     <hbox id="debugger-widgets" flex="1">
       <tabbox id="sources-pane"
diff --git a/browser/devtools/profiler/profiler.xul b/browser/devtools/profiler/profiler.xul
--- a/browser/devtools/profiler/profiler.xul
+++ b/browser/devtools/profiler/profiler.xul
@@ -20,17 +20,18 @@
   <script type="application/javascript;version=1.8"
           src="chrome://browser/content/devtools/theme-switching.js"/>
   <script type="text/javascript" src="sidebar.js"/>
   <box flex="1" id="profiler-chrome"
     class="devtools-responsive-container theme-body">
     <vbox class="profiler-sidebar theme-sidebar">
       <toolbar class="devtools-toolbar">
         <hbox id="profiler-controls"
-              class="devtools-toolbarbutton-group">
+              class="devtools-toolbarbutton-group"
+              separators="true">
           <toolbarbutton id="profiler-start"
             tooltiptext="&startProfiler.tooltip;"
             class="devtools-toolbarbutton"
             disabled="true"/>
           <toolbarbutton id="profiler-import"
             class="devtools-toolbarbutton"
             disabled="true"
             label="&importProfile.label;"/>
diff --git a/browser/devtools/styleeditor/styleeditor.xul b/browser/devtools/styleeditor/styleeditor.xul
--- a/browser/devtools/styleeditor/styleeditor.xul
+++ b/browser/devtools/styleeditor/styleeditor.xul
@@ -72,24 +72,26 @@
 
   <xul:keyset id="sourceEditorKeys"/>
 
   <xul:box id="style-editor-chrome" class="theme-body splitview-root loading"
            context="sidebar-context">
     <xul:box class="splitview-controller">
       <xul:box class="splitview-main">
         <xul:toolbar class="devtools-toolbar">
-          <xul:toolbarbutton class="style-editor-newButton devtools-toolbarbutton"
-                      accesskey="&newButton.accesskey;"
-                      tooltiptext="&newButton.tooltip;"
-                      label="&newButton.label;"/>
-          <xul:toolbarbutton class="style-editor-importButton devtools-toolbarbutton"
-                      accesskey="&importButton.accesskey;"
-                      tooltiptext="&importButton.tooltip;"
-                      label="&importButton.label;"/>
+          <xul:hbox class="devtools-toolbarbutton-group" separators="true">
+            <xul:toolbarbutton class="style-editor-newButton devtools-toolbarbutton"
+                        accesskey="&newButton.accesskey;"
+                        tooltiptext="&newButton.tooltip;"
+                        label="&newButton.label;"/>
+            <xul:toolbarbutton class="style-editor-importButton devtools-toolbarbutton"
+                        accesskey="&importButton.accesskey;"
+                        tooltiptext="&importButton.tooltip;"
+                        label="&importButton.label;"/>
+          </xul:hbox>
         </xul:toolbar>
       </xul:box>
       <xul:box id="splitview-resizer-target" class="theme-sidebar splitview-nav-container"
               persist="height">
         <ol class="splitview-nav" tabindex="0"></ol>
         <div class="splitview-nav placeholder empty">
           <p><strong>&noStyleSheet.label;</strong></p>
           <p>&noStyleSheet-tip-start.label;
diff --git a/browser/devtools/webconsole/webconsole.xul b/browser/devtools/webconsole/webconsole.xul
--- a/browser/devtools/webconsole/webconsole.xul
+++ b/browser/devtools/webconsole/webconsole.xul
@@ -157,17 +157,18 @@ function goUpdateConsoleCommands() {
             <menuitem label="&btnConsoleLog;" type="checkbox" autocheck="false"
                       prefKey="log"/>
           </menupopup>
         </toolbarbutton>
 
         <toolbarbutton class="webconsole-clear-console-button devtools-toolbarbutton"
                        label="&btnClear.label;" tooltiptext="&btnClear.tooltip;"
                        accesskey="&btnClear.accesskey;"
-                       tabindex="8"/>
+                       tabindex="8"
+                       separators="true"/>
 
         <spacer flex="1"/>
 
         <textbox class="compact hud-filter-box devtools-searchinput" type="search"
                  placeholder="&filterOutput.placeholder;" tabindex="2"/>
       </toolbar>
 
       <hbox id="output-wrapper" flex="1" context="output-contextmenu" tooltip="aHTMLTooltip">
diff --git a/browser/themes/shared/devtools/debugger.inc.css b/browser/themes/shared/devtools/debugger.inc.css
--- a/browser/themes/shared/devtools/debugger.inc.css
+++ b/browser/themes/shared/devtools/debugger.inc.css
@@ -543,21 +543,19 @@
 .devtools-sidebar-tabs > tabs > tab {
   min-height: 1em !important;
   padding: 0 !important;
 }
 
 #resume {
   list-style-image: url(debugger-pause.png);
   -moz-image-region: rect(0px,16px,16px,0px);
-  transition: background 0.15s ease-in-out;
 }
 
 #resume[checked] {
-  background: none;
   list-style-image: url(debugger-play.png);
   -moz-image-region: rect(0px,32px,16px,16px);
 }
 
 #resume ~ toolbarbutton {
   transition: opacity 0.15s ease-in-out;
 }
 
@@ -573,31 +571,38 @@
   list-style-image: url(debugger-step-in.png);
 }
 
 #step-out {
   list-style-image: url(debugger-step-out.png);
 }
 
 #instruments-pane-toggle {
-  background: none;
-  box-shadow: none;
-  border: none;
   list-style-image: url(debugger-collapse.png);
   -moz-image-region: rect(0px,16px,16px,0px);
 }
 
 #instruments-pane-toggle[pane-collapsed] {
   list-style-image: url(debugger-expand.png);
 }
 
 #instruments-pane-toggle:active {
   -moz-image-region: rect(0px,32px,16px,16px);
 }
 
+#debugger-options {
+  list-style-image: url("chrome://browser/skin/devtools/option-icon.png");
+  -moz-image-region: rect(0px 16px 16px 0px);
+}
+
+#debugger-options[open=true] {
+  -moz-image-region: rect(0px 32px 16px 16px);
+}
+
+
 /* Horizontal vs. vertical layout */
 
 #vertical-layout-panes-container {
   min-height: 35vh;
   max-height: 80vh;
 }
 
 #body[layout=vertical] #sources-pane > tabs {
diff --git a/browser/themes/shared/devtools/toolbars.inc.css b/browser/themes/shared/devtools/toolbars.inc.css
--- a/browser/themes/shared/devtools/toolbars.inc.css
+++ b/browser/themes/shared/devtools/toolbars.inc.css
@@ -4,44 +4,63 @@
  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
 %endif
 %filter substitution
 %define smallSeparatorDark linear-gradient(transparent 15%, #5a6169 15%, #5a6169 85%, transparent 85%)
 %define smallSeparatorLight linear-gradient(transparent 15%, #aaa 15%, #aaa 85%, transparent 85%)
 %define solidSeparatorDark linear-gradient(#2d5b7d, #2d5b7d)
 %define solidSeparatorLight linear-gradient(#aaa, #aaa)
 
-
+/* Toolbar */
 .devtools-toolbar {
   -moz-appearance: none;
   padding: 0 3px;
   border-bottom-width: 1px;
   border-bottom-style: solid;
   min-height: 23px;
 }
 
+/* Toolbar buttons */
 .devtools-menulist,
 .devtools-toolbarbutton {
   -moz-appearance: none;
   -moz-box-align: center;
+  background: transp;
   min-width: 78px;
   min-height: 20px;
   padding: 1px;
   text-shadow: none;
-  border: 1px solid hsla(210,8%,5%,.45);
-  border-radius: 3px;
+  border-radius: 0;
+  border-width: 1px;
+  border-style: solid;
   margin: 0 3px;
 }
 
 .devtools-menulist:-moz-focusring,
 .devtools-toolbarbutton:-moz-focusring {
   outline: 1px dotted hsla(210,30%,85%,0.7);
   outline-offset: -4px;
 }
 
+.devtools-toolbar .devtools-toolbarbutton {
+  border-width: 0;
+}
+
+.devtools-toolbar .devtools-toolbarbutton-group[separators] .devtools-toolbarbutton[type=menu-button],
+.devtools-toolbar .devtools-toolbarbutton-group[separators] .devtools-toolbarbutton,
+.devtools-toolbar .devtools-toolbarbutton[type=menu-button],
+.devtools-toolbar .devtools-toolbarbutton[separators] {
+  border-left-width: 1px;
+  border-right-width: 1px;
+}
+
+.devtools-toolbarbutton:not([label]) {
+  border-width: 0;
+}
+
 .devtools-toolbarbutton > .toolbarbutton-icon {
   margin: 0;
 }
 
 .devtools-toolbarbutton:not([label]) {
   min-width: 32px;
 }
 
@@ -49,56 +68,117 @@
   display: none;
 }
 
 .devtools-toolbarbutton > .toolbarbutton-menubutton-button {
   -moz-box-orient: horizontal;
   padding: 0;
 }
 
+.devtools-toolbarbutton[type=menu-button] {
+  padding: 0 1px;
+  -moz-box-align: stretch;
+}
+
+.devtools-toolbarbutton[type=menu] > .toolbarbutton-menu-dropmarker,
+.devtools-toolbarbutton[type=menu-button] > .toolbarbutton-menubutton-dropmarker {
+  -moz-appearance: none !important;
+  list-style-image: url("chrome://browser/skin/devtools/dropmarker.png");
+  -moz-box-align: center;
+  padding: 0 3px;
+}
+
+/* Toolbar button groups */
+.devtools-toolbarbutton-group > .devtools-toolbarbutton {
+  margin: 0;
+  box-shadow: none;
+  outline-offset: -3px;
+}
+
+.devtools-toolbarbutton-group {
+  margin: 0 3px;
+}
+
+.devtools-toolbarbutton-group .devtools-toolbarbutton:not(:first-child) {
+  border-left: none;
+}
+
 .theme-dark .devtools-menulist,
 .theme-dark .devtools-toolbarbutton {
-  background: linear-gradient(hsla(212,7%,57%,.35), hsla(212,7%,57%,.1)) padding-box;
+  color: #b6babf;
+  background-color: #343c45;
+  border-color: #111;
   color: inherit;
-  box-shadow: 0 1px 0 hsla(210,16%,76%,.15) inset, 0 0 0 1px hsla(210,16%,76%,.15) inset, 0 1px 0 hsla(210,16%,76%,.15);
+}
+
+.theme-dark .devtools-menulist[open=true],
+.theme-dark .devtools-toolbarbutton[open=true],
+.theme-dark .devtools-toolbarbutton[open=true]:hover,
+.theme-dark .devtools-toolbarbutton[open=true]:hover:active,
+.theme-dark .devtools-toolbarbutton[checked=true],
+.theme-dark .devtools-toolbarbutton[checked=true]:hover,
+.theme-dark .devtools-toolbarbutton[pane-opened]  {
+  background: #333;
+}
+
+.theme-dark .devtools-toolbarbutton:hover {
+  background: #444;
+}
+
+.theme-dark .devtools-toolbarbutton:hover:active,
+.theme-dark .devtools-toolbarbutton[checked=true]:hover:active {
+  background: #383838;
+}
+
+.theme-dark .devtools-toolbarbutton[type=menu-button] > .toolbarbutton-menubutton-button {
+  color: #5f7387;
+}
+
+.theme-dark .devtools-toolbarbutton[type=menu-button][checked=true] > .toolbarbutton-menubutton-button {
+  color: #f5f7fa;
 }
 
 .theme-light .devtools-menulist,
 .theme-light .devtools-toolbarbutton {
-  background: #f7f7f7;
-  color: #18191a;
+  color: #585959;
+  background-color: #f0f1f2;
   border-color: #bbb;
 }
 
+.theme-light .devtools-toolbarbutton:hover {
+  background: #ddd; /* #e3e3e3; /* rgba(76, 158, 217, .1); /* Select highlight blue (with alpha) */
+}
+
+.theme-light .devtools-toolbarbutton:hover:active,
+.theme-light .devtools-toolbarbutton[checked=true]:hover:active {
+  background: #d9d9d9; /* #d8d8d8; /* Select highlight blue (with alpha) */
+}
+
 .theme-light .devtools-menulist[open=true],
 .theme-light .devtools-toolbarbutton[open=true],
 .theme-light .devtools-toolbarbutton[open=true]:hover,
 .theme-light .devtools-toolbarbutton[open=true]:hover:active,
 .theme-light .devtools-toolbarbutton[checked=true],
-.theme-light .devtools-toolbarbutton[checked=true]:hover  {
-  background: #ddd;
+.theme-light .devtools-toolbarbutton[checked=true]:hover,
+.theme-light .devtools-toolbarbutton[pane-opened] {
+  background: #d0d0d0; /* #d0d0d0; /* Off background */
 }
-
-.theme-light .devtools-toolbarbutton:hover {
-  background: #eee;
-}
-
-.theme-light .devtools-toolbarbutton:hover:active,
-.theme-light .devtools-toolbarbutton[checked=true]:hover:active {
-  background: #e8e8e8;
-}
+/*
+.theme-light .devtools-toolbarbutton[label] {
+  background: #e0e0e0;
+}*/
 
 .theme-light .devtools-toolbarbutton[type=menu-button] > .toolbarbutton-menubutton-button {
-  color: #667380;
+  color: #667380; /*  Content (Text) - Dark Grey */
 }
 
 .theme-light .devtools-toolbarbutton[type=menu-button][checked=true] > .toolbarbutton-menubutton-button {
-  color: #18191a;
+  color: #18191a; /* Foreground (Text) - Dark */
 }
-
+/*
 .theme-dark .devtools-toolbarbutton:not([checked]):hover:active {
   border-color: hsla(210,8%,5%,.6);
   background: linear-gradient(hsla(220,6%,10%,.3), hsla(212,7%,57%,.15) 65%, hsla(212,7%,57%,.3));
   box-shadow: 0 0 3px hsla(210,8%,5%,.25) inset, 0 1px 3px hsla(210,8%,5%,.25) inset, 0 1px 0 hsla(210,16%,76%,.15);
 }
 
 .theme-dark .devtools-menulist[open=true],
 .theme-dark .devtools-toolbarbutton[open=true],
@@ -113,29 +193,17 @@
 }
 
 .theme-dark .devtools-toolbarbutton[checked=true]:hover {
   background-color: transparent !important;
 }
 
 .theme-dark .devtools-toolbarbutton[checked=true]:hover:active {
   background-color: hsla(210,8%,5%,.2) !important;
-}
-
-.devtools-option-toolbarbutton {
-  -moz-appearance: none;
-  list-style-image: url("chrome://browser/skin/devtools/option-icon.png");
-  -moz-image-region: rect(0px 16px 16px 0px);
-  background: none;
-  border: none;
-}
-
-.devtools-option-toolbarbutton[open=true] {
-  -moz-image-region: rect(0px 32px 16px 16px);
-}
+}*/
 
 .devtools-menulist > .menulist-label-box {
   text-align: center;
 }
 
 .devtools-menulist > .menulist-dropmarker {
   -moz-appearance: none;
   display: -moz-box;
@@ -158,60 +226,16 @@
 .theme-dark .devtools-toolbarbutton[type=menu-button]:-moz-locale-dir(rtl) > .toolbarbutton-menubutton-button {
   box-shadow: 1px 0 0 hsla(210,16%,76%,.15) inset, -1px 0 0 hsla(210,16%,76%,.15);
 }
 
 .theme-light .devtools-toolbarbutton[type=menu-button] > .toolbarbutton-menubutton-button {
   -moz-border-end: 1px solid #bbb;
 }
 
-.devtools-toolbarbutton[type=menu-button] {
-  padding: 0 1px;
-  -moz-box-align: stretch;
-}
-
-.devtools-toolbarbutton[type=menu] > .toolbarbutton-menu-dropmarker,
-.devtools-toolbarbutton[type=menu-button] > .toolbarbutton-menubutton-dropmarker {
-  -moz-appearance: none !important;
-  list-style-image: url("chrome://browser/skin/devtools/dropmarker.png");
-  -moz-box-align: center;
-  padding: 0 3px;
-}
-
-/* Toolbar button groups */
-.theme-light .devtools-toolbarbutton-group > .devtools-toolbarbutton,
-.theme-dark .devtools-toolbarbutton-group > .devtools-toolbarbutton {
-  margin: 0;
-  box-shadow: none;
-  border-radius: 0;
-  border-width: 0;
-  -moz-border-end-width: 1px;
-  outline-offset: -3px;
-}
-
-.devtools-toolbarbutton-group > .devtools-toolbarbutton:last-of-type {
-  -moz-border-end-width: 0;
-}
-
-.devtools-toolbarbutton-group {
-  border-radius: 3px;
-  margin: 0 3px;
-}
-
-.theme-dark .devtools-toolbarbutton-group {
-  box-shadow: 0 1px 0 hsla(210,16%,76%,.15) inset,
-              0 0 0 1px hsla(210,16%,76%,.15) inset,
-              0 1px 0 hsla(210,16%,76%,.15);
-  border: 1px solid hsla(210,8%,5%,.45);
-}
-
-.theme-light .devtools-toolbarbutton-group {
-  border: 1px solid #bbb;
-}
-
 /* Text input */
 
 .devtools-textinput,
 .devtools-searchinput {
   -moz-appearance: none;
   margin: 0 3px;
   border: 1px solid;
 %ifdef XP_MACOSX
