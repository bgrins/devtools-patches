# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Date 1540495945 25200
#      Thu Oct 25 12:32:25 2018 -0700
# Node ID 73cb71e06c9d63473ded2270705cf764e13d0f6a
# Parent  608b6e78cf712cff06f089dc00f9423ee44be57b
Bug 1502151  Use getAnonymousElementByAttribute instead of elementById to reach into XBL anon content for browser-search-autocomplete-result-popup;r=dao

Differential Revision: https://phabricator.services.mozilla.com/D9833

diff --git a/browser/components/search/content/search-one-offs.js b/browser/components/search/content/search-one-offs.js
--- a/browser/components/search/content/search-one-offs.js
+++ b/browser/components/search/content/search-one-offs.js
@@ -768,17 +768,18 @@ class MozSearchOneOffs extends MozXULEle
     return this.telemetryOrigin + "-engine-one-off-item-" + this._fixUpEngineNameForID(engine.name);
   }
 
   _fixUpEngineNameForID(name) {
     return name.replace(/ /g, "-");
   }
 
   _buttonForEngine(engine) {
-    return document.getElementById(this._buttonIDForEngine(engine));
+    return this._popup &&
+      document.getAnonymousElementByAttribute(this._popup, "id", this._buttonIDForEngine(engine));
   }
 
   /**
    * Updates the popup and textbox for the currently selected or moused-over
    * button.
    *
    * @param mousedOverButton
    *        The currently moused-over button, or null if there isn't one.
