# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  94032319b5df3cd54ff718abe58d07473449d491
Bug 1304178 - Always use the 'old' frontend for tests that rely on it;r=linclark

MozReview-Commit-ID: FxZaufg1GGb

diff --git a/devtools/client/webconsole/test/head.js b/devtools/client/webconsole/test/head.js
--- a/devtools/client/webconsole/test/head.js
+++ b/devtools/client/webconsole/test/head.js
@@ -316,16 +316,22 @@ var finishTest = Task.async(function* ()
   }
 
   let target = TargetFactory.forTab(gBrowser.selectedTab);
   yield gDevTools.closeToolbox(target);
 
   finish();
 });
 
+// Always use the 'old' frontend for tests that rely on it
+Services.prefs.setBoolPref("devtools.webconsole.new-frontend-enabled", false);
+registerCleanupFunction(function* () {
+  Services.prefs.clearUserPref("devtools.webconsole.new-frontend-enabled");
+});
+
 registerCleanupFunction(function* () {
   flags.testing = false;
 
   // Remove stored console commands in between tests
   yield asyncStorage.removeItem("webConsoleHistory");
 
   dumpConsoles();
 
