# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Date 1549839673 28800
#      Sun Feb 10 15:01:13 2019 -0800
# Node ID ee8f4ea3d62070b919093b6159ab87943f55ca99
# Parent  b482c6618d72ac38a9a82fbccf425e0a7f8b6129
Bug 1526824 - Remove "src" attribute handling from menuitem XBL and styles;

This appears to be unused, and the [image] attribute on the host is inherited onto
.menu-iconic-icon[src] as an alternative.

Differential Revision: https://phabricator.services.mozilla.com/D19315

diff --git a/toolkit/content/widgets/menu.xml b/toolkit/content/widgets/menu.xml
--- a/toolkit/content/widgets/menu.xml
+++ b/toolkit/content/widgets/menu.xml
@@ -168,32 +168,32 @@
       <children includes="menupopup"/>
     </content>
   </binding>
 
   <binding id="menuitem-iconic" extends="chrome://global/content/bindings/menu.xml#menuitem">
     <content>
       <xul:hbox class="menu-iconic-left" align="center" pack="center"
                 xbl:inherits="selected,_moz-menuactive,disabled,checked">
-        <xul:image class="menu-iconic-icon" xbl:inherits="src=image,triggeringprincipal=iconloadingprincipal,validate,src"/>
+        <xul:image class="menu-iconic-icon" xbl:inherits="src=image,triggeringprincipal=iconloadingprincipal,validate"/>
       </xul:hbox>
       <xul:label class="menu-iconic-text" flex="1" xbl:inherits="value=label,accesskey,crop,highlightable" crop="right"/>
       <xul:label class="menu-iconic-highlightable-text" xbl:inherits="xbl:text=label,crop,accesskey,highlightable" crop="right"/>
       <children/>
       <xul:hbox class="menu-accel-container" anonid="accel">
         <xul:label class="menu-iconic-accel" xbl:inherits="value=acceltext"/>
       </xul:hbox>
     </content>
   </binding>
 
   <binding id="menuitem-iconic-noaccel" extends="chrome://global/content/bindings/menu.xml#menuitem">
     <content>
       <xul:hbox class="menu-iconic-left" align="center" pack="center"
                 xbl:inherits="selected,disabled,checked">
-        <xul:image class="menu-iconic-icon" xbl:inherits="src=image,validate,src"/>
+        <xul:image class="menu-iconic-icon" xbl:inherits="src=image,validate"/>
       </xul:hbox>
       <xul:label class="menu-iconic-text" flex="1" xbl:inherits="value=label,accesskey,crop,highlightable" crop="right"/>
       <xul:label class="menu-iconic-highlightable-text" xbl:inherits="xbl:text=label,crop,accesskey,highlightable" crop="right"/>
     </content>
   </binding>
 
   <binding id="menucaption" extends="chrome://global/content/bindings/menu.xml#menu-base">
     <content>
diff --git a/toolkit/themes/osx/global/menu.css b/toolkit/themes/osx/global/menu.css
--- a/toolkit/themes/osx/global/menu.css
+++ b/toolkit/themes/osx/global/menu.css
@@ -46,27 +46,25 @@ menucaption {
    * the 5px margin-end with a negative margin-start.
    */
   margin-inline-start: -5px;
 }
 
 /* menuitems with icons */
 .menuitem-iconic,
 .menu-iconic,
-menuitem[image],
-menuitem[src] {
+menuitem[image] {
   /* 2px higher than those without icons */
   padding-top: 1px;
   padding-bottom: 3px;
 }
 
 .menuitem-iconic > .menu-iconic-left > .menu-iconic-icon,
 .menu-iconic > .menu-iconic-left > .menu-iconic-icon,
-menuitem[image] > .menu-iconic-left > .menu-iconic-icon,
-menuitem[src] > .menu-iconic-left > .menu-iconic-icon {
+menuitem[image] > .menu-iconic-left > .menu-iconic-icon {
   margin-inline-start: 0;
   width: 16px;
 }
 
 /* ..... menu arrow box ..... */
 
 .menu-right,
 .menu-accel-container {
