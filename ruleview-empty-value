# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  bf544e556f37d71bbf943812156236f01f2b3f32
Bug 1150780 - Don't create a new inplace editor for an element if one already exists;r=pbrosset

diff --git a/browser/devtools/shared/inplace-editor.js b/browser/devtools/shared/inplace-editor.js
--- a/browser/devtools/shared/inplace-editor.js
+++ b/browser/devtools/shared/inplace-editor.js
@@ -82,17 +82,19 @@ Cu.import("resource://gre/modules/devtoo
  *       If true, shift tab will not advance the editor to the previous
  *       focusable element.
  *    {string} trigger: The DOM event that should trigger editing,
  *      defaults to "click"
  */
 function editableField(aOptions)
 {
   return editableItem(aOptions, function(aElement, aEvent) {
-    new InplaceEditor(aOptions, aEvent);
+    if (!aOptions.element.inplaceEditor) {
+      new InplaceEditor(aOptions, aEvent);
+    }
   });
 }
 
 exports.editableField = editableField;
 
 /**
  * Handle events for an element that should respond to
  * clicks and sit in the editing tab order, and call
@@ -277,17 +279,17 @@ InplaceEditor.prototype = {
     this.input.removeEventListener("keypress", this._onKeyPress, false);
     this.input.removeEventListener("keyup", this._onKeyup, false);
     this.input.removeEventListener("oninput", this._onInput, false);
     this._stopAutosize();
 
     this.elt.style.display = this.originalDisplay;
     this.elt.focus();
 
-    this.elt.parentNode.removeChild(this.input);
+    this.input.remove();
     this.input = null;
 
     delete this.elt.inplaceEditor;
     delete this.elt;
 
     if (this.destroy) {
       this.destroy();
     }
