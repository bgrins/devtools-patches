# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  fa1095b83eee62bec4a4a3910a4ed563744918fd
Zoom loggin

diff --git a/browser/devtools/shared/test/browser_graphs-07e.js b/browser/devtools/shared/test/browser_graphs-07e.js
--- a/browser/devtools/shared/test/browser_graphs-07e.js
+++ b/browser/devtools/shared/test/browser_graphs-07e.js
@@ -79,16 +79,24 @@ function dispatchEvent(graph, x, y, fn) 
   y /= window.devicePixelRatio;
   let quad = graph._canvas.getBoxQuads({
     relativeTo: window.document
   })[0];
 
   let screenX = (window.screenX + quad.p1.x + x);
   let screenY = (window.screenY + quad.p1.y + y);
 
+let {console} = Cu.import("resource://gre/modules/devtools/Console.jsm", {});
+console.log("In test",
+            "x: " + x,
+            "screenX: " + screenX,
+            "window.screenX: " + window.screenX,
+            "quad.p1.x: " + quad.p1.x,
+            "CURRENT_ZOOM: " + CURRENT_ZOOM);
+
   fn({
     screenX: screenX,
     screenY: screenY,
   });
 }
 
 function hover(graph, x, y = 1) {
   dispatchEvent(graph, x, y, graph._onMouseMove);
diff --git a/browser/devtools/shared/widgets/Graphs.jsm b/browser/devtools/shared/widgets/Graphs.jsm
--- a/browser/devtools/shared/widgets/Graphs.jsm
+++ b/browser/devtools/shared/widgets/Graphs.jsm
@@ -973,22 +973,36 @@ AbstractCanvasGraph.prototype = {
 
     // Don't allow the event coordinates to be bigger than the canvas
     // or less than 0.
     let maxX = quad.p2.x - quad.p1.x;
     let maxY = quad.p3.y - quad.p1.y;
     let mouseX = Math.max(0, Math.min(x, maxX)) * this._pixelRatio;
     let mouseY = Math.max(0, Math.min(x, maxY)) * this._pixelRatio;
 
+let {console} = Cu.import("resource://gre/modules/devtools/Console.jsm", {});
+console.log("In graph before dividing by zoom",
+            "maxX: " + maxX,
+            "mouseX: " + mouseX);
+
     // The coordinates need to be modified with the current zoom level
     // to prevent them from being wrong.
     let zoom = LayoutHelpers.getCurrentZoom(this._canvas);
     mouseX /= zoom;
     mouseY /= zoom;
 
+
+console.log("In graph",
+            "x: " + x,
+            "e.screenX: " + e.screenX,
+            "this._topWindow.screenX: " + this._topWindow.screenX,
+            "quad.p1.x: " + quad.p1.x,
+            "zoom: " + zoom,
+            "mouseX: " + mouseX,
+            "this._pixelRatio: " + this._pixelRatio);
     return {mouseX,mouseY};
   },
 
   /**
    * Listener for the "mousemove" event on the graph's container.
    */
   _onMouseMove: function(e) {
     let resizer = this._selectionResizer;
