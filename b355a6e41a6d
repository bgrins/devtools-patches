
# HG changeset patch
# User Julian Descottes <jdescottes@mozilla.com>
# Date 1467986555 -7200
# Node ID b355a6e41a6d9cf4a2cdd8154193632ef848fd07
# Parent  8be08b36d5d8ba576aca59a1994ddbdaed116d74
Bug 1285206 - Use type=arrow for xul panel wrapper in HTMLTooltip;r=bgrins

MozReview-Commit-ID: I1DCXbl05b6

diff --git a/devtools/client/shared/widgets/HTMLTooltip.js b/devtools/client/shared/widgets/HTMLTooltip.js
--- a/devtools/client/shared/widgets/HTMLTooltip.js
+++ b/devtools/client/shared/widgets/HTMLTooltip.js
@@ -543,6 +543,9 @@
     panel.setAttribute("noautofocus", true);
     panel.setAttribute("ignorekeys", true);
 
+    // Use type="arrow" to prevent side effects (see Bug 1285206)
+    panel.setAttribute("type", "arrow");
+
     panel.setAttribute("level", "float");
     panel.setAttribute("class", "tooltip-xul-wrapper");
 
diff --git a/devtools/client/themes/tooltips.css b/devtools/client/themes/tooltips.css
--- a/devtools/client/themes/tooltips.css
+++ b/devtools/client/themes/tooltips.css
@@ -142,6 +142,21 @@
   visibility: hidden;
 }
 
+/* type="arrow" overrides: remove arrow decorations for the xul <panel> wrapper */
+/* Arrow element does not need to be hidden because the panel is absolutely positioned */
+
+.tooltip-xul-wrapper[type="arrow"] {
+  margin: 0;
+}
+
+.tooltip-xul-wrapper[type="arrow"] .panel-arrowcontent {
+  margin: 0;
+  padding: 0;
+  background: transparent;
+  border: none;
+  box-shadow: none;
+}
+
 /* Tooltip : arrow style */
 
 .tooltip-container[type="arrow"] {

