# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  2c9fb0b358f166230743c076d6074ea387ce7355
Debug what the simpletest is doing

diff --git a/testing/mochitest/tests/SimpleTest/SimpleTest.js b/testing/mochitest/tests/SimpleTest/SimpleTest.js
--- a/testing/mochitest/tests/SimpleTest/SimpleTest.js
+++ b/testing/mochitest/tests/SimpleTest/SimpleTest.js
@@ -879,19 +879,20 @@ SimpleTest.waitForFocus = function (call
 
     var isWrapper = Cu.isCrossProcessWrapper(targetWindow);
     if (isWrapper || (browser && browser.isRemoteBrowser)) {
         var mustFocusSubframe = false;
         if (isWrapper) {
             // Look for a tabbrowser and see if targetWindow corresponds to one
             // within that tabbrowser. If not, just return.
             // XXX: Replace this with gBrowser?
-            var tabBrowser = document.getElementsByTagName("tabbrowser")[0] || null;
+            var tabBrowser =  document.getElementsByTagName("tabbrowser")[0] || null;
             browser = tabBrowser ? tabBrowser.getBrowserForContentWindow(targetWindow.top) : null;
             if (!browser) {
+                throw "child process window cannot be focused";
                 SimpleTest.info("child process window cannot be focused");
                 return;
             }
 
             mustFocusSubframe = (targetWindow != targetWindow.top);
         }
 
         // If a subframe in a child process needs to be focused, first focus the
