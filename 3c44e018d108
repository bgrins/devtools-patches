
# HG changeset patch
# User Jan Odvarko <odvarko@gmail.com>
# Date 1498201807 -7200
# Node ID 3c44e018d10835316651a9afb8dcfc2953f0bd1a
# Parent  88633947b8a478b51d9cb7f3fc7e13194abdecdf
Bug 1326937 - Patch react-dom to avoid double load

MozReview-Commit-ID: 1TeiCOFulxP

diff --git a/devtools/client/shared/vendor/react-dom.js b/devtools/client/shared/vendor/react-dom.js
--- a/devtools/client/shared/vendor/react-dom.js
+++ b/devtools/client/shared/vendor/react-dom.js
@@ -146,20 +146,22 @@
     // This execution context doesn't know about XULDocuments, so don't get the toolbox.
     if (typeof XULDocument !== "function") {
       return null;
     }
 
     let doc = node.ownerDocument;
     const inspectorUrl = "chrome://devtools/content/inspector/inspector.xhtml";
     const netMonitorUrl = "chrome://devtools/content/netmonitor/netmonitor.xhtml";
+    const webConsoleUrl = "chrome://devtools/content/webconsole/webconsole.xhtml";
 
     while (doc instanceof XULDocument ||
            doc.location.href === inspectorUrl ||
-           doc.location.href === netMonitorUrl) {
+           doc.location.href === netMonitorUrl ||
+           doc.location.href === webConsoleUrl) {
       const {frameElement} = doc.defaultView;
 
       if (!frameElement) {
         // We're at the root element, and no toolbox was found.
         return null;
       }
 
       doc = frameElement.parentElement.ownerDocument;

