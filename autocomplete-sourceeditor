# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  9cf405159cf88426e3ef1f9d35989d53c519075b
Bug 1149346 - Source editor fixes

diff --git a/browser/devtools/sourceeditor/test/browser_editor_autocomplete_events.js b/browser/devtools/sourceeditor/test/browser_editor_autocomplete_events.js
--- a/browser/devtools/sourceeditor/test/browser_editor_autocomplete_events.js
+++ b/browser/devtools/sourceeditor/test/browser_editor_autocomplete_events.js
@@ -1,17 +1,17 @@
 /* vim: set ts=2 et sw=2 tw=80: */
 /* Any copyright is dedicated to the Public Domain.
    http://creativecommons.org/publicdomain/zero/1.0/ */
 
 "use strict";
 
 const {InspectorFront} = require("devtools/server/actors/inspector");
 const AUTOCOMPLETION_PREF = "devtools.editor.autocomplete";
-const TEST_URI = "data:text/html;charset=UTF-8,<html><body><b1></b1><b2></b2><body></html>";
+const TEST_URI = "data:text/html;charset=UTF-8,<html><body><b1></b1><div id='b2'></div><body></html>";
 
 add_task(function*() {
   yield promiseTab(TEST_URI);
   yield runTests();
 });
 
 function* runTests() {
   let target = devtools.TargetFactory.forTab(gBrowser.selectedTab);
@@ -52,11 +52,11 @@ function* testMouse(ed, win) {
 
   let popupOpened = ed.getAutocompletionPopup().once("popup-opened");
 
   let autocompleteKey = Editor.keyFor("autocompletion", { noaccel: true }).toUpperCase();
   EventUtils.synthesizeKey("VK_" + autocompleteKey, { ctrlKey: true }, win);
 
   info ("Waiting for popup to be opened");
   yield popupOpened;
-  ed.getAutocompletionPopup()._list.firstChild.click();
-  is (ed.getText(), "b1", "Editor text has been updated");
+  ed.getAutocompletionPopup()._list.children[2].click();
+  is (ed.getText(), "#b2", "Editor text has been updated");
 }
