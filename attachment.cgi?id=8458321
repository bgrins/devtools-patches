# HG changeset patch
# Parent 835e22069c1a2bf00c4d9a57bac4299d185d8acc
# User Gabriel Luong <gabriel.luong@gmail.com>
Bug 1036709 - The styling of active / changing nodes in the source view is inconsistent and hard to read r=bgrins

diff --git a/browser/devtools/shared/widgets/TableWidget.js b/browser/devtools/shared/widgets/TableWidget.js
--- a/browser/devtools/shared/widgets/TableWidget.js
+++ b/browser/devtools/shared/widgets/TableWidget.js
@@ -906,18 +906,20 @@
     this.label.classList.toggle(className);
   },
 
   /**
    * Flashes the cell for a brief time. This when done for ith cells in all
    * columns, makes it look like the row is being highlighted/flashed.
    */
   flash: function() {
-    this.label.classList.remove("flash-out");
-    this.label.classList.add("flash-out");
+    let flashClass = (Services.prefs.getCharPref("devtools.theme") === "light") ?
+      "light-flash-out" : "dark-flash-out";
+    this.label.classList.remove(flashClass);
+    this.label.classList.add(flashClass);
   },
 
   focus: function() {
     this.label.focus();
   },
 
   destroy: function() {
     this.label.remove();
diff --git a/browser/themes/shared/devtools/dark-theme.css b/browser/themes/shared/devtools/dark-theme.css
--- a/browser/themes/shared/devtools/dark-theme.css
+++ b/browser/themes/shared/devtools/dark-theme.css
@@ -28,17 +28,17 @@
 .theme-selected,
 .CodeMirror-hint-active {
   background-color: #1d4f73;
   color: #f5f7fa; /* Light foreground text */
 }
 
 .theme-bg-contrast,
 .variable-or-property:not([overridden])[changed] { /* contrast bg color to attract attention on a container */
-  background: #a18650;
+  background: #B28025;
 }
 
 .theme-link,
 .cm-s-mozilla .cm-link { /* blue */
   color: #3689b2;
 }
 
 /*
diff --git a/browser/themes/shared/devtools/light-theme.css b/browser/themes/shared/devtools/light-theme.css
--- a/browser/themes/shared/devtools/light-theme.css
+++ b/browser/themes/shared/devtools/light-theme.css
@@ -28,17 +28,17 @@
 .theme-selected,
 .CodeMirror-hint-active {
   background-color: #4c9ed9;
   color: #f5f7fa; /* Light foreground text */
 }
 
 .theme-bg-contrast,
 .variable-or-property:not([overridden])[changed] { /* contrast bg color to attract attention on a container */
-  background: #a18650;
+  background: #E8B671;
 }
 
 .theme-link,
 .cm-s-mozilla .cm-link,
 .CodeMirror-Tern-type { /* blue */
   color: hsl(208,56%,40%);
 }
 
diff --git a/browser/themes/shared/devtools/widgets.inc.css b/browser/themes/shared/devtools/widgets.inc.css
--- a/browser/themes/shared/devtools/widgets.inc.css
+++ b/browser/themes/shared/devtools/widgets.inc.css
@@ -1356,23 +1356,33 @@
 .theme-light .table-widget-cell:not(.theme-selected)[odd] {
   background: rgba(128,128,128,0.05);
 }
 
 .theme-light .table-widget-cell:last-of-type {
   box-shadow: inset 0 -1px 0 @smw_itemLightTopBorder@;
 }
 
-.table-widget-cell.flash-out {
-  animation: flash-out 0.5s ease-in;
+.theme-light .table-widget-cell.flash-out {
+  animation: light-flash-out 0.5s ease-in;
 }
 
-@keyframes flash-out {
+@keyframes light-flash-out {
   to {
-    background: #a18650;
+    background: #E8B671;
+  }
+}
+
+.theme-dark .table-widget-cell.flash-out {
+  animation: dark-flash-out 0.5s ease-in;
+}
+
+@keyframes dark-flash-out {
+  to {
+    background: #B28025;
   }
 }
 
 /* Empty text and initial text */
 
 .table-widget-empty-text {
   display: none;
   text-align: center;
