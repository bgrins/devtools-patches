# HG changeset patch
# User Kevin Chan <kevchan85@yahoo.com>
# Parent  c8d7c94f3301ca5815f7222786773254d699bdf9
changed lines 13, 14 and 31 to prevent CPOW

diff --git a/devtools/client/webconsole/test/browser_webconsole_bug_613280_jsterm_copy.js b/devtools/client/webconsole/test/browser_webconsole_bug_613280_jsterm_copy.js
--- a/devtools/client/webconsole/test/browser_webconsole_bug_613280_jsterm_copy.js
+++ b/devtools/client/webconsole/test/browser_webconsole_bug_613280_jsterm_copy.js
@@ -5,33 +5,35 @@
 
 "use strict";
 
 const TEST_URI = "data:text/html;charset=utf-8,Web Console test for bug 613280";
 
 function test() {
   loadTab(TEST_URI).then(() => {
     openConsole().then((HUD) => {
-      content.console.log("foobarBazBug613280");
+      ContentTask.spawn(gBrowser.selectedBrowser,null, function*(){
+        content.console.log("foobarBazBug613280");
+    });
       waitForMessages({
         webconsole: HUD,
         messages: [{
           text: "foobarBazBug613280",
           category: CATEGORY_WEBDEV,
           severity: SEVERITY_LOG,
         }],
       }).then(performTest.bind(null, HUD));
     });
   });
 }
 
 function performTest(HUD, [result]) {
   let msg = [...result.matched][0];
   let input = HUD.jsterm.inputNode;
-  let selection = getSelection();
+  let selection = ContentTask;
   let contentSelection = content.getSelection();
 
   let clipboardSetup = function () {
     goDoCommand("cmd_copy");
   };
 
   let clipboardCopyDone = function () {
     finishTest();
