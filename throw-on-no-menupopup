# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  69aad33b5878ecab8ef93d2dcb748e8a14740817

diff --git a/toolkit/content/widgets/menu.js b/toolkit/content/widgets/menu.js
--- a/toolkit/content/widgets/menu.js
+++ b/toolkit/content/widgets/menu.js
@@ -235,15 +235,19 @@ class MozMenu extends MozMenuBaseMixin(M
         </hbox>
         <hbox align="center" class="menu-right" role="none">
           <image role="none"/>
         </hbox>
       `;
     }
 
     // There will be a <menupopup /> already. Don't clear it out, just put our markup before it.
+
+    if (!this.querySelector("menupopup")) {
+      throw new Error("Menu without menupopup?");
+    }
     this.prepend(MozXULElement.parseXULToFragment(markup));
     this.initializeAttributeInheritance();
   }
 }
 
 customElements.define("menu", MozMenu);
 }
