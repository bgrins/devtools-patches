# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  7599ef86fdb44e4e4d75e2effd18869fbe231206
Bug 1616179 - Fix `JavaScript error: chrome://browser/content/sanitizeDialog.js, line 70: TypeError: right-hand side of 'in' should be an object, got null` error when sanitize dialog is opened outside of preferences;r=jaws

This condition was landed in Bug 1523696 and verified at that time, which leads me to think that
something may have changed with the opener in the meantime.

This is unrelated to the fix in the next patch, just something I noticed when debugging it.

diff --git a/browser/base/content/sanitizeDialog.js b/browser/base/content/sanitizeDialog.js
--- a/browser/base/content/sanitizeDialog.js
+++ b/browser/base/content/sanitizeDialog.js
@@ -62,17 +62,17 @@ var gSanitizePromptDialog = {
           ).domWindow;
           return rootWin.promiseDocumentFlushed(() => {});
         });
     } else {
       this.warningBox.hidden = true;
     }
 
     // Only apply the following if the dialog is opened outside of the Preferences.
-    if (!("gSubDialog" in window.opener)) {
+    if (!window.opener || !("gSubDialog" in window.opener)) {
       // The style attribute on the dialog may get set after the dialog has been sized.
       // Force the dialog to size again after the style attribute has been applied.
       document.l10n.translateElements([document.documentElement]).then(() => {
         window.sizeToContent();
       });
     }
   },
 
