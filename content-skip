# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  adf5f23a606f415fa998ca600e295981397a0948
Bug 1523997 - Skip checking for -moz-binding in Element::WrapObject when in the content process

diff --git a/dom/base/Element.cpp b/dom/base/Element.cpp
--- a/dom/base/Element.cpp
+++ b/dom/base/Element.cpp
@@ -539,16 +539,20 @@ bool Element::GetBindingURL(Document* aD
 
 JSObject* Element::WrapObject(JSContext* aCx,
                               JS::Handle<JSObject*> aGivenProto) {
   JS::Rooted<JSObject*> obj(aCx, nsINode::WrapObject(aCx, aGivenProto));
   if (!obj) {
     return nullptr;
   }
 
+  if (XRE_IsContentProcess()) {
+    return obj;
+  }
+
   Document* doc = GetComposedDoc();
   if (!doc) {
     // There's no baseclass that cares about this call so we just
     // return here.
     return obj;
   }
 
   // We must ensure that the XBL Binding is installed before we hand
