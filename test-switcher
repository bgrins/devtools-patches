# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  2a99e348fde3d1674296bb82c5f3881e696e8fb6
Bug 1519461 - Guard against uninitialized browser in logState

diff --git a/browser/modules/AsyncTabSwitcher.jsm b/browser/modules/AsyncTabSwitcher.jsm
--- a/browser/modules/AsyncTabSwitcher.jsm
+++ b/browser/modules/AsyncTabSwitcher.jsm
@@ -1183,18 +1183,18 @@ class AsyncTabSwitcher {
     let accum = prefix + " ";
     for (let i = 0; i < this.tabbrowser.tabs.length; i++) {
       let tab = this.tabbrowser.tabs[i];
       let state = this.getTabState(tab);
       let isWarming = this.warmingTabs.has(tab);
       let isCached = this.tabLayerCache.includes(tab);
       let isClosing = tab.closing;
       let linkedBrowser = tab.linkedBrowser;
-      let isActive = linkedBrowser && linkedBrowser.docShellIsActive;
-      let isRendered = linkedBrowser && linkedBrowser.renderLayers;
+      let isActive = linkedBrowser && linkedBrowser.mInitialized && linkedBrowser.docShellIsActive;
+      let isRendered = linkedBrowser && linkedBrowser.mInitialized && linkedBrowser.renderLayers;
 
       accum += i + ":";
       if (tab === this.lastVisibleTab) accum += "V";
       if (tab === this.loadingTab) accum += "L";
       if (tab === this.requestedTab) accum += "R";
       if (tab === this.blankTab) accum += "B";
 
       let extraStates = "";
