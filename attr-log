# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  a9616aaeff87448588d57c295e16eb4caec420fb
Bug 1497599

diff --git a/toolkit/content/widgets/progressmeter.js b/toolkit/content/widgets/progressmeter.js
--- a/toolkit/content/widgets/progressmeter.js
+++ b/toolkit/content/widgets/progressmeter.js
@@ -76,16 +76,20 @@ class MozProgressmeter extends MozXULEle
     this.runAnimation = false;
   }
 
   static get observedAttributes() {
     return [ "mode" ];
   }
 
   attributeChangedCallback(name, oldValue, newValue) {
+    if (!this.isConnectedAndReady) {
+      return;
+    }
+
     if (name === "mode" && oldValue != newValue) {
       this._initUI();
     }
   }
 
   _initUI() {
     let isUndetermined = this.isUndetermined();
     let content = isUndetermined ?
diff --git a/toolkit/content/widgets/textbox.js b/toolkit/content/widgets/textbox.js
--- a/toolkit/content/widgets/textbox.js
+++ b/toolkit/content/widgets/textbox.js
@@ -56,16 +56,20 @@ const cachedFragments = {
 };
 
 class MozInputBox extends MozXULElement {
   static get observedAttributes() {
     return ["spellcheck"];
   }
 
   attributeChangedCallback(name, oldValue, newValue) {
+    if (!this.isConnectedAndReady) {
+      return;
+    }
+
     if (name === "spellcheck") {
       this.spellcheck = newValue;
       this._initUI();
     }
   }
 
   connectedCallback() {
     this.spellcheck = this.hasAttribute("spellcheck");
