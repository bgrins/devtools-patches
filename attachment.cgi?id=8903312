# HG changeset patch
# User Gabriel Luong <gabriel.luong@gmail.com>
# Parent  7066bd72a0a79229b8326d777e78cfb90ce47c8a
Bug 1391003 - Part 1: Implement the new photon line selection and hover background colors. r=bgrins

diff --git a/devtools/client/inspector/markup/views/markup-container.js b/devtools/client/inspector/markup/views/markup-container.js
--- a/devtools/client/inspector/markup/views/markup-container.js
+++ b/devtools/client/inspector/markup/views/markup-container.js
@@ -663,16 +663,17 @@ MarkupContainer.prototype = {
     this.tagLine.setAttribute("aria-selected", value);
     if (this._selected) {
       let container = this.markup.getContainer(this.markup._rootNode);
       if (container) {
         container.elt.setAttribute("aria-activedescendant", this.id);
       }
       this.tagLine.setAttribute("selected", "");
       this.tagState.classList.add("theme-selected");
+      this.tagState.classList.remove("theme-bg-darker");
     } else {
       this.tagLine.removeAttribute("selected");
       this.tagState.classList.remove("theme-selected");
     }
   },
 
   /**
    * Update the container's editor to the current state of the
diff --git a/devtools/client/themes/animationinspector.css b/devtools/client/themes/animationinspector.css
--- a/devtools/client/themes/animationinspector.css
+++ b/devtools/client/themes/animationinspector.css
@@ -373,16 +373,19 @@ body {
 
 /* Display animations' background colors to alternate. */
 .animation-timeline .animation:nth-child(2n+1) {
   background-color: var(--even-animation-timeline-background-color);
 }
 
 .animation-timeline .animation.selected {
   background-color: var(--theme-selection-background-semitransparent);
+  /* Prevent the selected animation background highlight from overlapping since
+   * --theme-selection-background-semitransparent is not actually semitransparent. */
+  z-index: -1;
 }
 
 .animation-timeline .animation:last-child {
   margin-bottom: calc(var(--timeline-animation-height) / 2);
 }
 
 .animation-timeline .animation .target {
   width: var(--timeline-sidebar-width);
diff --git a/devtools/client/themes/dark-theme.css b/devtools/client/themes/dark-theme.css
--- a/devtools/client/themes/dark-theme.css
+++ b/devtools/client/themes/dark-theme.css
@@ -22,20 +22,16 @@ body {
   color: var(--theme-content-color1);
 }
 
 ::-moz-selection {
   background-color: var(--theme-selection-background);
   color: var(--theme-selection-color);
 }
 
-.theme-bg-darker {
-  background-color: var(--theme-selection-background-semitransparent);
-}
-
 .theme-selected,
 .CodeMirror-hint-active {
   background-color: var(--theme-selection-background);
   color: var(--theme-selection-color);
 }
 
 .theme-bg-contrast,
 .variable-or-property:not([overridden])[changed] {
diff --git a/devtools/client/themes/light-theme.css b/devtools/client/themes/light-theme.css
--- a/devtools/client/themes/light-theme.css
+++ b/devtools/client/themes/light-theme.css
@@ -22,20 +22,16 @@ body {
   color: var(--theme-body-color);
 }
 
 ::-moz-selection {
   background-color: var(--theme-selection-background);
   color: var(--theme-selection-color);
 }
 
-.theme-bg-darker {
-  background: var(--theme-selection-background-semitransparent);
-}
-
 .theme-selected,
 .CodeMirror-hint-active {
   background-color: var(--theme-selection-background);
   color: var(--theme-selection-color);
 }
 
 .theme-bg-contrast,
 .variable-or-property:not([overridden])[changed] {
diff --git a/devtools/client/themes/markup.css b/devtools/client/themes/markup.css
--- a/devtools/client/themes/markup.css
+++ b/devtools/client/themes/markup.css
@@ -18,16 +18,23 @@
 :root {
   -moz-control-character-visibility: visible;
 }
 
 body {
   -moz-user-select: none;
 }
 
+.theme-bg-darker {
+  background: var(--theme-selection-background-semitransparent);
+  /* Prevent the closing tag background highlight from overlapping the closing tag text
+   * since --theme-selection-background-semitransparent is not actually semitransparent */
+  z-index: -1 !important;
+}
+
 /* Force height and width (possibly overflowing) from inline elements.
  * This allows long overflows of text or input fields to still be styled with
  * the container, rather than the background disappearing when scrolling */
 #root {
   float: left;
   min-width: 100%;
 }
 
diff --git a/devtools/client/themes/variables.css b/devtools/client/themes/variables.css
--- a/devtools/client/themes/variables.css
+++ b/devtools/client/themes/variables.css
@@ -20,18 +20,18 @@
   --theme-contrast-background: #e6b064;
 
   --theme-tab-toolbar-background: #fcfcfc;
   --theme-toolbar-background: #fcfcfc;
   --theme-toolbar-background-hover: rgba(221, 225, 228, 0.66);
   --theme-toolbar-background-alt: #f5f5f5;
   --theme-toolbar-hover: rgba(170, 170, 170, .2);
   --theme-toolbar-hover-active: rgba(170, 170, 170, .4);
-  --theme-selection-background: #4c9ed9;
-  --theme-selection-background-semitransparent: rgba(76, 158, 217, 0.15);
+  --theme-selection-background: var(--blue-55);
+  --theme-selection-background-semitransparent: #F0F9FE;
   --theme-selection-color: #f5f7fa;
   --theme-splitter-color: #dde1e4;
   --theme-comment: #696969;
   --theme-comment-alt: #ccd1d5;
 
   --theme-body-color: #393f4c;
   --theme-body-color-alt: #585959;
   --theme-body-color-inactive: #999797;
@@ -88,18 +88,18 @@
   --theme-contrast-background: #ffb35b;
 
   --theme-tab-toolbar-background: #272b35;
   --theme-toolbar-background: #272b35;
   --theme-toolbar-background-hover: #20232B;
   --theme-toolbar-background-alt: #2F343E;
   --theme-toolbar-hover: rgba(110, 120, 130, 0.1);
   --theme-toolbar-hover-active: rgba(110, 120, 130, 0.2);
-  --theme-selection-background: #5675B9;
-  --theme-selection-background-semitransparent: rgba(86, 117, 185, 0.5);
+  --theme-selection-background: #204E8A;
+  --theme-selection-background-semitransparent: #353B48;
   --theme-selection-color: #f5f7fa;
   --theme-splitter-color: #454d5d;
   --theme-comment: #757873;
   --theme-comment-alt: #5a6375;
 
   --theme-body-color: #8fa1b2;
   --theme-body-color-alt: #b6babf;
   --theme-body-color-inactive: #8fa1b2;
