# HG changeset patch
# Parent 814029846282d085db7916de1bc8444d999fef62
# User Brian Grinstead <bgrinstead@mozilla.com>
Bug 1121723 - change width and margin of tab separators for devedition to prevent tab jittering in customize mode;r=MattN

diff --git a/browser/themes/shared/devedition.inc.css b/browser/themes/shared/devedition.inc.css
--- a/browser/themes/shared/devedition.inc.css
+++ b/browser/themes/shared/devedition.inc.css
@@ -268,23 +268,27 @@ searchbar:not([oneoffui]) .search-go-but
   -moz-image-region: auto !important;
   list-style-image: var(--search-button-image);
 }
 
 .tab-background {
   visibility: hidden;
 }
 
+/* Make the tab splitter 1px wide with -1px margin-start to prevent jittering
+   due to the ::after element causing the width of the tab to extend, which
+   causes an overflow and makes it disappear, which removes the overflow and
+   causes it to reappear, etc, etc. */
 #tabbrowser-tabs[movingtab] > .tabbrowser-tab[beforeselected]:not([last-visible-tab])::after,
 .tabbrowser-tab:not([selected]):not([afterselected-visible]):not([afterhovered]):not([first-visible-tab]):not(:hover)::before,
 #tabbrowser-tabs:not([overflow]) > .tabbrowser-tab[last-visible-tab]:not([selected]):not([beforehovered]):not(:hover)::after {
-  background-image: linear-gradient(to top, var(--tab-separator-color), var(--tab-separator-color));
-  background-position: 1px 0;
-  background-repeat: no-repeat;
-  background-size: 1px 100%;
+  background: var(--tab-separator-color);
+  width: 1px;
+  -moz-margin-start: 0;
+  -moz-margin-end: -1px;
 }
 
 .tabbrowser-arrowscrollbox > .scrollbutton-down,
 .tabbrowser-arrowscrollbox > .scrollbutton-up {
   background-color: var(--tab-background-color);
   border-color: transparent;
 }
 
diff --git a/browser/themes/shared/tabs.inc.css b/browser/themes/shared/tabs.inc.css
--- a/browser/themes/shared/tabs.inc.css
+++ b/browser/themes/shared/tabs.inc.css
@@ -329,21 +329,13 @@
   background-position: left bottom var(--tab-toolbar-navbar-overlap);
   background-repeat: no-repeat;
   background-size: 3px 100%;
   content: "";
   display: -moz-box;
   width: 3px;
 }
 
-/* Handle a case where the last separator in a customized tab bar with a
-   separated new tab button causes the width of the tab to extend and causes
-   jittering with a small tab curve width (Bug 1111091). */
-#TabsToolbar[currentset]:not([currentset*="tabbrowser-tabs,new-tab-button"]) #tabbrowser-tabs:not([overflow]) > .tabbrowser-tab[last-visible-tab]:not([selected]):not([beforehovered]):not(:hover)::after {
-  -moz-margin-start: -3px;
-  -moz-margin-end: 0;
-}
-
 /* New tab button */
 
 .tabs-newtab-button {
   width: calc(36px + @tabCurveWidth@);
 }
