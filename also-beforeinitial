# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  5776fea4a2d52eab59d208bff1d9bbd54e78ba2f
Push more out into load evt

diff --git a/browser/components/nsBrowserGlue.js b/browser/components/nsBrowserGlue.js
--- a/browser/components/nsBrowserGlue.js
+++ b/browser/components/nsBrowserGlue.js
@@ -1007,16 +1007,19 @@ BrowserGlue.prototype = {
        * @param {nsIXULWindow} xulWin The xul window that was opened.
        */
       onOpenWindow(xulWin) {
         let win = xulWin.docShell.domWindow;
         win.addEventListener("load", () => {
           if (win.document.documentElement.getAttribute("windowtype") != "navigator:browser") {
             return;
           }
+
+          win.gBrowserInit.onBeforeInitialXULLayout();
+          win.document.documentElement.removeAttribute("hidden");
           win.gBrowserInit.onDOMContentLoaded();
           win.gBrowserInit.onLoad();
         }, {once: true});
       },
     });
 
     SessionStartup.init();
 
