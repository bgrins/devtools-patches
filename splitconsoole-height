# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  476f2ef4f701e2e4c11b9ab3575c124be7e9650e
Bug 1408949 - Always clear splitconsole height pref after each test;r=Honza

MozReview-Commit-ID: 8BxwRp19U9l

diff --git a/devtools/client/framework/test/shared-head.js b/devtools/client/framework/test/shared-head.js
--- a/devtools/client/framework/test/shared-head.js
+++ b/devtools/client/framework/test/shared-head.js
@@ -113,16 +113,17 @@ function getFrameScript() {
 
 flags.testing = true;
 registerCleanupFunction(() => {
   flags.testing = false;
   Services.prefs.clearUserPref("devtools.dump.emit");
   Services.prefs.clearUserPref("devtools.toolbox.host");
   Services.prefs.clearUserPref("devtools.toolbox.previousHost");
   Services.prefs.clearUserPref("devtools.toolbox.splitconsoleEnabled");
+  Services.prefs.clearUserPref("devtools.toolbox.splitconsoleHeight");
 });
 
 registerCleanupFunction(function* cleanup() {
   while (gBrowser.tabs.length > 1) {
     yield closeTabAndToolbox(gBrowser.selectedTab);
   }
 });
 
diff --git a/devtools/client/webconsole/new-console-output/test/mochitest/browser_webconsole_split_focus.js b/devtools/client/webconsole/new-console-output/test/mochitest/browser_webconsole_split_focus.js
--- a/devtools/client/webconsole/new-console-output/test/mochitest/browser_webconsole_split_focus.js
+++ b/devtools/client/webconsole/new-console-output/test/mochitest/browser_webconsole_split_focus.js
@@ -54,12 +54,11 @@
     while (activeElement && activeElement.contentDocument) {
       activeElement = activeElement.contentDocument.activeElement;
     }
     return activeElement;
   }
 
   function finish() {
     toolbox = TEST_URI = null;
-    Services.prefs.clearUserPref("devtools.toolbox.splitconsoleHeight");
     finishTest();
   }
 }
diff --git a/devtools/client/webconsole/new-console-output/test/mochitest/browser_webconsole_split_persist.js b/devtools/client/webconsole/new-console-output/test/mochitest/browser_webconsole_split_persist.js
--- a/devtools/client/webconsole/new-console-output/test/mochitest/browser_webconsole_split_persist.js
+++ b/devtools/client/webconsole/new-console-output/test/mochitest/browser_webconsole_split_persist.js
@@ -107,12 +107,11 @@
     let contentWindow = toolbox.win;
     contentWindow.focus();
     EventUtils.sendKey("ESCAPE", contentWindow);
     return onceSplitConsole;
   }
 
   function finish() {
     toolbox = TEST_URI = null;
-    Services.prefs.clearUserPref("devtools.toolbox.splitconsoleHeight");
     finishTest();
   }
 }
diff --git a/devtools/client/webconsole/test/browser_webconsole_split_persist.js b/devtools/client/webconsole/test/browser_webconsole_split_persist.js
--- a/devtools/client/webconsole/test/browser_webconsole_split_persist.js
+++ b/devtools/client/webconsole/test/browser_webconsole_split_persist.js
@@ -107,12 +107,11 @@
     let contentWindow = toolbox.win;
     contentWindow.focus();
     EventUtils.sendKey("ESCAPE", contentWindow);
     return onceSplitConsole;
   }
 
   function finish() {
     toolbox = TEST_URI = null;
-    Services.prefs.clearUserPref("devtools.toolbox.splitconsoleHeight");
     finishTest();
   }
 }
