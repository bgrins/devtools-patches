# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  9b02a4950fe7becd1fb871a17b53ee5579725384
No bug, random things that might make damp happier

diff --git a/testing/talos/talos/tests/devtools/addon/content/damp.js b/testing/talos/talos/tests/devtools/addon/content/damp.js
--- a/testing/talos/talos/tests/devtools/addon/content/damp.js
+++ b/testing/talos/talos/tests/devtools/addon/content/damp.js
@@ -338,26 +338,31 @@ Damp.prototype = {
         sequenceArray.push(subtests[config.subtests[i]]);
       }
     }
 
     return sequenceArray;
   },
 
   testSetup: Task.async(function*(url) {
+    Services.prefs.setBoolPref("devtools.toolbox.splitconsoleEnabled", false);
     let tab = yield this.addTab(url);
     forceCollections();
     yield new Promise(resolve => {
       setTimeout(resolve, this._config.rest);
     });
     return tab;
   }),
 
   testTeardown: Task.async(function*(url) {
     this.closeCurrentTab();
+    forceCollections();
+    yield new Promise(resolve => {
+      setTimeout(resolve, this._config.rest);
+    });
     this._nextCommand();
   }),
 
   // Everything below here are common pieces needed for the test runner to function,
   // just copy and pasted from Tart with /s/TART/DAMP
 
   _win: undefined,
   _dampTab: undefined,
