# vim: se ft=diff :
# HG changeset patch
# User Tim Taubert <ttaubert@mozilla.com>
# Date 2015-06-15 05:09
Bug 1170759 - Update permissions section when switching between tabs with the keyboard while the identity panel is shown

diff --git a/browser/base/content/browser.js b/browser/base/content/browser.js
index 0f4b5f7..06aad38 100644
--- a/browser/base/content/browser.js
+++ b/browser/base/content/browser.js
@@ -6846,18 +6846,20 @@ var gIdentityHandler = {
       return;
     }
 
     this._identityPopup.className = newMode;
     this._identityBox.className = newMode;
     this.setIdentityMessages(newMode);
 
     // Update the popup too, if it's open
-    if (this._identityPopup.state == "open")
+    if (this._identityPopup.state == "open") {
       this.setPopupMessages(newMode);
+      this.updateSitePermissions();
+    }
 
     this._mode = newMode;
   },
 
   /**
    * Set up the messages for the primary identity UI based on the specified mode,
    * and the details of the SSL cert, where applicable
    *
-- 
2.4.3

