# HG changeset patch
# Parent 27f5aa71eb684b76055bb66f3928bd5c312e04de
# User Brian Grinstead <bgrinstead@mozilla.com>
testing stuff with ellipses


diff --git a/browser/devtools/markupview/markup-view.js b/browser/devtools/markupview/markup-view.js
--- a/browser/devtools/markupview/markup-view.js
+++ b/browser/devtools/markupview/markup-view.js
@@ -1047,16 +1047,30 @@ MarkupView.prototype = {
    *        Options are {expand:boolean,flash:boolean}
    * @return a promise that will be resolved when the children are ready
    * (which may be immediately).
    */
   _updateChildren: function(aContainer, options) {
     let expand = options && options.expand;
     let flash = options && options.flash;
 
+    if (!aContainer.node.hasExpandableChildren) {
+      aContainer.expanded = true;
+      if (aContainer.expander) {
+      aContainer.expander.style.display = "none";
+        
+      }
+      aContainer.tagLine.style.display = "inline-block";
+      if (aContainer.closeTagLine) {
+        aContainer.closeTagLine.style.display = "inline-block";
+      }
+      aContainer.children.style.background = "orange";
+      aContainer.children.style.display = "inline-block";
+    }
+
     aContainer.hasChildren = aContainer.node.hasChildren;
 
     if (!this._queuedChildUpdates) {
       this._queuedChildUpdates = new Map();
     }
 
     if (this._queuedChildUpdates.has(aContainer)) {
       return this._queuedChildUpdates.get(aContainer);
@@ -1132,19 +1146,16 @@ MarkupView.prototype = {
         if (!children.hasLast) {
           let span = this.template("more-nodes", data);
           fragment.appendChild(span);
         }
       }
 
       aContainer.children.appendChild(fragment);
 
-      if (!aContainer.node.hasExpandableChildren) {
-        aContainer.expanded = true;
-      }
       return aContainer;
     }).then(null, console.error);
     this._queuedChildUpdates.set(aContainer, updatePromise);
     return updatePromise;
   },
 
   _waitForChildren: function() {
     if (!this._queuedChildUpdates) {
@@ -1944,17 +1955,17 @@ TextEditor.prototype = {
       return;
     }
     this._selected = aValue;
     this.update();
   },
 
   update: function() {
     if (!this.selected || !this.node.incompleteValue) {
-      let text = this.node.shortValue;
+      let text = this.node.shortValue.replace(/\s+/g,' ');
       // XXX: internationalize the elliding
       if (this.node.incompleteValue) {
         text += "â€¦";
       }
       this.value.textContent = text;
     } else {
       let longstr = null;
       this.node.getNodeValue().then(ret => {
