# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  32ba91a9e0de47a93864fcb90f06aa43c23f2697
Bug 1204016 - Move permissions list directly underneath the section icon;r=ttaubert

diff --git a/browser/components/controlcenter/content/panel.inc.xul b/browser/components/controlcenter/content/panel.inc.xul
--- a/browser/components/controlcenter/content/panel.inc.xul
+++ b/browser/components/controlcenter/content/panel.inc.xul
@@ -78,17 +78,18 @@
                   accesskey="&trackingProtection.block2.accesskey;"
                   oncommand="TrackingProtection.enableForCurrentPage();" />
         </vbox>
       </hbox>
 
       <!-- Permissions Section -->
       <hbox id="identity-popup-permissions" class="identity-popup-section">
         <vbox id="identity-popup-permissions-content" flex="1">
-          <label class="identity-popup-headline"
+          <label id="identity-popup-permission-headline"
+                 class="identity-popup-headline"
                  value="&identity.permissions;"/>
           <vbox id="identity-popup-permission-list"/>
         </vbox>
       </hbox>
     </panelview>
 
     <!-- Security SubView -->
     <panelview id="identity-popup-securityView" flex="1">
diff --git a/browser/themes/shared/controlcenter/panel.inc.css b/browser/themes/shared/controlcenter/panel.inc.css
--- a/browser/themes/shared/controlcenter/panel.inc.css
+++ b/browser/themes/shared/controlcenter/panel.inc.css
@@ -287,15 +287,25 @@ description#identity-popup-content-verif
 #identity-popup-permissions-content {
   background-image: url(chrome://browser/skin/controlcenter/permissions.svg);
 }
 
 #identity-popup-permission-list .notification-anchor-icon {
   margin: 0;
 }
 
+.identity-popup-permission-headline {
+  /* Make sure the label is as tall as the icon so that the permission list
+     which is aligned with the icon doesn't cover it up. */
+  min-height: 24px;
+}
+
 #identity-popup-permission-list {
   margin-top: 5px;
+  /* Offset the padding set on #identity-popup-permissions-content,
+     so that it shows up just below the section. The perm icons (16px wide)
+     should be right aligned with the section icon. */
+  -moz-margin-start: calc(-1em - 16px);
 }
 
 .identity-popup-permission-label {
-  -moz-margin-start: 3px;
+  -moz-margin-start: 1em;
 }
