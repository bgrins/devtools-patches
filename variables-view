# HG changeset patch
# Parent 075a42c831f60a8fd152f461c696aa33b9e68e16
# User Brian Grinstead <bgrinstead@mozilla.com>
Bug 941799 - DevTools themes - variables view should match current theme

diff --git a/browser/devtools/debugger/debugger.xul b/browser/devtools/debugger/debugger.xul
--- a/browser/devtools/debugger/debugger.xul
+++ b/browser/devtools/debugger/debugger.xul
@@ -362,22 +362,22 @@
       <tabbox id="instruments-pane"
               class="devtools-sidebar-tabs"
               hidden="true">
         <tabs>
           <tab id="variables-tab" label="&debuggerUI.tabs.variables;"/>
           <tab id="events-tab" label="&debuggerUI.tabs.events;"/>
         </tabs>
         <tabpanels flex="1">
-          <tabpanel id="variables-tabpanel">
+          <tabpanel id="variables-tabpanel" class="theme-body">
             <vbox id="expressions"/>
             <splitter class="devtools-horizontal-splitter"/>
             <vbox id="variables" flex="1"/>
           </tabpanel>
-          <tabpanel id="events-tabpanel">
+          <tabpanel id="events-tabpanel" class="theme-body">
             <vbox id="event-listeners" flex="1"/>
           </tabpanel>
         </tabpanels>
       </tabbox>
       <splitter id="vertical-layout-splitter"
                 class="devtools-horizontal-splitter"/>
       <hbox id="vertical-layout-panes-container">
         <splitter id="sources-and-instruments-splitter"
diff --git a/browser/devtools/shared/widgets/VariablesView.jsm b/browser/devtools/shared/widgets/VariablesView.jsm
--- a/browser/devtools/shared/widgets/VariablesView.jsm
+++ b/browser/devtools/shared/widgets/VariablesView.jsm
@@ -72,16 +72,17 @@ const STR = Services.strings.createBundl
 this.VariablesView = function VariablesView(aParentNode, aFlags = {}) {
   this._store = []; // Can't use a Map because Scope names needn't be unique.
   this._itemsByElement = new WeakMap();
   this._prevHierarchy = new Map();
   this._currHierarchy = new Map();
 
   this._parent = aParentNode;
   this._parent.classList.add("variables-view-container");
+  this._parent.classList.add("theme-body");
   this._appendEmptyNotice();
 
   this._onSearchboxInput = this._onSearchboxInput.bind(this);
   this._onSearchboxKeyPress = this._onSearchboxKeyPress.bind(this);
   this._onViewKeyPress = this._onViewKeyPress.bind(this);
   this._onViewKeyDown = this._onViewKeyDown.bind(this);
 
   // Create an internal scrollbox container.
diff --git a/browser/devtools/webconsole/webconsole.js b/browser/devtools/webconsole/webconsole.js
--- a/browser/devtools/webconsole/webconsole.js
+++ b/browser/devtools/webconsole/webconsole.js
@@ -3478,20 +3478,22 @@ JSTerm.prototype = {
     if (aOptions.targetElement) {
       let deferred = promise.defer();
       openPromise = deferred.promise;
       let document = aOptions.targetElement.ownerDocument;
       let iframe = document.createElementNS(XHTML_NS, "iframe");
 
       iframe.addEventListener("load", function onIframeLoad(aEvent) {
         iframe.removeEventListener("load", onIframeLoad, true);
+        iframe.style.visibility = "visible";
         deferred.resolve(iframe.contentWindow);
       }, true);
 
       iframe.flex = 1;
+      iframe.style.visibility = "hidden";
       iframe.setAttribute("src", VARIABLES_VIEW_URL);
       aOptions.targetElement.appendChild(iframe);
     }
     else {
       if (!this.sidebar) {
         this._createSidebar();
       }
       openPromise = this._addVariablesViewSidebarTab();
diff --git a/browser/themes/linux/devtools/debugger.css b/browser/themes/linux/devtools/debugger.css
--- a/browser/themes/linux/devtools/debugger.css
+++ b/browser/themes/linux/devtools/debugger.css
@@ -82,25 +82,33 @@
 }
 
 /* ListWidget items */
 
 .list-widget-item {
   padding: 2px;
 }
 
-.list-widget-item:not(.selected):not(.empty):hover {
+.theme-light .list-widget-item:not(.selected):not(.empty):hover {
   background: linear-gradient(rgba(255,255,255,0.9), rgba(255,255,255,0.85)), Highlight;
 }
 
-.list-widget-item.selected.light {
+.theme-light .list-widget-item.selected.light {
   background: linear-gradient(rgba(255,255,255,0.85), rgba(255,255,255,0.8)), Highlight;
   color: #000;
 }
 
+.theme-dark .list-widget-item:not(.selected):not(.empty):hover {
+  background: linear-gradient(rgba(255,255,255,0.1), rgba(255,255,255,0.05));
+}
+
+.theme-dark .list-widget-item.selected.light {
+  background: linear-gradient(rgba(255,255,255,0.05), rgba(255,255,255,0.025));
+}
+
 .list-widget-item.selected {
   background: Highlight;
   color: HighlightText;
 }
 
 .list-widget-item.empty {
   color: GrayText;
   padding: 2px;
@@ -147,20 +155,16 @@
 
 /* Instruments pane (watch expressions, variables, event listeners...) */
 
 #instruments-pane > tabs > tab {
   min-height: 25px !important;
   padding: 0 !important;
 }
 
-#instruments-pane > tabpanels > tabpanel {
-  background: #fff;
-}
-
 /* Watch expressions view */
 
 #expressions {
   min-height: 10px;
   max-height: 125px;
 }
 
 .dbg-expression {
@@ -170,16 +174,17 @@
 .dbg-expression-arrow {
   width: 16px;
   height: auto;
   background: -moz-image-rect(url(commandline-icon.png), 0, 32, 16, 16);
 }
 
 .dbg-expression-input {
   -moz-padding-start: 2px !important;
+  color: inherit;
 }
 
 /* Event listeners view */
 
 .dbg-event-listener {
   padding: 4px 8px;
 }
 
diff --git a/browser/themes/linux/devtools/netmonitor.css b/browser/themes/linux/devtools/netmonitor.css
--- a/browser/themes/linux/devtools/netmonitor.css
+++ b/browser/themes/linux/devtools/netmonitor.css
@@ -358,20 +358,16 @@ box.requests-menu-status[code^="5"] {
   text-shadow: 0 1px 0 #000;
   color: hsl(210,30%,85%);
 }
 
 .tabpanel-summary-value {
   -moz-padding-start: 3px;
 }
 
-.variable-or-property:not(:focus) > .title > .token-string {
-  color: #10c !important;
-}
-
 /* Headers tabpanel */
 
 #headers-summary-status,
 #headers-summary-version {
   padding-bottom: 2px;
 }
 
 #headers-summary-size {
diff --git a/browser/themes/linux/devtools/widgets.css b/browser/themes/linux/devtools/widgets.css
--- a/browser/themes/linux/devtools/widgets.css
+++ b/browser/themes/linux/devtools/widgets.css
@@ -427,121 +427,88 @@
 .side-menu-widget-empty-notice-container[theme="light"] {
   background: #fff;
   padding: 4px 8px;
   color: GrayText;
 }
 
 /* VariablesView */
 
-.variables-view-container {
-  background: #fff;
-}
-
 .variables-view-empty-notice {
   color: GrayText;
   padding: 2px;
 }
 
 .variables-view-scope > .title {
   color: #fff;
 }
 
-.variables-view-scope:focus > .title {
-  background: Highlight;
-  color: HighlightText;
+.variables-view-scope:focus > .title,
+.variable-or-property:focus > .title {
+  background: rgb(185, 215, 253);
+  color: black;
 }
 
 .variables-view-scope > .variables-view-element-details:not(:empty) {
   -moz-margin-start: 2px;
   -moz-margin-end: 1px;
 }
 
 /* Generic traits applied to both variables and properties */
 
 .variable-or-property {
   transition: background 1s ease-in-out;
-  color: #000;
 }
 
-.variable-or-property[changed] {
-  background: rgba(255,255,0,0.65);
-  transition-duration: 0.4s;
+.variables-view-scope[changed] > .title,
+.variable-or-property[changed] > .title {
+  background: rgb(255, 248, 101);
+  color: black;
+  transition-duration: .4s;
 }
 
 .variable-or-property > .title > .value {
   -moz-padding-start: 6px;
   -moz-padding-end: 4px;
 }
 
-.variable-or-property:focus > .title {
-  background: Highlight;
-  color: HighlightText;
-  border-radius: 4px;
-}
-
 .variable-or-property[editable] > .title > .value {
   cursor: text;
 }
 
 .variable-or-property:not([non-header]) > .variables-view-element-details {
   -moz-margin-start: 10px;
 }
 
 /* Custom variables and properties traits */
 
 .variables-view-variable {
   -moz-margin-start: 1px;
   -moz-margin-end: 1px;
-  border-bottom: 1px solid #eee;
 }
 
 .variables-view-variable > .title > .name {
   font-weight: 600;
 }
 
-.variables-view-variable:not(:focus) > .title > .name {
-  color: #048;
-}
-
-.variables-view-property:not(:focus) > .title > .name {
-  color: #881090;
-}
-
-/* Token value colors */
-
-.variable-or-property:not(:focus) > .title > .token-undefined {
-  color: #bbb;
-}
-
-.variable-or-property:not(:focus) > .title > .token-null {
-  color: #999;
-}
-
-.variable-or-property:not(:focus) > .title > .token-boolean {
-  color: #10c;
-}
-
-.variable-or-property:not(:focus) > .title > .token-number {
-  color: #c00;
-}
-
-.variable-or-property:not(:focus) > .title > .token-string {
-  color: #282;
-}
-
-.variable-or-property:not(:focus) > .title > .token-other {
-  color: #333;
+.variable-or-property:focus > .title > .name,
+.variable-or-property:focus > .title > .token-undefined,
+.variable-or-property:focus > .title > .token-null,
+.variable-or-property:focus > .title > .token-boolean,
+.variable-or-property:focus > .title > .token-number,
+.variable-or-property:focus > .title > .token-string,
+.variable-or-property:focus > .title > .token-other {
+  color: inherit;
 }
 
 /* Custom configurable/enumerable/writable or frozen/sealed/extensible
  * variables and properties */
 
 .variable-or-property[non-enumerable]:not([self]):not([exception]):not([return]):not([scope]) > .title > .name {
-  opacity: 0.5;
+  opacity: 0.6;
 }
 
 .variable-or-property[non-configurable] > .title > .name {
   border-bottom: 1px dashed #99f;
 }
 
 .variable-or-property[non-writable] > .title > .name {
   border-bottom: 1px dashed #f99;
@@ -568,37 +535,16 @@
 }
 
 .variable-or-property:not(:focus) > .title > .variable-or-property-frozen-label,
 .variable-or-property:not(:focus) > .title > .variable-or-property-sealed-label,
 .variable-or-property:not(:focus) > .title > .variable-or-property-non-extensible-label {
   color: #666;
 }
 
-/* Special variables and properties */
-
-.variable-or-property[safe-getter] > .title > .name {
-  border-bottom: 1px dashed #8b0;
-}
-
-.variable-or-property[exception]:not(:focus) > .title > .name {
-  color: #a00;
-  text-shadow: 0 0 8px #fcc;
-}
-
-.variable-or-property[return]:not(:focus) > .title > .name {
-  color: #0a0;
-  text-shadow: 0 0 8px #cfc;
-}
-
-.variable-or-property[scope]:not(:focus) > .title > .name {
-  color: #00a;
-  text-shadow: 0 0 8px #ccf;
-}
-
 /* Aligned values */
 
 .variables-view-container[aligned-values] .title > .separator {
   -moz-box-flex: 1;
 }
 
 .variables-view-container[aligned-values] .title > .value {
   width: 70vw;
@@ -669,24 +615,23 @@
 .element-value-input {
   -moz-margin-start: 4px !important;
   -moz-margin-end: 2px !important;
 }
 
 .element-name-input {
   -moz-margin-start: -2px !important;
   -moz-margin-end: 2px !important;
-  color: #048;
   font-weight: 600;
 }
 
 .element-value-input,
 .element-name-input {
-  border: 1px solid #999 !important;
-  box-shadow: 1px 2px 4px #aaa;
+  border: 1px solid rgba(128, 128, 128, .5) !important;
+  color: inherit;
 }
 
 /* Variables and properties searching */
 
 .variables-view-searchinput {
   min-height: 24px;
 }
 
diff --git a/browser/themes/osx/devtools/debugger.css b/browser/themes/osx/devtools/debugger.css
--- a/browser/themes/osx/devtools/debugger.css
+++ b/browser/themes/osx/devtools/debugger.css
@@ -84,25 +84,33 @@
 }
 
 /* ListWidget items */
 
 .list-widget-item {
   padding: 2px;
 }
 
-.list-widget-item:not(.selected):not(.empty):hover {
+.theme-light .list-widget-item:not(.selected):not(.empty):hover {
   background: linear-gradient(rgba(255,255,255,0.9), rgba(255,255,255,0.85)), Highlight;
 }
 
-.list-widget-item.selected.light {
+.theme-light .list-widget-item.selected.light {
   background: linear-gradient(rgba(255,255,255,0.85), rgba(255,255,255,0.8)), Highlight;
   color: #000;
 }
 
+.theme-dark .list-widget-item:not(.selected):not(.empty):hover {
+  background: linear-gradient(rgba(255,255,255,0.1), rgba(255,255,255,0.05));
+}
+
+.theme-dark .list-widget-item.selected.light {
+  background: linear-gradient(rgba(255,255,255,0.05), rgba(255,255,255,0.025));
+}
+
 .list-widget-item.selected {
   background: Highlight;
   color: HighlightText;
 }
 
 .list-widget-item.empty {
   color: GrayText;
   padding: 2px;
@@ -149,20 +157,16 @@
 
 /* Instruments pane (watch expressions, variables, event listeners...) */
 
 #instruments-pane > tabs > tab {
   min-height: 1em !important;
   padding: 0 !important;
 }
 
-#instruments-pane > tabpanels > tabpanel {
-  background: #fff;
-}
-
 /* Watch expressions view */
 
 #expressions {
   min-height: 10px;
   max-height: 125px;
 }
 
 .dbg-expression {
@@ -172,16 +176,17 @@
 .dbg-expression-arrow {
   width: 16px;
   height: auto;
   background: -moz-image-rect(url(commandline-icon.png), 0, 32, 16, 16);
 }
 
 .dbg-expression-input {
   -moz-padding-start: 2px !important;
+  color: inherit;
 }
 
 /* Event listeners view */
 
 .dbg-event-listener {
   padding: 4px 8px;
 }
 
diff --git a/browser/themes/osx/devtools/netmonitor.css b/browser/themes/osx/devtools/netmonitor.css
--- a/browser/themes/osx/devtools/netmonitor.css
+++ b/browser/themes/osx/devtools/netmonitor.css
@@ -358,20 +358,16 @@ box.requests-menu-status[code^="5"] {
   text-shadow: 0 1px 0 #000;
   color: hsl(210,30%,85%);
 }
 
 .tabpanel-summary-value {
   -moz-padding-start: 3px;
 }
 
-.variable-or-property:not(:focus) > .title > .token-string {
-  color: #10c !important;
-}
-
 /* Headers tabpanel */
 
 #headers-summary-status,
 #headers-summary-version {
   padding-bottom: 2px;
 }
 
 #headers-summary-size {
diff --git a/browser/themes/osx/devtools/widgets.css b/browser/themes/osx/devtools/widgets.css
--- a/browser/themes/osx/devtools/widgets.css
+++ b/browser/themes/osx/devtools/widgets.css
@@ -421,121 +421,88 @@
 .side-menu-widget-empty-notice-container[theme="light"] {
   background: #fff;
   padding: 4px 8px;
   color: GrayText;
 }
 
 /* VariablesView */
 
-.variables-view-container {
-  background: #fff;
-}
-
 .variables-view-empty-notice {
   color: GrayText;
   padding: 2px;
 }
 
 .variables-view-scope > .title {
   color: #fff;
 }
 
-.variables-view-scope:focus > .title {
-  background: Highlight;
-  color: HighlightText;
+.variables-view-scope:focus > .title,
+.variable-or-property:focus > .title {
+  background: rgb(185, 215, 253);
+  color: black;
 }
 
 .variables-view-scope > .variables-view-element-details:not(:empty) {
   -moz-margin-start: 2px;
   -moz-margin-end: 1px;
 }
 
 /* Generic traits applied to both variables and properties */
 
 .variable-or-property {
   transition: background 1s ease-in-out;
-  color: #000;
 }
 
-.variable-or-property[changed] {
-  background: rgba(255,255,0,0.65);
-  transition-duration: 0.4s;
+.variables-view-scope[changed] > .title,
+.variable-or-property[changed] > .title {
+  background: rgb(255, 248, 101);
+  color: black;
+  transition-duration: .4s;
 }
 
 .variable-or-property > .title > .value {
   -moz-padding-start: 6px;
   -moz-padding-end: 4px;
 }
 
-.variable-or-property:focus > .title {
-  background: Highlight;
-  color: HighlightText;
-  border-radius: 4px;
-}
-
 .variable-or-property[editable] > .title > .value {
   cursor: text;
 }
 
 .variable-or-property:not([non-header]) > .variables-view-element-details {
   -moz-margin-start: 10px;
 }
 
 /* Custom variables and properties traits */
 
 .variables-view-variable {
   -moz-margin-start: 1px;
   -moz-margin-end: 1px;
-  border-bottom: 1px solid #eee;
 }
 
 .variables-view-variable > .title > .name {
   font-weight: 600;
 }
 
-.variables-view-variable:not(:focus) > .title > .name {
-  color: #048;
-}
-
-.variables-view-property:not(:focus) > .title > .name {
-  color: #881090;
-}
-
-/* Token value colors */
-
-.variable-or-property:not(:focus) > .title > .token-undefined {
-  color: #bbb;
-}
-
-.variable-or-property:not(:focus) > .title > .token-null {
-  color: #999;
-}
-
-.variable-or-property:not(:focus) > .title > .token-boolean {
-  color: #10c;
-}
-
-.variable-or-property:not(:focus) > .title > .token-number {
-  color: #c00;
-}
-
-.variable-or-property:not(:focus) > .title > .token-string {
-  color: #282;
-}
-
-.variable-or-property:not(:focus) > .title > .token-other {
-  color: #333;
+.variable-or-property:focus > .title > .name,
+.variable-or-property:focus > .title > .token-undefined,
+.variable-or-property:focus > .title > .token-null,
+.variable-or-property:focus > .title > .token-boolean,
+.variable-or-property:focus > .title > .token-number,
+.variable-or-property:focus > .title > .token-string,
+.variable-or-property:focus > .title > .token-other {
+  color: inherit;
 }
 
 /* Custom configurable/enumerable/writable or frozen/sealed/extensible
  * variables and properties */
 
 .variable-or-property[non-enumerable]:not([self]):not([exception]):not([return]):not([scope]) > .title > .name {
-  opacity: 0.5;
+  opacity: 0.6;
 }
 
 .variable-or-property[non-configurable] > .title > .name {
   border-bottom: 1px dashed #99f;
 }
 
 .variable-or-property[non-writable] > .title > .name {
   border-bottom: 1px dashed #f99;
@@ -562,37 +529,16 @@
 }
 
 .variable-or-property:not(:focus) > .title > .variable-or-property-frozen-label,
 .variable-or-property:not(:focus) > .title > .variable-or-property-sealed-label,
 .variable-or-property:not(:focus) > .title > .variable-or-property-non-extensible-label {
   color: #666;
 }
 
-/* Special variables and properties */
-
-.variable-or-property[safe-getter] > .title > .name {
-  border-bottom: 1px dashed #8b0;
-}
-
-.variable-or-property[exception]:not(:focus) > .title > .name {
-  color: #a00;
-  text-shadow: 0 0 8px #fcc;
-}
-
-.variable-or-property[return]:not(:focus) > .title > .name {
-  color: #0a0;
-  text-shadow: 0 0 8px #cfc;
-}
-
-.variable-or-property[scope]:not(:focus) > .title > .name {
-  color: #00a;
-  text-shadow: 0 0 8px #ccf;
-}
-
 /* Aligned values */
 
 .variables-view-container[aligned-values] .title > .separator {
   -moz-box-flex: 1;
 }
 
 .variables-view-container[aligned-values] .title > .value {
   width: 70vw;
@@ -663,24 +609,23 @@
 .element-value-input {
   -moz-margin-start: 4px !important;
   -moz-margin-end: 2px !important;
 }
 
 .element-name-input {
   -moz-margin-start: -2px !important;
   -moz-margin-end: 2px !important;
-  color: #048;
   font-weight: 600;
 }
 
 .element-value-input,
 .element-name-input {
-  border: 1px solid #999 !important;
-  box-shadow: 1px 2px 4px #aaa;
+  border: 1px solid rgba(128, 128, 128, .5) !important;
+  color: inherit;
 }
 
 /* Variables and properties searching */
 
 .variables-view-searchinput {
   min-height: 24px;
 }
 
diff --git a/browser/themes/shared/devtools/dark-theme.css b/browser/themes/shared/devtools/dark-theme.css
--- a/browser/themes/shared/devtools/dark-theme.css
+++ b/browser/themes/shared/devtools/dark-theme.css
@@ -69,71 +69,81 @@
 .cm-s-mozilla .cm-link:visited { /* blue */
   color: #3689b2;
 }
 
 
 .theme-comment,
 .cm-s-mozilla .cm-meta,
 .cm-s-mozilla .cm-hr,
-.cm-s-mozilla .cm-comment { /* grey */
+.cm-s-mozilla .cm-comment,
+.variable-or-property .token-undefined,
+.variable-or-property .token-null { /* grey */
   color: #5c6773;
 }
 
 .theme-gutter {
   background-color: #0f171f;
   color: #667380;
   border-color: #303b47;
 }
 
 .theme-separator { /* grey */
   border-color: #303b47;
 }
 
 .theme-fg-color1,
-.cm-s-mozilla .cm-number { /* green */
+.cm-s-mozilla .cm-number,
+.variable-or-property .token-number,
+.variable-or-property[return] .name,
+.variable-or-property[safe-getter] .name  { /* green */
   color: #5c9966;
 }
 
 .theme-fg-color2,
 .cm-s-mozilla .cm-attribute,
 .cm-s-mozilla .cm-variable,
 .cm-s-mozilla .cm-def,
 .cm-s-mozilla .cm-property,
-.cm-s-mozilla .cm-qualifier { /* blue */
+.cm-s-mozilla .cm-qualifier,
+.variable-or-property[scope] .name { /* blue */
   color: #3689b2;
 }
 
 .theme-fg-color3,
 .cm-s-mozilla .cm-builtin,
 .cm-s-mozilla .cm-tag,
-.cm-s-mozilla .cm-header { /* pink/lavender */
+.cm-s-mozilla .cm-header,
+.variable-or-property .name { /* pink/lavender */
   color: #a673bf;
 }
 
 .theme-fg-color4 { /* purple/violet */
   color: #6270b2;
 }
 
 .theme-fg-color5,
 .cm-s-mozilla .cm-bracket,
 .cm-s-mozilla .cm-keyword { /* Yellow */
   color: #a18650;
 }
 
 .theme-fg-color6,
 .cm-s-mozilla .cm-string,
-.cm-s-mozilla .cm-string-2 { /* Orange */
+.cm-s-mozilla .cm-string-2,
+.variable-or-property .token-string { /* Orange */
   color: #b26b47;
 }
 
 .theme-fg-color7,
 .cm-s-mozilla .cm-atom,
 .cm-s-mozilla .cm-quote,
-.cm-s-mozilla .cm-error { /* Red */
+.cm-s-mozilla .cm-error,
+.variable-or-property .token-boolean,
+.variable-or-property[exception] .name { /* Red */
   color: #bf5656;
 }
 
 .theme-toolbar,
 .devtools-toolbar { /* General toolbar styling */
   color: hsl(210,30%,85%);
   background-color: #343c45;
   border-color: #060a0d;
diff --git a/browser/themes/shared/devtools/light-theme.css b/browser/themes/shared/devtools/light-theme.css
--- a/browser/themes/shared/devtools/light-theme.css
+++ b/browser/themes/shared/devtools/light-theme.css
@@ -68,71 +68,81 @@
 .theme-link:visited,
 .cm-s-mozilla .cm-link:visited { /* blue */
   color: hsl(208,56%,40%);
 }
 
 .theme-comment,
 .cm-s-mozilla .cm-meta,
 .cm-s-mozilla .cm-hr,
-.cm-s-mozilla .cm-comment { /* grey */
+.cm-s-mozilla .cm-comment,
+.variable-or-property .token-undefined,
+.variable-or-property .token-null { /* grey */
   color: hsl(90,2%,46%);
 }
 
 .theme-gutter {
   background-color: hsl(0,0%,90%);
   color: #667380;
   border-color: hsl(0,0%,65%);
 }
 
 .theme-separator { /* grey */
   border-color: #cddae5;
 }
 
 .theme-fg-color1,
-.cm-s-mozilla .cm-number { /* green */
+.cm-s-mozilla .cm-number,
+.variable-or-property .token-number,
+.variable-or-property[return] .name,
+.variable-or-property[safe-getter] .name { /* green */
   color: hsl(72,100%,27%);
 }
 
 .theme-fg-color2,
 .cm-s-mozilla .cm-attribute,
 .cm-s-mozilla .cm-builtin,
 .cm-s-mozilla .cm-def,
 .cm-s-mozilla .cm-property,
-.cm-s-mozilla .cm-qualifier { /* blue */
+.cm-s-mozilla .cm-qualifier,
+.variable-or-property[scope] .name { /* blue */
   color: hsl(208,56%,40%);
 }
 
 .theme-fg-color3,
 .cm-s-mozilla .cm-variable,
 .cm-s-mozilla .cm-tag,
-.cm-s-mozilla .cm-header { /* dark blue */
+.cm-s-mozilla .cm-header,
+.variable-or-property .name { /* dark blue */
   color: hsl(208,81%,21%)
 }
 
 .theme-fg-color4 { /* Orange */
   color: hsl(24,85%,39%);
 }
 
 .theme-fg-color5,
 .cm-s-mozilla .cm-bracket,
 .cm-s-mozilla .cm-keyword { /* Yellow */
   color: #a18650;
 }
 
 .theme-fg-color6,
 .cm-s-mozilla .cm-string,
-.cm-s-mozilla .cm-string-2 { /* Orange */
+.cm-s-mozilla .cm-string-2,
+.variable-or-property .token-string { /* Orange */
   color: hsl(24,85%,39%);
 }
 
 .theme-fg-color7,
 .cm-s-mozilla .cm-atom,
 .cm-s-mozilla .cm-quote,
-.cm-s-mozilla .cm-error { /* Red */
+.cm-s-mozilla .cm-error,
+.variable-or-property .token-boolean,
+.variable-or-property[exception] .name { /* Red */
   color: #bf5656;
 }
 
 .theme-fg-contrast { /* To be used for text on theme-bg-contrast */
   color: black;
 }
 
 .theme-toolbar,
diff --git a/browser/themes/shared/devtools/webconsole.inc.css b/browser/themes/shared/devtools/webconsole.inc.css
--- a/browser/themes/shared/devtools/webconsole.inc.css
+++ b/browser/themes/shared/devtools/webconsole.inc.css
@@ -286,21 +286,21 @@ a {
 
 .inlined-variables-view .body {
   display: flex;
   flex-direction: column;
 }
 .inlined-variables-view iframe {
   display: block;
   flex: 1;
+  margin-top: 5px;
   margin-bottom: 15px;
   -moz-margin-end: 15px;
-  border: 1px solid #ccc;
-  border-radius: 4px;
-  box-shadow: 0 0 12px #dfdfdf;
+  border: 1px solid rgba(128, 128, 128, .5);
+  border-radius: 3px;
 }
 
 #webconsole-sidebar > tabs {
   height: 0;
   border: none;
 }
 
 /* Security styles */
@@ -349,24 +349,33 @@ a {
 .theme-dark .jsterm-complete-node {
   color: #5c6773; /* commentColor */
 }
 
 .theme-dark .navigation-marker .url {
   background: #131c26; /* mainBackgroundColor */
 }
 
+.theme-dark .inlined-variables-view iframe {
+  border-color: #333;
+}
+
 .theme-light .jsterm-input-container {
   background-color: #fff; /* mainBackgroundColor */
   border-color: ThreeDShadow;
 }
 
 .theme-light .jsterm-input-node {
   color: black; /* textColor */
 }
 
 .theme-light .jsterm-complete-node {
   color: hsl(90,2%,46%); /* commentColor */
 }
 
 .theme-light .navigation-marker .url {
   background: #fff; /* mainBackgroundColor */
 }
+
+.theme-light .inlined-variables-view iframe {
+  border-color: #ccc;
+}
+
diff --git a/browser/themes/windows/devtools/debugger.css b/browser/themes/windows/devtools/debugger.css
--- a/browser/themes/windows/devtools/debugger.css
+++ b/browser/themes/windows/devtools/debugger.css
@@ -82,25 +82,33 @@
 }
 
 /* ListWidget items */
 
 .list-widget-item {
   padding: 2px;
 }
 
-.list-widget-item:not(.selected):not(.empty):hover {
+.theme-light .list-widget-item:not(.selected):not(.empty):hover {
   background: linear-gradient(rgba(255,255,255,0.9), rgba(255,255,255,0.85)), Highlight;
 }
 
-.list-widget-item.selected.light {
+.theme-light .list-widget-item.selected.light {
   background: linear-gradient(rgba(255,255,255,0.85), rgba(255,255,255,0.8)), Highlight;
   color: #000;
 }
 
+.theme-dark .list-widget-item:not(.selected):not(.empty):hover {
+  background: linear-gradient(rgba(255,255,255,0.1), rgba(255,255,255,0.05));
+}
+
+.theme-dark .list-widget-item.selected.light {
+  background: linear-gradient(rgba(255,255,255,0.05), rgba(255,255,255,0.025));
+}
+
 .list-widget-item.selected {
   background: Highlight;
   color: HighlightText;
 }
 
 .list-widget-item.empty {
   color: GrayText;
   padding: 2px;
@@ -147,20 +155,16 @@
 
 /* Instruments pane (watch expressions, variables, event listeners...) */
 
 #instruments-pane > tabs > tab {
   min-height: 25px !important;
   padding: 0 !important;
 }
 
-#instruments-pane > tabpanels > tabpanel {
-  background: #fff;
-}
-
 /* Watch expressions view */
 
 #expressions {
   min-height: 10px;
   max-height: 125px;
 }
 
 .dbg-expression {
@@ -170,16 +174,17 @@
 .dbg-expression-arrow {
   width: 16px;
   height: auto;
   background: -moz-image-rect(url(commandline-icon.png), 0, 32, 16, 16);
 }
 
 .dbg-expression-input {
   -moz-padding-start: 2px !important;
+  color: inherit;
 }
 
 /* Event listeners view */
 
 .dbg-event-listener {
   padding: 4px 8px;
 }
 
diff --git a/browser/themes/windows/devtools/netmonitor.css b/browser/themes/windows/devtools/netmonitor.css
--- a/browser/themes/windows/devtools/netmonitor.css
+++ b/browser/themes/windows/devtools/netmonitor.css
@@ -358,20 +358,16 @@ box.requests-menu-status[code^="5"] {
   text-shadow: 0 1px 0 #000;
   color: hsl(210,30%,85%);
 }
 
 .tabpanel-summary-value {
   -moz-padding-start: 3px;
 }
 
-.variable-or-property:not(:focus) > .title > .token-string {
-  color: #10c !important;
-}
-
 /* Headers tabpanel */
 
 #headers-summary-status,
 #headers-summary-version {
   padding-bottom: 2px;
 }
 
 #headers-summary-size {
diff --git a/browser/themes/windows/devtools/widgets.css b/browser/themes/windows/devtools/widgets.css
--- a/browser/themes/windows/devtools/widgets.css
+++ b/browser/themes/windows/devtools/widgets.css
@@ -424,121 +424,88 @@
 .side-menu-widget-empty-notice-container[theme="light"] {
   background: #fff;
   padding: 4px 8px;
   color: GrayText;
 }
 
 /* VariablesView */
 
-.variables-view-container {
-  background: #fff;
-}
-
 .variables-view-empty-notice {
   color: GrayText;
   padding: 2px;
 }
 
 .variables-view-scope > .title {
   color: #fff;
 }
 
-.variables-view-scope:focus > .title {
-  background: Highlight;
-  color: HighlightText;
+.variables-view-scope:focus > .title,
+.variable-or-property:focus > .title {
+  background: rgb(185, 215, 253);
+  color: black;
 }
 
 .variables-view-scope > .variables-view-element-details:not(:empty) {
   -moz-margin-start: 2px;
   -moz-margin-end: 1px;
 }
 
 /* Generic traits applied to both variables and properties */
 
 .variable-or-property {
   transition: background 1s ease-in-out;
-  color: #000;
 }
 
-.variable-or-property[changed] {
-  background: rgba(255,255,0,0.65);
-  transition-duration: 0.4s;
+.variables-view-scope[changed] > .title,
+.variable-or-property[changed] > .title {
+  background: rgb(255, 248, 101);
+  color: black;
+  transition-duration: .4s;
 }
 
 .variable-or-property > .title > .value {
   -moz-padding-start: 6px;
   -moz-padding-end: 4px;
 }
 
-.variable-or-property:focus > .title {
-  background: Highlight;
-  color: HighlightText;
-  border-radius: 4px;
-}
-
 .variable-or-property[editable] > .title > .value {
   cursor: text;
 }
 
 .variable-or-property:not([non-header]) > .variables-view-element-details {
   -moz-margin-start: 10px;
 }
 
 /* Custom variables and properties traits */
 
 .variables-view-variable {
   -moz-margin-start: 1px;
   -moz-margin-end: 1px;
-  border-bottom: 1px solid #eee;
 }
 
 .variables-view-variable > .title > .name {
   font-weight: 600;
 }
 
-.variables-view-variable:not(:focus) > .title > .name {
-  color: #048;
-}
-
-.variables-view-property:not(:focus) > .title > .name {
-  color: #881090;
-}
-
-/* Token value colors */
-
-.variable-or-property:not(:focus) > .title > .token-undefined {
-  color: #bbb;
-}
-
-.variable-or-property:not(:focus) > .title > .token-null {
-  color: #999;
-}
-
-.variable-or-property:not(:focus) > .title > .token-boolean {
-  color: #10c;
-}
-
-.variable-or-property:not(:focus) > .title > .token-number {
-  color: #c00;
-}
-
-.variable-or-property:not(:focus) > .title > .token-string {
-  color: #282;
-}
-
-.variable-or-property:not(:focus) > .title > .token-other {
-  color: #333;
+.variable-or-property:focus > .title > .name,
+.variable-or-property:focus > .title > .token-undefined,
+.variable-or-property:focus > .title > .token-null,
+.variable-or-property:focus > .title > .token-boolean,
+.variable-or-property:focus > .title > .token-number,
+.variable-or-property:focus > .title > .token-string,
+.variable-or-property:focus > .title > .token-other {
+  color: inherit;
 }
 
 /* Custom configurable/enumerable/writable or frozen/sealed/extensible
  * variables and properties */
 
 .variable-or-property[non-enumerable]:not([self]):not([exception]):not([return]):not([scope]) > .title > .name {
-  opacity: 0.5;
+  opacity: 0.6;
 }
 
 .variable-or-property[non-configurable] > .title > .name {
   border-bottom: 1px dashed #99f;
 }
 
 .variable-or-property[non-writable] > .title > .name {
   border-bottom: 1px dashed #f99;
@@ -565,37 +532,16 @@
 }
 
 .variable-or-property:not(:focus) > .title > .variable-or-property-frozen-label,
 .variable-or-property:not(:focus) > .title > .variable-or-property-sealed-label,
 .variable-or-property:not(:focus) > .title > .variable-or-property-non-extensible-label {
   color: #666;
 }
 
-/* Special variables and properties */
-
-.variable-or-property[safe-getter] > .title > .name {
-  border-bottom: 1px dashed #8b0;
-}
-
-.variable-or-property[exception]:not(:focus) > .title > .name {
-  color: #a00;
-  text-shadow: 0 0 8px #fcc;
-}
-
-.variable-or-property[return]:not(:focus) > .title > .name {
-  color: #0a0;
-  text-shadow: 0 0 8px #cfc;
-}
-
-.variable-or-property[scope]:not(:focus) > .title > .name {
-  color: #00a;
-  text-shadow: 0 0 8px #ccf;
-}
-
 /* Aligned values */
 
 .variables-view-container[aligned-values] .title > .separator {
   -moz-box-flex: 1;
 }
 
 .variables-view-container[aligned-values] .title > .value {
   width: 70vw;
@@ -666,24 +612,23 @@
 .element-value-input {
   -moz-margin-start: 4px !important;
   -moz-margin-end: 2px !important;
 }
 
 .element-name-input {
   -moz-margin-start: -2px !important;
   -moz-margin-end: 2px !important;
-  color: #048;
   font-weight: 600;
 }
 
 .element-value-input,
 .element-name-input {
-  border: 1px solid #999 !important;
-  box-shadow: 1px 2px 4px #aaa;
+  border: 1px solid rgba(128, 128, 128, .5) !important;
+  color: inherit;
 }
 
 /* Variables and properties searching */
 
 .variables-view-searchinput {
   min-height: 24px;
 }
 
