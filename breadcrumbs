# HG changeset patch
# Parent 01fb70a7cdbfaef2bb139f9a9a7135ba93537246
# User Brian Grinstead <bgrinstead@mozilla.com>
Bug 936421 - Update the breadcrumbs as per Shorlander's new designs

diff --git a/browser/devtools/inspector/breadcrumbs.js b/browser/devtools/inspector/breadcrumbs.js
--- a/browser/devtools/inspector/breadcrumbs.js
+++ b/browser/devtools/inspector/breadcrumbs.js
@@ -381,18 +381,22 @@ HTMLBreadcrumbs.prototype = {
   setCursor: function BC_setCursor(aIdx)
   {
     // Unselect the previously selected button
     if (this.currentIndex > -1 && this.currentIndex < this.nodeHierarchy.length) {
       this.nodeHierarchy[this.currentIndex].button.removeAttribute("checked");
     }
     if (aIdx > -1) {
       this.nodeHierarchy[aIdx].button.setAttribute("checked", "true");
-      if (this.hadFocus)
+      if (this.nodeHierarchy[aIdx - 1]) {
+        this.nodeHierarchy[aIdx - 1].arrow.setAttribute("test", "true");
+      }
+      if (this.hadFocus) {
         this.nodeHierarchy[aIdx].button.focus();
+      }
     }
     this.currentIndex = aIdx;
   },
 
   /**
    * Get the index of the node in the cache.
    *
    * @param aNode
@@ -415,16 +419,17 @@ HTMLBreadcrumbs.prototype = {
    *
    * @param aIdx
    */
   cutAfter: function BC_cutAfter(aIdx)
   {
     while (this.nodeHierarchy.length > (aIdx + 1)) {
       let toRemove = this.nodeHierarchy.pop();
       this.container.removeChild(toRemove.button);
+      this.container.removeChild(toRemove.arrow);
     }
   },
 
   /**
    * Build a button representing the node.
    *
    * @param aNode The node from the page.
    * @returns aNode The <button>.
@@ -473,19 +478,23 @@ HTMLBreadcrumbs.prototype = {
       let originalLength = this.nodeHierarchy.length;
       let stopNode = null;
       if (originalLength > 0) {
         stopNode = this.nodeHierarchy[originalLength - 1].node;
       }
       while (toAppend && toAppend != stopNode) {
         if (toAppend.tagName) {
           let button = this.buildButton(toAppend);
-          fragment.insertBefore(button, lastButtonInserted);
+          let arrow = this.chromeDoc.createElement("box");
+          arrow.className = "breadcrumbs-widget-arrow";
+
+          fragment.insertBefore(arrow, lastButtonInserted);
+          fragment.insertBefore(button, arrow);
           lastButtonInserted = button;
-          this.nodeHierarchy.splice(originalLength, 0, {node: toAppend, button: button});
+          this.nodeHierarchy.splice(originalLength, 0, {node: toAppend, button: button, arrow: arrow});
         }
         toAppend = toAppend.parentNode();
       }
       this.container.appendChild(fragment, this.container.firstChild);
   },
 
   /**
    * Get a child of a node that can be displayed in the breadcrumbs
diff --git a/browser/themes/osx/jar.mn b/browser/themes/osx/jar.mn
--- a/browser/themes/osx/jar.mn
+++ b/browser/themes/osx/jar.mn
@@ -267,16 +267,17 @@ browser.jar:
   skin/classic/browser/devtools/commandline.css             (devtools/commandline.css)
   skin/classic/browser/devtools/markup-view.css             (../shared/devtools/markup-view.css)
   skin/classic/browser/devtools/editor-error.png             (devtools/editor-error.png)
   skin/classic/browser/devtools/editor-breakpoint.png        (devtools/editor-breakpoint.png)
   skin/classic/browser/devtools/editor-debug-location.png    (devtools/editor-debug-location.png)
 * skin/classic/browser/devtools/webconsole.css                  (devtools/webconsole.css)
   skin/classic/browser/devtools/webconsole_networkpanel.css     (devtools/webconsole_networkpanel.css)
   skin/classic/browser/devtools/webconsole.png                  (devtools/webconsole.png)
+  skin/classic/browser/devtools/breadcrumb-dark@2x.png         (../shared/devtools/images/breadcrumb-dark@2x.png)
   skin/classic/browser/devtools/breadcrumbs-scrollbutton.png                 (devtools/breadcrumbs-scrollbutton.png)
   skin/classic/browser/devtools/breadcrumbs/ltr-end-pressed.png              (devtools/breadcrumbs/ltr-end-pressed.png)
   skin/classic/browser/devtools/breadcrumbs/ltr-end-selected-pressed.png     (devtools/breadcrumbs/ltr-end-selected-pressed.png)
   skin/classic/browser/devtools/breadcrumbs/ltr-end-selected.png             (devtools/breadcrumbs/ltr-end-selected.png)
   skin/classic/browser/devtools/breadcrumbs/ltr-end.png                      (devtools/breadcrumbs/ltr-end.png)
   skin/classic/browser/devtools/breadcrumbs/ltr-middle-pressed.png           (devtools/breadcrumbs/ltr-middle-pressed.png)
   skin/classic/browser/devtools/breadcrumbs/ltr-middle-selected-pressed.png  (devtools/breadcrumbs/ltr-middle-selected-pressed.png)
   skin/classic/browser/devtools/breadcrumbs/ltr-middle-selected.png          (devtools/breadcrumbs/ltr-middle-selected.png)
diff --git a/browser/themes/shared/devtools/images/breadcrumb-dark@2x.png b/browser/themes/shared/devtools/images/breadcrumb-dark@2x.png
new file mode 100644
index 0000000000000000000000000000000000000000..9ce5dd74eb33658133583ec6374e977ee155910f
GIT binary patch
literal 1207
zc%17D@N?(olHy`uVBq!ia0vp^5<qOg!3HF`J9aGwQj#UE5hcO-X(i=}MX3yqDfvmM
z3ZA)%>8U}fi7AzZCsS=07?_naLn2Bde0{8v^K<nQL2C3Watjzhz{b9!ATc>RwL~E)
zH9a%WR_Xoj{Yna%DYi=CroINg1<t7%nI2U|slio#A<0$Q$(AWf_I3(36;?n4a#KqZ
z6)JLb@`|l0Y?Z*~S^?Q0VSOb9u#%E&TP292B76fBob!uP6-@O^b(0MYO%%*6^$bl7
zO)Ly`6pRcEjr9$T^$m@64UMb}EUgSp6`()~Xj@TAnpKdC8`Lf!&sHg;q@=(~U%$M(
zT(8_%FTW^V-_X+1Qs2Nx-^fT8s6w~6GOr}DLN~8i8D@e@YH@N=W<g12ex3q|pO}<i
zT4JlD1oJ{}0o>TUVrVb{15Cdnu|VHY&p;nZp|3A~rMbCq)x{-2scHCC7l%|9r0NHy
z7U!21B?BWaO&O%Qz{<HOHL)bWC?r2W2NsF}8Tlpo#Toep3eL_78or6inRy_-CRl^7
zua#$BaY<rca;m3`trAc~FEca6%E`dU)ydV((#*}()zHw@*uuck%-Ph$$l1ir&D_k$
z45rs5Ke;qFHLnDwHwB^B5vN{IT7c+IEy^rQO>ryA&s6~X*(wvaTg-901)?_vw_7Z5
z>eUB2MjtJvVM4&<17gC{Esz6G`Kfup<X!|!*FRp|dCkDUsO9P67*cWT&Gd!bha5zX
znMVfjG<AjM7&SjIz0R|!{^O*J7R`=f;jTxNq*{K;?P)xC_V(L-3U>~M@4tWJ@4LIt
zo>#t83_s1R&tAa5v!I#HM$=iPq5oU2k>k6A-9^iMCeE%AKOvKOF*NQv)5=UW>Gczy
zKT!Fl^~CXZ_dYJxgxc~&>z#VJu9=I~iZTVfkOm4eYJ9odxsS`#*Z5{dC@ZIwAJet%
z{~0}Un7L|qr%u?v<Kna_8*M6+qy>V~QlI)V{<#tuS}Dvhd-EchRi}IzbIwdF`V*SR
zl(5!(O33m#)8ik1zPo&lruf}YyBa+5wy_lQIZZB#Wq5tVO!GS9hCbVi7k{ltkab_Q
z_-mwyN9C=OfZEL+r7|6Ta!d#A+w(_1zE%GJB;Nyud(jPy4ELY8YGjAJhyxWRp00i_
I>zopr0BOXd*8l(j

diff --git a/browser/themes/shared/devtools/widgets.inc.css b/browser/themes/shared/devtools/widgets.inc.css
--- a/browser/themes/shared/devtools/widgets.inc.css
+++ b/browser/themes/shared/devtools/widgets.inc.css
@@ -106,103 +106,200 @@
 }
 
 .scrollbutton-up > .toolbarbutton-icon:-moz-locale-dir(rtl),
 .scrollbutton-down > .toolbarbutton-icon:-moz-locale-dir(ltr) {
   transform: scaleX(-1);
 }
 
 .breadcrumbs-widget-item {
+  /*background-clip: content-box;*/
   background-color: transparent;
   -moz-appearance: none;
   overflow: hidden;
+  position: relative;
   min-width: 85px;
   max-width: 250px;
   min-height: 25px;
-  border-style: solid;
-  border-width: 1px 13px 2px 13px;
-  margin: 0 -11px 0 0;
-  padding: 0 9px;
+  padding: 0 22px;
+  margin: 0;
   outline: none;
+  border: none;
   color: hsl(210,30%,85%);
 }
+/*.breadcrumbs-widget-item,
+.breadcrumbs-widget-item > .button-box,
+.breadcrumbs-widget-item > label {
+  display: block;
+  text-align: center;
+
+}
+.breadcrumbs-widget-item > .button-box {
+  background: orange;
+}
+.breadcrumbs-widget-item > label  {
+  background: green;
+}*/
+
+/*.breadcrumbs-widget-item:-moz-locale-dir(ltr):not(:last-child)*/
+.breadcrumbs-widget-arrow:-moz-locale-dir(ltr) {
+  background-image: url(breadcrumb-dark@2x.png);
+  background-size: 12px 24px;
+  background-position: center right;
+  background-repeat: no-repeat;
+  width: 12px;
+}
+
+.breadcrumbs-widget-item[checked] + .breadcrumbs-widget-arrow:-moz-locale-dir(ltr) {
+  border-top: 12px solid transparent;
+  border-bottom: 12px solid transparent;
+  border-left: 12px solid #1d4f73;
+  width: 0;
+}
+
+.breadcrumbs-widget-arrow[test]:-moz-locale-dir(ltr) {
+  border-top: 12px solid transparent;
+  border-bottom: 12px solid transparent;
+  border-left: 12px solid #343c45;
+  width: 0;
+}
+
+.breadcrumbs-widget-item[checked] + .breadcrumbs-widget-arrow:-moz-locale-dir(ltr) {
+  border-top: 12px solid transparent;
+  border-bottom: 12px solid transparent;
+  border-left: 12px solid #1d4f73;
+  width: 0;
+}
+
+.breadcrumbs-widget-arrow:-moz-locale-dir(ltr):last-child {
+  display: none;
+}
 
 .breadcrumbs-widget-item:-moz-focusring > label {
   border-bottom: 1px dotted hsla(210,30%,85%,0.4);
+  border-top: 1px solid transparent;
 }
 
 .breadcrumbs-widget-item[checked] .breadcrumbs-widget-item-tag {
-  color: hsl(208,100%,60%);
+  color: hsl(208,100%,90%);
 }
 
 .breadcrumbs-widget-item[checked] .breadcrumbs-widget-item-id {
-  color: hsl(205,100%,70%);
+  color: hsl(205,100%,95%);
 }
 
 .breadcrumbs-widget-item[checked] .breadcrumbs-widget-item-pseudo-classes {
-  color: hsl(20,100%,70%);
+  color: hsl(20,100%,95%);
 }
 
 .breadcrumbs-widget-item-id,
 .breadcrumbs-widget-item-classes {
   color: #8d99a6;
 }
 
 .breadcrumbs-widget-item-pseudo-classes {
   color: hsl(20,100%,85%);
 }
 
 /* Breadcrumbs LTR */
 
-.breadcrumbs-widget-item:-moz-locale-dir(ltr) {
-  border-image: url("breadcrumbs/ltr-middle.png") 1 13 2 13 fill stretch;
+/*.breadcrumbs-widget-item:-moz-locale-dir(ltr):not(:last-child):after {
+  content: "";
+  width: 12px;
+  display: block;
+}*/
+
+/*
+.breadcrumbs-widget-item:-moz-locale-dir(ltr):last-child:after {
+  display: none;
 }
-
+*/
 .breadcrumbs-widget-item:not([checked]):hover:active:-moz-locale-dir(ltr) {
-  border-image: url("breadcrumbs/ltr-middle-pressed.png") 1 13 2 13 fill stretch;
+  /*border-image: url("breadcrumbs/ltr-middle-pressed.png") 1 13 2 13 fill stretch;*/
 }
 
 .breadcrumbs-widget-item[checked]:-moz-locale-dir(ltr) {
-  border-image: url("breadcrumbs/ltr-middle-selected.png") 1 13 2 13 fill stretch;
+  /*border-image: url("breadcrumbs/ltr-middle-selected.png") 1 13 2 13 fill stretch;*/
 }
 
+.breadcrumbs-widget-item[checked]:-moz-locale-dir(ltr) {
+  background-image: none;
+  background-color: #1d4f73;
+  /*margin-left: -12px;*/
+}
+
+.breadcrumbs-widget-item[checked]:-moz-locale-dir(ltr) + .breadcrumbs-widget-item:-moz-locale-dir(ltr) {
+  background-color: #343c45;
+}
+
+.breadcrumbs-widget-item[checked]:-moz-locale-dir(ltr):after {
+  display: none;
+}
+
+/*
+.breadcrumbs-widget-item[checked]:-moz-locale-dir(ltr) + .breadcrumbs-widget-item:-moz-locale-dir(ltr)::before,
+.breadcrumbs-widget-item[checked]:-moz-locale-dir(ltr)::before {
+  content: "";
+  display: block;
+  position: absolute;
+  left: -12px;
+  border-top: 12px solid transparent;
+  border-bottom: 12px solid transparent;
+  border-left: 12px solid;
+}
+.breadcrumbs-widget-item[checked]:-moz-locale-dir(ltr)::before {
+  border-left-color: #343c45;
+}
+.breadcrumbs-widget-item:first-child[checked]::before {
+  display: none;
+}
+.breadcrumbs-widget-item[checked]:-moz-locale-dir(ltr) + .breadcrumbs-widget-item:-moz-locale-dir(ltr)::before {
+  border-left-color: #1d4f73;
+}*/
+/*
+.breadcrumbs-widget-item[checked]:-moz-locale-dir(ltr):after {
+  position: absolute;
+  width: 10px;
+  left: 20px;
+}
+*/
 .breadcrumbs-widget-item[checked]:hover:active:-moz-locale-dir(ltr) {
-  border-image: url("breadcrumbs/ltr-middle-selected-pressed.png") 1 13 2 13 fill stretch;
+  /*border-image: url("breadcrumbs/ltr-middle-selected-pressed.png") 1 13 2 13 fill stretch;*/
 }
 
 .breadcrumbs-widget-item:first-of-type:-moz-locale-dir(ltr) {
-  border-image: url("breadcrumbs/ltr-start.png") 1 13 2 13 fill stretch;
+  /*border-image: url("breadcrumbs/ltr-start.png") 1 13 2 13 fill stretch;*/
 }
 
 .breadcrumbs-widget-item:first-of-type:not([checked]):hover:active:-moz-locale-dir(ltr) {
-  border-image: url("breadcrumbs/ltr-start-pressed.png") 1 13 2 13 fill stretch;
+  /*border-image: url("breadcrumbs/ltr-start-pressed.png") 1 13 2 13 fill stretch;*/
 }
 
 .breadcrumbs-widget-item:first-of-type[checked]:-moz-locale-dir(ltr) {
-  border-image: url("breadcrumbs/ltr-start-selected.png") 1 13 2 13 fill stretch;
+  /*border-image: url("breadcrumbs/ltr-start-selected.png") 1 13 2 13 fill stretch;*/
 }
 
 .breadcrumbs-widget-item:first-of-type[checked]:hover:active:-moz-locale-dir(ltr) {
-  border-image: url("breadcrumbs/ltr-start-selected-pressed.png") 1 13 2 13 fill stretch;
+  /*border-image: url("breadcrumbs/ltr-start-selected-pressed.png") 1 13 2 13 fill stretch;*/
 }
 
 .breadcrumbs-widget-item:last-of-type:-moz-locale-dir(ltr) {
-  border-image: url("breadcrumbs/ltr-end.png") 1 13 2 13 fill stretch;
+  /*border-image: url("breadcrumbs/ltr-end.png") 1 13 2 13 fill stretch;*/
 }
 
 .breadcrumbs-widget-item:last-of-type:not([checked]):hover:active:-moz-locale-dir(ltr) {
-  border-image: url("breadcrumbs/ltr-end-pressed.png") 1 13 2 13 fill stretch;
+  /*border-image: url("breadcrumbs/ltr-end-pressed.png") 1 13 2 13 fill stretch;*/
 }
 
 .breadcrumbs-widget-item:last-of-type[checked]:-moz-locale-dir(ltr) {
-  border-image: url("breadcrumbs/ltr-end-selected.png") 1 13 2 13 fill stretch;
+  /*border-image: url("breadcrumbs/ltr-end-selected.png") 1 13 2 13 fill stretch;*/
 }
 
 .breadcrumbs-widget-item:last-of-type[checked]:hover:active:-moz-locale-dir(ltr) {
-  border-image: url("breadcrumbs/ltr-end-selected-pressed.png") 1 13 2 13 fill stretch;
+  /*border-image: url("breadcrumbs/ltr-end-selected-pressed.png") 1 13 2 13 fill stretch;*/
 }
 
 .breadcrumbs-widget-container[overflows] > .breadcrumbs-widget-item:first-of-type:-moz-locale-dir(ltr) {
   border-left-width: 0;
 }
 
 .breadcrumbs-widget-container[overflows] > .breadcrumbs-widget-item:last-of-type:-moz-locale-dir(ltr) {
   border-right-width: 0;
