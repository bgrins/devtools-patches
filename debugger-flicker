# HG changeset patch
# Parent 65b0d08a49ac78eb5e729a69a4e8812231ab5593
# User Brian Grinstead <bgrinstead@mozilla.com>
Bug 1018955 - Pause/resume button flickers when debugger first loads

diff --git a/browser/devtools/debugger/debugger-controller.js b/browser/devtools/debugger/debugger-controller.js
--- a/browser/devtools/debugger/debugger-controller.js
+++ b/browser/devtools/debugger/debugger-controller.js
@@ -475,17 +475,18 @@ ThreadState.prototype = {
    */
   _update: function(aEvent) {
     // Ignore "interrupted" events, which are generated by the slow script
     // dialog and internal events such as setting breakpoints, to avoid UI
     // flicker.
     if (aEvent == "interrupted") {
       return;
     }
-
+console.log("UPDATE", gTarget, aEvent, this.activeThread, this.activeThread.state);
+console.trace();
     DebuggerView.Toolbar.toggleResumeButtonState(this.activeThread.state);
 
     if (gTarget && (aEvent == "paused" || aEvent == "resumed")) {
       gTarget.emit("thread-" + aEvent);
     }
   }
 };
 
diff --git a/browser/devtools/debugger/debugger-toolbar.js b/browser/devtools/debugger/debugger-toolbar.js
--- a/browser/devtools/debugger/debugger-toolbar.js
+++ b/browser/devtools/debugger/debugger-toolbar.js
@@ -89,16 +89,18 @@ ToolbarView.prototype = {
   /**
    * Sets the resume button state based on the debugger active thread.
    *
    * @param string aState
    *        Either "paused" or "attached".
    */
   toggleResumeButtonState: function(aState) {
     // If we're paused, check and show a resume label on the button.
+    console.log("STATE TOGGLED", aState);
+    console.trace();
     if (aState == "paused") {
       this._resumeButton.setAttribute("checked", "true");
       this._resumeButton.setAttribute("tooltiptext", this._resumeTooltip);
     }
     // If we're attached, do the opposite.
     else if (aState == "attached") {
       this._resumeButton.removeAttribute("checked");
       this._resumeButton.setAttribute("tooltiptext", this._pauseTooltip);
