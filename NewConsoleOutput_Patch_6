# HG changeset patch
# User Lin Clark <lclark@mozilla.com>
Bug 1306622 - New console frontend: Fix stacktrace expandable closure. r=me


diff --git a/devtools/client/webconsole/new-console-output/components/message.js b/devtools/client/webconsole/new-console-output/components/message.js
index ae2c0eb..56592a4 100644
--- a/devtools/client/webconsole/new-console-output/components/message.js
+++ b/devtools/client/webconsole/new-console-output/components/message.js
@@ -64,24 +64,21 @@ function Message(props) {
 
   const icon = MessageIcon({level});
 
   // Figure out if there is an expandable part to the message.
   let attachment = null;
   if (props.attachment) {
     attachment = props.attachment;
   } else if (stacktrace) {
-    if (open) {
-      attachment = dom.div({ className: "stacktrace devtools-monospace" },
-        StackTrace({
-          stacktrace: stacktrace,
-          onViewSourceInDebugger: onViewSourceInDebugger
-        })
-      );
-    }
+    const child = open ? StackTrace({
+      stacktrace: stacktrace,
+      onViewSourceInDebugger: onViewSourceInDebugger
+    }) : null;
+    attachment = dom.div({ className: "stacktrace devtools-monospace" }, child);
   }
 
   // If there is an expandable part, make it collapsible.
   let collapse = null;
   if (attachment) {
     collapse = CollapseButton({
       open,
       onClick: function () {
