# HG changeset patch
# Parent 00f6ab844b643f206cd9660db700925b6187ab1d
# User Brian Grinstead <bgrinstead@mozilla.com>
asdf

diff --git a/browser/base/content/browser-devedition.js b/browser/base/content/browser-devedition.js
--- a/browser/base/content/browser-devedition.js
+++ b/browser/base/content/browser-devedition.js
@@ -12,17 +12,16 @@ let DevEdition = {
   _lwThemePrefName: "lightweightThemes.isThemeSelected",
   _devtoolsThemePrefName: "devtools.theme",
 
   styleSheetLocation: "chrome://browser/skin/devedition.css",
   styleSheet: null,
 
   init: function () {
     this._updateDevtoolsThemeAttribute();
-    this._updateStyleSheetFromPrefs();
 
     // Listen for changes to all prefs except for complete themes.
     // No need for this since changing a complete theme requires a
     // restart.
     Services.prefs.addObserver(this._lwThemePrefName, this, false);
     Services.prefs.addObserver(this._prefName, this, false);
     Services.prefs.addObserver(this._devtoolsThemePrefName, this, false);
     Services.obs.addObserver(this, "lightweight-theme-styling-update", false);
@@ -51,17 +50,30 @@ let DevEdition = {
   },
 
   _updateDevtoolsThemeAttribute: function() {
     // Set an attribute on root element to make it possible
     // to change colors based on the selected devtools theme.
     document.documentElement.setAttribute("devtoolstheme",
       Services.prefs.getCharPref(this._devtoolsThemePrefName));
     ToolbarIconColor.inferFromText();
-    this._updateStyleSheetFromPrefs();
+
+    let builtinDevtoolsThemeSelected = false;
+    try {
+      let devtoolsTheme = Services.prefs.getCharPref(this._devtoolsThemePrefName);
+      builtinDevtoolsThemeSelected = devtoolsTheme == "dark" ||
+                                     devtoolsTheme == "light";
+    } catch(e) {}
+
+    if (builtinDevtoolsThemeSelected) {
+      this._updateStyleSheetFromPrefs();
+    } else {
+      this._toggleStyleSheet(false);
+    }
+
   },
 
   _updateStyleSheetFromPrefs: function() {
     let lightweightThemeSelected = false;
     try {
       lightweightThemeSelected = Services.prefs.getBoolPref(this._lwThemePrefName);
     } catch(e) {}
 
