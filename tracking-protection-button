# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  dcfc689e53ae34ecf9626650cf090abd836db7a8
Bug 1175239 - Replace tracking protection drop-down control with a button

diff --git a/browser/base/content/test/general/browser_trackingUI.js b/browser/base/content/test/general/browser_trackingUI.js
--- a/browser/base/content/test/general/browser_trackingUI.js
+++ b/browser/base/content/test/general/browser_trackingUI.js
@@ -75,16 +75,18 @@ function* testTrackingPage(gTestBrowser)
   is(PopupNotifications.panel.firstChild.isTrackingContentBlocked,
      Ci.nsIWebProgressListener.STATE_BLOCKED_TRACKING_CONTENT,
      "Tracking Content is being blocked");
 
   // Make sure the notification has no trackingblockdisabled attribute
   ok(!PopupNotifications.panel.firstChild.hasAttribute("trackingblockdisabled"),
     "Doorhanger must have no trackingblockdisabled attribute");
 
+
+console.log("HERE", PopupNotifications.panel.firstChild, PopupNotifications.panel);
   // Disable Tracking Content Protection for the page (which reloads the page)
   PopupNotifications.panel.firstChild.disableTrackingContentProtection();
 }
 
 function testTrackingPageWhitelisted(gTestBrowser)
 {
   // Make sure the doorhanger appears
   var notification = PopupNotifications.getNotification("bad-content", gTestBrowser);
diff --git a/browser/base/content/urlbarBindings.xml b/browser/base/content/urlbarBindings.xml
--- a/browser/base/content/urlbarBindings.xml
+++ b/browser/base/content/urlbarBindings.xml
@@ -2217,29 +2217,29 @@ file, You can obtain one at http://mozil
                   xbl:inherits="popupid,trackingblockdisabled">
                   &trackingContentBlocked.moreinfo;
                 </xul:description>
                 <xul:label anonid="trackingContent.helplink"
                   class="text-link" href=""
                   value="&trackingContentBlocked.learnMore;"/>
               </xul:vbox>
               <xul:button
-                type="menu" label="&trackingContentBlocked.options;"
-                sizetopopup="none">
-                <xul:menupopup>
-                  <xul:menuitem anonid="trackingContentAction.unblock"
-                    hidden="true" label="&trackingContentBlocked.unblock2.label;"
-                    accesskey="&trackingContentBlocked.unblock2.accesskey;"
-                    oncommand="document.getBindingParent(this).disableTrackingContentProtection();"/>
-                  <xul:menuitem anonid="trackingContentAction.block"
-                    hidden="true" label="&trackingContentBlocked.block.label;"
-                    accesskey="&trackingContentBlocked.block.accesskey;"
-                    oncommand="document.getBindingParent(this).enableTrackingContentProtection();"/>
-                </xul:menupopup>
-              </xul:button>
+                label="&trackingContentBlocked.unblock2.label;"
+                accesskey="&trackingContentBlocked.unblock2.accesskey;"
+                anonid="trackingContentAction.unblock"
+                hidden="true"
+                oncommand="document.getBindingParent(this).disableTrackingContentProtection();"
+              />
+              <xul:button
+                label="&trackingContentBlocked.block1.label;"
+                accesskey="&trackingContentBlocked.block1.accesskey;"
+                anonid="trackingContentAction.block"
+                hidden="true"
+                oncommand="document.getBindingParent(this).enableTrackingContentProtection();"
+              />
             </xul:hbox>
             <xul:hbox class="popup-notification-footer" xbl:inherits="popupid,trackingblockdisabled">
               <xul:description class="popup-notification-item-message popup-notification-item-message-critical" xbl:inherits="popupid">
                 &trackingContentBlocked.disabled.message;
                 </xul:description>
             </xul:hbox>
           </xul:vbox>
         </xul:vbox>
diff --git a/browser/locales/en-US/chrome/browser/browser.dtd b/browser/locales/en-US/chrome/browser/browser.dtd
--- a/browser/locales/en-US/chrome/browser/browser.dtd
+++ b/browser/locales/en-US/chrome/browser/browser.dtd
@@ -767,18 +767,18 @@ you can use these alternative items. Oth
 <!ENTITY mixedContentBlocked2.disabled.message "Protection is disabled">
 
 <!ENTITY trackingContentBlocked.message "Tracking">
 <!ENTITY trackingContentBlocked.moreinfo "Parts of the page that track your online activity have been blocked.">
 <!ENTITY trackingContentBlocked.learnMore "Learn More">
 <!ENTITY trackingContentBlocked.options "Options">
 <!ENTITY trackingContentBlocked.unblock2.label "Disable protection for this site">
 <!ENTITY trackingContentBlocked.unblock2.accesskey "D">
-<!ENTITY trackingContentBlocked.block.label "Enable protection">
-<!ENTITY trackingContentBlocked.block.accesskey "E">
+<!ENTITY trackingContentBlocked.block1.label "Enable protection for this site">
+<!ENTITY trackingContentBlocked.block1.accesskey "E">
 <!ENTITY trackingContentBlocked.disabled.message "Tracking protection is disabled">
 
 <!ENTITY pointerLock.notification.message "Press ESC at any time to show it again.">
 
 <!ENTITY pluginNotification.showAll.label "Show All">
 <!ENTITY pluginNotification.showAll.accesskey "S">
 
 <!-- LOCALIZATION NOTE (pluginActivateNow.label, pluginActivateAlways.label, pluginBlockNow.label): These should be the same as the matching strings in browser.properties -->
