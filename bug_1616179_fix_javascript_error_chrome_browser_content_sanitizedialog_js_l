# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Date 1582053241 28800
#      Tue Feb 18 11:14:01 2020 -0800
# Node ID 1b65c990dbcbfc58df18a6a4da4a9df8278791ef
# Parent  a5e2eb343af7ca8c6e98869d276e47c84a2c88af
Bug 1616179 - Fix `JavaScript error: chrome://browser/content/sanitizeDialog.js, line 70: TypeError: right-hand side of 'in' should be an object, got null` error when sanitize dialog is opened outside of preferences;r=jaws

This error has been present since the initial landing in Bug 1523696.

This is unrelated to the fix in the next patch, just something I noticed when debugging it.

Differential Revision: https://phabricator.services.mozilla.com/D63233

diff --git a/browser/base/content/sanitizeDialog.js b/browser/base/content/sanitizeDialog.js
--- a/browser/base/content/sanitizeDialog.js
+++ b/browser/base/content/sanitizeDialog.js
@@ -62,17 +62,17 @@ var gSanitizePromptDialog = {
           ).domWindow;
           return rootWin.promiseDocumentFlushed(() => {});
         });
     } else {
       this.warningBox.hidden = true;
     }
 
     // Only apply the following if the dialog is opened outside of the Preferences.
-    if (!("gSubDialog" in window.opener)) {
+    if (!window.opener || !("gSubDialog" in window.opener)) {
       // The style attribute on the dialog may get set after the dialog has been sized.
       // Force the dialog to size again after the style attribute has been applied.
       document.l10n.translateElements([document.documentElement]).then(() => {
         window.sizeToContent();
       });
     }
   },
 
