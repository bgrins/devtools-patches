# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  1423f8fd3e710b3da7995b1e0533a72fcf709130
Bug 1175239 - Replace tracking protection drop-down control with a button;r=MattN

diff --git a/browser/base/content/browser-trackingprotection.js b/browser/base/content/browser-trackingprotection.js
--- a/browser/base/content/browser-trackingprotection.js
+++ b/browser/base/content/browser-trackingprotection.js
@@ -17,17 +17,16 @@ let TrackingProtection = {
   },
 
   resetUI: function() {
     this.container.hidden = !this.enabled;
     this.trackingContentBlock.hidden =
       this.trackingContentUnblock.hidden =
       this.trackingDetectedEnabled.hidden =
       this.trackingDetectedDisabled.hidden =
-      this.trackingContentActions.hidden =
       this.trackingNotDetected.hidden = true;
     this.container.removeAttribute("trackingblockdisabled");
   },
 
   updateState: function(state) {
 
     this.resetUI();
     if (!this.enabled) {
@@ -36,23 +35,21 @@ let TrackingProtection = {
 
     let {
       STATE_BLOCKED_TRACKING_CONTENT, STATE_LOADED_TRACKING_CONTENT
     } = Ci.nsIWebProgressListener;
 
     if (state & STATE_BLOCKED_TRACKING_CONTENT) {
       this.trackingContentUnblock.hidden = false;
       this.trackingDetectedEnabled.hidden = false;
-      this.trackingContentActions.hidden = false;
     }
     else if (state & STATE_LOADED_TRACKING_CONTENT) {
       this.container.setAttribute("trackingblockdisabled", true);
       this.trackingDetectedDisabled.hidden = false;
       this.trackingContentBlock.hidden = false;
-      this.trackingContentActions.hidden = false;
     }
     else {
       // no tracking on page
       this.trackingNotDetected.hidden = false;
     }
 
     if (this.enabled) {
       let histogram = Services.telemetry.getHistogramById("TRACKING_PROTECTION_EVENTS");
@@ -88,20 +85,16 @@ let TrackingProtection = {
   get trackingNotDetected() {
     return document.getElementById("tracking-not-detected");
   },
 
   get trackingContentUnblock() {
     return document.getElementById("trackingContentActionUnblock");
   },
 
-  get trackingContentActions() {
-    return document.getElementById("trackingContentActions");
-  },
-
   get trackingContentBlock() {
     return document.getElementById("trackingContentActionBlock");
   },
 
   get titleElement() {
     return document.getElementById("badContentBlockedTitle");
   },
 
diff --git a/browser/components/controlcenter/content/panel.inc.xul b/browser/components/controlcenter/content/panel.inc.xul
--- a/browser/components/controlcenter/content/panel.inc.xul
+++ b/browser/components/controlcenter/content/panel.inc.xul
@@ -60,32 +60,48 @@
           &trackingProtection.detectedNotBlocked;
         </label>
         <label id="tracking-not-detected"
                class="tracking-protection-label"
                crop="end">
           &trackingProtection.notDetected;
         </label>
 
+
+        <button
+          label="&trackingContentBlocked.unblock2.label;"
+          accesskey="&trackingContentBlocked.unblock2.accesskey;"
+          id="trackingContentActionUnblock"
+          hidden="true"
+          oncommand="TrackingProtection.disableTrackingContentProtection();"
+        />
+        <button
+          label="&trackingContentBlocked.block1.label;"
+          accesskey="&trackingContentBlocked.block1.accesskey;"
+          id="trackingContentActionBlock"
+          hidden="true"
+          oncommand="TrackingProtection.enableTrackingContentProtection();"
+        />
+        <!--
         <button id="trackingContentActions"
           type="menu" label="&trackingContentBlocked.options;"
           sizetopopup="none">
           <menupopup>
             <menuitem
               id="trackingContentActionUnblock"
               label="&trackingContentBlocked.unblock2.label;"
               accesskey="&trackingContentBlocked.unblock2.accesskey;"
               oncommand="TrackingProtection.disableTrackingContentProtection();"/>
             <menuitem
               id="trackingContentActionBlock"
               label="&trackingContentBlocked.block.label;"
               accesskey="&trackingContentBlocked.block.accesskey;"
               oncommand="TrackingProtection.enableTrackingContentProtection();"/>
           </menupopup>
-        </button>
+        </button> -->
       </vbox>
     </hbox>
 
   </hbox>
 
 
 
   <!-- Footer button to open security page info -->
diff --git a/browser/locales/en-US/chrome/browser/browser.dtd b/browser/locales/en-US/chrome/browser/browser.dtd
--- a/browser/locales/en-US/chrome/browser/browser.dtd
+++ b/browser/locales/en-US/chrome/browser/browser.dtd
@@ -776,18 +776,18 @@ you can use these alternative items. Oth
 <!ENTITY trackingContentBlocked.moreinfo "Parts of the page that track your online activity have been blocked.">
 <!ENTITY trackingContentBlocked.disabled.message "Tracking protection is disabled">
 <!ENTITY trackingContentBlocked.learnMore "Learn More">
 <!ENTITY trackingContentBlocked.options "Options">
 <!-- /XXX -->
 
 <!ENTITY trackingContentBlocked.unblock2.label "Disable protection for this site">
 <!ENTITY trackingContentBlocked.unblock2.accesskey "D">
-<!ENTITY trackingContentBlocked.block.label "Enable protection">
-<!ENTITY trackingContentBlocked.block.accesskey "E">
+<!ENTITY trackingContentBlocked.block1.label "Enable protection for this site">
+<!ENTITY trackingContentBlocked.block1.accesskey "E">
 
 <!ENTITY pointerLock.notification.message "Press ESC at any time to show it again.">
 
 <!ENTITY pluginNotification.showAll.label "Show All">
 <!ENTITY pluginNotification.showAll.accesskey "S">
 
 <!-- LOCALIZATION NOTE (pluginActivateNow.label, pluginActivateAlways.label, pluginBlockNow.label): These should be the same as the matching strings in browser.properties -->
 <!ENTITY pluginActivateNow.label "Allow Now">
