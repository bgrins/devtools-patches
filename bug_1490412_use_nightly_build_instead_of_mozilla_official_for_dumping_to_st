# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Date 1536698240 25200
#      Tue Sep 11 13:37:20 2018 -0700
# Node ID f3f5021b79f1e12ff03f7b0c9c5da03ae15241fd
# Parent  423bdf7a802b0d302244492b423609187de39f56
Bug 1490412 - Use NIGHTLY_BUILD instead of !MOZILLA_OFFICIAL for dumping to stdout

MOZ_OFFICIAL is true for binaries fetched in artifact builds, so
browser.dom.window.dump.enabled is false. This isn't intended behavior -
local builds should have dumping enabled by default.

Differential Revision: https://phabricator.services.mozilla.com/D5586

diff --git a/modules/libpref/init/StaticPrefList.h b/modules/libpref/init/StaticPrefList.h
--- a/modules/libpref/init/StaticPrefList.h
+++ b/modules/libpref/init/StaticPrefList.h
@@ -349,20 +349,20 @@ VARCACHE_PREF(
 #ifdef JS_BUILD_BINAST
 VARCACHE_PREF(
   "dom.script_loader.binast_encoding.enabled",
    dom_script_loader_binast_encoding_enabled,
   RelaxedAtomicBool, false
 )
 #endif
 
-#ifdef MOZILLA_OFFICIAL
+#ifdef NIGHTLY_BUILD
+# define PREF_VALUE true
+#else
 # define PREF_VALUE false
-#else
-# define PREF_VALUE true
 #endif
 VARCACHE_PREF(
   "browser.dom.window.dump.enabled",
    browser_dom_window_dump_enabled,
   RelaxedAtomicBool, PREF_VALUE
 )
 #undef PREF_VALUE
 
