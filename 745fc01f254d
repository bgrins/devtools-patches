
# HG changeset patch
# User Jan Odvarko <odvarko@gmail.com>
# Date 1497537827 -7200
# Node ID 745fc01f254d4a25d1df8dfd6a406468ae055b78
# Parent  a843f7c78cce2d7fda42aa6c2399d314f6c888db
Bug 1326937 - Patch react-dom to avoid double load

MozReview-Commit-ID: CEMsI7CvqHS

diff --git a/devtools/client/shared/vendor/react-dom.js b/devtools/client/shared/vendor/react-dom.js
--- a/devtools/client/shared/vendor/react-dom.js
+++ b/devtools/client/shared/vendor/react-dom.js
@@ -146,20 +146,22 @@
     // This execution context doesn't know about XULDocuments, so don't get the toolbox.
     if (typeof XULDocument !== "function") {
       return null;
     }
 
     let doc = node.ownerDocument;
     const inspectorUrl = "chrome://devtools/content/inspector/inspector.xhtml";
     const netMonitorUrl = "chrome://devtools/content/netmonitor/netmonitor.xhtml";
+    const webConsoleUrl = "chrome://devtools/content/webconsole/webconsole.xhtml";
 
     while (doc instanceof XULDocument ||
            doc.location.href === inspectorUrl ||
-           doc.location.href === netMonitorUrl) {
+           doc.location.href === netMonitorUrl ||
+           doc.location.href === webConsoleUrl) {
       const {frameElement} = doc.defaultView;
 
       if (!frameElement) {
         // We're at the root element, and no toolbox was found.
         return null;
       }
 
       doc = frameElement.parentElement.ownerDocument;

