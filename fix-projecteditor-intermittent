# HG changeset patch
# Parent 53fd178424d05176f35b5f9e37322f68508b04c5
# User Brian Grinstead <bgrinstead@mozilla.com>
Bug 1083657 - Fix intermittent 'this.editor is null' in projecteditor;r=paul

diff --git a/browser/devtools/projecteditor/lib/editors.js b/browser/devtools/projecteditor/lib/editors.js
--- a/browser/devtools/projecteditor/lib/editors.js
+++ b/browser/devtools/projecteditor/lib/editors.js
@@ -199,17 +199,17 @@ var TextEditor = Class({
    * @param Resource resource
    *        The single file / item that is being dealt with (see stores/base)
    * @returns Promise
    *          A promise that is resolved once the text editor has loaded the
    *          contents of the resource.
    */
   load: function(resource) {
     // Wait for the editor.appendTo and resource.load before proceeding.
-    // They can run  in parallel.
+    // They can run in parallel.
     return promise.all([
       resource.load(),
       this.appended
     ]).then(([resourceContents])=> {
       if (!this.editor) {
         return;
       }
       this._savedResourceContents = resourceContents;
@@ -240,17 +240,19 @@ var TextEditor = Class({
   /**
    * Give focus to the code editor.
    *
    * @returns Promise
    *          A promise that is resolved once the editor has been focused.
    */
   focus: function() {
     return this.appended.then(() => {
-      this.editor.focus();
+      if (this.editor) {
+        this.editor.focus();
+      }
     });
   }
 });
 
 /**
  * Wrapper for TextEditor using JavaScript syntax highlighting.
  */
 function JSEditor(host) {
