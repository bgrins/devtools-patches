# HG changeset patch
# Parent a82804264e6e91f19d9ff430fdc9aa39ba62d9d3
# User Brian Grinstead <bgrinstead@mozilla.com>
Bug 1091001 - Convert tabToolbarNavbarOverlap,tabCurveWidth,tabCurveHalfWidth to CSS variables;r=MattN

diff --git a/browser/themes/shared/tabs.inc.css b/browser/themes/shared/tabs.inc.css
--- a/browser/themes/shared/tabs.inc.css
+++ b/browser/themes/shared/tabs.inc.css
@@ -1,16 +1,18 @@
 %if 0
 /* This Source Code Form is subject to the terms of the Mozilla Public
  * License, v. 2.0. If a copy of the MPL was not distributed with this
  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
 %endif
 
-%define tabCurveWidth 30px
-%define tabCurveHalfWidth 15px
+:root {
+  --tab-curve-width: 30px;
+  --tab-curve-half-width: 15px;
+}
 
 /* image preloading hack */
 #tabbrowser-tabs::before {
   /* Because of bug 853415, we need to ordinal this to the first position: */
   -moz-box-ordinal-group: 0;
   content: '';
   display: block;
   background-image:
@@ -45,19 +47,22 @@
 .tabbrowser-tab[selected=true] {
   position: relative;
   z-index: 2;
 }
 
 .tab-background-middle {
   -moz-box-flex: 1;
   background-clip: padding-box;
-  border-left: @tabCurveHalfWidth@ solid transparent;
-  border-right: @tabCurveHalfWidth@ solid transparent;
-  margin: 0 -@tabCurveHalfWidth@;
+  border-left: var(--tab-curve-half-width) solid transparent;
+  border-right: var(--tab-curve-half-width) solid transparent;
+  /* XXX: http://jsbin.com/livafoxama/3/edit?html,css,output */
+  margin: 0;
+  -moz-margin-start: calc(0px - var(--tab-curve-half-width));
+  -moz-margin-end: calc(0px - var(--tab-curve-half-width));
 }
 
 .tab-content {
   -moz-padding-end: 9px;
   -moz-padding-start: 9px;
 }
 
 .tab-throbber,
@@ -98,23 +103,23 @@
   -moz-margin-start: 4px;
   -moz-margin-end: -2px;
   padding: 0;
 }
 
 .tab-background,
 .tabs-newtab-button {
   /* overlap the tab curves */
-  -moz-margin-end: -@tabCurveHalfWidth@;
-  -moz-margin-start: -@tabCurveHalfWidth@;
+  -moz-margin-end: calc(0px - var(--tab-curve-half-width));
+  -moz-margin-start: calc(0px - var(--tab-curve-half-width));
 }
 
 .tabbrowser-arrowscrollbox > .arrowscrollbox-scrollbox {
-  -moz-padding-end: @tabCurveHalfWidth@;
-  -moz-padding-start: @tabCurveHalfWidth@;
+  -moz-padding-end: var(--tab-curve-half-width);
+  -moz-padding-start: var(--tab-curve-half-width);
 }
 
 /* Tab Overflow */
 .tabbrowser-arrowscrollbox > .arrowscrollbox-overflow-start-indicator:not([collapsed]),
 .tabbrowser-arrowscrollbox > .arrowscrollbox-overflow-end-indicator:not([collapsed]) {
   background-image: url(chrome://browser/skin/tabbrowser/tab-overflow-indicator.png);
   background-size: 100% 100%;
   width: 14px;
@@ -151,17 +156,17 @@
 
 .tab-background-start[selected=true]::after,
 .tab-background-start[selected=true]::before,
 .tab-background-start,
 .tab-background-end,
 .tab-background-end[selected=true]::after,
 .tab-background-end[selected=true]::before {
   min-height: @tabMinHeight@;
-  width: @tabCurveWidth@;
+  width: var(--tab-curve-width);
 }
 
 .tabbrowser-tab:not([selected=true]),
 .tabbrowser-tab:-moz-lwtheme {
   color: inherit;
 }
 
 /* Selected tab */
@@ -173,17 +178,17 @@
    - ::after  - provides the border/stroke of the tab curve and is overlayed above ::before.  Pointer
                 events go through to ::before to get the proper shape.
  */
 
 
 .tab-background-start[selected=true]::after,
 .tab-background-end[selected=true]::after {
   /* position ::after on top of its parent */
-  -moz-margin-start: -@tabCurveWidth@;
+  -moz-margin-start: calc(0px - var(--tab-curve-width));
   background-size: 100% 100%;
   content: "";
   display: -moz-box;
   position: relative;
 }
 
 .tab-background-start[selected=true]::before,
 .tab-background-end[selected=true]::before {
@@ -264,19 +269,19 @@
 /* End selected tab */
 
 /* new tab button border and gradient on hover */
 .tabbrowser-tab:hover > .tab-stack > .tab-background:not([selected=true]),
 .tabs-newtab-button:hover {
   background-image: url(chrome://browser/skin/tabbrowser/tab-background-start.png),
                     url(chrome://browser/skin/tabbrowser/tab-background-middle.png),
                     url(chrome://browser/skin/tabbrowser/tab-background-end.png);
-  background-position: left bottom, @tabCurveWidth@ bottom, right bottom;
+  background-position: left bottom, var(--tab-curve-width) bottom, right bottom;
   background-repeat: no-repeat;
-  background-size: @tabCurveWidth@ 100%, calc(100% - (2 * @tabCurveWidth@)) 100%, @tabCurveWidth@ 100%;
+  background-size: var(--tab-curve-width) 100%, calc(100% - (2 * var(--tab-curve-width))) 100%, var(--tab-curve-width) 100%;
 }
 
 /* Tab pointer-events */
 .tabbrowser-tab {
   pointer-events: none;
 }
 
 .tab-background-middle,
@@ -314,10 +319,10 @@
   content: "";
   display: -moz-box;
   width: 3px;
 }
 
 /* New tab button */
 
 .tabs-newtab-button {
-  width: calc(36px + @tabCurveWidth@);
+  width: calc(36px + var(--tab-curve-width));
 }
