# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  4701c4ddb60c50da571e189ca525c0bdc819fb22
Bug 1175858 - TP shield should be animated when TP has blocked content on the page;r=MattN

diff --git a/browser/themes/shared/identity-block/identity-block.inc.css b/browser/themes/shared/identity-block/identity-block.inc.css
--- a/browser/themes/shared/identity-block/identity-block.inc.css
+++ b/browser/themes/shared/identity-block/identity-block.inc.css
@@ -38,16 +38,17 @@
 %endif
 }
 
 #identity-box {
   background-position: right;
   background-size: 1px;
   background-repeat: no-repeat;
   background-image: var(--identity-box-background-image);
+  overflow: hidden;
 }
 
 #identity-box:-moz-locale-dir(rtl) {
   background-position: left;
 }
 
 #identity-box:hover,
 #identity-box[open=true] {
@@ -65,24 +66,31 @@
 }
 
 /* TRACKING PROTECTION ICON */
 
 #tracking-protection-icon {
   width: 16px;
   height: 16px;
   list-style-image: url(chrome://browser/skin/tracking-protection-16.svg);
+  margin-left: 0;
+  transition: margin-left 200ms ease-out;
+  opacity: 1;
 }
 
 #tracking-protection-icon[state="loaded-tracking-content"] {
   list-style-image: url(chrome://browser/skin/tracking-protection-disabled-16.svg);
 }
 
 #tracking-protection-icon:not([state]) {
-  display: none;
+  margin-left: -16px;
+  pointer-events: none;
+  opacity: 0;
+  /* Only animate the shield in, when it disappears hide it immediately. */
+  transition: none;
 }
 
 /* MAIN IDENTITY ICON */
 
 #page-proxy-favicon {
   width: 16px;
   height: 16px;
   list-style-image: url(chrome://browser/skin/identity-not-secure.svg);
