# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  e98b622a03442300f101e60c57e7c71e02b6d7c3
Bug 1392352 - Part 3.2 - To fold: remove build instructions and reorganize things a bit;r=dao

MozReview-Commit-ID: AMZbgh9Ri2f

diff --git a/browser/base/content/tabbrowser.js b/browser/base/content/tabbrowser.js
--- a/browser/base/content/tabbrowser.js
+++ b/browser/base/content/tabbrowser.js
@@ -1,23 +1,15 @@
 /* -*- indent-tabs-mode: nil; js-indent-level: 2 -*-
  * This Source Code Form is subject to the terms of the Mozilla Public
  * License, v. 2.0. If a copy of the MPL was not distributed with this
  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
 
 /* eslint-env mozilla/browser-window */
 
-// STEPS TO BUILD:
-// Generate the class with `npm run elements` from https://github.com/bgrins/xbl-analysis
-// Replace document.getAnonymousElementByAttribute(this, ..) with document.getAnonymousElementByAttribute(this.container)
-// Add: `// eslint-disable-next-line complexity` before `  addTab(`
-// Replace `window.getComputedStyle(this` with `window.getComputedStyle(this.container`
-// Get rid of all calls to getService except for nsIEventListenerService.
-// Run `./mach eslint browser/base/content/tabbrowser.js --fix`
-
 class TabBrowser {
   constructor(container) {
     this.container = container;
     this.requiresAddonInterpositions = true;
 
     // Pass along any used DOM methods to the container node. When this object turns
     // into a custom element this won't be needed anymore.
     this.addEventListener = this.container.addEventListener.bind(this.container);
@@ -28,18 +20,16 @@ class TabBrowser {
     this.setAttribute = this.container.setAttribute.bind(this.container);
     this.removeAttribute = this.container.removeAttribute.bind(this.container);
     this.appendChild = this.container.appendChild.bind(this.container);
     this.ownerGlobal = this.container.ownerGlobal;
     this.ownerDocument = this.container.ownerDocument;
     this.namespaceURI = this.container.namespaceURI;
     this.style = this.container.style;
 
-    this.initialBrowser = document.getAnonymousElementByAttribute(this.container, "anonid", "initialBrowser");
-
     XPCOMUtils.defineLazyServiceGetters(this, {
       _unifiedComplete: ["@mozilla.org/autocomplete/search;1?name=unifiedcomplete", "mozIPlacesAutoComplete"],
       serializationHelper: ["@mozilla.org/network/serialization-helper;1", "nsISerializationHelper"],
       mURIFixup: ["@mozilla.org/docshell/urifixup;1", "nsIURIFixup"],
     });
 
     XPCOMUtils.defineLazyGetter(this, "tabContainer", () => {
       return document.getElementById(this.getAttribute("tabcontainer"));
@@ -49,17 +39,18 @@ class TabBrowser {
     });
     XPCOMUtils.defineLazyGetter(this, "tabbox", () => {
       return document.getAnonymousElementByAttribute(this.container, "anonid", "tabbox");
     });
     XPCOMUtils.defineLazyGetter(this, "mPanelContainer", () => {
       return document.getAnonymousElementByAttribute(this.container, "anonid", "panelcontainer");
     });
 
-    // For upgrading replace below here:
+    this.initialBrowser = document.getAnonymousElementByAttribute(this.container, "anonid", "initialBrowser");
+
     this.closingTabsEnum = { ALL: 0, OTHER: 1, TO_END: 2 };
 
     this._visibleTabs = null;
 
     this.mCurrentTab = null;
 
     this._lastRelatedTabMap = new WeakMap();
 
