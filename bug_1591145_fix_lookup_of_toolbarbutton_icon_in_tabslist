# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Date 1572905630 28800
#      Mon Nov 04 14:13:50 2019 -0800
# Node ID bae1d76e646a73af2b1edb34ddcfdf277ccb19ef
# Parent  fa1628003bf9a7e55c04904733bd56c9a303df2f
Bug 1591145 - Fix lookup of toolbarbutton-icon in TabsList

document.getAnonymousElementByAttribute is dead code now, and even when it wasn't this would
have returned null ever since <toolbarbutton> stopped using XBL.

Differential Revision: https://phabricator.services.mozilla.com/D51727

diff --git a/browser/modules/TabsList.jsm b/browser/modules/TabsList.jsm
--- a/browser/modules/TabsList.jsm
+++ b/browser/modules/TabsList.jsm
@@ -274,27 +274,17 @@ class TabsPanel extends TabsListBase {
       soundplaying: tab.soundPlaying,
       pictureinpicture: tab.pictureinpicture,
       hidden: !(tab.muted || tab.soundPlaying),
     });
   }
 
   _setImageAttributes(row, tab) {
     let button = row.firstElementChild;
-    let image =
-      this.doc.getAnonymousElementByAttribute(
-        button,
-        "class",
-        "toolbarbutton-icon"
-      ) ||
-      this.doc.getAnonymousElementByAttribute(
-        button,
-        "class",
-        "toolbarbutton-icon tab-throbber-tabslist"
-      );
+    let image = button.icon;
 
     if (image) {
       let busy = tab.getAttribute("busy");
       let progress = tab.getAttribute("progress");
       setAttributes(image, { busy, progress });
       if (busy) {
         image.classList.add("tab-throbber-tabslist");
       } else {
