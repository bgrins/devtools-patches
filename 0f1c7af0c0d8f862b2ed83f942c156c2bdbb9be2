
# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Date 1515457343 28800
# Node ID 0f1c7af0c0d8f862b2ed83f942c156c2bdbb9be2
# Parent  681eb7dfa324dd50403c382888929ea8b8b11b00
Bug XXX - remove editor binding

diff --git a/toolkit/content/jar.mn b/toolkit/content/jar.mn
--- a/toolkit/content/jar.mn
+++ b/toolkit/content/jar.mn
@@ -69,17 +69,16 @@ toolkit.jar:
    content/global/bindings/checkbox.xml        (widgets/checkbox.xml)
    content/global/bindings/colorpicker.xml     (widgets/colorpicker.xml)
    content/global/bindings/datekeeper.js       (widgets/datekeeper.js)
    content/global/bindings/datepicker.js       (widgets/datepicker.js)
    content/global/bindings/datetimepopup.xml   (widgets/datetimepopup.xml)
    content/global/bindings/datetimebox.xml     (widgets/datetimebox.xml)
    content/global/bindings/datetimebox.css     (widgets/datetimebox.css)
 *  content/global/bindings/dialog.xml          (widgets/dialog.xml)
-   content/global/bindings/editor.xml          (widgets/editor.xml)
 *  content/global/bindings/findbar.xml         (widgets/findbar.xml)
    content/global/bindings/general.xml         (widgets/general.xml)
    content/global/bindings/groupbox.xml        (widgets/groupbox.xml)
    content/global/bindings/listbox.xml         (widgets/listbox.xml)
    content/global/bindings/menu.xml            (widgets/menu.xml)
    content/global/bindings/menulist.xml        (widgets/menulist.xml)
    content/global/bindings/notification.xml    (widgets/notification.xml)
    content/global/bindings/numberbox.xml       (widgets/numberbox.xml)
diff --git a/toolkit/content/tests/widgets/chrome.ini b/toolkit/content/tests/widgets/chrome.ini
--- a/toolkit/content/tests/widgets/chrome.ini
+++ b/toolkit/content/tests/widgets/chrome.ini
@@ -5,16 +5,15 @@ support-files =
   popup_shared.js
   window_menubar.xul
   seek_with_sound.ogg
 
 [test_contextmenu_nested.xul]
 skip-if = os == 'linux' # Bug 1116215
 [test_contextmenu_menugroup.xul]
 skip-if = os == 'linux' # Bug 1115088
-[test_editor_currentURI.xul]
 [test_menubar.xul]
 skip-if = os == 'mac'
 [test_popupanchor.xul]
 skip-if = os == 'linux' || (verify && (os == 'win')) # Bug 1335894 perma-fail on linux 16.04
 [test_popupreflows.xul]
 [test_tree_column_reorder.xul]
 [test_videocontrols_onclickplay.html]
diff --git a/toolkit/content/tests/widgets/test_editor_currentURI.xul b/toolkit/content/tests/widgets/test_editor_currentURI.xul
deleted file mode 100644
--- a/toolkit/content/tests/widgets/test_editor_currentURI.xul
+++ /dev/null
@@ -1,39 +0,0 @@
-<?xml version="1.0"?>
-<?xml-stylesheet href="chrome://global/skin"
-                 type="text/css"?>
-<?xml-stylesheet href="chrome://mochikit/content/tests/SimpleTest/test.css"
-                 type="text/css"?>
-<window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
-        title="Editor currentURI Tests" onload="runTest();">
-  <script type="application/javascript"
-          src="chrome://mochikit/content/tests/SimpleTest/EventUtils.js"/>
-  <script type="application/javascript"
-          src="chrome://mochikit/content/tests/SimpleTest/SimpleTest.js"/>
-
-  <body xmlns="http://www.w3.org/1999/xhtml">
-  <p/>
-  <editor xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
-          id="editor"
-          type="content"
-          editortype="html"
-          style="width: 400px; height: 100px;"/>
-  <p/>
-  <pre id="test">
-  </pre>
-  </body>
-  <script class="testbody" type="application/javascript">
-  <![CDATA[
-
-  SimpleTest.waitForExplicitFinish();
-
-  function runTest() {
-    var editor = document.getElementById("editor");
-    // Check that currentURI is a property of editor.
-    var result = "currentURI" in editor;
-    is(result, true, "currentURI is a property of editor");
-    is(editor.currentURI.spec, "about:blank", "currentURI.spec is about:blank");
-    SimpleTest.finish();
-  }
-]]>
-</script>
-</window>
diff --git a/toolkit/content/xul.css b/toolkit/content/xul.css
--- a/toolkit/content/xul.css
+++ b/toolkit/content/xul.css
@@ -143,20 +143,19 @@ toolbar[mode="icons"] .toolbarbutton-tex
 toolbar[mode="icons"] .toolbarbutton-multiline-text,
 toolbar[mode="text"] .toolbarbutton-icon,
 .toolbarbutton-multiline-text:not([wrap="true"]),
 .toolbarbutton-text[wrap="true"] {
   display: none;
   -moz-binding: none;
 }
 
-/******** browser, editor, iframe ********/
+/******** browser, iframe ********/
 
 browser,
-editor,
 iframe {
   display: inline;
 }
 
 @supports -moz-bool-pref("layout.css.emulate-moz-box-with-flex") {
   browser,
   editor,
   iframe {
@@ -167,20 +166,16 @@ iframe {
 browser {
   -moz-binding: url("chrome://global/content/bindings/browser.xml#browser");
 }
 
 browser[remote=true]:not(.lightweight) {
   -moz-binding: url("chrome://global/content/bindings/remote-browser.xml#remote-browser");
 }
 
-editor {
-  -moz-binding: url("chrome://global/content/bindings/editor.xml#editor");
-}
-
 iframe {
   -moz-binding: url("chrome://global/content/bindings/general.xml#iframe");
 }
 
 /********** notifications **********/
 
 notificationbox {
   -moz-binding: url("chrome://global/content/bindings/notification.xml#notificationbox");
