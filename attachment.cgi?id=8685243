# HG changeset patch
# User Hernan Rodriguez Colmeiro <colmeiro@gmail.com>
# Date 1447044775 10800
#      Mon Nov 09 01:52:55 2015 -0300
# Node ID 202d98852252ecb8365bc160002690aefd7f9067
# Parent  5dbceb9638a01828296241661ff3c644d894f118
Bug 1222881 - Make the inspector html searchbox clear icon not cut off placeholder text.

diff --git a/devtools/client/styleinspector/computedview.xhtml b/devtools/client/styleinspector/computedview.xhtml
--- a/devtools/client/styleinspector/computedview.xhtml
+++ b/devtools/client/styleinspector/computedview.xhtml
@@ -1,16 +1,18 @@
 <?xml version="1.0"?>
 <!-- This Source Code Form is subject to the terms of the Mozilla Public
    - License, v. 2.0. If a copy of the MPL was not distributed with this
    - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->
 
 <!DOCTYPE window [
   <!ENTITY % inspectorDTD SYSTEM "chrome://devtools/locale/styleinspector.dtd">
   %inspectorDTD;
+  <!ENTITY % globalDTD SYSTEM "chrome://global/locale/global.dtd">
+  %globalDTD;
   <!ELEMENT loop ANY>
   <!ATTLIST li foreach CDATA #IMPLIED>
   <!ATTLIST div foreach CDATA #IMPLIED>
   <!ATTLIST loop foreach CDATA #IMPLIED>
   <!ATTLIST a target CDATA #IMPLIED>
   <!ATTLIST a __pathElement CDATA #IMPLIED>
   <!ATTLIST div _id CDATA #IMPLIED>
   <!ATTLIST div save CDATA #IMPLIED>
@@ -42,17 +44,17 @@
       window.onunload = function() {
         if (this.computedview) {
           this.computedview.destroy();
         }
       }
     </script>
   </head>
 
-  <body>
+  <body dir="&locale.dir;">
 
     <div id="root" class="devtools-monospace">
       <div class="devtools-toolbar">
         <div class="devtools-searchbox">
           <input id="computedview-searchbox"
                  class="devtools-searchinput devtools-rule-searchbox"
                  type="search" placeholder="&filterStylesPlaceholder;"/>
           <button id="computedview-searchinput-clear" class="devtools-searchinput-clear"></button>
diff --git a/devtools/client/styleinspector/cssruleview.xhtml b/devtools/client/styleinspector/cssruleview.xhtml
--- a/devtools/client/styleinspector/cssruleview.xhtml
+++ b/devtools/client/styleinspector/cssruleview.xhtml
@@ -1,16 +1,18 @@
 <?xml version="1.0"?>
 <!-- This Source Code Form is subject to the terms of the Mozilla Public
    - License, v. 2.0. If a copy of the MPL was not distributed with this
    - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->
 
 <!DOCTYPE window [
   <!ENTITY % inspectorDTD SYSTEM "chrome://devtools/locale/styleinspector.dtd">
   %inspectorDTD;
+  <!ENTITY % globalDTD SYSTEM "chrome://global/locale/global.dtd">
+  %globalDTD;
 ]>
 
 <html xmlns="http://www.w3.org/1999/xhtml"
       xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
       class="theme-sidebar">
   <head>
     <title>&ruleViewTitle;</title>
     <link rel="stylesheet" href="chrome://global/skin/global.css"  type="text/css"/>
@@ -26,17 +28,17 @@
       }
       window.onunload = function() {
         if (this.ruleview) {
           this.ruleview.destroy();
         }
       }
     </script>
   </head>
-  <body>
+  <body dir="&locale.dir;">
     <div id="root" class="devtools-monospace">
       <div id="ruleview-toolbar" class="devtools-toolbar">
         <div class="devtools-searchbox">
           <input id="ruleview-searchbox"
                  class="devtools-searchinput devtools-rule-searchbox"
                  type="search" placeholder="&filterStylesPlaceholder;"/>
           <button id="ruleview-searchinput-clear" class="devtools-searchinput-clear"></button>
         </div>
diff --git a/devtools/client/themes/inspector.css b/devtools/client/themes/inspector.css
--- a/devtools/client/themes/inspector.css
+++ b/devtools/client/themes/inspector.css
@@ -11,35 +11,44 @@
 
 #inspector-toolbar:-moz-locale-dir(rtl) {
   padding-left: 4px;
 }
 
 %endif
 
 #inspector-searchbox {
-  transition-property: max-width, -moz-padding-end, -moz-padding-start;
+  transition-property: width, -moz-padding-end, -moz-padding-start;
   transition-duration: 250ms;
   transition-timing-function: ease;
 }
 
 #inspector-searchbox:not([focused]):not([filled]) > .textbox-input-box {
   overflow: hidden;
 }
 
 #inspector-searchbox:not([focused]):not([filled]) {
-  max-width: 20px !important;
+  width: 29px;
   -moz-padding-end: 5px;
   -moz-padding-start: 22px;
   background-position: 8px center, top left, top left;
 }
 
 #inspector-searchbox[focused],
 #inspector-searchbox[filled] {
   max-width: 200px !important;
+  width: 167px;
+}
+
+#inspector-searchbox[focused] > .textbox-input-box > .textbox-search-icons {
+  display: none;
+}
+
+#inspector-searchbox[filled] > .textbox-input-box > .textbox-search-icons {
+  display: -moz-deck;
 }
 
 /* Expand/collapse panel toolbar button */
 
 #inspector-pane-toggle {
   background: none;
   box-shadow: none;
   border: none;
