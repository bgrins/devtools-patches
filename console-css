# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  c2a6e697d6355585e383ea28c207e3dd2a210cfc
Bug 1380499 - Prevent horizontal scrollbar from appearing in the console after vertical overflow;r=nchevobbe

diff --git a/devtools/client/themes/webconsole.css b/devtools/client/themes/webconsole.css
--- a/devtools/client/themes/webconsole.css
+++ b/devtools/client/themes/webconsole.css
@@ -753,20 +753,16 @@ a.learn-more-link.webconsole-learn-more-
 .devtools-toolbar.webconsole-filterbar-secondary {
   height: initial;
 }
 
 .webconsole-filterbar-primary .devtools-plaininput {
   flex: 1 1 100%;
 }
 
-.webconsole-output-wrapper .message {
-  width: 100vw;
-}
-
 .webconsole-output-wrapper .message-flex-body > .message-body {
   display: flex;
   flex-wrap: wrap;
   max-width: 100%;
 }
 
 .webconsole-output-wrapper .message-body > * {
   flex-shrink: 0;
diff --git a/devtools/client/webconsole/new-console-output/test/mochitest/browser_webconsole_init.js b/devtools/client/webconsole/new-console-output/test/mochitest/browser_webconsole_init.js
--- a/devtools/client/webconsole/new-console-output/test/mochitest/browser_webconsole_init.js
+++ b/devtools/client/webconsole/new-console-output/test/mochitest/browser_webconsole_init.js
@@ -10,26 +10,27 @@ const TEST_URI = "http://example.com/bro
 add_task(function* () {
   let toolbox = yield openNewTabAndToolbox(TEST_URI, "webconsole");
   let hud = toolbox.getCurrentPanel().hud;
   let {ui} = hud;
 
   ok(ui.jsterm, "jsterm exists");
   ok(ui.newConsoleOutput, "newConsoleOutput exists");
 
-  // @TODO: fix proptype errors
   let receievedMessages = waitForMessages({
     hud,
-    messages: [{
-      text: "0",
-    }, {
-      text: "1",
-    }, {
-      text: "2",
-    }],
+    messages: [
+      { text: "19" },
+    ]
   });
 
   yield ContentTask.spawn(gBrowser.selectedBrowser, {}, function () {
-    content.wrappedJSObject.doLogs(3);
+    content.wrappedJSObject.doLogs(20);
   });
 
   yield receievedMessages;
+
+  const outputContainer = ui.outputNode.querySelector(".webconsole-output");
+  is(outputContainer.querySelectorAll(".message.console-api").length, 20,
+    "Correct number of messages appear");
+  is(outputContainer.scrollWidth, outputContainer.clientWidth,
+    "No horizontal overflow");
 });
