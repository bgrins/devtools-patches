# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  9ceafabc046d710fd82f70c3bf1c18c751ab3cc3

diff --git a/browser/base/content/browser-sidebar.js b/browser/base/content/browser-sidebar.js
--- a/browser/base/content/browser-sidebar.js
+++ b/browser/base/content/browser-sidebar.js
@@ -37,17 +37,17 @@ var SidebarUI = {
     ]);
   },
 
   // Avoid getting the browser element from init() to avoid triggering the
   // <browser> constructor during startup if the sidebar is hidden.
   get browser() {
     if (this._browser)
       return this._browser;
-
+    console.trace("CREATING BROWSER");
     this._browser = document.createXULElement("browser");
     this._browser.id = "sidebar";
     this._browser.flex = 1;
     this._browser.setAttribute("autoscroll", "false");
     this._browser.setAttribute("disablehistory", "true");
     this._browser.setAttribute("disablefullscreen", "true");
     this._browser.setAttribute("tooltip", "aHTMLTooltip");
     this._browser.setAttribute("style", "min-width: 14em; width: 18em; max-width: 36em;");
@@ -510,23 +510,18 @@ var SidebarUI = {
       return;
     }
 
     this.hideSwitcherPanel();
 
     let commandID = this._box.getAttribute("sidebarcommand");
     this.selectMenuItem("");
 
-    // Replace the document currently displayed in the sidebar with about:blank
-    // so that we can free memory by unloading the page. We need to explicitly
-    // create a new content viewer because the old one doesn't get destroyed
-    // until about:blank has loaded (which does not happen as long as the
-    // element is hidden).
-    this.browser.setAttribute("src", "about:blank");
-    this.browser.docShell.createAboutBlankContentViewer(null, null);
+    this.browser.remove();
+    this._browser = null;
 
     this._box.removeAttribute("checked");
     this._box.hidden = this._splitter.hidden = true;
 
     let selBrowser = gBrowser.selectedBrowser;
     selBrowser.focus();
     selBrowser.messageManager.sendAsyncMessage("Sidebar:VisibilityChange",
       {commandID, isOpen: false}
