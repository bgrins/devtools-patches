# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Date 1537484594 25200
#      Thu Sep 20 16:03:14 2018 -0700
# Node ID d2d1ae0ba06c4713e2c53792292ee1d8b99790c9
# Parent  8ba01fc4f7e017b5ef1754d435c911c4e3847ef8
Bug 1491484 - WIP Re-enable browser_findbar.js on linux

Differential Revision: https://phabricator.services.mozilla.com/D6443

diff --git a/toolkit/content/tests/browser/browser_findbar.js b/toolkit/content/tests/browser/browser_findbar.js
--- a/toolkit/content/tests/browser/browser_findbar.js
+++ b/toolkit/content/tests/browser/browser_findbar.js
@@ -1,16 +1,18 @@
 /* eslint-disable mozilla/no-arbitrary-setTimeout */
 ChromeUtils.import("resource://gre/modules/Timer.jsm", this);
 
 const TEST_PAGE_URI = "data:text/html;charset=utf-8,The letter s.";
 // Using 'javascript' schema to bypass E10SUtils.canLoadURIInRemoteType, because
 // it does not allow 'data:' URI to be loaded in the parent process.
 const E10S_PARENT_TEST_PAGE_URI = "javascript:document.write('The letter s.');";
 
+SimpleTest.requestCompleteLog();
+
 /**
  * Makes sure that the findbar hotkeys (' and /) event listeners
  * are added to the system event group and do not get blocked
  * by calling stopPropagation on a keypress event on a page.
  */
 add_task(async function test_hotkey_event_propagation() {
   info("Ensure hotkeys are not affected by stopPropagation.");
 
@@ -163,21 +165,16 @@ add_task(async function test_reinitializ
  */
 add_task(async function e10sLostKeys() {
   // This test only makes sence in e10s evironment.
   if (!gMultiProcessBrowser) {
     info("Skipping this test because of non-e10s environment.");
     return;
   }
 
-  if (AppConstants.platform == "linux" && !AppConstants.DEBUG) {
-    info("Skipping this test because of linux opt (Bug 1491484).");
-    return;
-  }
-
   let tab = await BrowserTestUtils.openNewForegroundTab(gBrowser, TEST_PAGE_URI);
 
   ok(!gFindBarInitialized, "findbar isn't initialized yet");
 
   await gFindBarPromise;
   let findBar = gFindBar;
   let initialValue = findBar._findField.value;
 
