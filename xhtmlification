# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  aff060ad3204234adae2d59b3776207c6687ebfc
Bug 1473165 - Explicitly namespace browser-menubar and browser-sets to allow for importing from xhtml
* * *
Bug 1473165 - Example of using previous patch from hiddenWindow.xhtml instead of hiddenWindow.xul

diff --git a/browser/base/content/browser-menubar.inc b/browser/base/content/browser-menubar.inc
--- a/browser/base/content/browser-menubar.inc
+++ b/browser/base/content/browser-menubar.inc
@@ -1,13 +1,15 @@
 # -*- Mode: Java; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-
 # This Source Code Form is subject to the terms of the Mozilla Public
 # License, v. 2.0. If a copy of the MPL was not distributed with this
 # file, You can obtain one at http://mozilla.org/MPL/2.0/.
-
+      <!-- Support loading this in xhtml documents by explicitly XUL namespacing: -->
+      <box collapsed="true"
+           xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
        <menubar id="main-menubar"
                 onpopupshowing="if (event.target.parentNode.parentNode == this &amp;&amp;
                                     !('@mozilla.org/widget/nativemenuservice;1' in Cc))
                                   this.setAttribute('openedwithkey',
                                                     event.target.parentNode.openedWithKey);">
             <menu id="file-menu" label="&fileMenu.label;"
                   accesskey="&fileMenu.accesskey;">
               <menupopup id="menu_FilePopup"
@@ -623,8 +625,9 @@
                 <menuseparator id="aboutSeparator"/>
                 <menuitem id="aboutName"
                           accesskey="&aboutProduct2.accesskey;"
                           label="&aboutProduct2.label;"
                           oncommand="openAboutDialog();"/>
               </menupopup>
           </menu>
         </menubar>
+      </box>
diff --git a/browser/base/content/browser-sets.inc b/browser/base/content/browser-sets.inc
--- a/browser/base/content/browser-sets.inc
+++ b/browser/base/content/browser-sets.inc
@@ -3,17 +3,19 @@
 # License, v. 2.0. If a copy of the MPL was not distributed with this
 # file, You can obtain one at http://mozilla.org/MPL/2.0/.
 
 #ifdef XP_UNIX
 #ifndef XP_MACOSX
 #define XP_GNOME 1
 #endif
 #endif
-
+<!-- Support loading this in xhtml documents by explicitly XUL namespacing: -->
+<box collapsed="true"
+     xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
   <stringbundleset id="stringbundleset">
     <stringbundle id="bundle_brand" src="chrome://branding/locale/brand.properties"/>
     <stringbundle id="bundle_shell" src="chrome://browser/locale/shellservice.properties"/>
     <stringbundle id="bundle_preferences" src="chrome://browser/locale/preferences/preferences.properties"/>
   </stringbundleset>
 
   <commandset id="mainCommandSet">
     <command id="cmd_newNavigator" oncommand="OpenBrowserWindow()"/>
@@ -409,8 +411,9 @@
     <key id="key_hideThisAppCmdMac"
          key="&hideThisAppCmdMac2.commandkey;"
          modifiers="accel"/>
     <key id="key_hideOtherAppsCmdMac"
          key="&hideOtherAppsCmdMac.commandkey;"
          modifiers="accel,alt"/>
 #endif
   </keyset>
+</box>
diff --git a/browser/components/places/content/placesCommands.inc.xul b/browser/components/places/content/placesCommands.inc.xul
--- a/browser/components/places/content/placesCommands.inc.xul
+++ b/browser/components/places/content/placesCommands.inc.xul
@@ -1,8 +1,12 @@
+<!-- Support loading this in xhtml documents by explicitly XUL namespacing: -->
+<box collapsed="true"
+     xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
+
 <commandset id="placesCommands"
             commandupdater="true"
             events="focus,sort,places"
             oncommandupdate="PlacesUIUtils.updateCommands(window);">
   <command id="Browser:ShowAllBookmarks"
            oncommand="PlacesCommandHook.showPlacesOrganizer('UnfiledBookmarks');"/>
   <command id="Browser:ShowAllHistory"
            oncommand="PlacesCommandHook.showPlacesOrganizer('History');"/>
@@ -41,8 +45,9 @@
            oncommand="PlacesUIUtils.doCommand(window, 'placesCmd_cut');"/>
   <command id="placesCmd_copy"
            oncommand="PlacesUIUtils.doCommand(window, 'placesCmd_copy');"/>
   <command id="placesCmd_paste"
            oncommand="PlacesUIUtils.doCommand(window, 'placesCmd_paste');"/>
   <command id="placesCmd_delete"
            oncommand="PlacesUIUtils.doCommand(window, 'placesCmd_delete');"/>
 </commandset>
+</box>
diff --git a/toolkit/content/editMenuCommands.inc.xul b/toolkit/content/editMenuCommands.inc.xul
--- a/toolkit/content/editMenuCommands.inc.xul
+++ b/toolkit/content/editMenuCommands.inc.xul
@@ -1,8 +1,12 @@
+
+<!-- Support loading this in xhtml documents by explicitly XUL namespacing: -->
+<box collapsed="true"
+     xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
 <script type="application/javascript" src="chrome://global/content/editMenuOverlay.js"/>
 <commandset id="editMenuCommands">
   <commandset id="editMenuCommandSetAll" commandupdater="true" events="focus,select"
               oncommandupdate="goUpdateGlobalEditMenuItems()"/>
   <commandset id="editMenuCommandSetUndo" commandupdater="true" events="undo"
               oncommandupdate="goUpdateUndoEditMenuItems()"/>
   <commandset id="editMenuCommandSetPaste" commandupdater="true" events="clipboard"
               oncommandupdate="goUpdatePasteMenuItems()"/>
@@ -10,8 +14,9 @@
   <command id="cmd_redo" oncommand="goDoCommand('cmd_redo')"/>
   <command id="cmd_cut" oncommand="goDoCommand('cmd_cut')"/>
   <command id="cmd_copy" oncommand="goDoCommand('cmd_copy')"/>
   <command id="cmd_paste" oncommand="goDoCommand('cmd_paste')"/>
   <command id="cmd_delete" oncommand="goDoCommand('cmd_delete')"/>
   <command id="cmd_selectAll" oncommand="goDoCommand('cmd_selectAll')"/>
   <command id="cmd_switchTextDirection" oncommand="goDoCommand('cmd_switchTextDirection');"/>
 </commandset>
+</box>
