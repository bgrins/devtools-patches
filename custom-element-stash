# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  dc33e00dad90346466fefaa158bc0d79a53668a9

diff --git a/browser/base/content/customelements/access-key-label.js b/browser/base/content/customelements/access-key-label.js
new file mode 100644
--- /dev/null
+++ b/browser/base/content/customelements/access-key-label.js
@@ -0,0 +1,232 @@
+class AccessKeyLabel extends BaseElement {
+  constructor() {
+    super();
+    console.log("AccessKeyLabel constructor");
+  }
+  connectedCallback() {
+    super.connectedCallback();
+    console.log("AccessKeyLabel connectedCallback", this, this.parentNode);
+
+    const textContent = this.textContent;
+    // this.attachShadow({mode: 'open'});
+    const shadowRoot = this; // .shadowRoot
+
+    shadowRoot.innerHTML = `<html:label inherits="for=control,text=value"></html:label><html:span anonid="accessKeyParens"></html:span>`;
+
+    if (textContent) {
+      this.htmlLabelElement.textContent = textContent;
+    }
+    this.formatAccessKey(true);
+  }
+  disconnectedCallback() {}
+
+  get htmlLabelElement() {
+    return this.querySelector("label");
+  }
+
+  set accessKey(val) {
+    // If this label already has an accesskey attribute store it here as well
+    if (this.hasAttribute("accesskey")) {
+      this.setAttribute("accesskey", val);
+    }
+    var control = this.labeledControlElement;
+    if (control) {
+      control.setAttribute("accesskey", val);
+    }
+    this.formatAccessKey(false);
+    return val;
+  }
+
+  get accessKey() {
+    var accessKey = null;
+    var labeledEl = this.labeledControlElement;
+    if (labeledEl) {
+      accessKey = labeledEl.getAttribute("accesskey");
+    }
+    if (!accessKey) {
+      accessKey = this.getAttribute("accesskey");
+    }
+    return accessKey ? accessKey[0] : null;
+  }
+
+  get labeledControlElement() {
+    var control = this.control;
+    return control ? document.getElementById(control) : null;
+  }
+
+  get value() {
+    return this.getAttribute("value");
+  }
+
+  set value(val) {
+    this.setAttribute("value", val);
+    this.formatAccessKey(false);
+  }
+
+  set control(val) {
+    var control = this.labeledControlElement;
+    if (control) {
+      control.labelElement = null; // No longer pointed to be this label
+    }
+    this.setAttribute("control", val);
+    this.formatAccessKey(false);
+    return val;
+  }
+
+  get control() {
+    return this.getAttribute("control") || this.getAttribute("for");
+  }
+  formatAccessKey(firstTime) {
+    var control = this.labeledControlElement;
+    // if (!control) {
+    //   var bindingParent = document.getBindingParent(this);
+    //   if (
+    //     bindingParent instanceof
+    //     Components.interfaces.nsIDOMXULLabeledControlElement
+    //   ) {
+    //     control = bindingParent; // For controls that make the <label> an anon child
+    //   }
+    // }
+    // if (control) {
+    //   control.labelElement = this;
+    // }
+
+    var accessKey = this.accessKey;
+    // No need to remove existing formatting the first time.
+    if (firstTime && !accessKey) return;
+
+    if (this.mInsertSeparator === undefined) {
+      this.mUnderlineAccesskey = true;
+      this.mInsertSeparator = this.mAlwaysAppendAccessKey = false;
+      // try {
+      //   var prefs = Components.classes[
+      //     "@mozilla.org/preferences-service;1"
+      //   ].getService(Components.interfaces.nsIPrefBranch);
+      //   this.mUnderlineAccesskey = prefs.getIntPref("ui.key.menuAccessKey") != 0;
+
+      //   const nsIPrefLocalizedString =
+      //     Components.interfaces.nsIPrefLocalizedString;
+
+      //   const prefNameInsertSeparator =
+      //     "intl.menuitems.insertseparatorbeforeaccesskeys";
+      //   const prefNameAlwaysAppendAccessKey =
+      //     "intl.menuitems.alwaysappendaccesskeys";
+
+      //   var val = prefs.getComplexValue(
+      //     prefNameInsertSeparator,
+      //     nsIPrefLocalizedString
+      //   ).data;
+      //   this.mInsertSeparator = val == "true";
+
+      //   val = prefs.getComplexValue(
+      //     prefNameAlwaysAppendAccessKey,
+      //     nsIPrefLocalizedString
+      //   ).data;
+      //   this.mAlwaysAppendAccessKey = val == "true";
+      // } catch (e) {
+      //   this.mInsertSeparator = true;
+      // }
+    }
+
+    if (!this.mUnderlineAccesskey) return;
+    const shadowRoot = this; //.shadowRoot;
+
+    var afterLabel = shadowRoot.querySelector("[anonid=accessKeyParens]");
+    afterLabel.textContent = "";
+
+    var oldAccessKey = shadowRoot.querySelector(".accesskey");
+    if (oldAccessKey) {
+      // Clear old accesskey
+      this.mergeElement(oldAccessKey);
+    }
+
+    var oldHiddenSpan = shadowRoot.querySelector(".hiddenColon");
+    if (oldHiddenSpan) {
+      this.mergeElement(oldHiddenSpan);
+    }
+
+    var labelText = shadowRoot.textContent;
+    if (!accessKey || !labelText || !control) {
+      return;
+    }
+    var accessKeyIndex = -1;
+    if (!this.mAlwaysAppendAccessKey) {
+      accessKeyIndex = labelText.indexOf(accessKey);
+      if (accessKeyIndex < 0) {
+        // Try again in upper case
+        accessKeyIndex = labelText
+          .toUpperCase()
+          .indexOf(accessKey.toUpperCase());
+      }
+    }
+
+    const HTML_NS = "http://www.w3.org/1999/xhtml";
+    var span = document.createElementNS(HTML_NS, "span");
+    span.className = "accesskey";
+
+    // Note that if you change the following code, see the comment of
+    // nsTextBoxFrame::UpdateAccessTitle.
+
+    // If accesskey is not in string, append in parentheses
+    if (accessKeyIndex < 0) {
+      // If end is colon, we should insert before colon.
+      // i.e., "label:" -> "label(X):"
+      var colonHidden = false;
+      if (/:$/.test(labelText)) {
+        labelText = labelText.slice(0, -1);
+        var hiddenSpan = document.createElementNS(HTML_NS, "span");
+        hiddenSpan.className = "hiddenColon";
+        hiddenSpan.style.display = "none";
+        // Hide the last colon by using span element.
+        // I.e., label<span style="display:none;">:</span>
+        this.wrapChar(hiddenSpan, labelText.length);
+        colonHidden = true;
+      }
+      // If end is space(U+20),
+      // we should not add space before parentheses.
+      var endIsSpace = false;
+      if (/ $/.test(labelText)) {
+        endIsSpace = true;
+      }
+      if (this.mInsertSeparator && !endIsSpace) afterLabel.textContent = " (";
+      else afterLabel.textContent = "(";
+      span.textContent = accessKey.toUpperCase();
+      afterLabel.appendChild(span);
+      if (!colonHidden) afterLabel.appendChild(document.createTextNode(")"));
+      else afterLabel.appendChild(document.createTextNode("):"));
+      return;
+    }
+    this.wrapChar(span, accessKeyIndex);
+  }
+  wrapChar(element, index) {
+    var treeWalker = document.createTreeWalker(
+      this,
+      NodeFilter.SHOW_TEXT,
+      null
+    );
+    var node = treeWalker.nextNode();
+    while (index >= node.length) {
+      index -= node.length;
+      node = treeWalker.nextNode();
+    }
+    if (index) {
+      node = node.splitText(index);
+    }
+    node.parentNode.insertBefore(element, node);
+    if (node.length > 1) {
+      node.splitText(1);
+    }
+    element.appendChild(node);
+  }
+  mergeElement(element) {
+    if (element.previousSibling instanceof Text) {
+      element.previousSibling.appendData(element.textContent);
+    } else {
+      element.parentNode.insertBefore(element.firstChild, element);
+    }
+    element.remove();
+  }
+}
+customElements.define("accesskey-label", AccessKeyLabel);
+console.log("Defining", "accesskey-label", AccessKeyLabel, customElements);
+
diff --git a/browser/base/content/customelements/base-element.js b/browser/base/content/customelements/base-element.js
new file mode 100644
--- /dev/null
+++ b/browser/base/content/customelements/base-element.js
@@ -0,0 +1,145 @@
+
+
+// https://html.spec.whatwg.org/multipage/scripting.html#custom-elements-autonomous-example
+
+class BaseElement extends HTMLElement {
+  constructor() {
+    super();
+    this.observerConnector = new ObserverConnector(this);
+    this.inheritsConnector = new InheritsConnector(this);
+  }
+
+  connectedCallback() {
+
+  }
+
+  disconnectedCallback() {
+
+  }
+
+  static get observedAttributes() { return ["observes"]; }
+
+  attributeChangedCallback(name, oldValue, newValue) {
+    if (name === "observes") {
+      this.observerConnector.watch(newValue);
+    }
+  }
+}
+
+function InheritsConnector(host) {
+  this._host = host;
+  this._nodesToAttributes = new Map();
+  this.watch();
+}
+InheritsConnector.prototype.destroy = function() {
+
+}
+InheritsConnector.prototype.setInherits = function(node) {
+  let inherits = node.getAttribute("inherits");
+  if (inherits) {
+    this._nodesToAttributes.set(node, inherits.split(','));
+  }
+}
+InheritsConnector.prototype.copyAttribute = function(attributeName) {
+  if (attributeName === "id") {
+    return;
+  }
+
+  for (let [node, list] of this._nodesToAttributes.entries()) {
+    // Handle both inherits="accesskey" and inherits="text=label"
+    list.forEach(a => {
+      if (a === attributeName) {
+        node.setAttribute(a, this._host.getAttribute(a));
+      } else if (a.endsWith('=' + attributeName)) {
+        let mapFrom = a.split('=')[1];
+        let mapTo = a.split('=')[0];
+        if (mapTo === "text") {
+          node.textContent = this._host.getAttribute(mapFrom);
+        } else {
+          node.setAttribute(mapTo, this._host.getAttribute(mapFrom));
+        }
+      }
+    });
+  }
+};
+
+InheritsConnector.prototype.watch = function() {
+  if (this._observer) {
+    this._observer.disconnect();
+    this._observer = null;
+  }
+
+  this._observer = new MutationObserver(mutations => {
+    mutations.forEach(mutation => {
+      if (mutation.type === "childList") {
+        mutation.addedNodes.forEach(added => {
+          if (added.nodeType !== 1) {
+            return;
+          }
+          this.setInherits(added);
+          [...added.querySelectorAll("[inherits]")].forEach(child => this.setInherits(child));
+          for (var i = 0; i < this._host.attributes.length; i++) {
+            var attrib = this._host.attributes[i];
+            this.copyAttribute(attrib.name);
+          }
+        });
+      }
+
+      if (mutation.type === "attributes" && mutation.target === this._host) {
+        this.copyAttribute(mutation.attributeName);
+      }
+    });
+
+    // this.copyAttributes();
+  });
+  this._observer.observe(this._host, {
+    attributes: true,
+    subtree: true,
+    childList: true,
+  });
+
+}
+
+function ObserverConnector(host) {
+  this._host = host;
+}
+ObserverConnector.prototype.destroy = function() {
+
+}
+
+ObserverConnector.prototype.copyAttributes = function() {
+  if (!this._observeTarget) {
+    return;
+  }
+
+  for (var i = 0; i < this._observeTarget.attributes.length; i++) {
+    var attrib = this._observeTarget.attributes[i];
+    if (attrib.name !== "id") {
+      this._host.setAttribute(attrib.name, attrib.value);
+    }
+  }
+}
+
+ObserverConnector.prototype.watch = function(targetID) {
+  if (this._observer) {
+    this._observer.disconnect();
+    this._observer = null;
+  }
+
+  this._observeTarget = document.getElementById(targetID);
+  if (this._observeTarget) {
+    this._observer = new MutationObserver(mutations => {
+      mutations.forEach(mutation => {
+        if (!this._observeTarget.hasAttribute(mutation.attributeName)) {
+          this.removeAttribute(mutation.attributeName);
+        }
+      });
+
+      this.copyAttributes();
+    });
+    this._observer.observe(this._observeTarget, {
+      attributes: true,
+    });
+    this.copyAttributes();
+  }
+}
diff --git a/browser/base/content/customelements/custom-elements.js b/browser/base/content/customelements/custom-elements.js
new file mode 100644
--- /dev/null
+++ b/browser/base/content/customelements/custom-elements.js
@@ -0,0 +1,37 @@
+(function(){
+'use strict';var g=new function(){};var aa=new Set("annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph".split(" "));function k(b){var a=aa.has(b);b=/^[a-z][.0-9_a-z]*-[\-.0-9_a-z]*$/.test(b);return!a&&b}function l(b){var a=b.isConnected;if(void 0!==a)return a;for(;b&&!(b.__CE_isImportDocument||b instanceof Document);)b=b.parentNode||(window.ShadowRoot&&b instanceof ShadowRoot?b.host:void 0);return!(!b||!(b.__CE_isImportDocument||b instanceof Document))}
+function m(b,a){for(;a&&a!==b&&!a.nextSibling;)a=a.parentNode;return a&&a!==b?a.nextSibling:null}
+function n(b,a,e){e=e?e:new Set;for(var c=b;c;){if(c.nodeType===Node.ELEMENT_NODE){var d=c;a(d);var h=d.localName;if("link"===h&&"import"===d.getAttribute("rel")){c=d.import;if(c instanceof Node&&!e.has(c))for(e.add(c),c=c.firstChild;c;c=c.nextSibling)n(c,a,e);c=m(b,d);continue}else if("template"===h){c=m(b,d);continue}if(d=d.__CE_shadowRoot)for(d=d.firstChild;d;d=d.nextSibling)n(d,a,e)}c=c.firstChild?c.firstChild:m(b,c)}}function q(b,a,e){b[a]=e};function r(){this.a=new Map;this.m=new Map;this.f=[];this.b=!1}function ba(b,a,e){b.a.set(a,e);b.m.set(e.constructor,e)}function t(b,a){b.b=!0;b.f.push(a)}function v(b,a){b.b&&n(a,function(a){return w(b,a)})}function w(b,a){if(b.b&&!a.__CE_patched){a.__CE_patched=!0;for(var e=0;e<b.f.length;e++)b.f[e](a)}}function x(b,a){var e=[];n(a,function(b){return e.push(b)});for(a=0;a<e.length;a++){var c=e[a];1===c.__CE_state?b.connectedCallback(c):y(b,c)}}
+function z(b,a){var e=[];n(a,function(b){return e.push(b)});for(a=0;a<e.length;a++){var c=e[a];1===c.__CE_state&&b.disconnectedCallback(c)}}
+function A(b,a,e){e=e?e:new Set;var c=[];n(a,function(d){if("link"===d.localName&&"import"===d.getAttribute("rel")){var a=d.import;a instanceof Node&&"complete"===a.readyState?(a.__CE_isImportDocument=!0,a.__CE_hasRegistry=!0):d.addEventListener("load",function(){var a=d.import;a.__CE_documentLoadHandled||(a.__CE_documentLoadHandled=!0,a.__CE_isImportDocument=!0,a.__CE_hasRegistry=!0,e.delete(a),A(b,a,e))})}else c.push(d)},e);if(b.b)for(a=0;a<c.length;a++)w(b,c[a]);for(a=0;a<c.length;a++)y(b,c[a])}
+function y(b,a){if(void 0===a.__CE_state){var e=b.a.get(a.localName);if(e){e.constructionStack.push(a);var c=e.constructor;try{try{if(new c!==a)throw Error("The custom element constructor did not produce the element being upgraded.");}finally{e.constructionStack.pop()}}catch(f){throw a.__CE_state=2,f;}a.__CE_state=1;a.__CE_definition=e;if(e.attributeChangedCallback)for(e=e.observedAttributes,c=0;c<e.length;c++){var d=e[c],h=a.getAttribute(d);null!==h&&b.attributeChangedCallback(a,d,null,h,null)}l(a)&&
+b.connectedCallback(a)}}}r.prototype.connectedCallback=function(b){var a=b.__CE_definition;a.connectedCallback&&a.connectedCallback.call(b)};r.prototype.disconnectedCallback=function(b){var a=b.__CE_definition;a.disconnectedCallback&&a.disconnectedCallback.call(b)};r.prototype.attributeChangedCallback=function(b,a,e,c,d){var h=b.__CE_definition;h.attributeChangedCallback&&-1<h.observedAttributes.indexOf(a)&&h.attributeChangedCallback.call(b,a,e,c,d)};function B(b,a){this.c=b;this.a=a;this.b=void 0;A(this.c,this.a);"loading"===this.a.readyState&&(this.b=new MutationObserver(this.f.bind(this)),this.b.observe(this.a,{childList:!0,subtree:!0}))}function C(b){b.b&&b.b.disconnect()}B.prototype.f=function(b){var a=this.a.readyState;"interactive"!==a&&"complete"!==a||C(this);for(a=0;a<b.length;a++)for(var e=b[a].addedNodes,c=0;c<e.length;c++)A(this.c,e[c])};function ca(){var b=this;this.b=this.a=void 0;this.f=new Promise(function(a){b.b=a;b.a&&a(b.a)})}function D(b){if(b.a)throw Error("Already resolved.");b.a=void 0;b.b&&b.b(void 0)};function E(b){this.i=!1;this.c=b;this.l=new Map;this.j=function(b){return b()};this.g=!1;this.h=[];this.s=new B(b,document)}
+E.prototype.define=function(b,a){var e=this;if(!(a instanceof Function))throw new TypeError("Custom element constructors must be functions.");if(!k(b))throw new SyntaxError("The element name '"+b+"' is not valid.");if(this.c.a.get(b))throw Error("A custom element with name '"+b+"' has already been defined.");if(this.i)throw Error("A custom element is already being defined.");this.i=!0;var c,d,h,f,u;try{var p=function(b){var a=P[b];if(void 0!==a&&!(a instanceof Function))throw Error("The '"+b+"' callback must be a function.");
+return a},P=a.prototype;if(!(P instanceof Object))throw new TypeError("The custom element constructor's prototype is not an object.");c=p("connectedCallback");d=p("disconnectedCallback");h=p("adoptedCallback");f=p("attributeChangedCallback");u=a.observedAttributes||[]}catch(ua){return}finally{this.i=!1}ba(this.c,b,{localName:b,constructor:a,connectedCallback:c,disconnectedCallback:d,adoptedCallback:h,attributeChangedCallback:f,observedAttributes:u,constructionStack:[]});this.h.push(b);this.g||(this.g=
+!0,this.j(function(){if(!1!==e.g)for(e.g=!1,A(e.c,document);0<e.h.length;){var b=e.h.shift();(b=e.l.get(b))&&D(b)}}))};E.prototype.get=function(b){if(b=this.c.a.get(b))return b.constructor};E.prototype.whenDefined=function(b){if(!k(b))return Promise.reject(new SyntaxError("'"+b+"' is not a valid custom element name."));var a=this.l.get(b);if(a)return a.f;a=new ca;this.l.set(b,a);this.c.a.get(b)&&-1===this.h.indexOf(b)&&D(a);return a.f};E.prototype.u=function(b){C(this.s);var a=this.j;this.j=function(e){return b(function(){return a(e)})}};
+window.CustomElementRegistry=E;E.prototype.define=E.prototype.define;E.prototype.get=E.prototype.get;E.prototype.whenDefined=E.prototype.whenDefined;E.prototype.polyfillWrapFlushCallback=E.prototype.u;var F=window.Document.prototype.createElement,da=window.Document.prototype.createElementNS,ea=window.Document.prototype.importNode,fa=window.Document.prototype.prepend,ga=window.Document.prototype.append,G=window.Node.prototype.cloneNode,H=window.Node.prototype.appendChild,I=window.Node.prototype.insertBefore,J=window.Node.prototype.removeChild,K=window.Node.prototype.replaceChild,L=Object.getOwnPropertyDescriptor(window.Node.prototype,"textContent"),M=window.Element.prototype.attachShadow,N=Object.getOwnPropertyDescriptor(window.Element.prototype,
+"innerHTML"),O=window.Element.prototype.getAttribute,Q=window.Element.prototype.setAttribute,R=window.Element.prototype.removeAttribute,S=window.Element.prototype.getAttributeNS,T=window.Element.prototype.setAttributeNS,U=window.Element.prototype.removeAttributeNS,V=window.Element.prototype.insertAdjacentElement,ha=window.Element.prototype.prepend,ia=window.Element.prototype.append,ja=window.Element.prototype.before,ka=window.Element.prototype.after,la=window.Element.prototype.replaceWith,ma=window.Element.prototype.remove,
+na=window.HTMLElement,W=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML"),X=window.HTMLElement.prototype.insertAdjacentElement;function oa(){var b=Y;window.HTMLElement=function(){function a(){var a=this.constructor,c=b.m.get(a);if(!c)throw Error("The custom element being constructed was not registered with `customElements`.");var d=c.constructionStack;if(!d.length)return d=F.call(document,c.localName),Object.setPrototypeOf(d,a.prototype),d.__CE_state=1,d.__CE_definition=c,w(b,d),d;var c=d.length-1,h=d[c];if(h===g)throw Error("The HTMLElement constructor was either called reentrantly for this constructor or called multiple times.");
+d[c]=g;Object.setPrototypeOf(h,a.prototype);w(b,h);return h}a.prototype=na.prototype;return a}()};function pa(b,a,e){a.prepend=function(a){for(var d=[],c=0;c<arguments.length;++c)d[c-0]=arguments[c];c=d.filter(function(b){return b instanceof Node&&l(b)});e.o.apply(this,d);for(var f=0;f<c.length;f++)z(b,c[f]);if(l(this))for(c=0;c<d.length;c++)f=d[c],f instanceof Element&&x(b,f)};a.append=function(a){for(var d=[],c=0;c<arguments.length;++c)d[c-0]=arguments[c];c=d.filter(function(b){return b instanceof Node&&l(b)});e.append.apply(this,d);for(var f=0;f<c.length;f++)z(b,c[f]);if(l(this))for(c=0;c<
+d.length;c++)f=d[c],f instanceof Element&&x(b,f)}};function qa(){var b=Y;q(Document.prototype,"createElement",function(a){if(this.__CE_hasRegistry){var e=b.a.get(a);if(e)return new e.constructor}a=F.call(this,a);w(b,a);return a});q(Document.prototype,"importNode",function(a,e){a=ea.call(this,a,e);this.__CE_hasRegistry?A(b,a):v(b,a);return a});q(Document.prototype,"createElementNS",function(a,e){if(this.__CE_hasRegistry&&(null===a||"http://www.w3.org/1999/xhtml"===a)){var c=b.a.get(e);if(c)return new c.constructor}a=da.call(this,a,e);w(b,a);return a});
+pa(b,Document.prototype,{o:fa,append:ga})};function ra(){var b=Y;function a(a,c){Object.defineProperty(a,"textContent",{enumerable:c.enumerable,configurable:!0,get:c.get,set:function(a){if(this.nodeType===Node.TEXT_NODE)c.set.call(this,a);else{var d=void 0;if(this.firstChild){var e=this.childNodes,u=e.length;if(0<u&&l(this))for(var d=Array(u),p=0;p<u;p++)d[p]=e[p]}c.set.call(this,a);if(d)for(a=0;a<d.length;a++)z(b,d[a])}}})}q(Node.prototype,"insertBefore",function(a,c){if(a instanceof DocumentFragment){var d=Array.prototype.slice.apply(a.childNodes);
+a=I.call(this,a,c);if(l(this))for(c=0;c<d.length;c++)x(b,d[c]);return a}d=l(a);c=I.call(this,a,c);d&&z(b,a);l(this)&&x(b,a);return c});q(Node.prototype,"appendChild",function(a){if(a instanceof DocumentFragment){var c=Array.prototype.slice.apply(a.childNodes);a=H.call(this,a);if(l(this))for(var d=0;d<c.length;d++)x(b,c[d]);return a}c=l(a);d=H.call(this,a);c&&z(b,a);l(this)&&x(b,a);return d});q(Node.prototype,"cloneNode",function(a){a=G.call(this,a);this.ownerDocument.__CE_hasRegistry?A(b,a):v(b,a);
+return a});q(Node.prototype,"removeChild",function(a){var c=l(a),d=J.call(this,a);c&&z(b,a);return d});q(Node.prototype,"replaceChild",function(a,c){if(a instanceof DocumentFragment){var d=Array.prototype.slice.apply(a.childNodes);a=K.call(this,a,c);if(l(this))for(z(b,c),c=0;c<d.length;c++)x(b,d[c]);return a}var d=l(a),e=K.call(this,a,c),f=l(this);f&&z(b,c);d&&z(b,a);f&&x(b,a);return e});L&&L.get?a(Node.prototype,L):t(b,function(b){a(b,{enumerable:!0,configurable:!0,get:function(){for(var a=[],b=
+0;b<this.childNodes.length;b++)a.push(this.childNodes[b].textContent);return a.join("")},set:function(a){for(;this.firstChild;)J.call(this,this.firstChild);H.call(this,document.createTextNode(a))}})})};function sa(b){var a=Element.prototype;a.before=function(a){for(var c=[],d=0;d<arguments.length;++d)c[d-0]=arguments[d];d=c.filter(function(a){return a instanceof Node&&l(a)});ja.apply(this,c);for(var e=0;e<d.length;e++)z(b,d[e]);if(l(this))for(d=0;d<c.length;d++)e=c[d],e instanceof Element&&x(b,e)};a.after=function(a){for(var c=[],d=0;d<arguments.length;++d)c[d-0]=arguments[d];d=c.filter(function(a){return a instanceof Node&&l(a)});ka.apply(this,c);for(var e=0;e<d.length;e++)z(b,d[e]);if(l(this))for(d=
+0;d<c.length;d++)e=c[d],e instanceof Element&&x(b,e)};a.replaceWith=function(a){for(var c=[],d=0;d<arguments.length;++d)c[d-0]=arguments[d];var d=c.filter(function(a){return a instanceof Node&&l(a)}),e=l(this);la.apply(this,c);for(var f=0;f<d.length;f++)z(b,d[f]);if(e)for(z(b,this),d=0;d<c.length;d++)e=c[d],e instanceof Element&&x(b,e)};a.remove=function(){var a=l(this);ma.call(this);a&&z(b,this)}};function ta(){var b=Y;function a(a,c){Object.defineProperty(a,"innerHTML",{enumerable:c.enumerable,configurable:!0,get:c.get,set:function(a){var d=this,e=void 0;l(this)&&(e=[],n(this,function(a){a!==d&&e.push(a)}));c.set.call(this,a);if(e)for(var f=0;f<e.length;f++){var h=e[f];1===h.__CE_state&&b.disconnectedCallback(h)}this.ownerDocument.__CE_hasRegistry?A(b,this):v(b,this);return a}})}function e(a,c){q(a,"insertAdjacentElement",function(a,d){var e=l(d);a=c.call(this,a,d);e&&z(b,d);l(a)&&x(b,d);
+return a})}M?q(Element.prototype,"attachShadow",function(a){return this.__CE_shadowRoot=a=M.call(this,a)}):console.warn("Custom Elements: `Element#attachShadow` was not patched.");if(N&&N.get)a(Element.prototype,N);else if(W&&W.get)a(HTMLElement.prototype,W);else{var c=F.call(document,"div");t(b,function(b){a(b,{enumerable:!0,configurable:!0,get:function(){return G.call(this,!0).innerHTML},set:function(a){var b="template"===this.localName?this.content:this;for(c.innerHTML=a;0<b.childNodes.length;)J.call(b,
+b.childNodes[0]);for(;0<c.childNodes.length;)H.call(b,c.childNodes[0])}})})}q(Element.prototype,"setAttribute",function(a,c){if(1!==this.__CE_state)return Q.call(this,a,c);var d=O.call(this,a);Q.call(this,a,c);c=O.call(this,a);b.attributeChangedCallback(this,a,d,c,null)});q(Element.prototype,"setAttributeNS",function(a,c,e){if(1!==this.__CE_state)return T.call(this,a,c,e);var d=S.call(this,a,c);T.call(this,a,c,e);e=S.call(this,a,c);b.attributeChangedCallback(this,c,d,e,a)});q(Element.prototype,"removeAttribute",
+function(a){if(1!==this.__CE_state)return R.call(this,a);var c=O.call(this,a);R.call(this,a);null!==c&&b.attributeChangedCallback(this,a,c,null,null)});q(Element.prototype,"removeAttributeNS",function(a,c){if(1!==this.__CE_state)return U.call(this,a,c);var d=S.call(this,a,c);U.call(this,a,c);var e=S.call(this,a,c);d!==e&&b.attributeChangedCallback(this,c,d,e,a)});X?e(HTMLElement.prototype,X):V?e(Element.prototype,V):console.warn("Custom Elements: `Element#insertAdjacentElement` was not patched.");
+pa(b,Element.prototype,{o:ha,append:ia});sa(b)};/*
+
+ Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
+ This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
+ The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
+ The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
+ Code distributed by Google as part of the polymer project is also
+ subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
+*/
+var Z=window.customElements;if(!Z||Z.forcePolyfill||"function"!=typeof Z.define||"function"!=typeof Z.get){var Y=new r;oa();qa();ra();ta();document.__CE_hasRegistry=!0;var customElements=new E(Y);Object.defineProperty(window,"customElements",{configurable:!0,enumerable:!0,value:customElements})};
+}).call(self);
+
+//# sourceMappingURL=custom-elements.min.js.map
diff --git a/browser/base/jar.mn b/browser/base/jar.mn
--- a/browser/base/jar.mn
+++ b/browser/base/jar.mn
@@ -86,16 +86,19 @@ browser.jar:
         content/browser/browser-tabsintitlebar.js       (content/browser-tabsintitlebar.js)
 #else
         content/browser/browser-tabsintitlebar.js       (content/browser-tabsintitlebar-stub.js)
 #endif
         content/browser/browser-thumbnails.js         (content/browser-thumbnails.js)
         content/browser/browser-trackingprotection.js (content/browser-trackingprotection.js)
         content/browser/tab-content.js                (content/tab-content.js)
         content/browser/content.js                    (content/content.js)
+        content/browser/customelements/access-key-label.js    (content/customelements/access-key-label.js)
+        content/browser/customelements/base-element.js        (content/customelements/base-element.js)
+        content/browser/customelements/custom-elements.js (content/customelements/custom-elements.js)
         content/browser/social-content.js             (content/social-content.js)
         content/browser/default-theme-icon.svg        (content/default-theme-icon.svg)
         content/browser/defaultthemes/1.header.jpg    (content/defaultthemes/1.header.jpg)
         content/browser/defaultthemes/1.icon.jpg      (content/defaultthemes/1.icon.jpg)
         content/browser/defaultthemes/1.preview.jpg   (content/defaultthemes/1.preview.jpg)
         content/browser/defaultthemes/2.header.jpg    (content/defaultthemes/2.header.jpg)
         content/browser/defaultthemes/2.icon.jpg      (content/defaultthemes/2.icon.jpg)
         content/browser/defaultthemes/2.preview.jpg   (content/defaultthemes/2.preview.jpg)
diff --git a/browser/components/preferences/in-content-new/advanced.xul b/browser/components/preferences/in-content-new/advanced.xul
--- a/browser/components/preferences/in-content-new/advanced.xul
+++ b/browser/components/preferences/in-content-new/advanced.xul
@@ -45,27 +45,27 @@
   <stringbundle id="bundleShell" src="chrome://browser/locale/shellservice.properties"/>
   <stringbundle id="bundleBrand" src="chrome://branding/locale/brand.properties"/>
 #endif
 
 <hbox id="header-advanced"
       class="header"
       hidden="true"
       data-category="paneAdvanced">
-  <label class="header-name" flex="1">&paneUpdates.title;</label>
+  <html:accesskey-label class="header-name" flex="1">&paneUpdates.title;</html:accesskey-label>
 </hbox>
 
 <!-- Update -->
 <groupbox id="updateApp" data-category="paneAdvanced" hidden="true">
-  <caption><label>&updateApplication.label;</label></caption>
+  <caption><html:accesskey-label>&updateApplication.label;</html:accesskey-label></caption>
   <hbox align="start">
     <vbox flex="1">
       <description>
-        &updateApplication.version.pre;<label id="version"/>&updateApplication.version.post;
-        <label id="releasenotes" class="learnMore text-link" hidden="true">&releaseNotes.link;</label>
+        &updateApplication.version.pre;<html:accesskey-label id="version"/>&updateApplication.version.post;
+        <html:accesskey-label id="releasenotes" class="learnMore text-link" hidden="true">&releaseNotes.link;</html:accesskey-label>
       </description>
       <description id="distribution" class="text-blurb" hidden="true"/>
       <description id="distributionId" class="text-blurb" hidden="true"/>
     </vbox>
 #ifdef MOZ_UPDATER
     <spacer flex="1"/>
     <vbox>
       <button id="showUpdateHistory"
@@ -96,72 +96,72 @@
       <hbox id="apply" align="center">
         <spacer flex="1"/>
         <button id="updateButton"
                 label="&update.updateButton.label3;"
                 accesskey="&update.updateButton.accesskey;"
                 oncommand="gAppUpdater.buttonRestartAfterDownload();"/>
       </hbox>
       <hbox id="checkingForUpdates" align="center">
-        <image class="update-throbber"/><label>&update.checkingForUpdates;</label>
+        <image class="update-throbber"/><html:accesskey-label>&update.checkingForUpdates;</html:accesskey-label>
         <spacer flex="1"/>
         <button label="&update.checkForUpdatesButton.label;"
                 accesskey="&update.checkForUpdatesButton.accesskey;"
                 disabled="true"/>
       </hbox>
       <hbox id="downloading" align="center">
-        <image class="update-throbber"/><label>&update.downloading.start;</label><label id="downloadStatus"/><label>&update.downloading.end;</label>
+        <image class="update-throbber"/><html:accesskey-label>&update.downloading.start;</html:accesskey-label><html:accesskey-label id="downloadStatus"/><html:accesskey-label>&update.downloading.end;</html:accesskey-label>
       </hbox>
       <hbox id="applying" align="center">
-        <image class="update-throbber"/><label>&update.applying;</label>
+        <image class="update-throbber"/><html:accesskey-label>&update.applying;</html:accesskey-label>
       </hbox>
       <hbox id="downloadFailed" align="center">
-        <label>&update.failed.start;</label><label id="failedLink" class="text-link">&update.failed.linkText;</label><label>&update.failed.end;</label>
+        <html:accesskey-label>&update.failed.start;</html:accesskey-label><html:accesskey-label id="failedLink" class="text-link">&update.failed.linkText;</html:accesskey-label><html:accesskey-label>&update.failed.end;</html:accesskey-label>
         <spacer flex="1"/>
         <button label="&update.checkForUpdatesButton.label;"
                 accesskey="&update.checkForUpdatesButton.accesskey;"
                 oncommand="gAppUpdater.checkForUpdates();"/>
       </hbox>
       <hbox id="adminDisabled" align="center">
-        <label>&update.adminDisabled;</label>
+        <html:accesskey-label>&update.adminDisabled;</html:accesskey-label>
         <spacer flex="1"/>
         <button label="&update.checkForUpdatesButton.label;"
                 accesskey="&update.checkForUpdatesButton.accesskey;"
                 disabled="true"/>
       </hbox>
       <hbox id="noUpdatesFound" align="center">
-        <label>&update.noUpdatesFound;</label>
+        <html:accesskey-label>&update.noUpdatesFound;</html:accesskey-label>
         <spacer flex="1"/>
         <button label="&update.checkForUpdatesButton.label;"
                 accesskey="&update.checkForUpdatesButton.accesskey;"
                 oncommand="gAppUpdater.checkForUpdates();"/>
       </hbox>
       <hbox id="otherInstanceHandlingUpdates" align="center">
-        <label>&update.otherInstanceHandlingUpdates;</label>
+        <html:accesskey-label>&update.otherInstanceHandlingUpdates;</html:accesskey-label>
         <spacer flex="1"/>
         <button label="&update.checkForUpdatesButton.label;"
                 accesskey="&update.checkForUpdatesButton.accesskey;"
                 disabled="true"/>
       </hbox>
       <hbox id="manualUpdate" align="center">
-        <label>&update.manual.start;</label><label id="manualLink" class="text-link"/><label>&update.manual.end;</label>
+        <html:accesskey-label>&update.manual.start;</html:accesskey-label><html:accesskey-label id="manualLink" class="text-link"/><html:accesskey-label>&update.manual.end;</html:accesskey-label>
         <spacer flex="1"/>
         <button label="&update.checkForUpdatesButton.label;"
                 accesskey="&update.checkForUpdatesButton.accesskey;"
                 disabled="true"/>
       </hbox>
       <hbox id="unsupportedSystem" align="center">
-        <label>&update.unsupported.start;</label><label id="unsupportedLink" class="text-link">&update.unsupported.linkText;</label><label>&update.unsupported.end;</label>
+        <html:accesskey-label>&update.unsupported.start;</html:accesskey-label><html:accesskey-label id="unsupportedLink" class="text-link">&update.unsupported.linkText;</html:accesskey-label><html:accesskey-label>&update.unsupported.end;</html:accesskey-label>
         <spacer flex="1"/>
         <button label="&update.checkForUpdatesButton.label;"
                 accesskey="&update.checkForUpdatesButton.accesskey;"
                 disabled="true"/>
       </hbox>
       <hbox id="restarting" align="center">
-        <image class="update-throbber"/><label>&update.restarting;</label>
+        <image class="update-throbber"/><html:accesskey-label>&update.restarting;</html:accesskey-label>
         <spacer flex="1"/>
         <button label="&update.updateButton.label3;"
                 accesskey="&update.updateButton.accesskey;"
                 disabled="true"/>
       </hbox>
     </deck>
   </vbox>
 #endif
diff --git a/browser/components/preferences/in-content-new/applications.xul b/browser/components/preferences/in-content-new/applications.xul
--- a/browser/components/preferences/in-content-new/applications.xul
+++ b/browser/components/preferences/in-content-new/applications.xul
@@ -58,27 +58,27 @@
   <key key="&focusSearch1.key;" modifiers="accel" id="focusSearch1" oncommand=";"/>
   <key key="&focusSearch2.key;" modifiers="accel" id="focusSearch2" oncommand=";"/>
 </keyset>
 
 <hbox id="header-applications"
       class="header"
       hidden="true"
       data-category="paneApplications">
-  <label class="header-name" flex="1">&paneFilesApplications.title;</label>
+  <html:accesskey-label class="header-name" flex="1">&paneFilesApplications.title;</html:accesskey-label>
 </hbox>
 
 <vbox id="applicationsContent"
       data-category="paneApplications"
       hidden="true"
       flex="1">
 
   <!--Downloads-->
   <groupbox id="downloadsGroup">
-    <caption><label>&downloads.label;</label></caption>
+    <caption><html:accesskey-label>&downloads.label;</html:accesskey-label></caption>
 
     <radiogroup id="saveWhere"
                 preference="browser.download.useDownloadDir"
                 onsyncfrompreference="return gApplicationsPane.readUseDownloadDir();">
       <hbox id="saveToRow">
         <radio id="saveTo"
               value="true"
               label="&saveTo.label;"
@@ -103,17 +103,17 @@
       <radio id="alwaysAsk"
             value="false"
             label="&alwaysAskWhere.label;"
             accesskey="&alwaysAskWhere.accesskey;"/>
     </radiogroup>
   </groupbox>
 
   <groupbox id="applicationsGroup">
-    <caption><label>&applications.label;</label></caption>
+    <caption><html:accesskey-label>&applications.label;</html:accesskey-label></caption>
     <description>&applications.description;</description>
     <textbox id="filter" flex="1"
              type="search"
              placeholder="&filter2.emptytext;"
              aria-controls="handlersView"/>
 
     <richlistbox id="handlersView" orient="vertical" persist="lastSelectedType"
                  preference="pref.downloads.disable_button.edit_actions"
diff --git a/browser/components/preferences/in-content-new/containers.xul b/browser/components/preferences/in-content-new/containers.xul
--- a/browser/components/preferences/in-content-new/containers.xul
+++ b/browser/components/preferences/in-content-new/containers.xul
@@ -13,24 +13,24 @@
               name="privacy.userContext.enabled"
               type="bool"/>
 
 </preferences>
 
 <hbox hidden="true"
       class="container-header-links"
       data-category="paneContainers">
-  <label class="text-link" id="backContainersLink">&backLink.label;</label>
+  <html:accesskey-label class="text-link" id="backContainersLink">&backLink.label;</html:accesskey-label>
 </hbox>
 
 <hbox id="header-containers"
       class="header"
       hidden="true"
       data-category="paneContainers">
-  <label class="header-name" flex="1">&paneContainers.title;</label>
+  <html:accesskey-label class="header-name" flex="1">&paneContainers.title;</html:accesskey-label>
 </hbox>
 
 <!-- Containers -->
 <groupbox id="browserContainersGroupPane" data-category="paneContainers" hidden="true"
           data-hidden-from-search="true" data-subpanel="true">
   <vbox id="browserContainersbox">
 
     <richlistbox id="containersView" orient="vertical" persist="lastSelectedType"
diff --git a/browser/components/preferences/in-content-new/main.xul b/browser/components/preferences/in-content-new/main.xul
--- a/browser/components/preferences/in-content-new/main.xul
+++ b/browser/components/preferences/in-content-new/main.xul
@@ -200,69 +200,69 @@
               type="bool"
               inverted="true"/>
 </preferences>
 
 <hbox id="header-general"
       class="header"
       hidden="true"
       data-category="paneGeneral">
-  <label class="header-name" flex="1">&paneGeneral.title;</label>
+  <html:accesskey-label class="header-name" flex="1">&paneGeneral.title;</html:accesskey-label>
 </hbox>
 
 <!-- Startup -->
 <groupbox id="startupGroup"
           data-category="paneGeneral"
           hidden="true">
-  <caption><label>&startup.label;</label></caption>
+  <caption><html:accesskey-label>&startup.label;</html:accesskey-label></caption>
 
 #ifdef MOZ_DEV_EDITION
   <vbox id="separateProfileBox">
     <checkbox id="separateProfileMode"
               label="&separateProfileMode.label;"/>
     <hbox align="center" class="indent">
-      <label id="useFirefoxSync">&useFirefoxSync.label;</label>
+      <html:accesskey-label id="useFirefoxSync">&useFirefoxSync.label;</html:accesskey-label>
       <deck id="getStarted">
-        <label class="text-link">&getStarted.notloggedin.label;</label>
-        <label class="text-link">&getStarted.configured.label;</label>
+        <html:accesskey-label class="text-link">&getStarted.notloggedin.label;</html:accesskey-label>
+        <html:accesskey-label class="text-link">&getStarted.configured.label;</html:accesskey-label>
       </deck>
     </hbox>
   </vbox>
 #endif
 
 #ifdef E10S_TESTING_ONLY
   <checkbox id="e10sAutoStart"
             label="&e10sEnabled.label;"/>
 #endif
 
 #ifdef HAVE_SHELL_SERVICE
   <vbox id="defaultBrowserBox">
     <checkbox id="alwaysCheckDefault" preference="browser.shell.checkDefaultBrowser"
               label="&alwaysCheckDefault2.label;" accesskey="&alwaysCheckDefault2.accesskey;"/>
     <deck id="setDefaultPane">
       <hbox align="center" class="indent">
-        <label id="isNotDefaultLabel" flex="1">&isNotDefault.label;</label>
+        <html:accesskey-label id="isNotDefaultLabel" flex="1">&isNotDefault.label;</html:accesskey-label>
         <button id="setDefaultButton"
                 class="accessory-button"
                 label="&setAsMyDefaultBrowser2.label;" accesskey="&setAsMyDefaultBrowser2.accesskey;"
                 preference="pref.general.disable_button.default_browser"/>
       </hbox>
       <hbox align="center" class="indent">
-        <label id="isDefaultLabel" flex="1">&isDefault.label;</label>
+        <html:accesskey-label id="isDefaultLabel" flex="1">&isDefault.label;</html:accesskey-label>
       </hbox>
     </deck>
     <separator class="thin"/>
   </vbox>
 #endif
 
   <html:table id="startupTable">
     <html:tr>
       <html:td class="label-cell">
-        <label accesskey="&startupPage2.accesskey;"
-               control="browserStartupPage">&startupPage2.label;</label>
+        <html:accesskey-label accesskey="&startupPage2.accesskey;"
+               control="browserStartupPage">&startupPage2.label;</html:accesskey-label>
       </html:td>
       <html:td class="content-cell">
         <menulist id="browserStartupPage"
                   class="content-cell-item"
                   preference="browser.startup.page">
           <menupopup>
           <menuitem label="&startupUserHomePage.label;"
                     value="1"
@@ -274,18 +274,18 @@
                     value="3"
                     id="browserStartupLastSession"/>
           </menupopup>
         </menulist>
       </html:td>
     </html:tr>
     <html:tr>
       <html:td class="label-cell">
-        <label accesskey="&homepage2.accesskey;"
-               control="browserHomePage">&homepage2.label;</label>
+        <html:accesskey-label accesskey="&homepage2.accesskey;"
+               control="browserHomePage">&homepage2.label;</html:accesskey-label>
       </html:td>
       <html:td class="content-cell">
         <textbox id="browserHomePage"
                  class="padded uri-element content-cell-item"
                  type="autocomplete"
                  autocompletesearch="unifiedcomplete"
                  onsyncfrompreference="return gMainPane.syncFromHomePref();"
                  onsynctopreference="return gMainPane.syncToHomePref(this.value);"
@@ -316,41 +316,41 @@
                 preference="pref.browser.homepage.disable_button.restore_default"/>
       </html:td>
     </html:tr>
   </html:table>
 </groupbox>
 
 <!-- Default Search Engine -->
 <groupbox id="defaultEngineGroup" data-category="paneGeneral" data-subcategory="search">
-  <caption><label>&defaultSearchEngine.label;</label></caption>
-  <label>&chooseYourDefaultSearchEngine.label;</label>
+  <caption><html:accesskey-label>&defaultSearchEngine.label;</html:accesskey-label></caption>
+  <html:accesskey-label>&chooseYourDefaultSearchEngine.label;</html:accesskey-label>
   <box align="start">
     <menulist id="defaultEngine">
       <menupopup/>
     </menulist>
   </box>
   <checkbox id="suggestionsInSearchFieldsCheckbox"
             label="&provideSearchSuggestions.label;"
             accesskey="&provideSearchSuggestions.accesskey;"
             preference="browser.search.suggest.enabled"/>
   <vbox class="indent">
     <checkbox id="urlBarSuggestion" label="&showURLBarSuggestions.label;"
               accesskey="&showURLBarSuggestions.accesskey;"
               preference="browser.urlbar.suggest.searches"/>
     <hbox id="urlBarSuggestionPermanentPBLabel"
           align="center" class="indent">
-      <label flex="1">&urlBarSuggestionsPermanentPB.label;</label>
+      <html:accesskey-label flex="1">&urlBarSuggestionsPermanentPB.label;</html:accesskey-label>
     </hbox>
   </vbox>
 </groupbox>
 
 <groupbox id="oneClickSearchProvidersGroup" data-category="paneGeneral" data-subcategory="search">
-  <caption><label>&oneClickSearchEngines.label;</label></caption>
-  <label>&chooseWhichOneToDisplay.label;</label>
+  <caption><html:accesskey-label>&oneClickSearchEngines.label;</html:accesskey-label></caption>
+  <html:accesskey-label>&chooseWhichOneToDisplay.label;</html:accesskey-label>
 
   <tree id="engineList" flex="1" rows="8" hidecolumnpicker="true" editable="true"
         seltype="single" allowunderflowscroll="true">
     <treechildren id="engineChildren" flex="1"/>
     <treecols>
       <treecol id="engineShown" type="checkbox" editable="true" sortable="false"/>
       <treecol id="engineName" flex="4" label="&engineNameColumn.label;" sortable="false"/>
       <treecol id="engineKeyword" flex="1" label="&engineKeywordColumn.label;" editable="true"
@@ -368,24 +368,24 @@
             label="&removeEngine.label;"
             accesskey="&removeEngine.accesskey;"
             disabled="true"/>
   </hbox>
 
   <separator class="thin"/>
 
   <hbox id="addEnginesBox" pack="start">
-    <label id="addEngines" class="text-link">&addMoreSearchEngines2.label;</label>
+    <html:accesskey-label id="addEngines" class="text-link">&addMoreSearchEngines2.label;</html:accesskey-label>
   </hbox>
 </groupbox>
 
 <!-- Tab preferences -->
 <groupbox data-category="paneGeneral"
           hidden="true">
-    <caption><label>&tabsGroup.label;</label></caption>
+    <caption><html:accesskey-label>&tabsGroup.label;</html:accesskey-label></caption>
 
     <checkbox id="ctrlTabRecentlyUsedOrder" label="&ctrlTabRecentlyUsedOrder.label;"
               accesskey="&ctrlTabRecentlyUsedOrder.accesskey;"
               preference="browser.ctrlTab.previews"/>
 
     <checkbox id="linkTargeting" label="&newWindowsAsTabs.label;"
               accesskey="&newWindowsAsTabs.accesskey;"
               preference="browser.link.open_newwindow"
@@ -408,17 +408,17 @@
     <checkbox id="showTabsInTaskbar" label="&showTabsInTaskbar.label;"
               accesskey="&showTabsInTaskbar.accesskey;"
               preference="browser.taskbar.previews.enable"/>
 #endif
 </groupbox>
 
 <!-- Accessibility -->
 <groupbox data-category="paneGeneral" id="accessibilityGroup">
-  <caption><label>&accessibility.label;</label></caption>
+  <caption><html:accesskey-label>&accessibility.label;</html:accesskey-label></caption>
 
 #ifdef XP_WIN
   <checkbox id="useOnScreenKeyboard"
             hidden="true"
             label="&useOnScreenKeyboard.label;"
             accesskey="&useOnScreenKeyboard.accesskey;"
             preference="ui.osk.enabled"/>
 #endif
@@ -433,17 +433,17 @@
   <checkbox id="blockAutoRefresh"
             label="&blockAutoReload.label;"
             accesskey="&blockAutoReload.accesskey;"
             preference="accessibility.blockautorefresh"/>
 </groupbox>
 
 <!-- Languages -->
 <groupbox id="languagesGroup" data-category="paneGeneral" hidden="true">
-  <caption><label>&languages.label;</label></caption>
+  <caption><html:accesskey-label>&languages.label;</html:accesskey-label></caption>
 
   <hbox id="languagesBox" align="center">
     <description flex="1" control="chooseLanguage">&chooseLanguage.label;</description>
     <button id="chooseLanguage"
             class="accessory-button"
             label="&chooseButton.label;"
             accesskey="&chooseButton.accesskey;"
             searchkeywords="&languages.customize.Header;
@@ -457,22 +457,22 @@
 
   <hbox id="translationBox" hidden="true">
     <hbox align="center" flex="1">
       <checkbox id="translate" preference="browser.translation.detectLanguage"
                 label="&translateWebPages.label;." accesskey="&translateWebPages.accesskey;"
                 onsyncfrompreference="return gMainPane.updateButtons('translateButton',
                                               'browser.translation.detectLanguage');"/>
       <hbox id="bingAttribution" hidden="true">
-        <label>&translation.options.attribution.beforeLogo;</label>
+        <html:accesskey-label>&translation.options.attribution.beforeLogo;</html:accesskey-label>
         <separator orient="vertical" class="thin"/>
         <image id="translationAttributionImage" aria-label="Microsoft Translator"
                src="chrome://browser/content/microsoft-translator-attribution.png"/>
         <separator orient="vertical" class="thin"/>
-        <label>&translation.options.attribution.afterLogo;</label>
+        <html:accesskey-label>&translation.options.attribution.afterLogo;</html:accesskey-label>
       </hbox>
     </hbox>
     <button id="translateButton"
             class="accessory-button"
             label="&translateExceptions.label;"
             accesskey="&translateExceptions.accesskey;"/>
   </hbox>
   <checkbox id="checkSpelling"
@@ -481,24 +481,24 @@
           onsyncfrompreference="return gMainPane.readCheckSpelling();"
           onsynctopreference="return gMainPane.writeCheckSpelling();"
           preference="layout.spellcheckDefault"/>
 </groupbox>
 
 
 <!-- Fonts and Colors -->
 <groupbox id="fontsGroup" data-category="paneGeneral" hidden="true">
-  <caption><label>&fontsAndColors.label;</label></caption>
+  <caption><html:accesskey-label>&fontsAndColors.label;</html:accesskey-label></caption>
 
   <vbox>
     <hbox id="fontSettings">
       <hbox align="center">
-        <label control="defaultFont" accesskey="&defaultFont2.accesskey;">&defaultFont2.label;</label>
+        <html:accesskey-label control="defaultFont" accesskey="&defaultFont2.accesskey;">&defaultFont2.label;</html:accesskey-label>
         <menulist id="defaultFont" delayprefsave="true" onsyncfrompreference="return FontBuilder.readFontSelection(this);"/>
-        <label id="defaultFontSizeLabel" control="defaultFontSize" accesskey="&defaultSize2.accesskey;">&defaultSize2.label;</label>
+        <html:accesskey-label id="defaultFontSizeLabel" control="defaultFontSize" accesskey="&defaultSize2.accesskey;">&defaultSize2.label;</html:accesskey-label>
         <menulist id="defaultFontSize" delayprefsave="true">
           <menupopup>
             <menuitem value="9" label="9"/>
             <menuitem value="10" label="10"/>
             <menuitem value="11" label="11"/>
             <menuitem value="12" label="12"/>
             <menuitem value="13" label="13"/>
             <menuitem value="14" label="14"/>
@@ -607,56 +607,56 @@
                               &linkColor.label;
                               &visitedLinkColor.label;"/>
     </hbox>
   </vbox>
 </groupbox>
 
 <!-- Browsing -->
 <groupbox id="browsingGroup" data-category="paneGeneral">
-  <caption><label>&browsing.label;</label></caption>
+  <caption><html:accesskey-label>&browsing.label;</html:accesskey-label></caption>
 
   <checkbox id="useAutoScroll"
             label="&useAutoScroll.label;"
             accesskey="&useAutoScroll.accesskey;"
             preference="general.autoScroll"/>
   <checkbox id="useSmoothScrolling"
             label="&useSmoothScrolling.label;"
             accesskey="&useSmoothScrolling.accesskey;"
             preference="general.smoothScroll"/>
 </groupbox>
 
 <!-- Performance -->
 <groupbox id="performanceGroup" data-category="paneGeneral" hidden="true">
-  <caption><label>&performance.label;</label></caption>
+  <caption><html:accesskey-label>&performance.label;</html:accesskey-label></caption>
 
   <hbox align="center">
     <checkbox id="useRecommendedPerformanceSettings"
               label="&useRecommendedPerformanceSettings2.label;"
               accesskey="&useRecommendedPerformanceSettings2.accesskey;"
               preference="browser.preferences.defaultPerformanceSettings.enabled"/>
-    <label id="performanceSettingsLearnMore" class="learnMore text-link">&performanceSettingsLearnMore.label;</label>
+    <html:accesskey-label id="performanceSettingsLearnMore" class="learnMore text-link">&performanceSettingsLearnMore.label;</html:accesskey-label>
   </hbox>
   <description class="indent">&useRecommendedPerformanceSettings2.description;</description>
 
   <vbox id="performanceSettings" class="indent" hidden="true">
     <checkbox id="allowHWAccel"
               label="&allowHWAccel.label;"
               accesskey="&allowHWAccel.accesskey;"
               preference="layers.acceleration.disabled"/>
     <hbox align="center">
-      <label id="limitContentProcess" accesskey="&limitContentProcessOption.accesskey;" control="contentProcessCount">&limitContentProcessOption.label;</label>
+      <html:accesskey-label id="limitContentProcess" accesskey="&limitContentProcessOption.accesskey;" control="contentProcessCount">&limitContentProcessOption.label;</html:accesskey-label>
       <menulist id="contentProcessCount" preference="dom.ipc.processCount">
         <menupopup>
           <menuitem label="1" value="1"/>
           <menuitem label="2" value="2"/>
           <menuitem label="3" value="3"/>
           <menuitem label="4" value="4"/>
           <menuitem label="5" value="5"/>
           <menuitem label="6" value="6"/>
           <menuitem label="7" value="7"/>
         </menupopup>
       </menulist>
     </hbox>
     <description id="contentProcessCountEnabledDescription">&limitContentProcessOption.description;</description>
-    <description id="contentProcessCountDisabledDescription">&limitContentProcessOption.disabledDescription;<label class="text-link" href="https://wiki.mozilla.org/Electrolysis">&limitContentProcessOption.disabledDescriptionLink;</label></description>
+    <description id="contentProcessCountDisabledDescription">&limitContentProcessOption.disabledDescription;<html:accesskey-label class="text-link" href="https://wiki.mozilla.org/Electrolysis">&limitContentProcessOption.disabledDescriptionLink;</html:accesskey-label></description>
   </vbox>
 </groupbox>
diff --git a/browser/components/preferences/in-content-new/preferences.xul b/browser/components/preferences/in-content-new/preferences.xul
--- a/browser/components/preferences/in-content-new/preferences.xul
+++ b/browser/components/preferences/in-content-new/preferences.xul
@@ -126,73 +126,73 @@
       <richlistitem id="category-search-results"
                     class="category"
                     value="paneSearchResults"
                     helpTopic="prefs-main"
                     tooltiptext="&paneSearchResults.title;"
                     align="center"
                     hidden="true">
         <image class="category-icon"/>
-        <label class="category-name" flex="1">&paneSearchResults.title;</label>
+        <html:accesskey-label class="category-name" flex="1">Hi</html:accesskey-label>
       </richlistitem>
 
       <richlistitem id="category-general"
                     class="category"
                     value="paneGeneral"
                     helpTopic="prefs-main"
                     tooltiptext="&paneGeneral.title;"
                     align="center">
         <image class="category-icon"/>
-        <label class="category-name" flex="1">&paneGeneral.title;</label>
+        <html:accesskey-label class="category-name" flex="1">&paneGeneral.title;</html:accesskey-label>
       </richlistitem>
 
       <richlistitem id="category-application"
                     class="category"
                     value="paneApplications"
                     helpTopic="prefs-applications"
                     tooltiptext="&paneFilesApplications.title;"
                     align="center">
         <image class="category-icon"/>
-        <label class="category-name" flex="1">&paneFilesApplications.title;</label>
+        <html:accesskey-label class="category-name" flex="1">&paneFilesApplications.title;</html:accesskey-label>
       </richlistitem>
 
       <richlistitem id="category-containers"
                     class="category"
                     value="paneContainers"
                     helpTopic="prefs-containers"
                     hidden="true"/>
 
       <richlistitem id="category-sync"
                     class="category"
                     value="paneSync"
                     helpTopic="prefs-weave"
                     tooltiptext="&paneSync1.title;"
                     align="center">
         <image class="category-icon"/>
-        <label class="category-name" flex="1">&paneSync1.title;</label>
+        <html:accesskey-label class="category-name" flex="1">&paneSync1.title;</html:accesskey-label>
       </richlistitem>
 
       <richlistitem id="category-privacy"
                     class="category"
                     value="panePrivacy"
                     helpTopic="prefs-privacy"
                     tooltiptext="&panePrivacySecurity.title;"
                     align="center">
         <image class="category-icon"/>
-        <label class="category-name" flex="1">&panePrivacySecurity.title;</label>
+        <html:accesskey-label class="category-name" flex="1">&panePrivacySecurity.title;</html:accesskey-label>
       </richlistitem>
 
       <richlistitem id="category-advanced"
                     class="category"
                     value="paneAdvanced"
                     helpTopic="prefs-advanced-general"
                     tooltiptext="&paneUpdates.title;"
                     align="center">
         <image class="category-icon"/>
-        <label class="category-name" flex="1">&paneUpdates.title;</label>
+        <html:accesskey-label class="category-name" flex="1">&paneUpdates.title;</html:accesskey-label>
       </richlistitem>
     </richlistbox>
 
     <keyset>
       <!-- Disable the findbar because it doesn't work properly.
            Remove this keyset once bug 1094240 ("disablefastfind" attribute
            broken in e10s mode) is fixed. -->
       <key key="&focusSearch1.key;" modifiers="accel" id="focusSearch1" oncommand=";"/>
@@ -230,9 +230,13 @@
                 aria-label="&preferencesCloseButton.label;"/>
       </caption>
       <browser class="dialogFrame"
                autoscroll="false"
                disablehistory="true"/>
     </groupbox>
   </vbox>
   </stack>
+
+  <script type="application/javascript" src="chrome://browser/content/customelements/custom-elements.js"/>
+  <script type="application/javascript" src="chrome://browser/content/customelements/base-element.js"/>
+  <script type="application/javascript" src="chrome://browser/content/customelements/access-key-label.js"/>
 </page>
diff --git a/browser/components/preferences/in-content-new/privacy.xul b/browser/components/preferences/in-content-new/privacy.xul
--- a/browser/components/preferences/in-content-new/privacy.xul
+++ b/browser/components/preferences/in-content-new/privacy.xul
@@ -172,28 +172,28 @@
 
 <stringbundle id="bundlePreferences" src="chrome://browser/locale/preferences/preferences.properties"/>
 <stringbundle id="signonBundle" src="chrome://passwordmgr/locale/passwordmgr.properties"/>
 
 <hbox id="header-privacy"
       class="header"
       hidden="true"
       data-category="panePrivacy">
-  <label class="header-name" flex="1">&panePrivacySecurity.title;</label>
+  <html:accesskey-label class="header-name" flex="1">&panePrivacySecurity.title;</html:accesskey-label>
 </hbox>
 
 
 <!-- History -->
 <groupbox id="historyGroup" data-category="panePrivacy" hidden="true">
-  <caption><label>&history.label;</label></caption>
+  <caption><html:accesskey-label>&history.label;</html:accesskey-label></caption>
   <hbox align="center">
-    <label id="historyModeLabel"
+    <html:accesskey-label id="historyModeLabel"
            control="historyMode"
            accesskey="&historyHeader2.pre.accesskey;">&historyHeader2.pre.label;
-    </label>
+    </html:accesskey-label>
     <menulist id="historyMode">
       <menupopup>
         <menuitem label="&historyHeader.remember.label;" value="remember" searchkeywords="&rememberDescription.label;
                                                                                           &rememberActions.pre.label;
                                                                                           &rememberActions.clearHistory.label;
                                                                                           &rememberActions.middle.label;
                                                                                           &rememberActions.removeCookies.label;
                                                                                           &rememberActions.post.label;"/>
@@ -213,40 +213,40 @@
                                                                                       &keepUntil.label;
                                                                                       &expire.label;
                                                                                       &close.label;
                                                                                       &showCookies.label;
                                                                                       &clearOnClose.label;
                                                                                       &clearOnCloseSettings.label;"/>
       </menupopup>
     </menulist>
-    <label>&historyHeader.post.label;</label>
+    <html:accesskey-label>&historyHeader.post.label;</html:accesskey-label>
   </hbox>
   <deck id="historyPane">
     <vbox id="historyRememberPane">
       <hbox align="center" flex="1">
         <vbox flex="1">
           <description>&rememberDescription.label;</description>
           <separator class="thin"/>
-          <description>&rememberActions.pre.label;<label
+          <description>&rememberActions.pre.label;<html:accesskey-label
           class="text-link" id="historyRememberClear"
-          >&rememberActions.clearHistory.label;</label>&rememberActions.middle.label;<label
+          >&rememberActions.clearHistory.label;</html:accesskey-label>&rememberActions.middle.label;<html:accesskey-label
           class="text-link" id="historyRememberCookies"
-          >&rememberActions.removeCookies.label;</label>&rememberActions.post.label;</description>
+          >&rememberActions.removeCookies.label;</html:accesskey-label>&rememberActions.post.label;</description>
         </vbox>
       </hbox>
     </vbox>
     <vbox id="historyDontRememberPane">
       <hbox align="center" flex="1">
         <vbox flex="1">
           <description>&dontrememberDescription.label;</description>
           <separator class="thin"/>
-          <description>&dontrememberActions.pre.label;<label
+          <description>&dontrememberActions.pre.label;<html:accesskey-label
           class="text-link" id="historyDontRememberClear"
-          >&dontrememberActions.clearHistory.label;</label>&dontrememberActions.post.label;</description>
+          >&dontrememberActions.clearHistory.label;</html:accesskey-label>&dontrememberActions.post.label;</description>
         </vbox>
       </hbox>
     </vbox>
     <vbox id="historyCustomPane">
       <separator class="thin"/>
       <vbox>
         <checkbox id="privateBrowsingAutoStart"
                   label="&privateBrowsingPermanent2.label;"
@@ -271,34 +271,34 @@
             <button id="cookieExceptions"
                     class="accessory-button"
                     label="&cookieExceptions.label;" accesskey="&cookieExceptions.accesskey;"
                     preference="pref.privacy.disable_button.cookie_exceptions"/>
           </hbox>
           <hbox id="acceptThirdPartyRow"
                 class="indent"
                 align="center">
-            <label id="acceptThirdPartyLabel" control="acceptThirdPartyMenu"
-                   accesskey="&acceptThirdParty.pre.accesskey;">&acceptThirdParty.pre.label;</label>
+            <html:accesskey-label id="acceptThirdPartyLabel" control="acceptThirdPartyMenu"
+                   accesskey="&acceptThirdParty.pre.accesskey;">&acceptThirdParty.pre.label;</html:accesskey-label>
             <menulist id="acceptThirdPartyMenu" preference="network.cookie.cookieBehavior"
             onsyncfrompreference="return gPrivacyPane.readAcceptThirdPartyCookies();"
             onsynctopreference="return gPrivacyPane.writeAcceptThirdPartyCookies();">
               <menupopup>
                 <menuitem label="&acceptThirdParty.always.label;" value="always"/>
                 <menuitem label="&acceptThirdParty.visited.label;" value="visited"/>
                 <menuitem label="&acceptThirdParty.never.label;" value="never"/>
               </menupopup>
             </menulist>
           </hbox>
           <hbox id="keepRow"
                 class="indent"
                 align="center">
-            <label id="keepUntil"
+            <html:accesskey-label id="keepUntil"
                    control="keepCookiesUntil"
-                   accesskey="&keepUntil.accesskey;">&keepUntil.label;</label>
+                   accesskey="&keepUntil.accesskey;">&keepUntil.label;</html:accesskey-label>
             <menulist id="keepCookiesUntil"
                       preference="network.cookie.lifetimePolicy">
               <menupopup>
                 <menuitem label="&expire.label;" value="0"/>
                 <menuitem label="&close.label;" value="2"/>
               </menupopup>
             </menulist>
             <spacer flex="1"/>
@@ -322,17 +322,17 @@
         </vbox>
       </vbox>
     </vbox>
   </deck>
 </groupbox>
 
 <!-- Passwords -->
 <groupbox id="passwordsGroup" orient="vertical" data-category="panePrivacy" hidden="true">
-  <caption><label>&formsAndPasswords.label;</label></caption>
+  <caption><html:accesskey-label>&formsAndPasswords.label;</html:accesskey-label></caption>
 
   <vbox id="passwordSettings">
     <hbox id="savePasswordsBox">
       <checkbox id="savePasswords"
                 label="&rememberLogins1.label;" accesskey="&rememberLogins1.accesskey;"
                 preference="signon.rememberSignons"
                 onsyncfrompreference="return gPrivacyPane.readSavePasswords();"
                 flex="1" />
@@ -360,23 +360,23 @@
             class="accessory-button"
             label="&changeMasterPassword.label;"
             accesskey="&changeMasterPassword.accesskey;"/>
   </hbox>
 </groupbox>
 
 <!-- Tracking -->
 <groupbox id="trackingGroup" data-category="panePrivacy" hidden="true">
-  <caption><label>&trackingProtectionHeader2.label;</label></caption>
+  <caption><html:accesskey-label>&trackingProtectionHeader2.label;</html:accesskey-label></caption>
   <vbox id="trackingprotectionbox" hidden="true">
     <hbox align="start">
       <vbox flex="1">
         <description>
           &trackingProtection.description;
-          <label id="trackingProtectionLearnMore" class="learnMore text-link">&trackingProtectionLearnMore.label;</label>
+          <html:accesskey-label id="trackingProtectionLearnMore" class="learnMore text-link">&trackingProtectionLearnMore.label;</html:accesskey-label>
         </description>
         <description id="trackingProtectionDesc"
                      control="trackingProtectionRadioGroup">
           &trackingProtection.radioGroupLabel;
         </description>
       </vbox>
       <spacer flex="1"/>
       <vbox id="trackingProtectionAdvancedSettings">
@@ -405,68 +405,68 @@
              label="&trackingProtectionPrivate.label;"
              accesskey="&trackingProtectionPrivate.accesskey;"/>
       <radio value="never"
              label="&trackingProtectionNever.label;"
              accesskey="&trackingProtectionNever.accesskey;"/>
     </radiogroup>
   </vbox>
   <vbox id="trackingprotectionpbmbox">
-    <caption><label>&tracking.label;</label></caption>
+    <caption><html:accesskey-label>&tracking.label;</html:accesskey-label></caption>
     <hbox align="center">
       <checkbox id="trackingProtectionPBM"
                 preference="privacy.trackingprotection.pbmode.enabled"
                 accesskey="&trackingProtectionPBM5.accesskey;"
                 label="&trackingProtectionPBM5.label;" />
-      <label id="trackingProtectionPBMLearnMore"
-             class="learnMore text-link">&trackingProtectionPBMLearnMore.label;</label>
+      <html:accesskey-label id="trackingProtectionPBMLearnMore"
+             class="learnMore text-link">&trackingProtectionPBMLearnMore.label;</html:accesskey-label>
       <spacer flex="1" />
       <button id="changeBlockListPBM"
               label="&changeBlockList.label;" accesskey="&changeBlockList.accesskey;"
               preference="pref.privacy.disable_button.change_blocklist"/>
     </hbox>
   </vbox>
   <vbox>
-    <description>&doNotTrack.pre.label;<label
+    <description>&doNotTrack.pre.label;<html:accesskey-label
     class="text-link" id="doNotTrackSettings"
-    >&doNotTrack.settings.label;</label>&doNotTrack.post.label;</description>
+    >&doNotTrack.settings.label;</html:accesskey-label>&doNotTrack.post.label;</description>
   </vbox>
 </groupbox>
 
 <!-- Pop-ups -->
 <groupbox id="miscGroup" data-category="panePrivacy" hidden="true">
-  <caption><label>&popups.label;</label></caption>
+  <caption><html:accesskey-label>&popups.label;</html:accesskey-label></caption>
   <hbox align="start">
     <checkbox id="popupPolicy" preference="dom.disable_open_during_load"
               label="&blockPopups.label;" accesskey="&blockPopups.accesskey;"
               onsyncfrompreference="return gPrivacyPane.updateButtons('popupPolicyButton',
                                          'dom.disable_open_during_load');"
               flex="1" />
     <button id="popupPolicyButton"
             class="accessory-button"
             label="&popupExceptions.label;"
             accesskey="&popupExceptions.accesskey;"
             searchkeywords="&address.label; &button.cancel.label; &button.ok.label;"/>
   </hbox>
 </groupbox>
 
 <!-- Notifications -->
 <groupbox id="notificationsGroup" data-category="panePrivacy" hidden="true">
-  <caption><label>&notificationsPolicy.label;</label></caption>
+  <caption><html:accesskey-label>&notificationsPolicy.label;</html:accesskey-label></caption>
   <grid>
     <columns>
       <column flex="1"/>
       <column/>
     </columns>
     <rows>
       <row id="notificationsPolicyRow" align="center">
         <hbox flex="1">
-          <label id="notificationsPolicy">&notificationsPolicyDesc3.label;</label>
-          <label id="notificationsPolicyLearnMore"
-                 class="learnMore text-link">&notificationsPolicyLearnMore.label;</label>
+          <html:accesskey-label id="notificationsPolicy">&notificationsPolicyDesc3.label;</html:accesskey-label>
+          <html:accesskey-label id="notificationsPolicyLearnMore"
+                 class="learnMore text-link">&notificationsPolicyLearnMore.label;</html:accesskey-label>
         </hbox>
         <hbox pack="end">
           <button id="notificationsPolicyButton"
                   class="accessory-button"
                   label="&notificationsPolicyButton.label;"
                   accesskey="&notificationsPolicyButton.accesskey;"
                   searchkeywords="&removepermission.label;
                                   &removeallpermissions.label;
@@ -474,44 +474,44 @@
                                   &button.ok.label;"/>
         </hbox>
       </row>
     </rows>
   </grid>
   <vbox id="notificationsDoNotDisturbBox" hidden="true">
     <checkbox id="notificationsDoNotDisturb" label="&notificationsDoNotDisturb.label;"
               accesskey="&notificationsDoNotDisturb.accesskey;"/>
-    <label id="notificationsDoNotDisturbDetails"
-           class="indent">&notificationsDoNotDisturbDetails.value;</label>
+    <html:accesskey-label id="notificationsDoNotDisturbDetails"
+           class="indent">&notificationsDoNotDisturbDetails.value;</html:accesskey-label>
   </vbox>
 </groupbox>
 
 <!-- Location Bar -->
 <groupbox id="locationBarGroup"
           data-category="panePrivacy"
           hidden="true">
-  <caption><label>&locationBar.label;</label></caption>
-  <label id="locationBarSuggestionLabel">&locbar.suggest2.label;</label>
+  <caption><html:accesskey-label>&locationBar.label;</html:accesskey-label></caption>
+  <html:accesskey-label id="locationBarSuggestionLabel">&locbar.suggest2.label;</html:accesskey-label>
   <checkbox id="historySuggestion" label="&locbar.history.label;"
             accesskey="&locbar.history.accesskey;"
             preference="browser.urlbar.suggest.history"/>
   <checkbox id="bookmarkSuggestion" label="&locbar.bookmarks.label;"
             accesskey="&locbar.bookmarks.accesskey;"
             preference="browser.urlbar.suggest.bookmark"/>
   <checkbox id="openpageSuggestion" label="&locbar.openpage.label;"
             accesskey="&locbar.openpage.accesskey;"
             preference="browser.urlbar.suggest.openpage"/>
-  <label class="text-link" onclick="gotoPref('general')">
+  <html:accesskey-label class="text-link" onclick="gotoPref('general')">
     &suggestionSettings2.label;
-  </label>
+  </html:accesskey-label>
 </groupbox>
 
 <!-- addons, forgery (phishing) UI Security -->
 <groupbox id="addonsPhishingGroup" data-category="panePrivacy" hidden="true">
-  <caption><label>&security.label;</label></caption>
+  <caption><html:accesskey-label>&security.label;</html:accesskey-label></caption>
 
   <hbox id="addonInstallBox">
     <checkbox id="warnAddonInstall"
               label="&warnOnAddonInstall.label;"
               accesskey="&warnOnAddonInstall.accesskey;"
               preference="xpinstall.whitelist.required"
               onsyncfrompreference="return gPrivacyPane.readWarnAddonInstall();"
               flex="1" />
@@ -538,17 +538,17 @@
     <checkbox id="blockUncommonUnwanted"
               label="&blockUncommonAndUnwanted.label;"
               accesskey="&blockUncommonAndUnwanted.accesskey;" />
   </vbox>
 </groupbox>
 
 <!-- Certificates -->
 <groupbox id="certSelection" data-category="panePrivacy" hidden="true">
-  <caption><label>&certificateTab.label;</label></caption>
+  <caption><html:accesskey-label>&certificateTab.label;</html:accesskey-label></caption>
   <description id="CertSelectionDesc" control="certSelection">&certPersonal2.description;</description>
 
   <!--
     The values on these radio buttons may look like l10n issues, but
     they're not - this preference uses *those strings* as its values.
     I KID YOU NOT.
   -->
   <radiogroup id="certSelection"
@@ -606,65 +606,65 @@
                               &devmgr.button.load.label;
                               &devmgr.button.unload.label;"/>
     </vbox>
   </hbox>
 </groupbox>
 
 <!-- DRM Content -->
 <groupbox id="drmGroup" data-category="panePrivacy" hidden="true">
-  <caption><label>&drmContent.label;</label></caption>
+  <caption><html:accesskey-label>&drmContent.label;</html:accesskey-label></caption>
   <grid id="contentGrid2">
     <columns>
       <column flex="1"/>
       <column/>
     </columns>
     <rows id="contentRows-2">
       <row id="playDRMContentRow">
         <hbox align="center">
           <checkbox id="playDRMContent" preference="media.eme.enabled"
                     label="&playDRMContent.label;" accesskey="&playDRMContent.accesskey;"/>
-          <label id="playDRMContentLink" class="learnMore text-link">
+          <html:accesskey-label id="playDRMContentLink" class="learnMore text-link">
             &playDRMContent.learnMore.label;
-          </label>
+          </html:accesskey-label>
         </hbox>
       </row>
     </rows>
   </grid>
 </groupbox>
 
 <!-- Containers -->
 <groupbox id="browserContainersGroup" data-category="panePrivacy" hidden="true">
   <vbox id="browserContainersbox" hidden="true">
-    <caption><label>&browserContainersHeader.label;</label></caption>
+    <caption><html:accesskey-label>&browserContainersHeader.label;</html:accesskey-label></caption>
     <hbox align="center">
       <checkbox id="browserContainersCheckbox"
                 label="&browserContainersEnabled.label;"
                 accesskey="&browserContainersEnabled.accesskey;"
                 preference="privacy.userContext.enabled"
                 onsyncfrompreference="return gPrivacyPane.readBrowserContainersCheckbox();"/>
-      <label id="browserContainersLearnMore" class="learnMore text-link">
+      <html:accesskey-label id="browserContainersLearnMore" class="learnMore text-link">
         &browserContainersLearnMore.label;
-      </label>
+      </html:accesskey-label>
       <spacer flex="1"/>
       <button id="browserContainersSettings"
               class="accessory-button"
               label="&browserContainersSettings.label;"
               accesskey="&browserContainersSettings.accesskey;"
               searchkeywords="&addButton.label;
                               &preferencesButton.label;
                               &removeButton.label;"/>
     </hbox>
   </vbox>
 </groupbox>
 
 <!-- Network -->
 <!-- Connection -->
 <groupbox id="connectionGroup" data-category="panePrivacy" hidden="true">
-  <caption><label>&connection.label;</label></caption>
+  <caption><html:accesskey-label>&connection.label;</html:accesskey-label></caption>
 
   <hbox align="center">
     <description flex="1" control="connectionSettings">&connectionDesc.label;</description>
     <button id="connectionSettings"
             class="accessory-button"
             icon="network"
             label="&connectionSettings.label;"
             accesskey="&connectionSettings.accesskey;"
@@ -686,47 +686,47 @@
                             &reload.label;
                             &autologinproxy.label;
                             &socksRemoteDNS.label2;"/>
   </hbox>
 </groupbox>
 
 <!-- Cache -->
 <groupbox id="cacheGroup" data-category="panePrivacy" hidden="true">
-  <caption><label>&httpCache.label;</label></caption>
+  <caption><html:accesskey-label>&httpCache.label;</html:accesskey-label></caption>
 
   <hbox align="center">
-    <label id="actualDiskCacheSize" flex="1"/>
+    <html:accesskey-label id="actualDiskCacheSize" flex="1"/>
     <button id="clearCacheButton"
             class="accessory-button"
             icon="clear"
             label="&clearCacheNow.label;" accesskey="&clearCacheNow.accesskey;"/>
   </hbox>
   <checkbox preference="browser.cache.disk.smart_size.enabled"
             id="allowSmartSize"
             onsyncfrompreference="return gPrivacyPane.readSmartSizeEnabled();"
             label="&overrideSmartCacheSize.label;"
             accesskey="&overrideSmartCacheSize.accesskey;"/>
   <hbox align="center" class="indent">
-    <label id="useCacheBefore" control="cacheSize"
+    <html:accesskey-label id="useCacheBefore" control="cacheSize"
             accesskey="&limitCacheSizeBefore.accesskey;">
       &limitCacheSizeBefore.label;
-    </label>
+    </html:accesskey-label>
     <textbox id="cacheSize" type="number" size="4" max="1024"
               aria-labelledby="useCacheBefore cacheSize useCacheAfter"/>
-    <label id="useCacheAfter" flex="1">&limitCacheSizeAfter.label;</label>
+    <html:accesskey-label id="useCacheAfter" flex="1">&limitCacheSizeAfter.label;</html:accesskey-label>
   </hbox>
 </groupbox>
 
 <!-- Offline apps -->
 <groupbox id="offlineGroup" data-category="panePrivacy" hidden="true" data-hidden-from-search="true">
-  <caption><label>&offlineStorage2.label;</label></caption>
+  <caption><html:accesskey-label>&offlineStorage2.label;</html:accesskey-label></caption>
 
   <hbox align="center">
-    <label id="actualAppCacheSize" flex="1"/>
+    <html:accesskey-label id="actualAppCacheSize" flex="1"/>
     <button id="clearOfflineAppCacheButton"
             class="accessory-button"
             icon="clear"
             label="&clearOfflineAppCacheNow.label;" accesskey="&clearOfflineAppCacheNow.accesskey;"/>
   </hbox>
   <hbox align="center">
     <checkbox id="offlineNotify"
               label="&offlineStorageNotify.label;" accesskey="&offlineStorageNotify.accesskey;"
@@ -735,17 +735,17 @@
               flex="1" />
     <button id="offlineNotifyExceptions"
             class="accessory-button"
             label="&offlineStorageNotifyExceptions.label;"
             accesskey="&offlineStorageNotifyExceptions.accesskey;"/>
   </hbox>
   <hbox>
     <vbox flex="1">
-      <label id="offlineAppsListLabel">&offlineAppsList2.label;</label>
+      <html:accesskey-label id="offlineAppsListLabel">&offlineAppsList2.label;</html:accesskey-label>
       <listbox id="offlineAppsList"
               flex="1"
               aria-labelledby="offlineAppsListLabel">
       </listbox>
     </vbox>
     <vbox pack="end">
       <button id="offlineAppsListRemove"
               class="accessory-button"
@@ -753,21 +753,21 @@
               label="&offlineAppsListRemove.label;"
               accesskey="&offlineAppsListRemove.accesskey;"/>
     </vbox>
   </hbox>
 </groupbox>
 
 <!-- Site Data -->
 <groupbox id="siteDataGroup" hidden="true" data-category="panePrivacy" data-hidden-from-search="true">
-  <caption><label>&siteData.label;</label></caption>
+  <caption><html:accesskey-label>&siteData.label;</html:accesskey-label></caption>
 
   <hbox align="baseline">
-    <label id="totalSiteDataSize"></label>
-    <label id="siteDataLearnMoreLink" class="learnMore text-link" value="&siteDataLearnMoreLink.label;"></label>
+    <html:accesskey-label id="totalSiteDataSize"></html:accesskey-label>
+    <html:accesskey-label id="siteDataLearnMoreLink" class="learnMore text-link" value="&siteDataLearnMoreLink.label;"></html:accesskey-label>
     <spacer flex="1" />
     <button id="clearSiteDataButton"
             class="accessory-button"
             icon="clear"
             label="&clearSiteData.label;" accesskey="&clearSiteData.accesskey;"/>
   </hbox>
   <vbox align="end">
     <button id="siteDataSettings"
@@ -780,48 +780,48 @@
                             &usageCol.label;"/>
   </vbox>
 </groupbox>
 
 <!-- Data Choices -->
 #ifdef MOZ_DATA_REPORTING
 
 <groupbox id="telemetryGroup" data-category="panePrivacy" data-subcategory="reports" hidden="true">
-<caption><label>&reports.label;</label></caption>
+<caption><html:accesskey-label>&reports.label;</html:accesskey-label></caption>
 #ifndef MOZ_TELEMETRY_REPORTING
   <description id="TelemetryDisabledDesc" control="telemetryGroup">&healthReportingDisabled.label;</description>
 #endif
 
   <hbox align="center">
     <checkbox id="submitHealthReportBox" label="&enableHealthReport.label;"
               accesskey="&enableHealthReport.accesskey;"/>
-    <label id="FHRLearnMore"
-           class="learnMore text-link">&healthReportLearnMore.label;</label>
+    <html:accesskey-label id="FHRLearnMore"
+           class="learnMore text-link">&healthReportLearnMore.label;</html:accesskey-label>
   </hbox>
   <description class="indent">&healthReportDesc.label;</description>
   <vbox class="indent">
     <hbox align="center">
       <checkbox id="submitTelemetryBox" preference="toolkit.telemetry.enabled"
                 label="&enableTelemetryData.label;"
                 accesskey="&enableTelemetryData.accesskey;"/>
-      <label id="telemetryLearnMore"
-             class="learnMore text-link">&telemetryLearnMore.label;</label>
+      <html:accesskey-label id="telemetryLearnMore"
+             class="learnMore text-link">&telemetryLearnMore.label;</html:accesskey-label>
     </hbox>
     <description id="telemetryDataDesc"
                  class="indent">&telemetryDesc.label;</description>
   </vbox>
 </groupbox>
 
 #ifdef MOZ_CRASHREPORTER
 <groupbox id="crashReporterGroup" data-category="panePrivacy" data-subcategory="reports" hidden="true">
   <hbox align="center">
     <checkbox id="automaticallySubmitCrashesBox"
               preference="browser.crashReports.unsubmittedCheck.autoSubmit"
               label="&alwaysSubmitCrashReports.label;"
               accesskey="&alwaysSubmitCrashReports.accesskey;"/>
-    <label id="crashReporterLearnMore"
-           class="learnMore text-link">&crashReporterLearnMore.label;</label>
+    <html:accesskey-label id="crashReporterLearnMore"
+           class="learnMore text-link">&crashReporterLearnMore.label;</html:accesskey-label>
   </hbox>
   <description class="indent">&crashReporterDesc2.label;</description>
 </groupbox>
 
 #endif
 #endif
diff --git a/browser/components/preferences/in-content-new/searchResults.xul b/browser/components/preferences/in-content-new/searchResults.xul
--- a/browser/components/preferences/in-content-new/searchResults.xul
+++ b/browser/components/preferences/in-content-new/searchResults.xul
@@ -3,15 +3,15 @@
    - You can obtain one at http://mozilla.org/MPL/2.0/. -->
 
 <stringbundle id="searchResultBundle" src="chrome://browser/locale/preferences/preferences.properties"/>
 
 <hbox id="header-searchResults"
       class="header"
       hidden="true"
       data-category="paneSearchResults">
-  <label class="header-name" flex="1">&paneSearchResults.title;</label>
+  <html:accesskey-label class="header-name" flex="1">&paneSearchResults.title;</html:accesskey-label>
 </hbox>
 
 <groupbox class="no-results-message" align="start" data-category="paneSearchResults" hidden="true">
-  <label id="sorry-message"></label>
-  <label id="need-help"></label>
+  <html:accesskey-label id="sorry-message"></html:accesskey-label>
+  <html:accesskey-label id="need-help"></html:accesskey-label>
 </groupbox>
diff --git a/browser/components/preferences/in-content-new/sync.xul b/browser/components/preferences/in-content-new/sync.xul
--- a/browser/components/preferences/in-content-new/sync.xul
+++ b/browser/components/preferences/in-content-new/sync.xul
@@ -27,78 +27,78 @@
 
 <script type="application/javascript"
         src="chrome://browser/content/preferences/in-content-new/sync.js"/>
 
 <hbox id="header-sync"
       class="header"
       hidden="true"
       data-category="paneSync">
-  <label class="header-name" flex="1">&paneSync1.title;</label>
+  <html:accesskey-label class="header-name" flex="1">&paneSync1.title;</html:accesskey-label>
 </hbox>
 
 <deck id="weavePrefsDeck" data-category="paneSync" hidden="true">
   <vbox id="noFxaAccount">
     <hbox>
       <vbox id="fxaContentWrapper">
         <groupbox id="noFxaGroup">
           <vbox>
-            <label id="noFxaCaption">&signedOut.caption;</label>
+            <html:accesskey-label id="noFxaCaption">&signedOut.caption;</html:accesskey-label>
             <description id="noFxaDescription" flex="1">&signedOut.description;</description>
             <hbox class="fxaAccountBox">
               <vbox>
                 <image class="fxaFirefoxLogo"/>
               </vbox>
               <vbox flex="1">
-                <label id="signedOutAccountBoxTitle">&signedOut.accountBox.title;</label>
+                <html:accesskey-label id="signedOutAccountBoxTitle">&signedOut.accountBox.title;</html:accesskey-label>
                 <hbox class="fxaAccountBoxButtons">
                   <button id="noFxaSignUp" label="&signedOut.accountBox.create;" accesskey="&signedOut.accountBox.create.accesskey;"></button>
                   <button id="noFxaSignIn" label="&signedOut.accountBox.signin;" accesskey="&signedOut.accountBox.signin.accesskey;"></button>
                 </hbox>
               </vbox>
             </hbox>
           </vbox>
         </groupbox>
       </vbox>
       <vbox>
         <html:img class="fxaSyncIllustration" src="chrome://browser/skin/fxa/sync-illustration.svg"/>
       </vbox>
     </hbox>
-    <label class="fxaMobilePromo">
+    <html:accesskey-label class="fxaMobilePromo">
         &mobilePromo3.start;<!-- We put these comments to avoid inserting white spaces
-        --><label id="fxaMobilePromo-android"
+        --><html:accesskey-label id="fxaMobilePromo-android"
                   class="androidLink text-link"><!--
-        -->&mobilePromo3.androidLink;</label><!--
+        -->&mobilePromo3.androidLink;</html:accesskey-label><!--
         -->&mobilePromo3.iOSBefore;<!--
-        --><label id="fxaMobilePromo-ios"
+        --><html:accesskey-label id="fxaMobilePromo-ios"
                   class="iOSLink text-link"><!--
-        -->&mobilePromo3.iOSLink;</label><!--
+        -->&mobilePromo3.iOSLink;</html:accesskey-label><!--
         -->&mobilePromo3.end;
-    </label>
+    </html:accesskey-label>
   </vbox>
 
   <vbox id="hasFxaAccount">
     <hbox>
       <vbox id="fxaContentWrapper">
         <groupbox id="fxaGroup">
-          <caption><label>&syncBrand.fxAccount.label;</label></caption>
+          <caption><html:accesskey-label>&syncBrand.fxAccount.label;</html:accesskey-label></caption>
           <deck id="fxaLoginStatus">
 
             <!-- logged in and verified and all is good -->
             <hbox id="fxaLoginVerified" class="fxaAccountBox">
               <vbox align="center" pack="center">
                 <image id="fxaProfileImage" class="actionable"
                     role="button"
                     onclick="gSyncPane.openChangeProfileImage(event);"
                     onkeypress="gSyncPane.openChangeProfileImage(event);"
                     tooltiptext="&profilePicture.tooltip;"/>
               </vbox>
               <vbox flex="1" pack="center">
-                <label id="fxaDisplayName" hidden="true"/>
-                <label id="fxaEmailAddress1"/>
+                <html:accesskey-label id="fxaDisplayName" hidden="true"/>
+                <html:accesskey-label id="fxaEmailAddress1"/>
                 <hbox class="fxaAccountBoxButtons">
                   <button id="fxaUnlinkButton" label="&disconnect3.label;" accesskey="&disconnect3.accesskey;"/>
                   <html:a id="verifiedManage" target="_blank"
                          accesskey="&verifiedManage.accesskey;"
                          onkeypress="gSyncPane.openManageFirefoxAccount(event);"><!--
                   -->&verifiedManage.label;</html:a>
                 </hbox>
               </vbox>
@@ -109,17 +109,17 @@
               <vbox>
                 <image id="fxaProfileImage"/>
               </vbox>
               <vbox flex="1">
                 <hbox>
                   <vbox><image id="fxaLoginRejectedWarning"/></vbox>
                   <description flex="1">
                     &signedInUnverified.beforename.label;
-                    <label id="fxaEmailAddress2"/>
+                    <html:accesskey-label id="fxaEmailAddress2"/>
                     &signedInUnverified.aftername.label;
                   </description>
                 </hbox>
                 <hbox class="fxaAccountBoxButtons">
                   <button id="verifyFxaAccount" label="&verify.label;" accesskey="&verify.accesskey;"></button>
                   <button id="unverifiedUnlinkFxaAccount" label="&forget.label;" accesskey="&forget.accesskey;"></button>
                 </hbox>
               </vbox>
@@ -130,30 +130,30 @@
               <vbox>
                 <image id="fxaProfileImage"/>
               </vbox>
               <vbox flex="1">
                 <hbox>
                   <vbox><image id="fxaLoginRejectedWarning"/></vbox>
                   <description flex="1">
                     &signedInLoginFailure.beforename.label;
-                    <label id="fxaEmailAddress3"/>
+                    <html:accesskey-label id="fxaEmailAddress3"/>
                     &signedInLoginFailure.aftername.label;
                   </description>
                 </hbox>
                 <hbox class="fxaAccountBoxButtons">
                   <button id="rejectReSignIn" label="&signIn.label;" accesskey="&signIn.accesskey;"></button>
                   <button id="rejectUnlinkFxaAccount" label="&forget.label;" accesskey="&forget.accesskey;"></button>
                 </hbox>
               </vbox>
             </hbox>
           </deck>
         </groupbox>
         <groupbox id="syncOptions">
-          <caption><label>&signedIn.settings.label;</label></caption>
+          <caption><html:accesskey-label>&signedIn.settings.label;</html:accesskey-label></caption>
           <description>&signedIn.settings.description;</description>
           <hbox id="fxaSyncEngines">
             <vbox align="start" flex="1">
               <checkbox label="&engine.tabs.label2;"
                         accesskey="&engine.tabs.accesskey;"
                         preference="engine.tabs"/>
               <checkbox label="&engine.bookmarks.label;"
                         accesskey="&engine.bookmarks.accesskey;"
@@ -178,19 +178,19 @@
         </groupbox>
       </vbox>
       <vbox>
         <html:img  class="fxaSyncIllustration" src="chrome://browser/skin/fxa/sync-illustration.svg"/>
       </vbox>
     </hbox>
     <groupbox>
       <caption>
-        <label control="fxaSyncComputerName">
+        <html:accesskey-label control="fxaSyncComputerName">
           &fxaSyncDeviceName.label;
-        </label>
+        </html:accesskey-label>
       </caption>
       <hbox id="fxaDeviceName">
         <textbox id="fxaSyncComputerName" disabled="true"/>
         <hbox>
           <button id="fxaChangeDeviceName"
                   label="&changeSyncDeviceName2.label;"
                   accesskey="&changeSyncDeviceName2.accesskey;"/>
           <button id="fxaCancelChangeDeviceName"
@@ -199,27 +199,27 @@
                   hidden="true"/>
           <button id="fxaSaveChangeDeviceName"
                   label="&saveChangeSyncDeviceName.label;"
                   accesskey="&saveChangeSyncDeviceName.accesskey;"
                   hidden="true"/>
         </hbox>
       </hbox>
     </groupbox>
-    <label class="fxaMobilePromo">
+    <html:accesskey-label class="fxaMobilePromo">
         &mobilePromo3.start;<!-- We put these comments to avoid inserting white spaces
-        --><label class="androidLink text-link" id="fxaMobilePromo-android-hasFxaAccount"><!--
-        -->&mobilePromo3.androidLink;</label><!--
+        --><html:accesskey-label class="androidLink text-link" id="fxaMobilePromo-android-hasFxaAccount"><!--
+        -->&mobilePromo3.androidLink;</html:accesskey-label><!--
         -->&mobilePromo3.iOSBefore;<!--
-        --><label class="iOSLink text-link" id="fxaMobilePromo-ios-hasFxaAccount"><!--
-        -->&mobilePromo3.iOSLink;</label><!--
+        --><html:accesskey-label class="iOSLink text-link" id="fxaMobilePromo-ios-hasFxaAccount"><!--
+        -->&mobilePromo3.iOSLink;</html:accesskey-label><!--
         -->&mobilePromo3.end;
-    </label>
+    </html:accesskey-label>
     <vbox id="tosPP-small" align="start">
-      <label id="tosPP-small-ToS" class="text-link">
+      <html:accesskey-label id="tosPP-small-ToS" class="text-link">
         &prefs.tosLink.label;
-      </label>
-      <label id="tosPP-small-PP" class="text-link">
+      </html:accesskey-label>
+      <html:accesskey-label id="tosPP-small-PP" class="text-link">
         &fxaPrivacyNotice.link.label;
-      </label>
+      </html:accesskey-label>
     </vbox>
   </vbox>
 </deck>
diff --git a/browser/themes/shared/customelements/custom-elements.inc.css b/browser/themes/shared/customelements/custom-elements.inc.css
new file mode 100644
--- /dev/null
+++ b/browser/themes/shared/customelements/custom-elements.inc.css
@@ -0,0 +1,21 @@
+%if 0
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+%endif
+
+html|accesskey-label {
+  display: -moz-box;
+  position: relative;
+}
+
+/* Not sure why, but doing relative parent > absolute child allows wrapping */
+html|accesskey-label > html|label {
+  /*position: absolute;*/
+}
+
+
+/* By default, label text does not wrap. To enable wrapping, use a text node instead of the value attribute. */
+html|accesskey-label[value] {
+  display: -moz-box;
+}
\ No newline at end of file
diff --git a/browser/themes/shared/incontentprefs/preferences.inc.css b/browser/themes/shared/incontentprefs/preferences.inc.css
--- a/browser/themes/shared/incontentprefs/preferences.inc.css
+++ b/browser/themes/shared/incontentprefs/preferences.inc.css
@@ -1,15 +1,17 @@
 %if 0
 /* - This Source Code Form is subject to the terms of the Mozilla Public
    - License, v. 2.0. If a copy of the MPL was not distributed with this file,
    - You can obtain one at http://mozilla.org/MPL/2.0/. */
 %endif
 @namespace html "http://www.w3.org/1999/xhtml";
 
+%include ../customelements/custom-elements.inc.css
+
 #mainPrefPane {
   max-width: 800px;
   padding: 0;
   font: message-box;
   font-size: 1.25rem;
 }
 
 * {
diff --git a/browser/themes/shared/jar.inc.mn b/browser/themes/shared/jar.inc.mn
--- a/browser/themes/shared/jar.inc.mn
+++ b/browser/themes/shared/jar.inc.mn
@@ -28,16 +28,17 @@
 * skin/classic/browser/controlcenter/conn-not-secure.svg       (../shared/controlcenter/conn-not-secure.svg)
 * skin/classic/browser/controlcenter/connection.svg            (../shared/controlcenter/connection.svg)
 * skin/classic/browser/controlcenter/mcb-disabled.svg          (../shared/controlcenter/mcb-disabled.svg)
   skin/classic/browser/controlcenter/extension.svg             (../shared/controlcenter/extension.svg)
 * skin/classic/browser/controlcenter/permissions.svg           (../shared/controlcenter/permissions.svg)
 * skin/classic/browser/controlcenter/tracking-protection.svg   (../shared/controlcenter/tracking-protection.svg)
   skin/classic/browser/controlcenter/warning-gray.svg          (../shared/controlcenter/warning-gray.svg)
   skin/classic/browser/controlcenter/warning-yellow.svg        (../shared/controlcenter/warning-yellow.svg)
+* skin/classic/browser/customelements/custom-elements.inc.css  (../shared/customelements/custom-elements.inc.css)
   skin/classic/browser/customizableui/customizeFavicon.ico     (../shared/customizableui/customizeFavicon.ico)
   skin/classic/browser/customizableui/customize-illustration.png  (../shared/customizableui/customize-illustration.png)
   skin/classic/browser/customizableui/customize-illustration@2x.png  (../shared/customizableui/customize-illustration@2x.png)
   skin/classic/browser/customizableui/customize-illustration-rtl.png  (../shared/customizableui/customize-illustration-rtl.png)
   skin/classic/browser/customizableui/customize-illustration-rtl@2x.png  (../shared/customizableui/customize-illustration-rtl@2x.png)
   skin/classic/browser/customizableui/info-icon-customizeTip.png  (../shared/customizableui/info-icon-customizeTip.png)
   skin/classic/browser/customizableui/info-icon-customizeTip@2x.png  (../shared/customizableui/info-icon-customizeTip@2x.png)
   skin/classic/browser/customizableui/menuPanel-customizeFinish.png  (../shared/customizableui/menuPanel-customizeFinish.png)
diff --git a/toolkit/themes/shared/in-content/common.inc.css b/toolkit/themes/shared/in-content/common.inc.css
--- a/toolkit/themes/shared/in-content/common.inc.css
+++ b/toolkit/themes/shared/in-content/common.inc.css
@@ -71,24 +71,24 @@ html|hr {
 
 xul|caption {
   -moz-appearance: none;
   margin: 0;
 }
 
 html|h2,
 xul|caption > xul|checkbox,
-xul|caption > xul|label {
+xul|caption > html|accesskey-label {
   font-size: 1.3rem;
   font-weight: bold;
   line-height: 22px;
 }
 
 xul|caption > xul|checkbox,
-xul|caption > xul|label {
+xul|caption > html|accesskey-label {
   margin: 0 !important;
 }
 
 *|*.main-content {
   padding-top: 40px;
   padding-inline-end: 44px; /* compensate the 4px margin of child elements */
   padding-bottom: 48px;
   padding-inline-start: 48px;
@@ -105,17 +105,17 @@ xul|groupbox {
   -moz-appearance: none;
   border: none;
   margin: 15px 0 0;
   padding-inline-start: 0;
   padding-inline-end: 0;
   font-size: 1.25rem;
 }
 
-xul|groupbox xul|label:not(.menu-accel):not(.menu-text):not(.indent):not(.learnMore),
+xul|groupbox html|accesskey-label:not(.menu-accel):not(.menu-text):not(.indent):not(.learnMore),
 xul|groupbox xul|description {
   /* !important needed to override toolkit !important rule */
   margin-inline-start: 0 !important;
   margin-inline-end: 0 !important;
 }
 
 /* tabpanels and tabs */
 
