# HG changeset patch
# Parent b3cef9e126926c219fd843b7e159ef12251e57ff
# User Brian Grinstead <bgrinstead@mozilla.com>
Bug 917448 - WalkerActor.querySelector: can't access dead object error


diff --git a/toolkit/devtools/server/actors/inspector.js b/toolkit/devtools/server/actors/inspector.js
--- a/toolkit/devtools/server/actors/inspector.js
+++ b/toolkit/devtools/server/actors/inspector.js
@@ -1731,17 +1731,17 @@ var WalkerActor = protocol.ActorClass({
         mutation.added = addedActors;
       }
       this.queueMutation(mutation);
     }
   },
 
   onFrameLoad: function(window) {
     let frame = this.layoutHelpers.getFrameElement(window);
-    if (!frame && !this.rootDoc) {
+    if (!frame && !this.rootDoc && window.top === window) {
       this.rootDoc = window.document;
       this.rootNode = this.document();
       this.queueMutation({
         type: "newRoot",
         target: this.rootNode.form()
       });
     }
     let frameActor = this._refMap.get(frame);
