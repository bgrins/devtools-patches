# HG changeset patch
# User Greg Tatum <tatum.creative@gmail.com>

Bug 1214754 - Element's highlight doesn't go away when I clear the console by Ctrl+L r=bgrins

diff --git a/devtools/client/webconsole/console-output.js b/devtools/client/webconsole/console-output.js
index b4e41f8..231ffb2 100644
--- a/devtools/client/webconsole/console-output.js
+++ b/devtools/client/webconsole/console-output.js
@@ -3351,18 +3351,22 @@ Widgets.ObjectRenderers.add({
   }),
 
   destroy: function()
   {
     if (this.toolbox && this._nodeFront) {
       this.element.removeEventListener("mouseover", this.highlightDomNode, false);
       this.element.removeEventListener("mouseout", this.unhighlightDomNode, false);
       this._openInspectorNode.removeEventListener("mousedown", this.openNodeInInspector, true);
-      this.toolbox = null;
-      this._nodeFront = null;
+
+      this.unhighlightDomNode().catch(() => {}).then(() => {
+        // Always remove the references after highlighting
+        this.toolbox = null;
+        this._nodeFront = null;
+      });
     }
   },
 }); // Widgets.ObjectRenderers.byKind.DOMNode
 
 /**
  * The widget user for displaying Promise objects.
  */
 Widgets.ObjectRenderers.add({

