# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  d42c22627c8dee9e9286fd5d7bbc3d02afbfad44
Bug XXX - Richlistitem as html element

diff --git a/accessible/tests/mochitest/attributes/test_obj_group.xhtml b/accessible/tests/mochitest/attributes/test_obj_group.xhtml
--- a/accessible/tests/mochitest/attributes/test_obj_group.xhtml
+++ b/accessible/tests/mochitest/attributes/test_obj_group.xhtml
@@ -141,20 +141,20 @@
     </div>
     <pre id="test">
     </pre>
   </body>
 
   <vbox flex="1">
 
   <richlistbox>
-    <richlistitem id="listitem1"/>
-    <richlistitem id="listitem2"><label value="listitem2"/></richlistitem>
-    <richlistitem id="listitem3"/>
-    <richlistitem id="listitem4"><label value="listitem4"/></richlistitem>
+    <html:moz-richlistitem id="listitem1"/>
+    <html:moz-richlistitem id="listitem2"><label value="listitem2"/></html:moz-richlistitem>
+    <html:moz-richlistitem id="listitem3"/>
+    <html:moz-richlistitem id="listitem4"><label value="listitem4"/></html:moz-richlistitem>
   </richlistbox>
 
   <menubar>
     <menu label="item1" id="menu_item1">
       <menupopup>
         <menuitem label="item1.1" id="menu_item1.1"/>
         <menuseparator/>
         <menuitem label="item1.2" id="menu_item1.2"/>
diff --git a/accessible/tests/mochitest/elm/test_listbox.xhtml b/accessible/tests/mochitest/elm/test_listbox.xhtml
--- a/accessible/tests/mochitest/elm/test_listbox.xhtml
+++ b/accessible/tests/mochitest/elm/test_listbox.xhtml
@@ -58,16 +58,16 @@
     </div>
     <pre id="test">
     </pre>
   </body>
 
   <vbox flex="1">
     <label control="listbox1" value="listbox: "/>
     <richlistbox id="listbox1">
-      <richlistitem id="item1"><label value="item1"/></richlistitem>
-      <richlistitem id="item1"><label value="item2"/></richlistitem>
+      <html:moz-richlistitem id="item1"><label value="item1"/></html:moz-richlistitem>
+      <html:moz-richlistitem id="item1"><label value="item2"/></html:moz-richlistitem>
     </richlistbox>
   </vbox>
   </hbox>
 
 </window>
 
diff --git a/accessible/tests/mochitest/events/test_focus_listcontrols.xhtml b/accessible/tests/mochitest/events/test_focus_listcontrols.xhtml
--- a/accessible/tests/mochitest/events/test_focus_listcontrols.xhtml
+++ b/accessible/tests/mochitest/events/test_focus_listcontrols.xhtml
@@ -84,30 +84,30 @@ if (!MAC) {
       <p id="display"></p>
       <div id="content" style="display: none"></div>
       <pre id="test">
       </pre>
     </body>
 
     <vbox flex="1">
       <richlistbox id="richlistbox">
-        <richlistitem id="rlb_item1">
+        <html:moz-richlistitem id="rlb_item1">
           <description>A XUL Description!</description>
-        </richlistitem>
-        <richlistitem id="rlb_item2">
+        </html:moz-richlistitem>
+        <html:moz-richlistitem id="rlb_item2">
           <button label="A XUL Button"/>
-        </richlistitem>
+        </html:moz-richlistitem>
       </richlistbox>
       <richlistbox id="multiselrichlistbox" seltype="multiple">
-        <richlistitem id="msrlb_item1">
+        <html:moz-richlistitem id="msrlb_item1">
           <description>A XUL Description!</description>
-        </richlistitem>
-        <richlistitem id="msrlb_item2">
+        </html:moz-richlistitem>
+        <html:moz-richlistitem id="msrlb_item2">
           <button label="A XUL Button"/>
-        </richlistitem>
+        </html:moz-richlistitem>
       </richlistbox>
       <richlistbox id="emptyrichlistbox" seltype="multiple"/>
 
       <menulist id="menulist">
         <menupopup>
           <menuitem id="ml_tangerine" label="tangerine trees"/>
           <menuitem id="ml_marmalade" label="marmalade skies"/>
           <menuitem id="ml_strawberry" label="strawberry fields"/>
diff --git a/accessible/tests/mochitest/events/test_namechange.xhtml b/accessible/tests/mochitest/events/test_namechange.xhtml
--- a/accessible/tests/mochitest/events/test_namechange.xhtml
+++ b/accessible/tests/mochitest/events/test_namechange.xhtml
@@ -77,14 +77,14 @@
       <p id="display"></p>
       <div id="content" style="display: none">
       </div>
       <pre id="test">
       </pre>
     </body>
 
     <richlistbox>
-      <richlistitem id="listitem">
+      <html:moz-richlistitem id="listitem">
         <description id="childcontent" value="This will be changed."/>
-      </richlistitem>
+      </html:moz-richlistitem>
     </richlistbox>
   </vbox>
 </window>
diff --git a/accessible/tests/mochitest/events/test_selection.xhtml b/accessible/tests/mochitest/events/test_selection.xhtml
--- a/accessible/tests/mochitest/events/test_selection.xhtml
+++ b/accessible/tests/mochitest/events/test_selection.xhtml
@@ -231,24 +231,24 @@
         <tabpanel><!-- tabpanel First elements go here --></tabpanel>
         <tabpanel><button id="b1" label="b1"/></tabpanel>
         <tabpanel><button id="b2" label="b2"/></tabpanel>
         <tabpanel></tabpanel>
       </tabpanels>
     </tabbox>
 
     <richlistbox id="listbox">
-      <richlistitem id="lb1_item1"><label value="item1"/></richlistitem>
-      <richlistitem id="lb1_item2"><label value="item2"/></richlistitem>
+      <html:moz-richlistitem id="lb1_item1"><label value="item1"/></html:moz-richlistitem>
+      <html:moz-richlistitem id="lb1_item2"><label value="item2"/></html:moz-richlistitem>
     </richlistbox>
 
     <richlistbox id="listbox2" seltype="multiple">
-      <richlistitem id="lb2_item1"><label value="item1"/></richlistitem>
-      <richlistitem id="lb2_item2"><label value="item2"/></richlistitem>
-      <richlistitem id="lb2_item3"><label value="item3"/></richlistitem>
-      <richlistitem id="lb2_item4"><label value="item4"/></richlistitem>
-      <richlistitem id="lb2_item5"><label value="item5"/></richlistitem>
-      <richlistitem id="lb2_item6"><label value="item6"/></richlistitem>
-      <richlistitem id="lb2_item7"><label value="item7"/></richlistitem>
+      <html:moz-richlistitem id="lb2_item1"><label value="item1"/></html:moz-richlistitem>
+      <html:moz-richlistitem id="lb2_item2"><label value="item2"/></html:moz-richlistitem>
+      <html:moz-richlistitem id="lb2_item3"><label value="item3"/></html:moz-richlistitem>
+      <html:moz-richlistitem id="lb2_item4"><label value="item4"/></html:moz-richlistitem>
+      <html:moz-richlistitem id="lb2_item5"><label value="item5"/></html:moz-richlistitem>
+      <html:moz-richlistitem id="lb2_item6"><label value="item6"/></html:moz-richlistitem>
+      <html:moz-richlistitem id="lb2_item7"><label value="item7"/></html:moz-richlistitem>
     </richlistbox>
 
   </hbox>
 </window>
diff --git a/accessible/tests/mochitest/focus/test_takeFocus.xhtml b/accessible/tests/mochitest/focus/test_takeFocus.xhtml
--- a/accessible/tests/mochitest/focus/test_takeFocus.xhtml
+++ b/accessible/tests/mochitest/focus/test_takeFocus.xhtml
@@ -89,16 +89,16 @@
         <treecols>
           <treecol id="col1" flex="1" primary="true" label="column"/>
           <treecol id="col2" flex="1" label="column 2"/>
         </treecols>
         <treechildren id="treechildren"/>
       </tree>
 
       <richlistbox id="listbox">
-        <richlistitem id="listitem1"><label value="item1"/></richlistitem>
-        <richlistitem id="listitem2"><label value="item2"/></richlistitem>
+        <html:moz-richlistitem id="listitem1"><label value="item1"/></html:moz-richlistitem>
+        <html:moz-richlistitem id="listitem2"><label value="item2"/></html:moz-richlistitem>
       </richlistbox>
 
       <vbox id="eventdump"/>
     </vbox>
   </hbox>
 </window>
diff --git a/accessible/tests/mochitest/name/test_general.xhtml b/accessible/tests/mochitest/name/test_general.xhtml
--- a/accessible/tests/mochitest/name/test_general.xhtml
+++ b/accessible/tests/mochitest/name/test_general.xhtml
@@ -232,19 +232,19 @@
           aria-labelledby="labelledby_mixed_menulist"/>
 
   <!-- @label -->
   <button id="btn_labelattr"
           label="labeled element"/>
 
   <!-- nsIDOMXULSelectControlItemElement -->
   <richlistbox>
-    <richlistitem id="li_nsIDOMXULSelectControlItemElement">
+    <html:moz-richlistitem id="li_nsIDOMXULSelectControlItemElement">
       <label value="select control item"/>
-    </richlistitem>
+    </html:moz-richlistitem>
   </richlistbox>
 
   <!-- not nsIDOMXULSelectControlElement -->
   <box id="box_not_nsIDOMXULSelectControlElement" role="group" label="box"/>
 
   <!-- label element  -->
   <hbox>
     <box>
@@ -306,20 +306,20 @@
       <label>Some caption</label>
       <checkbox label="some checkbox label" />
     </groupbox>
   </vbox>
 
   <!-- bug 441991; create name from other menuitem label listitem's own label -->
   <hbox>
     <richlistbox>
-      <richlistitem id="li_labelledby"
+      <html:moz-richlistitem id="li_labelledby"
                     aria-labelledby="menuitem-DISPLAY li_labelledby">
         <label value="The moment the event starts"/>
-      </richlistitem>
+      </html:moz-richlistitem>
     </richlistbox>
     <menulist>
       <menupopup>
         <menuitem id="menuitem-DISPLAY"
                   value="DISPLAY"
                   label="Show an Alert"/>
         <menuitem id="menuitem-EMAIL"
                   value="EMAIL"
diff --git a/accessible/tests/mochitest/selectable/test_listbox.xhtml b/accessible/tests/mochitest/selectable/test_listbox.xhtml
--- a/accessible/tests/mochitest/selectable/test_listbox.xhtml
+++ b/accessible/tests/mochitest/selectable/test_listbox.xhtml
@@ -110,35 +110,35 @@
       <div id="content" style="display: none">
       </div>
       <pre id="test">
       </pre>
     </body>
 
     <vbox flex="1">
       <richlistbox id="listbox">
-        <richlistitem id="lb1_item1">
+        <html:moz-richlistitem id="lb1_item1">
           <label value="cell0"/>
           <label value="cell1"/>
-        </richlistitem>
-        <richlistitem id="lb1_item2">
+        </html:moz-richlistitem>
+        <html:moz-richlistitem id="lb1_item2">
           <label value="cell3"/>
           <label value="cell4"/>
-        </richlistitem>
+        </html:moz-richlistitem>
       </richlistbox>
 
       <richlistbox id="listbox2" seltype="multiple">
-        <richlistitem id="lb2_item1">
+        <html:moz-richlistitem id="lb2_item1">
           <label value="cell0"/>
           <label value="cell1"/>
-        </richlistitem>
-        <richlistitem id="lb2_item2">
+        </html:moz-richlistitem>
+        <html:moz-richlistitem id="lb2_item2">
           <label value="cell3"/>
           <label value="cell4"/>
-        </richlistitem>
+        </html:moz-richlistitem>
       </richlistbox>
 
       <vbox id="debug"/>
     </vbox>
   </hbox>
 
 </window>
 
diff --git a/accessible/tests/mochitest/states/test_controls.xhtml b/accessible/tests/mochitest/states/test_controls.xhtml
--- a/accessible/tests/mochitest/states/test_controls.xhtml
+++ b/accessible/tests/mochitest/states/test_controls.xhtml
@@ -104,25 +104,25 @@
 
     <menulist id="combobox-disabled" disabled="true">
       <menupopup>
         <menuitem label="item1"/>
       </menupopup>
     </menulist>
 
     <richlistbox id="listbox">
-      <richlistitem id="listitem">
+      <html:moz-richlistitem id="listitem">
         <label value="list item"/>
-      </richlistitem>
+      </html:moz-richlistitem>
     </richlistbox>
 
     <richlistbox id="listbox-disabled" disabled="true">
-      <richlistitem id="listitem-disabledlistbox">
+      <html:moz-richlistitem id="listitem-disabledlistbox">
         <label value="list item"/>
-      </richlistitem>
+      </html:moz-richlistitem>
     </richlistbox>
 
     <toolbox>
       <menubar id="menubar">
         <menu id="menu" label="menu1">
           <menupopup>
             <menuitem id="menu1-item1" label="menuitem1.1"/>
           </menupopup>
diff --git a/accessible/tests/mochitest/treeupdate/test_listbox.xhtml b/accessible/tests/mochitest/treeupdate/test_listbox.xhtml
--- a/accessible/tests/mochitest/treeupdate/test_listbox.xhtml
+++ b/accessible/tests/mochitest/treeupdate/test_listbox.xhtml
@@ -19,17 +19,17 @@
   <![CDATA[
     ////////////////////////////////////////////////////////////////////////////
     // Test
 
     function insertListitem(aListboxID)
     {
       this.listboxNode = getNode(aListboxID);
 
-      this.listitemNode = document.createXULElement("richlistitem");
+      this.listitemNode = document.createElement("moz-richlistitem");
       var label = document.createXULElement("label");
       label.setAttribute("value", "item1");
       this.listitemNode.appendChild(label);
 
       this.eventSeq = [
         new invokerChecker(EVENT_SHOW, this.listitemNode),
         new invokerChecker(EVENT_REORDER, this.listboxNode)
       ];
@@ -165,17 +165,17 @@
       <div id="content" style="display: none">
       </div>
       <pre id="test">
       </pre>
     </body>
 
     <vbox flex="1">
       <richlistbox id="listbox">
-        <richlistitem><label value="item2"/></richlistitem>
-        <richlistitem><label value="item3"/></richlistitem>
-        <richlistitem><label value="item4"/></richlistitem>
+        <html:moz-richlistitem><label value="item2"/></html:moz-richlistitem>
+        <html:moz-richlistitem><label value="item3"/></html:moz-richlistitem>
+        <html:moz-richlistitem><label value="item4"/></html:moz-richlistitem>
       </richlistbox>
     </vbox>
   </hbox>
 
 </window>
 
diff --git a/browser/base/content/browser.css b/browser/base/content/browser.css
--- a/browser/base/content/browser.css
+++ b/browser/base/content/browser.css
@@ -646,56 +646,56 @@ toolbar:not(#TabsToolbar) > #personal-bo
 
 #urlbar[actionoverride] > #urlbar-input-container > #urlbar-label-box,
 #urlbar:not([actiontype="switchtab"]):not([actiontype="extension"]) > #urlbar-input-container > #urlbar-label-box,
 #urlbar:not([actiontype="switchtab"]) > #urlbar-input-container > #urlbar-label-box > #urlbar-label-switchtab,
 #urlbar:not([actiontype="extension"]) > #urlbar-input-container > #urlbar-label-box > #urlbar-label-extension {
   display: none;
 }
 
-#PopupAutoComplete > richlistbox > richlistitem[originaltype="loginsFooter"] {
+#PopupAutoComplete > richlistbox > moz-richlistitem[originaltype="loginsFooter"] {
   -moz-box-pack: center;
   color: -moz-fieldText;
   min-height: 2.6666em;
   border-top: 1px solid rgba(38,38,38,.15);
   background-color: hsla(0,0%,80%,.35); /* match arrowpanel-dimmed */;
 }
 
-#PopupAutoComplete > richlistbox > richlistitem[originaltype="loginsFooter"]:hover,
-#PopupAutoComplete > richlistbox > richlistitem[originaltype="loginsFooter"][selected] {
+#PopupAutoComplete > richlistbox > moz-richlistitem[originaltype="loginsFooter"]:hover,
+#PopupAutoComplete > richlistbox > moz-richlistitem[originaltype="loginsFooter"][selected] {
   background-color: hsla(0,0%,80%,.5); /* match arrowpanel-dimmed-further */
 }
 
 /* Define the minimum width based on the style of result rows.
    The order of the min-width rules below must be in increasing order. */
 #PopupAutoComplete[resultstyles~="loginsFooter"],
 #PopupAutoComplete[resultstyles~="insecureWarning"] {
   min-width: 17em;
 }
 
 #PopupAutoComplete[resultstyles~="generatedPassword"] {
   min-width: 21em;
 }
 
-#PopupAutoComplete > richlistbox > richlistitem[originaltype="insecureWarning"] {
+#PopupAutoComplete > richlistbox > moz-richlistitem[originaltype="insecureWarning"] {
   height: auto;
 }
 
-#PopupAutoComplete > richlistbox > richlistitem[originaltype="loginWithOrigin"] > .ac-site-icon,
-#PopupAutoComplete > richlistbox > richlistitem[originaltype="insecureWarning"] > .ac-site-icon {
+#PopupAutoComplete > richlistbox > moz-richlistitem[originaltype="loginWithOrigin"] > .ac-site-icon,
+#PopupAutoComplete > richlistbox > moz-richlistitem[originaltype="insecureWarning"] > .ac-site-icon {
   margin-inline-start: 0;
   display: initial;
 }
 
-#PopupAutoComplete > richlistbox > richlistitem[originaltype="insecureWarning"] > .ac-title > .ac-text-overflow-container > .ac-title-text {
+#PopupAutoComplete > richlistbox > moz-richlistitem[originaltype="insecureWarning"] > .ac-title > .ac-text-overflow-container > .ac-title-text {
   text-overflow: initial;
   white-space: initial;
 }
 
-#PopupAutoComplete > richlistbox > richlistitem[originaltype="insecureWarning"] > .ac-title > label {
+#PopupAutoComplete > richlistbox > moz-richlistitem[originaltype="insecureWarning"] > .ac-title > label {
   margin-inline-start: 0;
 }
 
 #urlbar-input-container[pageproxystate=invalid] > #page-action-buttons > .urlbar-page-action,
 #identity-box.chromeUI ~ #page-action-buttons > .urlbar-page-action:not(#star-button-box),
 #urlbar[usertyping] > #urlbar-input-container > .urlbar-history-dropmarker,
 #urlbar:not([usertyping]) > #urlbar-input-container > #urlbar-go-button,
 #urlbar:not([focused]) > #urlbar-input-container > #urlbar-go-button {
diff --git a/browser/components/downloads/content/allDownloadsView.js b/browser/components/downloads/content/allDownloadsView.js
--- a/browser/components/downloads/content/allDownloadsView.js
+++ b/browser/components/downloads/content/allDownloadsView.js
@@ -35,17 +35,17 @@ XPCOMUtils.defineLazyModuleGetters(this,
  * the onChanged method.
  *
  * @param download
  *        The Download object from the DownloadHistoryList.
  */
 function HistoryDownloadElementShell(download) {
   this._download = download;
 
-  this.element = document.createXULElement("richlistitem");
+  this.element = document.createElement("moz-richlistitem");
   this.element._shell = this;
 
   this.element.classList.add("download");
   this.element.classList.add("download-state");
 }
 
 HistoryDownloadElementShell.prototype = {
   __proto__: DownloadsViewUI.DownloadElementShell.prototype,
@@ -167,17 +167,17 @@ HistoryDownloadElementShell.prototype = 
   },
 };
 
 /**
  * Relays commands from the download.xml binding to the selected items.
  */
 var DownloadsView = {
   onDownloadButton(event) {
-    event.target.closest("richlistitem")._shell.onButton();
+    event.target.closest("moz-richlistitem")._shell.onButton();
   },
 
   onDownloadClick() {},
 };
 
 /**
  * A Downloads Places View is a places view designed to show a places query
  * for history downloads alongside the session downloads.
@@ -279,17 +279,17 @@ DownloadsPlacesView.prototype = {
         false,
         false
       );
       // nodesFromRect returns nodes in z-index order, and for the same z-index
       // sorts them in inverted DOM order, thus starting from the one that would
       // be on top.
       let firstVisibleNode, lastVisibleNode;
       for (let node of nodes) {
-        if (node.localName === "richlistitem" && node._shell) {
+        if (node.localName === "moz-richlistitem" && node._shell) {
           node._shell.ensureActive();
           // The first visible node is the last match.
           firstVisibleNode = node;
           // While the last visible node is the first match.
           if (!lastVisibleNode) {
             lastVisibleNode = node;
           }
         }
diff --git a/browser/components/downloads/content/downloads.css b/browser/components/downloads/content/downloads.css
--- a/browser/components/downloads/content/downloads.css
+++ b/browser/components/downloads/content/downloads.css
@@ -1,15 +1,15 @@
 /* This Source Code Form is subject to the terms of the Mozilla Public
  * License, v. 2.0. If a copy of the MPL was not distributed with this file,
  * You can obtain one at http://mozilla.org/MPL/2.0/. */
 
 /*** Downloads Panel ***/
 
-#downloadsListBox > richlistitem:not([selected]) button {
+#downloadsListBox > moz-richlistitem:not([selected]) button {
   /* Only focus buttons in the selected item. */
   -moz-user-focus: none;
 }
 
 #downloadsSummary:not([inprogress]) > vbox > #downloadsSummaryProgress,
 #downloadsSummary:not([inprogress]) > vbox > #downloadsSummaryDetails,
 #downloadsFooter:not([showingsummary]) #downloadsSummary {
   display: none;
@@ -24,17 +24,17 @@
      "-moz-user-focus: ignore;" prevents the elements with "opacity: 0;" from
      being focused with the keyboard. */
   opacity: 0;
   -moz-user-focus: ignore;
 }
 
 /*** Downloads View ***/
 
-#downloadsRichListBox > richlistitem button {
+#downloadsRichListBox > moz-richlistitem button {
   /* These buttons should never get focus, as that would "disable"
      the downloads view controller (it's only used when the richlistbox
      is focused). */
   -moz-user-focus: none;
 }
 
 /*** Visibility of controls inside download items ***/
 
diff --git a/browser/components/downloads/content/downloads.js b/browser/components/downloads/content/downloads.js
--- a/browser/components/downloads/content/downloads.js
+++ b/browser/components/downloads/content/downloads.js
@@ -770,17 +770,17 @@ var DownloadsView = {
    */
   _addViewItem(download, aNewest) {
     DownloadsCommon.log(
       "Adding a new DownloadsViewItem to the downloads list.",
       "aNewest =",
       aNewest
     );
 
-    let element = document.createXULElement("richlistitem");
+    let element = document.createElement("moz-richlistitem");
     let viewItem = new DownloadsViewItem(download, element);
     this._visibleViewItems.set(download, viewItem);
     this._itemsForElements.set(element, viewItem);
     if (aNewest) {
       this.richListBox.insertBefore(
         element,
         this.richListBox.firstElementChild
       );
@@ -811,30 +811,30 @@ var DownloadsView = {
   },
 
   // User interface event functions
 
   onDownloadClick(aEvent) {
     // Handle primary clicks only, and exclude the action button.
     if (aEvent.button == 0 && aEvent.originalTarget.localName != "button") {
       let target = aEvent.target;
-      while (target.nodeName != "richlistitem") {
+      while (target.nodeName != "moz-richlistitem") {
         target = target.parentNode;
       }
       let download = DownloadsView.itemForElement(target).download;
       if (download.hasBlockedData) {
         goDoCommand("downloadsCmd_showBlockedInfo");
       } else {
         goDoCommand("downloadsCmd_open");
       }
     }
   },
 
   onDownloadButton(event) {
-    let target = event.target.closest("richlistitem");
+    let target = event.target.closest("moz-richlistitem");
     DownloadsView.itemForElement(target).onButton();
   },
 
   /**
    * Handles keypress events on a download item.
    */
   onDownloadKeyPress(aEvent) {
     // Pressing the key on buttons should not invoke the action because the
@@ -880,32 +880,32 @@ var DownloadsView = {
     this.contextMenuOpen = false;
   },
 
   /**
    * Mouse listeners to handle selection on hover.
    */
   onDownloadMouseOver(aEvent) {
     let item = aEvent.target.closest("richlistitem,richlistbox");
-    if (item.localName != "richlistitem") {
+    if (item.localName != "moz-richlistitem") {
       return;
     }
 
     if (aEvent.target.classList.contains("downloadButton")) {
       item.classList.add("downloadHoveringButton");
     }
 
     if (!this.contextMenuOpen && !this.subViewOpen) {
       this.richListBox.selectedItem = item;
     }
   },
 
   onDownloadMouseOut(aEvent) {
     let item = aEvent.target.closest("richlistitem,richlistbox");
-    if (item.localName != "richlistitem") {
+    if (item.localName != "moz-richlistitem") {
       return;
     }
 
     if (aEvent.target.classList.contains("downloadButton")) {
       item.classList.remove("downloadHoveringButton");
     }
 
     // If the destination element is outside of the richlistitem, clear the
diff --git a/browser/components/places/content/editBookmark.js b/browser/components/places/content/editBookmark.js
--- a/browser/components/places/content/editBookmark.js
+++ b/browser/components/places/content/editBookmark.js
@@ -924,17 +924,17 @@ var gEditItemOverlay = {
       tagsSelector.removeChild(tagsSelector.lastElementChild);
     }
 
     let tagsInField = this._getTagsArrayFromTagsInputField();
     let allTags = await PlacesUtils.bookmarks.fetchTags();
     let fragment = document.createDocumentFragment();
     for (let i = 0; i < allTags.length; i++) {
       let tag = allTags[i].name;
-      let elt = document.createXULElement("richlistitem");
+      let elt = document.createElement("moz-richlistitem");
       elt.appendChild(document.createXULElement("image"));
       let label = document.createXULElement("label");
       label.setAttribute("value", tag);
       elt.appendChild(label);
       if (tagsInField.includes(tag)) {
         elt.setAttribute("checked", "true");
       }
       fragment.appendChild(elt);
@@ -1031,17 +1031,17 @@ var gEditItemOverlay = {
 
   // EventListener
   handleEvent(event) {
     switch (event.type) {
       case "mousedown":
         if (event.button == 0) {
           // Make sure the event is triggered on an item and not the empty space.
           let item = event.target.closest("richlistbox,richlistitem");
-          if (item.localName == "richlistitem") {
+          if (item.localName == "moz-richlistitem") {
             this.toggleItemCheckbox(item);
           }
         }
         break;
       case "keypress":
         if (event.key == " ") {
           let item = event.target.currentItem;
           if (item) {
diff --git a/browser/components/preferences/applicationManager.js b/browser/components/preferences/applicationManager.js
--- a/browser/components/preferences/applicationManager.js
+++ b/browser/components/preferences/applicationManager.js
@@ -36,17 +36,17 @@ var gAppManagerDialog = {
     var list = document.getElementById("appList");
     for (let app of this.handlerInfo.possibleApplicationHandlers.enumerate()) {
       if (!gMainPane.isValidHandlerApp(app)) {
         continue;
       }
 
       // Ensure the XBL binding is created eagerly.
       // eslint-disable-next-line no-undef
-      list.appendChild(MozXULElement.parseXULToFragment("<richlistitem/>"));
+      list.appendChild(MozXULElement.parseXULToFragment("<html:moz-richlistitem/>"));
       var item = list.lastChild;
       item.app = app;
 
       var image = document.createXULElement("image");
       image.setAttribute("src", gMainPane._getIconURLForHandlerApp(app));
       item.appendChild(image);
 
       var label = document.createXULElement("label");
diff --git a/browser/components/preferences/browserLanguages.js b/browser/components/preferences/browserLanguages.js
--- a/browser/components/preferences/browserLanguages.js
+++ b/browser/components/preferences/browserLanguages.js
@@ -193,17 +193,17 @@ class OrderedListBox {
     }
     this.richlistbox.appendChild(frag);
 
     this.richlistbox.selectedIndex = 0;
     this.richlistbox.ensureElementIsVisible(this.richlistbox.selectedItem);
   }
 
   createItem({ id, label, value }) {
-    let listitem = document.createXULElement("richlistitem");
+    let listitem = document.createElement("moz-richlistitem");
     listitem.id = id;
     listitem.setAttribute("value", value);
 
     let labelEl = document.createXULElement("label");
     labelEl.textContent = label;
     listitem.appendChild(labelEl);
 
     return listitem;
diff --git a/browser/components/preferences/handlers.css b/browser/components/preferences/handlers.css
--- a/browser/components/preferences/handlers.css
+++ b/browser/components/preferences/handlers.css
@@ -9,13 +9,13 @@
  */
 .actionsMenu > menupopup > menuitem > .menu-iconic-left {
   display: -moz-box;
   min-width: 16px;
 }
 
 /* Apply crisp rendering for favicons at exactly 2dppx resolution */
 @media (resolution: 2dppx) {
-  #handlersView > richlistitem,
+  #handlersView > moz-richlistitem,
   .actionsMenu > menupopup > menuitem > .menu-iconic-left {
     image-rendering: -moz-crisp-edges;
   }
 }
diff --git a/browser/components/preferences/in-content/containers.js b/browser/components/preferences/in-content/containers.js
--- a/browser/components/preferences/in-content/containers.js
+++ b/browser/components/preferences/in-content/containers.js
@@ -33,17 +33,17 @@ let gContainersPane = {
   },
 
   _rebuildView() {
     const containers = ContextualIdentityService.getPublicIdentities();
     while (this._list.firstChild) {
       this._list.firstChild.remove();
     }
     for (let container of containers) {
-      let item = document.createXULElement("richlistitem");
+      let item = document.createElement("moz-richlistitem");
 
       let outer = document.createXULElement("hbox");
       outer.setAttribute("flex", 1);
       outer.setAttribute("align", "center");
       item.appendChild(outer);
 
       let userContextIcon = document.createXULElement("hbox");
       userContextIcon.className = "userContext-icon";
diff --git a/browser/components/preferences/in-content/main.js b/browser/components/preferences/in-content/main.js
--- a/browser/components/preferences/in-content/main.js
+++ b/browser/components/preferences/in-content/main.js
@@ -3005,38 +3005,38 @@ function getLocalHandlerApp(aFile) {
   localHandlerApp.name = getFileDisplayName(aFile);
   localHandlerApp.executable = aFile;
 
   return localHandlerApp;
 }
 
 // eslint-disable-next-line no-undef
 let gHandlerListItemFragment = MozXULElement.parseXULToFragment(`
-  <richlistitem>
+  <html:moz-richlistitem>
     <hbox flex="1" equalsize="always">
       <hbox class="typeContainer" flex="1" align="center">
         <image class="typeIcon" width="16" height="16"
                src="moz-icon://goat?size=16"/>
         <label class="typeDescription" flex="1" crop="end"/>
       </hbox>
       <hbox class="actionContainer" flex="1" align="center">
         <image class="actionIcon" width="16" height="16"/>
         <label class="actionDescription" flex="1" crop="end"/>
       </hbox>
       <hbox class="actionsMenuContainer" flex="1">
         <menulist class="actionsMenu" flex="1" crop="end" selectedIndex="1">
           <menupopup/>
         </menulist>
       </hbox>
     </hbox>
-  </richlistitem>
+  </html:moz-richlistitem>
 `);
 
 /**
- * This is associated to <richlistitem> elements in the handlers view.
+ * This is associated to <html:moz-richlistitem> elements in the handlers view.
  */
 class HandlerListItem {
   static forNode(node) {
     return gNodeToObjectMap.get(node);
   }
 
   constructor(handlerInfoWrapper) {
     this.handlerInfoWrapper = handlerInfoWrapper;
diff --git a/browser/components/preferences/in-content/preferences.xul b/browser/components/preferences/in-content/preferences.xul
--- a/browser/components/preferences/in-content/preferences.xul
+++ b/browser/components/preferences/in-content/preferences.xul
@@ -69,78 +69,78 @@
                 src="chrome://browser/locale/browser.properties"/>
 
   <stack flex="1">
   <hbox flex="1">
 
     <vbox class="navigation">
       <!-- category list -->
       <richlistbox id="categories">
-        <richlistitem id="category-general"
+        <html:moz-richlistitem id="category-general"
                       class="category"
                       value="paneGeneral"
                       helpTopic="prefs-main"
                       data-l10n-id="category-general"
                       data-l10n-attrs="tooltiptext"
                       align="center">
           <image class="category-icon"/>
           <label class="category-name" flex="1" data-l10n-id="pane-general-title"></label>
-        </richlistitem>
+        </html:moz-richlistitem>
 
-        <richlistitem id="category-home"
+        <html:moz-richlistitem id="category-home"
                       class="category"
                       value="paneHome"
                       helpTopic="prefs-home"
                       data-l10n-id="category-home"
                       data-l10n-attrs="tooltiptext"
                       align="center"
                       hidden="false">
           <image class="category-icon"/>
           <label class="category-name" flex="1" data-l10n-id="pane-home-title"></label>
-        </richlistitem>
+        </html:moz-richlistitem>
 
-        <richlistitem id="category-search"
+        <html:moz-richlistitem id="category-search"
                       class="category"
                       value="paneSearch"
                       helpTopic="prefs-search"
                       data-l10n-id="category-search"
                       data-l10n-attrs="tooltiptext"
                       align="center">
           <image class="category-icon"/>
           <label class="category-name" flex="1" data-l10n-id="pane-search-title"></label>
-        </richlistitem>
+        </html:moz-richlistitem>
 
-        <richlistitem id="category-containers"
+        <html:moz-richlistitem id="category-containers"
                       class="category"
                       value="paneContainers"
                       helpTopic="prefs-containers"
                       hidden="true"/>
 
-        <richlistitem id="category-privacy"
+        <html:moz-richlistitem id="category-privacy"
                       class="category"
                       value="panePrivacy"
                       helpTopic="prefs-privacy"
                       data-l10n-id="category-privacy"
                       data-l10n-attrs="tooltiptext"
                       align="center">
           <image class="category-icon"/>
           <label class="category-name" flex="1" data-l10n-id="pane-privacy-title"></label>
-        </richlistitem>
+        </html:moz-richlistitem>
 
-        <richlistitem id="category-sync"
+        <html:moz-richlistitem id="category-sync"
                       class="category"
                       hidden="true"
                       value="paneSync"
                       helpTopic="prefs-weave"
                       data-l10n-id="category-sync2"
                       data-l10n-attrs="tooltiptext"
                       align="center">
           <image class="category-icon"/>
           <label class="category-name" flex="1" data-l10n-id="pane-sync-title2"></label>
-        </richlistitem>
+        </html:moz-richlistitem>
       </richlistbox>
 
       <spacer flex="1"/>
 
       <hbox class="sidebar-footer-button" pack="center">
         <label id="addonsButton" is="text-link">
           <hbox align="center">
             <image class="sidebar-footer-icon addons-icon"/>
diff --git a/browser/components/preferences/in-content/tests/browser_applications_selection.js b/browser/components/preferences/in-content/tests/browser_applications_selection.js
--- a/browser/components/preferences/in-content/tests/browser_applications_selection.js
+++ b/browser/components/preferences/in-content/tests/browser_applications_selection.js
@@ -277,17 +277,17 @@ add_task(async function checkDropdownBeh
 });
 
 add_task(async function sortingCheck() {
   let win = gBrowser.selectedBrowser.contentWindow;
   const handlerView = win.document.getElementById("handlersView");
   const typeColumn = win.document.getElementById("typeColumn");
   Assert.ok(typeColumn, "typeColumn is present in handlersView.");
 
-  let expectedNumberOfItems = handlerView.querySelectorAll("richlistitem")
+  let expectedNumberOfItems = handlerView.querySelectorAll("moz-richlistitem")
     .length;
 
   // Test default sorting
   assertSortByType("ascending");
 
   const oldDir = typeColumn.getAttribute("sortDirection");
 
   // click on an item and sort again:
@@ -328,17 +328,17 @@ add_task(async function sortingCheck() {
   assertSortByType("ascending");
 
   function assertSortByAction(order) {
     Assert.equal(
       actionColumn.getAttribute("sortDirection"),
       order,
       `Sort direction should be ${order}`
     );
-    let siteItems = handlerView.getElementsByTagName("richlistitem");
+    let siteItems = handlerView.getElementsByTagName("moz-richlistitem");
     Assert.equal(
       siteItems.length,
       expectedNumberOfItems,
       "Number of items should not change."
     );
     for (let i = 0; i < siteItems.length - 1; ++i) {
       let aType = siteItems[i].getAttribute("actionDescription").toLowerCase();
       let bType = siteItems[i + 1]
@@ -368,17 +368,17 @@ add_task(async function sortingCheck() {
 
   function assertSortByType(order) {
     Assert.equal(
       typeColumn.getAttribute("sortDirection"),
       order,
       `Sort direction should be ${order}`
     );
 
-    let siteItems = handlerView.getElementsByTagName("richlistitem");
+    let siteItems = handlerView.getElementsByTagName("moz-richlistitem");
     Assert.equal(
       siteItems.length,
       expectedNumberOfItems,
       "Number of items should not change."
     );
     for (let i = 0; i < siteItems.length - 1; ++i) {
       let aType = siteItems[i].getAttribute("typeDescription").toLowerCase();
       let bType = siteItems[i + 1]
diff --git a/browser/components/preferences/in-content/tests/browser_bug410900.js b/browser/components/preferences/in-content/tests/browser_bug410900.js
--- a/browser/components/preferences/in-content/tests/browser_bug410900.js
+++ b/browser/components/preferences/in-content/tests/browser_bug410900.js
@@ -26,17 +26,17 @@ function test() {
     .then(() => gBrowser.selectedBrowser.contentWindow.promiseLoadHandlersList)
     .then(() => runTest(gBrowser.selectedBrowser.contentWindow));
 }
 
 function runTest(win) {
   var rbox = win.document.getElementById("handlersView");
   ok(rbox, "handlersView is present");
 
-  var items = rbox && rbox.getElementsByTagName("richlistitem");
+  var items = rbox && rbox.getElementsByTagName("moz-richlistitem");
   ok(items && !!items.length, "App handler list populated");
 
   var handlerAdded = false;
   for (let i = 0; i < items.length; i++) {
     if (items[i].getAttribute("type") == "apppanetest") {
       handlerAdded = true;
     }
   }
diff --git a/browser/components/preferences/in-content/tests/siteData/browser_siteData.js b/browser/components/preferences/in-content/tests/siteData/browser_siteData.js
--- a/browser/components/preferences/in-content/tests/siteData/browser_siteData.js
+++ b/browser/components/preferences/in-content/tests/siteData/browser_siteData.js
@@ -36,17 +36,17 @@ add_task(async function() {
   let updatedPromise = promiseSiteDataManagerSitesUpdated();
   await openPreferencesViaOpenPreferencesAPI("privacy", { leaveOpen: true });
   await updatedPromise;
   await openSiteDataSettingsDialog();
   let dialog = content.gSubDialog._topDialog;
   let dialogFrame = dialog._frame;
   let frameDoc = dialogFrame.contentDocument;
 
-  let siteItems = frameDoc.getElementsByTagName("richlistitem");
+  let siteItems = frameDoc.getElementsByTagName("moz-richlistitem");
   is(siteItems.length, 2, "Should list sites using quota usage or appcache");
 
   let appcacheSite = frameDoc.querySelector(
     `richlistitem[host="${TEST_OFFLINE_HOST}"]`
   );
   ok(appcacheSite, "Should list site using appcache");
 
   let qoutaUsageSite = frameDoc.querySelector(
@@ -272,17 +272,17 @@ add_task(async function() {
     gBrowser.selectedBrowser,
     {
       creationDate1Formatted,
       creationDate2Formatted,
     },
     function(args) {
       let frameDoc = content.gSubDialog._topDialog._frame.contentDocument;
 
-      let siteItems = frameDoc.getElementsByTagName("richlistitem");
+      let siteItems = frameDoc.getElementsByTagName("moz-richlistitem");
       is(siteItems.length, 2, "Should list two sites with cookies");
       let sitesList = frameDoc.getElementById("sitesList");
       let site1 = sitesList.querySelector(`richlistitem[host="example.com"]`);
       let site2 = sitesList.querySelector(`richlistitem[host="example.org"]`);
 
       let columns = site1.querySelectorAll(".item-box > label");
       let boxes = site1.querySelectorAll(".item-box");
       is(columns[0].value, "example.com", "Should show the correct host.");
@@ -338,17 +338,17 @@ add_task(async function() {
   await openSiteDataSettingsDialog();
   let acceptRemovePromise = BrowserTestUtils.promiseAlertDialogOpen("accept");
   await ContentTask.spawn(
     gBrowser.selectedBrowser,
     { creationDate1Formatted },
     function(args) {
       let frameDoc = content.gSubDialog._topDialog._frame.contentDocument;
 
-      let siteItems = frameDoc.getElementsByTagName("richlistitem");
+      let siteItems = frameDoc.getElementsByTagName("moz-richlistitem");
       is(siteItems.length, 1, "Should list one site with cookies");
       let sitesList = frameDoc.getElementById("sitesList");
       let site1 = sitesList.querySelector(`richlistitem[host="example.com"]`);
 
       let columns = site1.querySelectorAll(".item-box > label");
       let boxes = site1.querySelectorAll(".item-box");
       is(columns[0].value, "example.com", "Should show the correct host.");
       is(columns[1].value, "2", "Should show the correct number of cookies.");
@@ -378,14 +378,14 @@ add_task(async function() {
     "Cookies from the second host should be cleared"
   );
 
   await openSiteDataSettingsDialog();
 
   ContentTask.spawn(gBrowser.selectedBrowser, null, function() {
     let frameDoc = content.gSubDialog._topDialog._frame.contentDocument;
 
-    let siteItems = frameDoc.getElementsByTagName("richlistitem");
+    let siteItems = frameDoc.getElementsByTagName("moz-richlistitem");
     is(siteItems.length, 0, "Should list no sites with cookies");
   });
 
   BrowserTestUtils.removeTab(gBrowser.selectedTab);
 });
diff --git a/browser/components/preferences/in-content/tests/siteData/browser_siteData2.js b/browser/components/preferences/in-content/tests/siteData/browser_siteData2.js
--- a/browser/components/preferences/in-content/tests/siteData/browser_siteData2.js
+++ b/browser/components/preferences/in-content/tests/siteData/browser_siteData2.js
@@ -1,16 +1,16 @@
 "use strict";
 
 function assertAllSitesNotListed(win) {
   let frameDoc = win.gSubDialog._topDialog._frame.contentDocument;
   let removeBtn = frameDoc.getElementById("removeSelected");
   let removeAllBtn = frameDoc.getElementById("removeAll");
   let sitesList = frameDoc.getElementById("sitesList");
-  let sites = sitesList.getElementsByTagName("richlistitem");
+  let sites = sitesList.getElementsByTagName("moz-richlistitem");
   is(sites.length, 0, "Should not list all sites");
   is(removeBtn.disabled, true, "Should disable the removeSelected button");
   is(removeAllBtn.disabled, true, "Should disable the removeAllBtn button");
 }
 
 // Test selecting and removing all sites one by one
 add_task(async function test_selectRemove() {
   let hosts = await addTestData([
@@ -93,17 +93,17 @@ add_task(async function test_selectRemov
 
   await SiteDataTestUtils.clear();
   BrowserTestUtils.removeTab(gBrowser.selectedTab);
 
   function removeAllSitesOneByOne() {
     frameDoc = win.gSubDialog._topDialog._frame.contentDocument;
     let removeBtn = frameDoc.getElementById("removeSelected");
     let sitesList = frameDoc.getElementById("sitesList");
-    let sites = sitesList.getElementsByTagName("richlistitem");
+    let sites = sitesList.getElementsByTagName("moz-richlistitem");
     for (let i = sites.length - 1; i >= 0; --i) {
       sites[i].click();
       removeBtn.doCommand();
     }
   }
 });
 
 // Test selecting and removing partial sites
diff --git a/browser/components/preferences/in-content/tests/siteData/browser_siteData3.js b/browser/components/preferences/in-content/tests/siteData/browser_siteData3.js
--- a/browser/components/preferences/in-content/tests/siteData/browser_siteData3.js
+++ b/browser/components/preferences/in-content/tests/siteData/browser_siteData3.js
@@ -75,17 +75,17 @@ add_task(async function test_grouping() 
   let updatedPromise = promiseSiteDataManagerSitesUpdated();
   await openPreferencesViaOpenPreferencesAPI("privacy", { leaveOpen: true });
   await updatedPromise;
   await openSiteDataSettingsDialog();
   let win = gBrowser.selectedBrowser.contentWindow;
   let dialogFrame = win.gSubDialog._topDialog._frame;
   let frameDoc = dialogFrame.contentDocument;
 
-  let siteItems = frameDoc.getElementsByTagName("richlistitem");
+  let siteItems = frameDoc.getElementsByTagName("moz-richlistitem");
   is(
     siteItems.length,
     1,
     "Should group sites across scheme, port and origin attributes"
   );
 
   let columns = siteItems[0].querySelectorAll(".item-box > label");
 
@@ -160,17 +160,17 @@ add_task(async function test_sorting() {
   let dialogFrame = dialog._frame;
   let frameDoc = dialogFrame.contentDocument;
   let hostCol = frameDoc.getElementById("hostCol");
   let usageCol = frameDoc.getElementById("usageCol");
   let cookiesCol = frameDoc.getElementById("cookiesCol");
   let sitesList = frameDoc.getElementById("sitesList");
 
   function getHostOrder() {
-    let siteItems = sitesList.getElementsByTagName("richlistitem");
+    let siteItems = sitesList.getElementsByTagName("moz-richlistitem");
     return Array.from(siteItems).map(item => item.getAttribute("host"));
   }
 
   // Test default sorting by usage, descending.
   Assert.deepEqual(
     getHostOrder(),
     ["cinema.bar.com", "books.foo.com", "account.xyz.com"],
     "Has sorted descending by usage"
diff --git a/browser/components/preferences/in-content/tests/siteData/head.js b/browser/components/preferences/in-content/tests/siteData/head.js
--- a/browser/components/preferences/in-content/tests/siteData/head.js
+++ b/browser/components/preferences/in-content/tests/siteData/head.js
@@ -194,17 +194,17 @@ function promiseSettingsDialogClose() {
     );
   });
 }
 
 function assertSitesListed(doc, hosts) {
   let frameDoc = content.gSubDialog._topDialog._frame.contentDocument;
   let removeAllBtn = frameDoc.getElementById("removeAll");
   let sitesList = frameDoc.getElementById("sitesList");
-  let totalSitesNumber = sitesList.getElementsByTagName("richlistitem").length;
+  let totalSitesNumber = sitesList.getElementsByTagName("moz-richlistitem").length;
   is(totalSitesNumber, hosts.length, "Should list the right sites number");
   hosts.forEach(host => {
     let site = sitesList.querySelector(`richlistitem[host="${host}"]`);
     ok(site, `Should list the site of ${host}`);
   });
   is(removeAllBtn.disabled, false, "Should enable the removeAllBtn button");
 }
 
diff --git a/browser/components/preferences/languages.js b/browser/components/preferences/languages.js
--- a/browser/components/preferences/languages.js
+++ b/browser/components/preferences/languages.js
@@ -157,17 +157,17 @@ var gLanguagesDialog = {
 
     var selectedIndex = 0;
     var preference = Preferences.get("intl.accept_languages");
     if (preference.value == "") {
       return;
     }
     var languages = preference.value.toLowerCase().split(/\s*,\s*/);
     for (var i = 0; i < languages.length; ++i) {
-      var listitem = document.createXULElement("richlistitem");
+      var listitem = document.createElement("moz-richlistitem");
       var label = document.createXULElement("label");
       listitem.appendChild(label);
       listitem.id = languages[i];
       if (languages[i] == this._selectedItemID) {
         selectedIndex = i;
       }
       this._activeLanguages.appendChild(listitem);
       var localeName = this._getLocaleName(languages[i]);
diff --git a/browser/components/preferences/permissions.js b/browser/components/preferences/permissions.js
--- a/browser/components/preferences/permissions.js
+++ b/browser/components/preferences/permissions.js
@@ -300,17 +300,17 @@ var gPermissionManager = {
   _loadPermissions() {
     // load permissions into a table.
     for (let nextPermission of Services.perms.enumerator) {
       this._addPermissionToList(nextPermission);
     }
   },
 
   _createPermissionListItem(permission) {
-    let richlistitem = document.createXULElement("richlistitem");
+    let richlistitem = document.createElement("moz-richlistitem");
     richlistitem.setAttribute("origin", permission.origin);
     let row = document.createXULElement("hbox");
     row.setAttribute("flex", "1");
 
     let hbox = document.createXULElement("hbox");
     let website = document.createXULElement("label");
     website.setAttribute("value", permission.origin);
     hbox.setAttribute("width", "0");
@@ -418,17 +418,17 @@ var gPermissionManager = {
       Services.perms.addFromPrincipal(p.principal, p.type, p.capability);
     }
 
     window.close();
   },
 
   buildPermissionsList(sortCol) {
     // Clear old entries.
-    let oldItems = this._list.querySelectorAll("richlistitem");
+    let oldItems = this._list.querySelectorAll("moz-richlistitem");
     for (let item of oldItems) {
       item.remove();
     }
     let frag = document.createDocumentFragment();
 
     let permissions = Array.from(this._permissions.values());
 
     for (let permission of permissions) {
@@ -484,17 +484,17 @@ var gPermissionManager = {
         };
         break;
     }
 
     let comp = new Services.intl.Collator(undefined, {
       usage: "sort",
     });
 
-    let items = Array.from(frag.querySelectorAll("richlistitem"));
+    let items = Array.from(frag.querySelectorAll("moz-richlistitem"));
 
     if (sortDirection === "descending") {
       items.sort((a, b) => sortFunc(b, a));
     } else {
       items.sort(sortFunc);
     }
 
     // Re-append items in the correct order:
diff --git a/browser/components/preferences/siteDataRemoveSelected.js b/browser/components/preferences/siteDataRemoveSelected.js
--- a/browser/components/preferences/siteDataRemoveSelected.js
+++ b/browser/components/preferences/siteDataRemoveSelected.js
@@ -7,17 +7,17 @@
 
 let gSiteDataRemoveSelected = {
   init() {
     let hosts = window.arguments[0].hosts;
     hosts.sort();
     let list = document.getElementById("removalList");
     let fragment = document.createDocumentFragment();
     for (let host of hosts) {
-      let listItem = document.createXULElement("richlistitem");
+      let listItem = document.createElement("moz-richlistitem");
       let label = document.createXULElement("label");
       if (host) {
         label.setAttribute("value", host);
       } else {
         document.l10n.setAttributes(label, "site-data-local-file-host");
       }
       listItem.appendChild(label);
       fragment.appendChild(listItem);
diff --git a/browser/components/preferences/siteDataSettings.js b/browser/components/preferences/siteDataSettings.js
--- a/browser/components/preferences/siteDataSettings.js
+++ b/browser/components/preferences/siteDataSettings.js
@@ -29,17 +29,17 @@ let gSiteDataSettings = {
   // - usage: disk usage which site uses
   // - userAction: "remove" or "update-permission"; the action user wants to take.
   _sites: null,
 
   _list: null,
   _searchBox: null,
 
   _createSiteListItem(site) {
-    let item = document.createXULElement("richlistitem");
+    let item = document.createElement("moz-richlistitem");
     item.setAttribute("host", site.host);
     let container = document.createXULElement("hbox");
 
     // Creates a new column item with the specified relative width.
     function addColumnItem(l10n, flexWidth, tooltipText) {
       let box = document.createXULElement("hbox");
       box.className = "item-box";
       box.setAttribute("flex", flexWidth);
@@ -143,17 +143,17 @@ let gSiteDataSettings = {
     setEventListener("cancel", "command", this.close);
     setEventListener("save", "command", this.saveChanges);
     setEventListener("searchBox", "command", this.onCommandSearch);
     setEventListener("removeAll", "command", this.onClickRemoveAll);
     setEventListener("removeSelected", "command", this.removeSelected);
   },
 
   _updateButtonsState() {
-    let items = this._list.getElementsByTagName("richlistitem");
+    let items = this._list.getElementsByTagName("moz-richlistitem");
     let removeSelectedBtn = document.getElementById("removeSelected");
     let removeAllBtn = document.getElementById("removeAll");
     removeSelectedBtn.disabled = !this._list.selectedItems.length;
     removeAllBtn.disabled = !items.length;
 
     let l10nId = this._searchBox.value
       ? "site-data-remove-shown"
       : "site-data-remove-all";
@@ -212,17 +212,17 @@ let gSiteDataSettings = {
     col.setAttribute("data-last-sortDirection", sortDirection);
   },
 
   /**
    * @param sites {Array} array of metadata of sites
    */
   _buildSitesList(sites) {
     // Clear old entries.
-    let oldItems = this._list.querySelectorAll("richlistitem");
+    let oldItems = this._list.querySelectorAll("moz-richlistitem");
     for (let item of oldItems) {
       item.remove();
     }
 
     let keyword = this._searchBox.value.toLowerCase().trim();
     let fragment = document.createDocumentFragment();
     for (let site of sites) {
       let host = site.host;
@@ -320,17 +320,17 @@ let gSiteDataSettings = {
   },
 
   onCommandSearch() {
     this._buildSitesList(this._sites);
     this._list.clearSelection();
   },
 
   onClickRemoveAll() {
-    let siteItems = this._list.getElementsByTagName("richlistitem");
+    let siteItems = this._list.getElementsByTagName("moz-richlistitem");
     if (siteItems.length) {
       this._removeSiteItems(siteItems);
     }
   },
 
   onKeyPress(e) {
     if (e.keyCode == KeyEvent.DOM_VK_ESCAPE) {
       this.close();
diff --git a/browser/components/preferences/sitePermissions.css b/browser/components/preferences/sitePermissions.css
--- a/browser/components/preferences/sitePermissions.css
+++ b/browser/components/preferences/sitePermissions.css
@@ -9,17 +9,17 @@
 }
 
 #permissionsBox {
   min-height: 18em;
 }
 
 #siteCol,
 #statusCol,
-#permissionsBox > richlistitem {
+#permissionsBox > moz-richlistitem {
   min-height: 35px;
 }
 
 .website-status {
   margin: 1px;
   margin-inline-end: 5px;
 }
 
diff --git a/browser/components/preferences/sitePermissions.js b/browser/components/preferences/sitePermissions.js
--- a/browser/components/preferences/sitePermissions.js
+++ b/browser/components/preferences/sitePermissions.js
@@ -332,17 +332,17 @@ var gSitePermissionsManager = {
     // load permissions into a table.
     for (let nextPermission of Services.perms.enumerator) {
       this._addPermissionToList(nextPermission);
     }
   },
 
   _createPermissionListItem(permission) {
     let width = "75";
-    let richlistitem = document.createXULElement("richlistitem");
+    let richlistitem = document.createElement("moz-richlistitem");
     richlistitem.setAttribute("origin", permission.origin);
     let row = document.createXULElement("hbox");
     row.setAttribute("flex", "1");
 
     let hbox = document.createXULElement("hbox");
     let website = document.createXULElement("label");
     website.setAttribute("value", permission.origin);
     website.setAttribute("width", width);
@@ -491,17 +491,17 @@ var gSitePermissionsManager = {
       );
     }
 
     window.close();
   },
 
   buildPermissionsList(sortCol) {
     // Clear old entries.
-    let oldItems = this._list.querySelectorAll("richlistitem");
+    let oldItems = this._list.querySelectorAll("moz-richlistitem");
     for (let item of oldItems) {
       item.remove();
     }
     let frag = document.createDocumentFragment();
 
     let permissions = Array.from(this._permissions.values());
 
     let keyword = this._searchBox.value.toLowerCase().trim();
@@ -577,17 +577,17 @@ var gSitePermissionsManager = {
         };
         break;
     }
 
     let comp = new Services.intl.Collator(undefined, {
       usage: "sort",
     });
 
-    let items = Array.from(frag.querySelectorAll("richlistitem"));
+    let items = Array.from(frag.querySelectorAll("moz-richlistitem"));
 
     if (sortDirection === "descending") {
       items.sort((a, b) => sortFunc(b, a));
     } else {
       items.sort(sortFunc);
     }
 
     // Re-append items in the correct order:
diff --git a/browser/extensions/formautofill/content/customElements.js b/browser/extensions/formautofill/content/customElements.js
--- a/browser/extensions/formautofill/content/customElements.js
+++ b/browser/extensions/formautofill/content/customElements.js
@@ -155,17 +155,17 @@
       this._label.textContent = primary;
       this._comment.textContent = secondary;
     }
   };
 
   customElements.define(
     "autocomplete-profile-listitem",
     MozElements.MozAutocompleteProfileListitem,
-    { extends: "richlistitem" }
+    { extends: "moz-richlistitem" }
   );
 
   class MozAutocompleteProfileListitemFooter extends MozAutocompleteProfileListitemBase {
     constructor() {
       super();
 
       this.addEventListener("click", event => {
         if (event.button != 0) {
@@ -308,17 +308,17 @@
         this._itemBox.setAttribute("no-warning", "true");
       }
     }
   }
 
   customElements.define(
     "autocomplete-profile-listitem-footer",
     MozAutocompleteProfileListitemFooter,
-    { extends: "richlistitem" }
+    { extends: "moz-richlistitem" }
   );
 
   class MozAutocompleteCreditcardInsecureField extends MozAutocompleteProfileListitemBase {
     connectedCallback() {
       if (this.delayConnectedCallback()) {
         return;
       }
       this.textContent = "";
@@ -349,17 +349,17 @@
       let value = this.getAttribute("ac-value");
       this._itemBox.textContent = value;
     }
   }
 
   customElements.define(
     "autocomplete-creditcard-insecure-field",
     MozAutocompleteCreditcardInsecureField,
-    { extends: "richlistitem" }
+    { extends: "moz-richlistitem" }
   );
 
   class MozAutocompleteProfileListitemClearButton extends MozAutocompleteProfileListitemBase {
     constructor() {
       super();
 
       this.addEventListener("click", event => {
         if (event.button != 0) {
@@ -399,11 +399,11 @@
       );
       this._clearBtn.textContent = clearFormBtnLabel;
     }
   }
 
   customElements.define(
     "autocomplete-profile-listitem-clear-button",
     MozAutocompleteProfileListitemClearButton,
-    { extends: "richlistitem" }
+    { extends: "moz-richlistitem" }
   );
 })();
diff --git a/browser/extensions/formautofill/content/formautofill.css b/browser/extensions/formautofill/content/formautofill.css
--- a/browser/extensions/formautofill/content/formautofill.css
+++ b/browser/extensions/formautofill/content/formautofill.css
@@ -1,29 +1,29 @@
 /* This Source Code Form is subject to the terms of the Mozilla Public
  * License, v. 2.0. If a copy of the MPL was not distributed with this
  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
 
-#PopupAutoComplete > richlistbox > richlistitem[originaltype="autofill-profile"],
-#PopupAutoComplete > richlistbox > richlistitem[originaltype="autofill-footer"],
-#PopupAutoComplete > richlistbox > richlistitem[originaltype="autofill-insecureWarning"],
-#PopupAutoComplete > richlistbox > richlistitem[originaltype="autofill-clear-button"] {
+#PopupAutoComplete > richlistbox > moz-richlistitem[originaltype="autofill-profile"],
+#PopupAutoComplete > richlistbox > moz-richlistitem[originaltype="autofill-footer"],
+#PopupAutoComplete > richlistbox > moz-richlistitem[originaltype="autofill-insecureWarning"],
+#PopupAutoComplete > richlistbox > moz-richlistitem[originaltype="autofill-clear-button"] {
   display: block;
   margin: 0;
   padding: 0;
   height: auto;
   min-height: auto;
 }
 
 /* Treat @collpased="true" as display: none similar to how it is for XUL elements.
  * https://developer.mozilla.org/en-US/docs/Web/CSS/visibility#Values */
-#PopupAutoComplete > richlistbox > richlistitem[originaltype="autofill-profile"][collapsed="true"],
-#PopupAutoComplete > richlistbox > richlistitem[originaltype="autofill-footer"][collapsed="true"],
-#PopupAutoComplete > richlistbox > richlistitem[originaltype="autofill-insecureWarning"][collapsed="true"],
-#PopupAutoComplete > richlistbox > richlistitem[originaltype="autofill-clear-button"][collapsed="true"] {
+#PopupAutoComplete > richlistbox > moz-richlistitem[originaltype="autofill-profile"][collapsed="true"],
+#PopupAutoComplete > richlistbox > moz-richlistitem[originaltype="autofill-footer"][collapsed="true"],
+#PopupAutoComplete > richlistbox > moz-richlistitem[originaltype="autofill-insecureWarning"][collapsed="true"],
+#PopupAutoComplete > richlistbox > moz-richlistitem[originaltype="autofill-clear-button"][collapsed="true"] {
   display: none;
 }
 
 #PopupAutoComplete[resultstyles~="autofill-profile"] {
   min-width: 150px !important;
 }
 
 #PopupAutoComplete[resultstyles~="autofill-insecureWarning"] {
diff --git a/browser/extensions/formautofill/skin/shared/autocomplete-item-shared.css b/browser/extensions/formautofill/skin/shared/autocomplete-item-shared.css
--- a/browser/extensions/formautofill/skin/shared/autocomplete-item-shared.css
+++ b/browser/extensions/formautofill/skin/shared/autocomplete-item-shared.css
@@ -1,26 +1,26 @@
 /* This Source Code Form is subject to the terms of the Mozilla Public
  * License, v. 2.0. If a copy of the MPL was not distributed with this
  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
 
 @namespace url("http://www.w3.org/1999/xhtml");
 @namespace xul url("http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul");
 
 
-xul|richlistitem[originaltype="autofill-profile"][selected="true"] > .autofill-item-box {
+moz-richlistitem[originaltype="autofill-profile"][selected="true"] > .autofill-item-box {
   background-color: #F2F2F2;
 }
 
-xul|richlistitem[originaltype="autofill-footer"][selected="true"] > .autofill-item-box > .autofill-button,
-xul|richlistitem[originaltype="autofill-clear-button"][selected="true"] > .autofill-item-box > .autofill-button {
+moz-richlistitem[originaltype="autofill-footer"][selected="true"] > .autofill-item-box > .autofill-button,
+moz-richlistitem[originaltype="autofill-clear-button"][selected="true"] > .autofill-item-box > .autofill-button {
   background-color: #DCDCDE;
 }
 
-xul|richlistitem[originaltype="autofill-insecureWarning"] {
+moz-richlistitem[originaltype="autofill-insecureWarning"] {
   border-bottom: 1px solid var(--panel-separator-color);
   background-color: var(--arrowpanel-dimmed);
 }
 
 .autofill-item-box {
   --item-padding-vertical: 7px;
   --item-padding-horizontal: 10px;
   --col-spacer: 7px;
diff --git a/browser/extensions/formautofill/skin/windows/autocomplete-item.css b/browser/extensions/formautofill/skin/windows/autocomplete-item.css
--- a/browser/extensions/formautofill/skin/windows/autocomplete-item.css
+++ b/browser/extensions/formautofill/skin/windows/autocomplete-item.css
@@ -5,17 +5,17 @@
 @namespace url("http://www.w3.org/1999/xhtml");
 @namespace xul url("http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul");
 
 .autofill-item-box {
   --default-font-size: 12;
 }
 
 @media (-moz-windows-default-theme: 0) {
-  xul|richlistitem[originaltype="autofill-profile"][selected="true"] > .autofill-item-box {
+  moz-richlistitem[originaltype="autofill-profile"][selected="true"] > .autofill-item-box {
     background-color: Highlight;
   }
 
   .autofill-item-box {
     --label-text-color: -moz-FieldText;
     --comment-text-color: GrayText;
   }
 }
diff --git a/browser/themes/linux/browser.css b/browser/themes/linux/browser.css
--- a/browser/themes/linux/browser.css
+++ b/browser/themes/linux/browser.css
@@ -266,17 +266,17 @@ notification[value="translation"] button
 notification[value="translation"] menulist > .menulist-dropmarker {
   display: block;
 }
 
 /* AutoComplete */
 
 %include ../shared/autocomplete.inc.css
 
-#PopupAutoComplete > richlistbox > richlistitem[originaltype~="datalist-first"] {
+#PopupAutoComplete > richlistbox > moz-richlistitem[originaltype~="datalist-first"] {
   border-top: 1px solid ThreeDShadow;
 }
 
 %include ../shared/urlbar-autocomplete.inc.css
 
 :root {
   --urlbar-popup-url-color: -moz-nativehyperlinktext;
   --urlbar-popup-action-color: -moz-nativehyperlinktext;
diff --git a/browser/themes/linux/places/editBookmark.css b/browser/themes/linux/places/editBookmark.css
--- a/browser/themes/linux/places/editBookmark.css
+++ b/browser/themes/linux/places/editBookmark.css
@@ -49,17 +49,17 @@
  * leaving only the comment column visible. This is
  * so that only the tag being edited is shown in the
  * popup.
  */
 #editBMPanel_tagsField #treecolAutoCompleteValue {
   visibility: collapse;
 }
 
-#editBMPanel_tagsSelector > richlistitem > image {
+#editBMPanel_tagsSelector > moz-richlistitem > image {
   -moz-appearance: checkbox;
   -moz-box-align: center;
   margin: 0 2px;
   min-width: 13px;
   min-height: 13px;
 }
 
 
diff --git a/browser/themes/linux/preferences/applications.css b/browser/themes/linux/preferences/applications.css
--- a/browser/themes/linux/preferences/applications.css
+++ b/browser/themes/linux/preferences/applications.css
@@ -16,36 +16,36 @@
 }
 
 .typeIcon,
 .actionIcon {
   margin-inline-start: 3px;
   margin-inline-end: 3px;
 }
 
-#handlersView > richlistitem label {
+#handlersView > moz-richlistitem label {
   margin-inline-start: 1px;
   margin-top: 2px;
 }
 
-#handlersView > richlistitem {
+#handlersView > moz-richlistitem {
   min-height: 25px;
 }
 
-richlistitem[appHandlerIcon="ask"],
+moz-richlistitem[appHandlerIcon="ask"],
 menuitem[appHandlerIcon="ask"] {
   list-style-image: url("chrome://browser/skin/preferences/alwaysAsk.png");
 }
 
-richlistitem[appHandlerIcon="save"],
+moz-richlistitem[appHandlerIcon="save"],
 menuitem[appHandlerIcon="save"] {
   list-style-image: url("moz-icon://stock/gtk-save?size=menu");
 }
 
-richlistitem[appHandlerIcon="plugin"],
+moz-richlistitem[appHandlerIcon="plugin"],
 menuitem[appHandlerIcon="plugin"] {
   list-style-image: url("chrome://global/skin/plugins/pluginGeneric.svg");
 }
 
 .actionsMenu .menulist-icon {
   margin-inline-end: 1px;
   height: 16px;
   width: 16px;
@@ -59,23 +59,23 @@ menuitem[appHandlerIcon="plugin"] {
 .actionsMenu > menupopup > menuitem {
   padding-inline-start: 3px;
 }
 
 #appList {
   min-height: 212px;
 }
 
-#appList > richlistitem {
+#appList > moz-richlistitem {
   -moz-box-align: center;
 }
 
-#appList > richlistitem > image {
+#appList > moz-richlistitem > image {
   margin: 5px;
   width: 32px;
   height: 32px;
 }
 
-#appList > richlistitem > label {
+#appList > moz-richlistitem > label {
   margin: 0px;
   padding: 5px;
   white-space: nowrap;
 }
diff --git a/browser/themes/osx/browser.css b/browser/themes/osx/browser.css
--- a/browser/themes/osx/browser.css
+++ b/browser/themes/osx/browser.css
@@ -279,17 +279,17 @@
 #pageAction-panel-shareURL {
   list-style-image: url("chrome://browser/skin/share.svg");
 }
 
 /* ----- AUTOCOMPLETE ----- */
 
 %include ../shared/autocomplete.inc.css
 
-#PopupAutoComplete > richlistbox > richlistitem[originaltype~="datalist-first"] {
+#PopupAutoComplete > richlistbox > moz-richlistitem[originaltype~="datalist-first"] {
   border-top: 1px solid #C7C7C7;
 }
 
 %include ../shared/urlbar-autocomplete.inc.css
 
 :root {
   --urlbar-popup-url-color: hsl(210, 77%, 47%);
   --urlbar-popup-action-color: hsl(178, 100%, 28%);
@@ -424,24 +424,24 @@
 
 #editBMPanel_folderTree:-moz-focusring,
 #editBMPanel_tagsSelector:-moz-focusring {
   border-color: -moz-mac-focusring;
   box-shadow: var(--focus-ring-box-shadow);
 }
 
 #editBMPanel_folderTree > treechildren::-moz-tree-row(blur,selected),
-#editBMPanel_tagsSelector:not(:focus) > richlistitem[selected] {
+#editBMPanel_tagsSelector:not(:focus) > moz-richlistitem[selected] {
   background-color: var(--arrowpanel-dimmed);
 }
 
 #editBMPanel_folderTree > treechildren::-moz-tree-twisty(blur,selected),
 #editBMPanel_folderTree > treechildren::-moz-tree-image(blur,selected),
 #editBMPanel_folderTree > treechildren::-moz-tree-cell-text(blur,selected),
-#editBMPanel_tagsSelector:not(:focus) > richlistitem[selected] {
+#editBMPanel_tagsSelector:not(:focus) > moz-richlistitem[selected] {
   color: inherit;
 }
 
 #editBMPanel_folderTree {
   border-bottom: none;
   border-bottom-left-radius: 0;
   border-bottom-right-radius: 0;
   /* Implements editBookmarkPanel resizing on folderTree un-collapse. */
diff --git a/browser/themes/osx/places/editBookmark.css b/browser/themes/osx/places/editBookmark.css
--- a/browser/themes/osx/places/editBookmark.css
+++ b/browser/themes/osx/places/editBookmark.css
@@ -47,17 +47,17 @@
  * leaving only the comment column visible. This is
  * so that only the tag being edited is shown in the
  * popup.
  */
 #editBMPanel_tagsField #treecolAutoCompleteValue {
   visibility: collapse;
 }
 
-#editBMPanel_tagsSelector > richlistitem > image {
+#editBMPanel_tagsSelector > moz-richlistitem > image {
   -moz-appearance: checkbox;
   -moz-box-align: center;
   margin: 0px 2px;
   min-width: 13px;
   min-height: 13px;
 }
 
 /* ----- BOOKMARK PANEL DROPDOWN MENU ITEMS ----- */
diff --git a/browser/themes/osx/preferences/applications.css b/browser/themes/osx/preferences/applications.css
--- a/browser/themes/osx/preferences/applications.css
+++ b/browser/themes/osx/preferences/applications.css
@@ -9,22 +9,22 @@
  * Also make sure the labels are the same distance away from the icons.
  */
 .actionsMenu {
   margin-inline-start: -2px;
   margin-top: 0;
   margin-bottom: -1px;
 }
 
-#handlersView > richlistitem label {
+#handlersView > moz-richlistitem label {
   margin-inline-start: 3px;
   margin-top: 2px;
 }
 
-#handlersView > richlistitem {
+#handlersView > moz-richlistitem {
   min-height: 22px;
 }
 
 .typeIcon,
 .actionIcon {
   margin-inline-start: 3px;
 }
 
@@ -36,27 +36,27 @@
 
 .actionsMenu > menupopup > menuitem > .menu-iconic-left {
   /* Undo content/browser/preferences/handlers.css - we don't
    * want icon-less labels to line up with the other labels.
    */
   min-width: 0;
 }
 
-richlistitem[appHandlerIcon="ask"],
+moz-richlistitem[appHandlerIcon="ask"],
 menuitem[appHandlerIcon="ask"] {
   list-style-image: url("chrome://browser/skin/preferences/alwaysAsk.png");
 }
 
-richlistitem[appHandlerIcon="save"],
+moz-richlistitem[appHandlerIcon="save"],
 menuitem[appHandlerIcon="save"] {
   list-style-image: url("chrome://browser/skin/preferences/saveFile.png");
 }
 
-richlistitem[appHandlerIcon="plugin"],
+moz-richlistitem[appHandlerIcon="plugin"],
 menuitem[appHandlerIcon="plugin"] {
   list-style-image: url("chrome://global/skin/plugins/pluginGeneric.svg");
 }
 
 /* Repeat what menu.css does for .menuitem-iconic */
 menuitem[appHandlerIcon] {
   padding-top: 1px;
   padding-bottom: 3px;
@@ -66,23 +66,23 @@ menuitem[appHandlerIcon] > .menu-iconic-
   margin-inline-start: 0;
   width: 16px;
 }
 
 #appList {
   min-height: 212px;
 }
 
-#appList > richlistitem {
+#appList > moz-richlistitem {
   -moz-box-align: center;
 }
 
-#appList > richlistitem > image {
+#appList > moz-richlistitem > image {
   margin: 5px;
   width: 32px;
   height: 32px;
 }
 
-#appList > richlistitem > label {
+#appList > moz-richlistitem > label {
   margin: 0px;
   padding: 5px;
   white-space: nowrap;
 }
diff --git a/browser/themes/shared/autocomplete.inc.css b/browser/themes/shared/autocomplete.inc.css
--- a/browser/themes/shared/autocomplete.inc.css
+++ b/browser/themes/shared/autocomplete.inc.css
@@ -1,134 +1,134 @@
 %if 0
 /* This Source Code Form is subject to the terms of the Mozilla Public
  * License, v. 2.0. If a copy of the MPL was not distributed with this
  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
 %endif
 
 /* General popup rules */
 
-#PopupAutoComplete > richlistbox > richlistitem {
+#PopupAutoComplete > richlistbox > moz-richlistitem {
   min-height: 20px;
   border: 0;
   border-radius: 0;
   padding: 0px 1px 0px 1px;
 }
 
-#PopupAutoComplete > richlistbox > richlistitem > .ac-site-icon {
+#PopupAutoComplete > richlistbox > moz-richlistitem > .ac-site-icon {
   margin-inline-start: 4px;
   margin-inline-end: 0;
 }
 
-#PopupAutoComplete > richlistbox > richlistitem > .ac-title {
+#PopupAutoComplete > richlistbox > moz-richlistitem > .ac-title {
   font: icon;
   margin-inline-start: 4px;
 }
 
 #PopupAutoComplete > richlistbox {
   padding: 0;
 }
 
 /* Popup states */
 
-.autocomplete-richlistitem:hover {
+.autocomplete-moz-richlistitem:hover {
   background-color: var(--arrowpanel-dimmed);
 }
 
-.autocomplete-richlistitem[selected] {
+.autocomplete-moz-richlistitem[selected] {
   background-color: Highlight;
   color: HighlightText;
 }
 
-/* Autocomplete richlistitem support for a two-line label display */
+/* Autocomplete moz-richlistitem support for a two-line label display */
 
-#PopupAutoComplete > richlistbox > richlistitem > .two-line-wrapper {
+#PopupAutoComplete > richlistbox > moz-richlistitem > .two-line-wrapper {
   box-sizing: border-box;
   display: flex;
   flex-direction: row;
   margin: 0;
 }
 
-#PopupAutoComplete > richlistbox > richlistitem > .two-line-wrapper > .ac-site-icon {
+#PopupAutoComplete > richlistbox > moz-richlistitem > .two-line-wrapper > .ac-site-icon {
   display: block;
   margin-inline-start: auto;
   margin-inline-end: 4px;
 }
 
-#PopupAutoComplete > richlistbox > richlistitem > .two-line-wrapper > .labels-wrapper {
+#PopupAutoComplete > richlistbox > moz-richlistitem > .two-line-wrapper > .labels-wrapper {
   /* The text should flex while the icon should not */
   flex: 1;
   /* width/min-width are needed to get the text-overflow: ellipsis to work for the children */
   min-width: 0;
   width: 0;
 }
 
-#PopupAutoComplete > richlistbox > richlistitem > .two-line-wrapper > .labels-wrapper > .label-row {
+#PopupAutoComplete > richlistbox > moz-richlistitem > .two-line-wrapper > .labels-wrapper > .label-row {
   overflow: hidden;
   text-overflow: ellipsis;
   white-space: nowrap;
 }
 
-#PopupAutoComplete > richlistbox > richlistitem > .two-line-wrapper > .labels-wrapper > .line2-label {
+#PopupAutoComplete > richlistbox > moz-richlistitem > .two-line-wrapper > .labels-wrapper > .line2-label {
   padding-top: 2px !important;
   opacity: .6;
 }
 
 /* Login form autocompletion (with and without origin showing) and generated passwords */
-#PopupAutoComplete > richlistbox > richlistitem[originaltype="generatedPassword"] > .two-line-wrapper > .ac-site-icon,
-#PopupAutoComplete > richlistbox > richlistitem[originaltype="loginWithOrigin"] > .two-line-wrapper > .ac-site-icon,
-#PopupAutoComplete > richlistbox > richlistitem[originaltype="login"] > .ac-site-icon {
+#PopupAutoComplete > richlistbox > moz-richlistitem[originaltype="generatedPassword"] > .two-line-wrapper > .ac-site-icon,
+#PopupAutoComplete > richlistbox > moz-richlistitem[originaltype="loginWithOrigin"] > .two-line-wrapper > .ac-site-icon,
+#PopupAutoComplete > richlistbox > moz-richlistitem[originaltype="login"] > .ac-site-icon {
   display: initial;
   list-style-image: url(chrome://browser/skin/login.svg);
   -moz-context-properties: fill;
   fill: GrayText;
 }
 
-#PopupAutoComplete > richlistbox > richlistitem[originaltype="generatedPassword"][selected] > .two-line-wrapper > .ac-site-icon,
-#PopupAutoComplete > richlistbox > richlistitem[originaltype="loginWithOrigin"][selected] > .two-line-wrapper > .ac-site-icon,
-#PopupAutoComplete > richlistbox > richlistitem[originaltype="login"] > .ac-site-icon[selected] {
+#PopupAutoComplete > richlistbox > moz-richlistitem[originaltype="generatedPassword"][selected] > .two-line-wrapper > .ac-site-icon,
+#PopupAutoComplete > richlistbox > moz-richlistitem[originaltype="loginWithOrigin"][selected] > .two-line-wrapper > .ac-site-icon,
+#PopupAutoComplete > richlistbox > moz-richlistitem[originaltype="login"] > .ac-site-icon[selected] {
   fill: HighlightText;
 }
 
 /* Login form autocompletion with origin showing and generated passwords */
-#PopupAutoComplete > richlistbox > richlistitem[originaltype="generatedPassword"],
-#PopupAutoComplete > richlistbox > richlistitem[originaltype="loginWithOrigin"] {
+#PopupAutoComplete > richlistbox > moz-richlistitem[originaltype="generatedPassword"],
+#PopupAutoComplete > richlistbox > moz-richlistitem[originaltype="loginWithOrigin"] {
   padding: 4px;
 }
 
-#PopupAutoComplete > richlistbox > richlistitem[originaltype="generatedPassword"] > .two-line-wrapper > .labels-wrapper > .line2-label {
+#PopupAutoComplete > richlistbox > moz-richlistitem[originaltype="generatedPassword"] > .two-line-wrapper > .labels-wrapper > .line2-label {
   font-family: monospace;
 }
 
-#PopupAutoComplete > richlistbox > richlistitem[originaltype="login"] + richlistitem[originaltype="generatedPassword"],
-#PopupAutoComplete > richlistbox > richlistitem[originaltype="loginWithOrigin"] + richlistitem[originaltype="generatedPassword"] {
+#PopupAutoComplete > richlistbox > moz-richlistitem[originaltype="login"] + moz-richlistitem[originaltype="generatedPassword"],
+#PopupAutoComplete > richlistbox > moz-richlistitem[originaltype="loginWithOrigin"] + moz-richlistitem[originaltype="generatedPassword"] {
   /* Separator between logins and generated passwords. This uses --panel-separator-color from default
    * themes since autocomplete doesn't yet switch to dark. */
   border-top: 1px solid hsla(210,4%,10%,.14);
 }
 
 /* Insecure field warning */
-#PopupAutoComplete > richlistbox > richlistitem[originaltype="insecureWarning"] {
+#PopupAutoComplete > richlistbox > moz-richlistitem[originaltype="insecureWarning"] {
   background-color: var(--arrowpanel-dimmed);
   border-bottom: 1px solid var(--panel-separator-color);
   padding-bottom: 4px;
   padding-top: 4px;
 }
 
-#PopupAutoComplete > richlistbox > richlistitem[originaltype="insecureWarning"][selected] {
+#PopupAutoComplete > richlistbox > moz-richlistitem[originaltype="insecureWarning"][selected] {
   background-color: var(--arrowpanel-dimmed-further);
   color: -moz-DialogText;
 }
 
-#PopupAutoComplete > richlistbox > richlistitem[originaltype="insecureWarning"] > .ac-title {
+#PopupAutoComplete > richlistbox > moz-richlistitem[originaltype="insecureWarning"] > .ac-title {
   color: GrayText;
   font-size: 1em;
 }
 
-#PopupAutoComplete > richlistbox > richlistitem[originaltype="insecureWarning"][selected] > .ac-title {
+#PopupAutoComplete > richlistbox > moz-richlistitem[originaltype="insecureWarning"][selected] > .ac-title {
   color: inherit;
 }
 
-#PopupAutoComplete > richlistbox > richlistitem[originaltype="insecureWarning"] > .ac-site-icon {
+#PopupAutoComplete > richlistbox > moz-richlistitem[originaltype="insecureWarning"] > .ac-site-icon {
   list-style-image: url(chrome://browser/skin/connection-mixed-active-loaded.svg);
   -moz-context-properties: fill;
   fill: GrayText;
 }
diff --git a/browser/themes/shared/downloads/allDownloadsView.inc.css b/browser/themes/shared/downloads/allDownloadsView.inc.css
--- a/browser/themes/shared/downloads/allDownloadsView.inc.css
+++ b/browser/themes/shared/downloads/allDownloadsView.inc.css
@@ -1,15 +1,15 @@
 /* This Source Code Form is subject to the terms of the Mozilla Public
  * License, v. 2.0. If a copy of the MPL was not distributed with this
  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
 
 %filter substitution
 
-%define item #downloadsRichListBox > richlistitem
+%define item #downloadsRichListBox > moz-richlistitem
 %define itemFocused @item@[selected]
 
 /*** View and outer controls ***/
 
 #downloadsRichListBox {
   /** The default listbox appearance comes with an unwanted margin. **/
   -moz-appearance: none;
   margin: 0;
diff --git a/browser/themes/shared/downloads/downloads.inc.css b/browser/themes/shared/downloads/downloads.inc.css
--- a/browser/themes/shared/downloads/downloads.inc.css
+++ b/browser/themes/shared/downloads/downloads.inc.css
@@ -1,17 +1,17 @@
 /* This Source Code Form is subject to the terms of the Mozilla Public
  * License, v. 2.0. If a copy of the MPL was not distributed with this
  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
 
 %filter substitution
 
 %define keyfocus #downloadsPanel[keyfocus]
 %define notKeyfocus #downloadsPanel:not([keyfocus])
-%define item #downloadsListBox > richlistitem
+%define item #downloadsListBox > moz-richlistitem
 %define itemFinished @item@[state="1"]
 %define itemNotFinished @item@:not([state="1"])
 %define itemFocused #downloadsListBox:focus > @item@[selected]
 
 /*** Panel and outer controls ***/
 
 #downloadsListBox {
   background: transparent;
diff --git a/browser/themes/shared/incontentprefs/containers.css b/browser/themes/shared/incontentprefs/containers.css
--- a/browser/themes/shared/incontentprefs/containers.css
+++ b/browser/themes/shared/incontentprefs/containers.css
@@ -14,20 +14,20 @@
   margin-inline-end: 16px;
 }
 
 #containersView {
   border: 0 none;
   background: transparent;
 }
 
-#containersView richlistitem {
+#containersView moz-richlistitem {
   margin: 0px;
   margin-inline-end: 8px;
   padding: 0;
   padding-block-end: 8px;
   border-block-end: 1px solid var(--in-content-box-border-color);
 }
 
-#containersView richlistitem:last-of-type {
+#containersView moz-richlistitem:last-of-type {
   border-block-end: 0 none;
   margin-block-end: 8px;
 }
diff --git a/browser/themes/shared/incontentprefs/preferences.inc.css b/browser/themes/shared/incontentprefs/preferences.inc.css
--- a/browser/themes/shared/incontentprefs/preferences.inc.css
+++ b/browser/themes/shared/incontentprefs/preferences.inc.css
@@ -159,17 +159,17 @@ button > hbox > label {
   padding-top: 16px;
   border-top: 1px solid var(--in-content-border-color);
 }
 
 /* Category List */
 
 #categories {
   overflow: visible !important; /* Cancel scrollbar and do not clip overflow content when window size goes very small */
-  padding: 1px; /* Adding padding around richlistitem in order to make entire keyboard focusing outline visible */
+  padding: 1px; /* Adding padding around moz-richlistitem in order to make entire keyboard focusing outline visible */
 }
 
 #category-general > .category-icon {
   list-style-image: url("chrome://browser/skin/preferences/in-content/general.svg");
 }
 
 #category-home > .category-icon {
   list-style-image: url("chrome://browser/skin/home.svg");
@@ -270,17 +270,17 @@ button > hbox > label {
 #getStarted {
   font-size: 90%;
 }
 
 #useDocumentColors {
   margin: 0;
 }
 
-#activeLanguages > richlistitem {
+#activeLanguages > moz-richlistitem {
   padding: 0.3em;
 }
 
 #downloadFolder {
   -moz-box-flex: 1;
   margin-inline-start: 0;
   padding-inline-start: 30px;
   background-repeat: no-repeat;
@@ -320,21 +320,21 @@ button > hbox > label {
   margin: 4px 0 8px;
 }
 
 #handlersView {
   height: 25em;
   margin-inline-end: 0;
 }
 
-#handlersView > richlistitem {
+#handlersView > moz-richlistitem {
   min-height: 30px !important;
 }
 
-#handlersView > richlistitem > hbox > hbox > menulist {
+#handlersView > moz-richlistitem > hbox > hbox > menulist {
   margin-top: 0;
   margin-bottom: 0;
   margin-inline-end: 0;
   min-height: 0;
 }
 
 .typeIcon {
   margin-inline-start: 10px !important;
@@ -967,17 +967,17 @@ menulist[indicator=true] > menupopup men
   margin-inline-start: 4px;
 }
 
 #defaultBrowserLanguage {
   margin-inline-start: 0;
   min-width: 20em;
 }
 
-#selectedLocales > richlistitem {
+#selectedLocales > moz-richlistitem {
   padding-inline-start: 13px;
 }
 
 #availableLanguages,
 #availableLocales {
   margin: 0;
   margin-inline-end: 4px;
 }
@@ -1024,16 +1024,16 @@ menulist[indicator=true] > menupopup men
   background-size: 16px 16px;
   background-repeat: no-repeat;
 }
 
 #updateSettingCrossUserWarning:-moz-locale-dir(rtl) {
   background-position-x: right 2px;
 }
 
-richlistitem .text-link {
+moz-richlistitem .text-link {
   color: inherit;
   text-decoration: underline;
 }
 
-richlistitem .text-link:hover {
+moz-richlistitem .text-link:hover {
   color: inherit;
 }
diff --git a/browser/themes/shared/incontentprefs/siteDataSettings.css b/browser/themes/shared/incontentprefs/siteDataSettings.css
--- a/browser/themes/shared/incontentprefs/siteDataSettings.css
+++ b/browser/themes/shared/incontentprefs/siteDataSettings.css
@@ -5,21 +5,21 @@
 /**
  * Site Data - Settings dialog
  */
 #sitesList {
   min-height: 20em;
 }
 
 /* Show selected items in high contrast mode. */
-#sitesList > richlistitem[selected] {
+#sitesList > moz-richlistitem[selected] {
   outline: 1px solid transparent;
 }
 
-#sitesList > richlistitem > hbox,
+#sitesList > moz-richlistitem > hbox,
 .item-box > label {
   -moz-box-flex: 1;
 }
 
 .item-box {
   padding: 5px 8px;
   -moz-box-align: center;
   width: 50px;
diff --git a/browser/themes/shared/searchbar.inc.css b/browser/themes/shared/searchbar.inc.css
--- a/browser/themes/shared/searchbar.inc.css
+++ b/browser/themes/shared/searchbar.inc.css
@@ -168,34 +168,34 @@
   list-style-image: none;
 }
 
 .search-panel-tree {
   background: transparent;
   color: inherit;
 }
 
-.search-panel-tree > .autocomplete-richlistitem {
+.search-panel-tree > .autocomplete-moz-richlistitem {
   padding: 1px;
 }
 
-.search-panel-tree > .autocomplete-richlistitem > .ac-type-icon {
+.search-panel-tree > .autocomplete-moz-richlistitem > .ac-type-icon {
   display: -moz-box;
   width: 14px;
   height: 14px;
 }
 
-.search-panel-tree > .autocomplete-richlistitem[originaltype="fromhistory"] > .ac-type-icon {
+.search-panel-tree > .autocomplete-moz-richlistitem[originaltype="fromhistory"] > .ac-type-icon {
   list-style-image: url("chrome://browser/skin/history.svg");
   -moz-context-properties: fill;
   fill: currentColor;
   fill-opacity: 0.6;
 }
 
-.search-panel-tree > .autocomplete-richlistitem[originaltype="fromhistory"][selected] > .ac-type-icon {
+.search-panel-tree > .autocomplete-moz-richlistitem[originaltype="fromhistory"][selected] > .ac-type-icon {
   fill-opacity: 1;
 }
 
 .search-setting-button {
   -moz-appearance: none;
   margin: 0;
   min-height: 32px;
   border-top: 1px solid var(--panel-separator-color);
diff --git a/browser/themes/shared/urlbar-autocomplete.inc.css b/browser/themes/shared/urlbar-autocomplete.inc.css
--- a/browser/themes/shared/urlbar-autocomplete.inc.css
+++ b/browser/themes/shared/urlbar-autocomplete.inc.css
@@ -427,12 +427,12 @@
 /* search bar popup */
 
 #PopupSearchAutoComplete {
   background: var(--autocomplete-popup-background);
   color: var(--autocomplete-popup-color);
   border-color: var(--arrowpanel-border-color);
 }
 
-#PopupSearchAutoComplete .autocomplete-richlistitem[selected] {
+#PopupSearchAutoComplete .autocomplete-moz-richlistitem[selected] {
   background: var(--autocomplete-popup-highlight-background);
   color: var(--autocomplete-popup-highlight-color);
 }
diff --git a/browser/themes/windows/browser.css b/browser/themes/windows/browser.css
--- a/browser/themes/windows/browser.css
+++ b/browser/themes/windows/browser.css
@@ -568,17 +568,17 @@ menuitem.bookmark-item {
 /* identity box */
 
 %include ../shared/identity-block/identity-block.inc.css
 
 /* autocomplete */
 
 %include ../shared/autocomplete.inc.css
 
-#PopupAutoComplete > richlistbox > richlistitem[originaltype~="datalist-first"] {
+#PopupAutoComplete > richlistbox > moz-richlistitem[originaltype~="datalist-first"] {
   border-top: 1px solid ThreeDShadow;
 }
 
 %include ../shared/urlbar-autocomplete.inc.css
 
 @media (-moz-windows-default-theme) {
   :root {
     --urlbar-popup-url-color: hsl(210, 77%, 47%);
diff --git a/browser/themes/windows/places/editBookmark.css b/browser/themes/windows/places/editBookmark.css
--- a/browser/themes/windows/places/editBookmark.css
+++ b/browser/themes/windows/places/editBookmark.css
@@ -54,17 +54,17 @@
  * leaving only the comment column visible. This is
  * so that only the tag being edited is shown in the
  * popup.
  */
 #editBMPanel_tagsField #treecolAutoCompleteValue {
   visibility: collapse;
 }
 
-#editBMPanel_tagsSelector > richlistitem > image {
+#editBMPanel_tagsSelector > moz-richlistitem > image {
   -moz-appearance: checkbox;
   -moz-box-align: center;
   margin: 0px 2px;
   border: 1px solid -moz-DialogText;
   min-width: 13px;
   min-height: 13px;
   background: -moz-Field no-repeat 50% 50%;
 }
diff --git a/browser/themes/windows/preferences/applications.css b/browser/themes/windows/preferences/applications.css
--- a/browser/themes/windows/preferences/applications.css
+++ b/browser/themes/windows/preferences/applications.css
@@ -16,36 +16,36 @@
 }
 
 .typeIcon,
 .actionIcon {
   margin-inline-start: 3px;
   margin-inline-end: 3px;
 }
 
-#handlersView > richlistitem label {
+#handlersView > moz-richlistitem label {
   margin-inline-start: 1px;
   margin-top: 2px;
 }
 
-#handlersView > richlistitem {
+#handlersView > moz-richlistitem {
   min-height: 22px;
 }
 
-richlistitem[appHandlerIcon="ask"],
+moz-richlistitem[appHandlerIcon="ask"],
 menuitem[appHandlerIcon="ask"] {
   list-style-image: url("chrome://browser/skin/preferences/alwaysAsk.png");
 }
 
-richlistitem[appHandlerIcon="save"],
+moz-richlistitem[appHandlerIcon="save"],
 menuitem[appHandlerIcon="save"] {
   list-style-image: url("chrome://browser/skin/preferences/saveFile.png");
 }
 
-richlistitem[appHandlerIcon="plugin"],
+moz-richlistitem[appHandlerIcon="plugin"],
 menuitem[appHandlerIcon="plugin"] {
   list-style-image: url("chrome://global/skin/plugins/pluginGeneric.svg");
 }
 
 .actionsMenu .menulist-icon {
   margin-inline-end: 3px;
 }
 
@@ -57,23 +57,23 @@ menuitem[appHandlerIcon="plugin"] {
 .actionsMenu > menupopup > menuitem {
   padding-inline-start: 4px;
 }
 
 #appList {
   min-height: 212px;
 }
 
-#appList > richlistitem {
+#appList > moz-richlistitem {
   -moz-box-align: center;
 }
 
-#appList > richlistitem > image {
+#appList > moz-richlistitem > image {
   margin: 5px;
   width: 32px;
   height: 32px;
 }
 
-#appList > richlistitem > label {
+#appList > moz-richlistitem > label {
   margin: 0px;
   padding: 5px;
   white-space: nowrap;
 }
diff --git a/dom/base/CustomElementRegistry.cpp b/dom/base/CustomElementRegistry.cpp
--- a/dom/base/CustomElementRegistry.cpp
+++ b/dom/base/CustomElementRegistry.cpp
@@ -670,18 +670,19 @@ void CustomElementRegistry::Define(
 
   int32_t nameSpaceID = InferNamespace(aCx, constructor);
 
   /**
    * 2. If name is not a valid custom element name, then throw a "SyntaxError"
    *    DOMException and abort these steps.
    */
   Document* doc = mWindow->GetExtantDoc();
+
   RefPtr<nsAtom> nameAtom(NS_Atomize(aName));
-  if (!nsContentUtils::IsCustomElementName(nameAtom, nameSpaceID)) {
+  if (!nsContentUtils::IsCustomElementName(nameAtom, nsContentUtils::IsSystemPrincipal(doc->NodePrincipal()) ? kNameSpaceID_XUL : nameSpaceID)) {
     aRv.ThrowDOMException(
         NS_ERROR_DOM_SYNTAX_ERR,
         nsPrintfCString("'%s' is not a valid custom element name",
                         NS_ConvertUTF16toUTF8(aName).get()));
     return;
   }
 
   /**
@@ -736,39 +737,32 @@ void CustomElementRegistry::Define(
    * type to take on a non-dashed name.
    * This also ensures the name of the built-in custom element type can never
    * be the same as the built-in element name, so we don't break the assumption
    * elsewhere.
    */
   nsAutoString localName(aName);
   if (aOptions.mExtends.WasPassed()) {
     RefPtr<nsAtom> extendsAtom(NS_Atomize(aOptions.mExtends.Value()));
-    if (nsContentUtils::IsCustomElementName(extendsAtom, kNameSpaceID_XHTML)) {
+    if (!nsContentUtils::IsSystemPrincipal(doc->NodePrincipal()) && nsContentUtils::IsCustomElementName(extendsAtom, kNameSpaceID_XHTML)) {
       aRv.ThrowDOMException(
           NS_ERROR_DOM_NOT_SUPPORTED_ERR,
           nsPrintfCString("'%s' cannot extend a custom element",
                           NS_ConvertUTF16toUTF8(aName).get()));
       return;
     }
 
-    if (nameSpaceID == kNameSpaceID_XHTML) {
+    if (!nsContentUtils::IsSystemPrincipal(doc->NodePrincipal())) {
       // bgsound and multicol are unknown html element.
       int32_t tag = nsHTMLTags::CaseSensitiveAtomTagToId(extendsAtom);
       if (tag == eHTMLTag_userdefined || tag == eHTMLTag_bgsound ||
           tag == eHTMLTag_multicol) {
         aRv.Throw(NS_ERROR_DOM_NOT_SUPPORTED_ERR);
         return;
       }
-    } else {  // kNameSpaceID_XUL
-      // As stated above, ensure the name of the customized built-in element
-      // (the one that goes to the |is| attribute) is a dashed name.
-      if (!nsContentUtils::IsNameWithDash(nameAtom)) {
-        aRv.Throw(NS_ERROR_DOM_NOT_SUPPORTED_ERR);
-        return;
-      }
     }
 
     localName.Assign(aOptions.mExtends.Value());
   }
 
   /**
    * 8. If this CustomElementRegistry's element definition is running flag is
    * set, then throw a "NotSupportedError" DOMException and abort these steps.
diff --git a/dom/tests/mochitest/chrome/window_focus.xul b/dom/tests/mochitest/chrome/window_focus.xul
--- a/dom/tests/mochitest/chrome/window_focus.xul
+++ b/dom/tests/mochitest/chrome/window_focus.xul
@@ -1625,32 +1625,32 @@ SimpleTest.waitForFocus(startTest);
    odd numbered ids - not focusable with -moz-user-focus: none
    even numbered ids - focusable but not part of the tab order
  -->
 <vbox id="buttonbox">
 <hbox id="innerbox">
   <button id="t4" accesskey="h" label="no tabindex"/>
   <button id="o1" accesskey="i" label="tabindex = -1" tabindex="-1"/>
   <richlistbox id="t5" label="tabindex = 0" tabindex="0" width="50">
-    <richlistitem height="10"/>
+    <html:moz-richlistitem height="10"/>
   </richlistbox>
   <button id="t1" label="tabindex = 2" tabindex="2"/>
 </hbox>
 <hbox>
   <button id="o2" accesskey="o" style="-moz-user-focus: ignore;" label="no tabindex"/>
   <button id="o4" style="-moz-user-focus: ignore;" label="no tabindex"/>
   <button id="t6" style="-moz-user-focus: ignore;" label="tabindex = 0" tabindex="0"/>
   <button id="t2" style="-moz-user-focus: ignore;" label="tabindex = 2" tabindex="2"/>
 </hbox>
 <hbox id="specialroot">
   <button id="t7" style="-moz-user-focus: normal;" label="no tabindex"/>
   <button id="o3" style="-moz-user-focus: normal;" label="tabindex = -1" tabindex="-1"/>
   <button id="t8" style="-moz-user-focus: normal;" label="tabindex = 0" tabindex="0"/>
   <richlistbox id="t3" style="-moz-user-focus: normal;" label="tabindex = 2" tabindex="2" width="50">
-    <richlistitem height="10"/>
+    <html:moz-richlistitem height="10"/>
   </richlistbox>
 </hbox>
 <hbox>
   <button accesskey="p" style="display: none;"/> <button accesskey="q" style="visibility: collapse;"/>
   <button style="display: none;" tabindex="2"/> <button style="visibility: collapse;" tabindex="2"/>
 </hbox>
 <hbox>
   <button id="o20" accesskey="s" label="no tabindex" disabled="true"/>
diff --git a/security/manager/pki/resources/content/deletecert.js b/security/manager/pki/resources/content/deletecert.js
--- a/security/manager/pki/resources/content/deletecert.js
+++ b/security/manager/pki/resources/content/deletecert.js
@@ -90,17 +90,17 @@ function onLoad() {
   document.l10n.setAttributes(impact, prefixForType + "impact");
 
   document.addEventListener("dialogaccept", onDialogAccept);
   document.addEventListener("dialogcancel", onDialogCancel);
 
   let box = document.getElementById("certlist");
   let certTreeItems = window.arguments[1];
   for (let certTreeItem of certTreeItems) {
-    let listItem = document.createXULElement("richlistitem");
+    let listItem = document.createElement("moz-richlistitem");
     let label = getLabelForCertTreeItem(certTreeItem);
     listItem.appendChild(label);
     box.appendChild(listItem);
   }
 }
 
 /**
  * ondialogaccept() handler.
diff --git a/testing/marionette/chrome/test_dialog.xul b/testing/marionette/chrome/test_dialog.xul
--- a/testing/marionette/chrome/test_dialog.xul
+++ b/testing/marionette/chrome/test_dialog.xul
@@ -15,20 +15,20 @@
         xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
         title="&testDialog.title;"
         buttons="accept,cancel">
 
   <vbox flex="1" style="min-width: 300px; min-height: 500px;">
     <label>&settings.label;</label>
     <separator class="thin"/>
     <richlistbox id="test-list" flex="1">
-        <richlistitem id="item-choose" orient="horizontal" selected="true">
+        <html:moz-richlistitem id="item-choose" orient="horizontal" selected="true">
             <label id="choose-label" value="First Entry" flex="1"/>
             <button id="choose-button" oncommand="" label="Choose..."/>
-        </richlistitem>
+        </html:moz-richlistitem>
     </richlistbox>
     <separator class="thin"/>
     <checkbox id="check-box" label="Test Mode 2" />
     <hbox align="center">
       <label id="text-box-label" control="text-box">Name:</label>
       <input xmlns="http://www.w3.org/1999/xhtml" id="text-box" style="-moz-box-flex: 1;" />
     </hbox>
   </vbox>
diff --git a/testing/marionette/element.js b/testing/marionette/element.js
--- a/testing/marionette/element.js
+++ b/testing/marionette/element.js
@@ -40,17 +40,17 @@ const XULNS = "http://www.mozilla.org/ke
 const XUL_CHECKED_ELS = new Set(["button", "checkbox", "toolbarbutton"]);
 
 /** XUL elements that support selected property. */
 const XUL_SELECTED_ELS = new Set([
   "menu",
   "menuitem",
   "menuseparator",
   "radio",
-  "richlistitem",
+  "moz-richlistitem",
   "tab",
 ]);
 
 const uuidGen = Cc["@mozilla.org/uuid-generator;1"].getService(
   Ci.nsIUUIDGenerator
 );
 
 /**
diff --git a/testing/marionette/interaction.js b/testing/marionette/interaction.js
--- a/testing/marionette/interaction.js
+++ b/testing/marionette/interaction.js
@@ -47,17 +47,17 @@ const DISABLED_ATTRIBUTE_SUPPORTED_XUL =
   "LABEL",
   "MENU",
   "MENUITEM",
   "MENULIST",
   "MENUSEPARATOR",
   "RADIO",
   "RADIOGROUP",
   "RICHLISTBOX",
-  "RICHLISTITEM",
+  "moz-richlistitem",
   "TAB",
   "TABS",
   "TOOLBARBUTTON",
   "TREE",
 ]);
 
 /**
  * Common form controls that user can change the value property
diff --git a/toolkit/components/apppicker/content/appPicker.js b/toolkit/components/apppicker/content/appPicker.js
--- a/toolkit/components/apppicker/content/appPicker.js
+++ b/toolkit/components/apppicker/content/appPicker.js
@@ -89,17 +89,17 @@ AppPicker.prototype = {
       try {
         if (!file.executable || !file.executable.isFile()) {
           continue;
         }
       } catch (err) {
         continue;
       }
 
-      var item = document.createXULElement("richlistitem");
+      var item = document.createElement("moz-richlistitem");
       item.handlerApp = file;
       list.appendChild(item);
 
       var image = document.createXULElement("image");
       image.setAttribute("src", this.getFileIconURL(file.executable));
       item.appendChild(image);
 
       var label = document.createXULElement("label");
diff --git a/toolkit/content/autocomplete.css b/toolkit/content/autocomplete.css
--- a/toolkit/content/autocomplete.css
+++ b/toolkit/content/autocomplete.css
@@ -7,17 +7,17 @@
 
 /* Apply crisp rendering for favicons at exactly 2dppx resolution */
 @media (resolution: 2dppx) {
   .ac-site-icon {
     image-rendering: -moz-crisp-edges;
   }
 }
 
-.autocomplete-richlistbox > richlistitem {
+.autocomplete-richlistbox > moz-richlistitem {
   -moz-box-orient: horizontal;
   overflow: hidden;
 }
 
 .ac-title-text,
 .ac-tags-text,
 .ac-url-text,
 .ac-action-text {
diff --git a/toolkit/content/tests/chrome/test_bug460942.xul b/toolkit/content/tests/chrome/test_bug460942.xul
--- a/toolkit/content/tests/chrome/test_bug460942.xul
+++ b/toolkit/content/tests/chrome/test_bug460942.xul
@@ -13,23 +13,23 @@ https://bugzilla.mozilla.org/show_bug.cg
   <body xmlns="http://www.w3.org/1999/xhtml">
   <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=460942"
      target="_blank">Mozilla Bug 460942</a>
   </body>
 
   <!-- test code goes here -->
 
   <richlistbox>
-    <richlistitem id="item1">
+    <html:moz-richlistitem id="item1">
         <label value="one"/>
         <box>
             <label value="two"/>
         </box>
-    </richlistitem>
-    <richlistitem id="item2"><description>one</description><description>two</description></richlistitem>
+    </html:moz-richlistitem>
+    <html:moz-richlistitem id="item2"><description>one</description><description>two</description></html:moz-richlistitem>
   </richlistbox>
 
   <script type="application/javascript">
   <![CDATA[
   /** Test for Bug 460942 **/
   function runTests() {
     is ($("item1").label, "one two");
     is ($("item2").label, "");
diff --git a/toolkit/content/tests/chrome/test_contextmenu_list.xul b/toolkit/content/tests/chrome/test_contextmenu_list.xul
--- a/toolkit/content/tests/chrome/test_contextmenu_list.xul
+++ b/toolkit/content/tests/chrome/test_contextmenu_list.xul
@@ -9,20 +9,20 @@
   <script src="chrome://mochikit/content/tests/SimpleTest/SimpleTest.js"></script>      
   <script src="chrome://mochikit/content/tests/SimpleTest/EventUtils.js"></script>      
 
 <spacer height="5"/>
 
 <hbox style="padding-left: 10px;">
   <spacer width="5"/>
   <richlistbox id="list" context="themenu" style="padding: 0;" oncontextmenu="checkContextMenu(event)">
-    <richlistitem id="item1" style="padding-top: 3px; margin: 0;"><button label="One"/></richlistitem>
-    <richlistitem id="item2" height="22"><checkbox label="Checkbox"/></richlistitem>
-    <richlistitem id="item3"><button label="Three"/></richlistitem>
-    <richlistitem id="item4"><checkbox label="Four"/></richlistitem>
+    <html:moz-richlistitem id="item1" style="padding-top: 3px; margin: 0;"><button label="One"/></richlistitem>
+    <html:moz-richlistitem id="item2" height="22"><checkbox label="Checkbox"/></richlistitem>
+    <html:moz-richlistitem id="item3"><button label="Three"/></richlistitem>
+    <html:moz-richlistitem id="item4"><checkbox label="Four"/></richlistitem>
   </richlistbox>
 
   <tree id="tree" rows="5" flex="1" context="themenu" style="-moz-appearance: none; border: 0">
     <treecols>
       <treecol label="Name" flex="1"/>
       <splitter class="tree-splitter"/>
       <treecol label="Moons"/>
     </treecols>
diff --git a/toolkit/content/tests/chrome/test_hiddenitems.xul b/toolkit/content/tests/chrome/test_hiddenitems.xul
--- a/toolkit/content/tests/chrome/test_hiddenitems.xul
+++ b/toolkit/content/tests/chrome/test_hiddenitems.xul
@@ -11,23 +11,23 @@ https://bugzilla.mozilla.org/show_bug.cg
 
   <!-- test results are displayed in the html:body -->
   <body xmlns="http://www.w3.org/1999/xhtml">
   <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=317422"
      target="_blank">Mozilla Bug 317422</a>
   </body>
 
   <richlistbox id="richlistbox" seltype="multiple">
-    <richlistitem id="richlistbox_item1"><label value="Item 1"/></richlistitem>
-    <richlistitem id="richlistbox_item2"><label value="Item 2"/></richlistitem>
-    <richlistitem id="richlistbox_item3" hidden="true"><label value="Item 3"/></richlistitem>
-    <richlistitem id="richlistbox_item4"><label value="Item 4"/></richlistitem>
-    <richlistitem id="richlistbox_item5" collapsed="true"><label value="Item 5"/></richlistitem>
-    <richlistitem id="richlistbox_item6"><label value="Item 6"/></richlistitem>
-    <richlistitem id="richlistbox_item7" hidden="true"><label value="Item 7"/></richlistitem>
+    <html:moz-richlistitem id="richlistbox_item1"><label value="Item 1"/></html:moz-richlistitem>
+    <html:moz-richlistitem id="richlistbox_item2"><label value="Item 2"/></html:moz-richlistitem>
+    <html:moz-richlistitem id="richlistbox_item3" hidden="true"><label value="Item 3"/></html:moz-richlistitem>
+    <html:moz-richlistitem id="richlistbox_item4"><label value="Item 4"/></html:moz-richlistitem>
+    <html:moz-richlistitem id="richlistbox_item5" collapsed="true"><label value="Item 5"/></html:moz-richlistitem>
+    <html:moz-richlistitem id="richlistbox_item6"><label value="Item 6"/></html:moz-richlistitem>
+    <html:moz-richlistitem id="richlistbox_item7" hidden="true"><label value="Item 7"/></html:moz-richlistitem>
   </richlistbox>
 
   <!-- test code goes here -->
   <script type="application/javascript"><![CDATA[
 
 /** Test for Bug 317422 **/
 SimpleTest.waitForExplicitFinish();
 
diff --git a/toolkit/content/tests/chrome/test_hiddenpaging.xul b/toolkit/content/tests/chrome/test_hiddenpaging.xul
--- a/toolkit/content/tests/chrome/test_hiddenpaging.xul
+++ b/toolkit/content/tests/chrome/test_hiddenpaging.xul
@@ -21,31 +21,31 @@ https://bugzilla.mozilla.org/show_bug.cg
   
   <!-- test results are displayed in the html:body -->
   <body xmlns="http://www.w3.org/1999/xhtml">
   <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=317422"
      target="_blank">Mozilla Bug 317422</a>
   </body>
 
   <richlistbox id="richlistbox" seltype="multiple">
-    <richlistitem id="richlistbox_item1"><label value="Item 1"/></richlistitem>
-    <richlistitem id="richlistbox_item2"><label value="Item 2"/></richlistitem>
-    <richlistitem id="richlistbox_item3" hidden="true"><label value="Item 3"/></richlistitem>
-    <richlistitem id="richlistbox_item4"><label value="Item 4"/></richlistitem>
-    <richlistitem id="richlistbox_item5" collapsed="true"><label value="Item 5"/></richlistitem>
-    <richlistitem id="richlistbox_item6"><label value="Item 6"/></richlistitem>
-    <richlistitem id="richlistbox_item7"><label value="Item 7"/></richlistitem>
-    <richlistitem id="richlistbox_item8"><label value="Item 8"/></richlistitem>
-    <richlistitem id="richlistbox_item9"><label value="Item 9"/></richlistitem>
-    <richlistitem id="richlistbox_item10"><label value="Item 10"/></richlistitem>
-    <richlistitem id="richlistbox_item11"><label value="Item 11"/></richlistitem>
-    <richlistitem id="richlistbox_item12"><label value="Item 12"/></richlistitem>
-    <richlistitem id="richlistbox_item13"><label value="Item 13"/></richlistitem>
-    <richlistitem id="richlistbox_item14"><label value="Item 14"/></richlistitem>
-    <richlistitem id="richlistbox_item15" hidden="true"><label value="Item 15"/></richlistitem>
+    <html:moz-richlistitem id="richlistbox_item1"><label value="Item 1"/></richlistitem>
+    <html:moz-richlistitem id="richlistbox_item2"><label value="Item 2"/></richlistitem>
+    <html:moz-richlistitem id="richlistbox_item3" hidden="true"><label value="Item 3"/></richlistitem>
+    <html:moz-richlistitem id="richlistbox_item4"><label value="Item 4"/></richlistitem>
+    <html:moz-richlistitem id="richlistbox_item5" collapsed="true"><label value="Item 5"/></richlistitem>
+    <html:moz-richlistitem id="richlistbox_item6"><label value="Item 6"/></richlistitem>
+    <html:moz-richlistitem id="richlistbox_item7"><label value="Item 7"/></richlistitem>
+    <html:moz-richlistitem id="richlistbox_item8"><label value="Item 8"/></richlistitem>
+    <html:moz-richlistitem id="richlistbox_item9"><label value="Item 9"/></richlistitem>
+    <html:moz-richlistitem id="richlistbox_item10"><label value="Item 10"/></richlistitem>
+    <html:moz-richlistitem id="richlistbox_item11"><label value="Item 11"/></richlistitem>
+    <html:moz-richlistitem id="richlistbox_item12"><label value="Item 12"/></richlistitem>
+    <html:moz-richlistitem id="richlistbox_item13"><label value="Item 13"/></richlistitem>
+    <html:moz-richlistitem id="richlistbox_item14"><label value="Item 14"/></richlistitem>
+    <html:moz-richlistitem id="richlistbox_item15" hidden="true"><label value="Item 15"/></richlistitem>
   </richlistbox>
 
   <!-- test code goes here -->
   <script type="application/javascript"><![CDATA[
 
 /** Test for Bug 317422 **/
 SimpleTest.waitForExplicitFinish();
 
diff --git a/toolkit/content/tests/chrome/test_menulist.xul b/toolkit/content/tests/chrome/test_menulist.xul
--- a/toolkit/content/tests/chrome/test_menulist.xul
+++ b/toolkit/content/tests/chrome/test_menulist.xul
@@ -14,30 +14,30 @@
   <menulist id="menulist" onpopupshown="test_menulist_open(this, this.parentNode)"
             onpopuphidden="$('menulist-in-listbox').open = true;">
     <menupopup id="menulist-popup"/>
   </menulist>
   <button label="Two"/>
   <button label="Three"/>
 </vbox>
 <richlistbox id="scroller-in-listbox" style="overflow: auto" height="60">
-  <richlistitem allowevents="true">
+  <html:moz-richlistitem allowevents="true">
     <menulist id="menulist-in-listbox" onpopupshown="test_menulist_open(this, this.parentNode.parentNode)"
               onpopuphidden="SimpleTest.executeSoon(() => checkScrollAndFinish().catch(ex => ok(false, ex)));">
       <menupopup id="menulist-in-listbox-popup">
         <menuitem label="One" value="one"/>
         <menuitem label="Two" value="two"/>
       </menupopup>
     </menulist>
   </richlistitem>
-  <richlistitem><label value="Two"/></richlistitem>
-  <richlistitem><label value="Three"/></richlistitem>
-  <richlistitem><label value="Four"/></richlistitem>
-  <richlistitem><label value="Five"/></richlistitem>
-  <richlistitem><label value="Six"/></richlistitem>
+  <html:moz-richlistitem><label value="Two"/></richlistitem>
+  <html:moz-richlistitem><label value="Three"/></richlistitem>
+  <html:moz-richlistitem><label value="Four"/></richlistitem>
+  <html:moz-richlistitem><label value="Five"/></richlistitem>
+  <html:moz-richlistitem><label value="Six"/></richlistitem>
 </richlistbox>
 
 <hbox>
   <menulist id="menulist-size">
     <menupopup>
       <menuitem label="Menuitem Label" width="200"/>
     </menupopup>
   </menulist>
diff --git a/toolkit/content/tests/chrome/test_mousescroll.xul b/toolkit/content/tests/chrome/test_mousescroll.xul
--- a/toolkit/content/tests/chrome/test_mousescroll.xul
+++ b/toolkit/content/tests/chrome/test_mousescroll.xul
@@ -15,25 +15,25 @@ https://bugzilla.mozilla.org/show_bug.cg
   <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=378028"
      target="_blank">Mozilla Bug 378028</a>
   </body>
 
   <!-- richlistbox currently has no way of giving us a defined number of
        rows, so we just choose an arbitrary height limit that should give
        us plenty of vertical scrollability -->
   <richlistbox id="richlistbox" style="height:50px;">
-    <richlistitem id="richlistbox_item0" hidden="true"><label value="Item 0"/></richlistitem>
-    <richlistitem id="richlistbox_item1"><label value="Item 1"/></richlistitem>
-    <richlistitem id="richlistbox_item2"><label value="Item 2"/></richlistitem>
-    <richlistitem id="richlistbox_item3"><label value="Item 3"/></richlistitem>
-    <richlistitem id="richlistbox_item4"><label value="Item 4"/></richlistitem>
-    <richlistitem id="richlistbox_item5"><label value="Item 5"/></richlistitem>
-    <richlistitem id="richlistbox_item6"><label value="Item 6"/></richlistitem>
-    <richlistitem id="richlistbox_item7"><label value="Item 7"/></richlistitem>
-    <richlistitem id="richlistbox_item8"><label value="Item 8"/></richlistitem>
+    <html:moz-richlistitem id="richlistbox_item0" hidden="true"><label value="Item 0"/></richlistitem>
+    <html:moz-richlistitem id="richlistbox_item1"><label value="Item 1"/></richlistitem>
+    <html:moz-richlistitem id="richlistbox_item2"><label value="Item 2"/></richlistitem>
+    <html:moz-richlistitem id="richlistbox_item3"><label value="Item 3"/></richlistitem>
+    <html:moz-richlistitem id="richlistbox_item4"><label value="Item 4"/></richlistitem>
+    <html:moz-richlistitem id="richlistbox_item5"><label value="Item 5"/></richlistitem>
+    <html:moz-richlistitem id="richlistbox_item6"><label value="Item 6"/></richlistitem>
+    <html:moz-richlistitem id="richlistbox_item7"><label value="Item 7"/></richlistitem>
+    <html:moz-richlistitem id="richlistbox_item8"><label value="Item 8"/></richlistitem>
   </richlistbox>
 
   <box orient="horizontal">
     <arrowscrollbox id="hscrollbox" clicktoscroll="true" orient="horizontal"
      smoothscroll="false" style="max-width:80px;" flex="1">
       <hbox style="width:40px; height:20px; background:black;" hidden="true"/>
       <hbox style="width:40px; height:20px; background:white;"/>
       <hbox style="width:40px; height:20px; background:black;"/>
diff --git a/toolkit/content/tests/chrome/test_tabindex.xul b/toolkit/content/tests/chrome/test_tabindex.xul
--- a/toolkit/content/tests/chrome/test_tabindex.xul
+++ b/toolkit/content/tests/chrome/test_tabindex.xul
@@ -36,17 +36,17 @@
 </hbox>
 <hbox>
   <html:input id="t12" idmod="t7" style="-moz-user-focus: ignore;" size="3"/>
   <html:input id="f4" style="-moz-user-focus: ignore;" size="3" tabindex="-1"/>
   <html:input id="t13" idmod="t8" style="-moz-user-focus: ignore;" size="3" tabindex="0"/>
   <html:input id="t4" idmod="t2" style="-moz-user-focus: ignore;" size="3" tabindex="1"/>
 </hbox>
 <richlistbox id="t14" idmod="t9">
-  <richlistitem><label value="Item One"/></richlistitem>
+  <html:moz-richlistitem><label value="Item One"/></richlistitem>
 </richlistbox>
 
 <hbox>
   <!-- the tabindex attribute applies to non-controls as well. They are not
        focusable unless tabindex is explicitly specified.
     -->
   <dropmarker id="n2"/>
   <dropmarker id="f5" tabindex="-1"/>
diff --git a/toolkit/content/widgets/autocomplete-popup.js b/toolkit/content/widgets/autocomplete-popup.js
--- a/toolkit/content/widgets/autocomplete-popup.js
+++ b/toolkit/content/widgets/autocomplete-popup.js
@@ -60,17 +60,17 @@
 
             switch (event.type) {
               case "mouseup":
                 // Don't call onPopupClick for the scrollbar buttons, thumb,
                 // slider, etc. If we hit the richlistbox and not a
                 // richlistitem, we ignore the event.
                 if (
                   event.target.closest("richlistbox,richlistitem").localName ==
-                  "richlistitem"
+                  "moz-richlistitem"
                 ) {
                   this.onPopupClick(event);
                 }
                 break;
               case "mousemove":
                 if (Date.now() - this.mLastMoveTime <= 30) {
                   return;
                 }
@@ -434,17 +434,17 @@
               options = { is: "autocomplete-richlistitem-logins-footer" };
               break;
             case "loginWithOrigin":
               options = { is: "autocomplete-login-richlistitem" };
               break;
             default:
               options = { is: "autocomplete-richlistitem" };
           }
-          item = document.createXULElement("richlistitem", options);
+          item = document.createElement("moz-richlistitem", options);
           item.className = "autocomplete-richlistitem";
         }
 
         item.setAttribute("dir", this.style.direction);
         item.setAttribute("ac-image", image);
         item.setAttribute("ac-value", value);
         item.setAttribute("ac-label", label);
         item.setAttribute("ac-comment", comment);
diff --git a/toolkit/content/widgets/autocomplete-richlistitem.js b/toolkit/content/widgets/autocomplete-richlistitem.js
--- a/toolkit/content/widgets/autocomplete-richlistitem.js
+++ b/toolkit/content/widgets/autocomplete-richlistitem.js
@@ -1077,44 +1077,44 @@
       this.querySelector(".line2-label").textContent = details.comment;
     }
   }
 
   customElements.define(
     "autocomplete-richlistitem",
     MozElements.MozAutocompleteRichlistitem,
     {
-      extends: "richlistitem",
+      extends: "moz-richlistitem",
     }
   );
 
   customElements.define(
     "autocomplete-richlistitem-insecure-warning",
     MozAutocompleteRichlistitemInsecureWarning,
     {
-      extends: "richlistitem",
+      extends: "moz-richlistitem",
     }
   );
 
   customElements.define(
     "autocomplete-richlistitem-logins-footer",
     MozAutocompleteRichlistitemLoginsFooter,
     {
-      extends: "richlistitem",
+      extends: "moz-richlistitem",
     }
   );
 
   customElements.define(
     "autocomplete-two-line-richlistitem",
     MozAutocompleteTwoLineRichlistitem,
     {
-      extends: "richlistitem",
+      extends: "moz-richlistitem",
     }
   );
 
   customElements.define(
     "autocomplete-login-richlistitem",
     MozAutocompleteLoginRichlistitem,
     {
-      extends: "richlistitem",
+      extends: "moz-richlistitem",
     }
   );
 }
diff --git a/toolkit/content/widgets/richlistbox.js b/toolkit/content/widgets/richlistbox.js
--- a/toolkit/content/widgets/richlistbox.js
+++ b/toolkit/content/widgets/richlistbox.js
@@ -276,17 +276,17 @@
 
     // nsIDOMXULSelectControlElement
     get selectedCount() {
       return this.selectedItems.length;
     }
 
     get itemChildren() {
       let children = Array.from(this.children).filter(
-        node => node.localName == "richlistitem"
+        node => node.localName == "moz-richlistitem"
       );
       return children;
     }
 
     set suppressOnSelect(val) {
       this.setAttribute("suppressonselect", val);
     }
     get suppressOnSelect() {
@@ -339,47 +339,47 @@
       document.commandDispatcher.updateCommands("richlistbox-select");
     }
 
     getNextItem(aStartItem, aDelta) {
       while (aStartItem) {
         aStartItem = aStartItem.nextSibling;
         if (
           aStartItem &&
-          aStartItem.localName == "richlistitem" &&
+          aStartItem.localName == "moz-richlistitem" &&
           (!this._userSelecting || this._canUserSelect(aStartItem))
         ) {
           --aDelta;
           if (aDelta == 0) {
             return aStartItem;
           }
         }
       }
       return null;
     }
 
     getPreviousItem(aStartItem, aDelta) {
       while (aStartItem) {
         aStartItem = aStartItem.previousSibling;
         if (
           aStartItem &&
-          aStartItem.localName == "richlistitem" &&
+          aStartItem.localName == "moz-richlistitem" &&
           (!this._userSelecting || this._canUserSelect(aStartItem))
         ) {
           --aDelta;
           if (aDelta == 0) {
             return aStartItem;
           }
         }
       }
       return null;
     }
 
     appendItem(aLabel, aValue) {
-      var item = this.ownerDocument.createXULElement("richlistitem");
+      var item = this.ownerDocument.createElement("moz-richlistitem");
       item.setAttribute("value", aValue);
 
       var label = this.ownerDocument.createXULElement("label");
       label.setAttribute("value", aLabel);
       label.setAttribute("flex", "1");
       label.setAttribute("crop", "end");
       item.appendChild(label);
 
@@ -890,17 +890,17 @@
     Ci.nsIDOMXULMultiSelectControlElement,
   ]);
 
   customElements.define("richlistbox", MozElements.RichListBox);
 
   /**
    * XUL:richlistitem element.
    */
-  MozElements.MozRichlistitem = class MozRichlistitem extends MozElements.BaseText {
+  MozElements.MozRichlistitem = class MozRichlistitem extends MozElements.BaseTextMixin(MozHTMLElement) {
     constructor() {
       super();
 
       this.selectedByMouseOver = false;
 
       /**
        * If there is no modifier key, we select on mousedown, not
        * click, so that drags work correctly.
@@ -1042,10 +1042,10 @@
       return this.getAttribute("current") == "true";
     }
   };
 
   MozXULElement.implementCustomInterface(MozElements.MozRichlistitem, [
     Ci.nsIDOMXULSelectControlItemElement,
   ]);
 
-  customElements.define("richlistitem", MozElements.MozRichlistitem);
+  customElements.define("moz-richlistitem", MozElements.MozRichlistitem);
 }
diff --git a/toolkit/content/xul.css b/toolkit/content/xul.css
--- a/toolkit/content/xul.css
+++ b/toolkit/content/xul.css
@@ -461,17 +461,17 @@ panel[type="autocomplete-richlistbox"] {
   -moz-binding: none;
 }
 
 .autocomplete-richlistbox {
   -moz-user-focus: ignore;
   overflow-x: hidden !important;
 }
 
-.autocomplete-richlistitem {
+.autocomplete-moz-richlistitem {
   -moz-box-orient: vertical;
   -moz-box-align: center;
   overflow: -moz-hidden-unscrollable;
 }
 
 %endif
 
 /* The following rule is here to fix bug 96899 (and now 117952).
@@ -573,16 +573,26 @@ tabmodalprompt {
 
 .menulist-highlightable-label:not([highlightable="true"]),
 .menulist-label[highlightable="true"],
 .menu-iconic-highlightable-text:not([highlightable="true"]),
 .menu-iconic-text[highlightable="true"] {
   display: none;
 }
 
+html|moz-richlistitem {
+  -moz-user-focus: ignore;
+  -moz-user-select: none;
+  display: -moz-box;
+  box-sizing: border-box;
+}
+html|moz-richlistitem[hidden="true"] {
+  display: none;
+}
+
 @supports -moz-bool-pref("layout.css.emulate-moz-box-with-flex") {
   /* Support common XUL attributes in the emulated flex mode so we can
      test the browser in this configuration without mass-changing existing
      markup and CSS. */
   [orient="vertical"] { -moz-box-orient: vertical; }
   [orient="horizontal"] { -moz-box-orient: horizontal; }
 
   [dir="reverse"] { -moz-box-direction: reverse; }
diff --git a/toolkit/mozapps/extensions/content/blocklist.js b/toolkit/mozapps/extensions/content/blocklist.js
--- a/toolkit/mozapps/extensions/content/blocklist.js
+++ b/toolkit/mozapps/extensions/content/blocklist.js
@@ -39,17 +39,17 @@ function init() {
     "accesskey",
     bundle.GetStringFromName("restartLaterButton.accesskey")
   );
 
   var richlist = document.getElementById("addonList");
   var list = gArgs.list;
   list.sort((a, b) => String(a.name).localeCompare(b.name));
   for (let listItem of list) {
-    let item = document.createXULElement("richlistitem");
+    let item = document.createElement("moz-richlistitem");
 
     const icon = document.createXULElement("image");
     icon.src = listItem.icon;
 
     const container = document.createXULElement("vbox");
     container.flex = 1;
 
     const nameVersion = document.createXULElement("hbox");
diff --git a/toolkit/mozapps/extensions/content/extensions.css b/toolkit/mozapps/extensions/content/extensions.css
--- a/toolkit/mozapps/extensions/content/extensions.css
+++ b/toolkit/mozapps/extensions/content/extensions.css
@@ -44,18 +44,18 @@ xhtml|link {
 .html-alert-container > .message-bar {
   margin-bottom: 8px;
 }
 
 .html-global-warning-button {
   margin-inline: 0;
 }
 
-/* Elements in unselected richlistitems cannot be focused */
-richlistitem:not([selected]) * {
+/* Elements in unselected moz-richlistitems cannot be focused */
+moz-richlistitem:not([selected]) * {
   -moz-user-focus: ignore;
 }
 
 #header-search {
   width: 22em;
 }
 
 #pluginFlashBlockingCheckbox .checkbox-label-box {
diff --git a/toolkit/mozapps/extensions/content/extensions.js b/toolkit/mozapps/extensions/content/extensions.js
--- a/toolkit/mozapps/extensions/content/extensions.js
+++ b/toolkit/mozapps/extensions/content/extensions.js
@@ -1332,17 +1332,17 @@ var gCategories = {
 
     this.node.addEventListener("select", () => {
       gViewController.loadView(this.node.selectedItem.value);
     });
 
     this.node.addEventListener("click", aEvent => {
       var selectedItem = this.node.selectedItem;
       if (
-        aEvent.target.localName == "richlistitem" &&
+        aEvent.target.localName == "moz-richlistitem" &&
         aEvent.target == selectedItem
       ) {
         var viewId = selectedItem.value;
 
         gViewController.loadView(viewId);
       }
     });
   },
@@ -1388,27 +1388,27 @@ var gCategories = {
       }
 
       get badgeCount() {
         return this.getAttribute("count");
       }
     }
 
     customElements.define("addon-category", MozCategory, {
-      extends: "richlistitem",
+      extends: "moz-richlistitem",
     });
   },
 
   _insertCategory(aId, aName, aView, aPriority, aStartHidden) {
     // If this category already exists then don't re-add it
     if (document.getElementById("category-" + aId)) {
       return;
     }
 
-    var category = document.createXULElement("richlistitem", {
+    var category = document.createElement("moz-richlistitem", {
       is: "addon-category",
     });
     category.setAttribute("id", "category-" + aId);
     category.setAttribute("value", aView);
     category.setAttribute("class", "category");
     category.setAttribute("name", aName);
     category.setAttribute("tooltiptext", aName);
     category.setAttribute("priority", aPriority);
diff --git a/toolkit/mozapps/extensions/content/extensions.xul b/toolkit/mozapps/extensions/content/extensions.xul
--- a/toolkit/mozapps/extensions/content/extensions.xul
+++ b/toolkit/mozapps/extensions/content/extensions.xul
@@ -89,29 +89,29 @@
          modifiers="accel" command="cmd_focusSearch"/>
   </keyset>
 
   <stack id="main-page-stack" flex="1">
   <hbox id="main-page-content" flex="1">
     <vbox id="category-box">
       <!-- category list -->
       <richlistbox id="categories" flex="1">
-        <richlistitem id="category-discover" value="addons://discover/"
+        <html:moz-richlistitem id="category-discover" value="addons://discover/"
                       class="category"
                       is="addon-category"
                       data-l10n-id="extensions-view-discopane"
                       data-l10n-attrs="name"
                       priority="1000"/>
-        <richlistitem id="category-availableUpdates" value="addons://updates/available"
+        <html:moz-richlistitem id="category-availableUpdates" value="addons://updates/available"
                       class="category"
                       is="addon-category"
                       data-l10n-id="extensions-view-available-updates"
                       data-l10n-attrs="name"
                       hidden="true"/>
-        <richlistitem id="category-recentUpdates" value="addons://updates/recent"
+        <html:moz-richlistitem id="category-recentUpdates" value="addons://updates/recent"
                       class="category"
                       is="addon-category"
                       data-l10n-id="extensions-view-recent-updates"
                       data-l10n-attrs="name"
                       priority="101000"
                       hidden="true"/>
       </richlistbox>
 
diff --git a/toolkit/mozapps/handling/content/dialog.js b/toolkit/mozapps/handling/content/dialog.js
--- a/toolkit/mozapps/handling/content/dialog.js
+++ b/toolkit/mozapps/handling/content/dialog.js
@@ -62,17 +62,17 @@ class MozHandler extends window.MozEleme
   }
 
   get label() {
     return `${this.getAttribute("name")} ${this.getAttribute("description")}`;
   }
 }
 
 customElements.define("mozapps-handler", MozHandler, {
-  extends: "richlistitem",
+  extends: "moz-richlistitem",
 });
 
 var dialog = {
   // Member Variables
 
   _handlerInfo: null,
   _URI: null,
   _itemChoose: null,
@@ -167,17 +167,17 @@ var dialog = {
    * Populates the list that a user can choose from.
    */
   populateList: function populateList() {
     var items = document.getElementById("items");
     var possibleHandlers = this._handlerInfo.possibleApplicationHandlers;
     var preferredHandler = this._handlerInfo.preferredApplicationHandler;
     for (let i = possibleHandlers.length - 1; i >= 0; --i) {
       let app = possibleHandlers.queryElementAt(i, Ci.nsIHandlerApp);
-      let elm = document.createXULElement("richlistitem", {
+      let elm = document.createElement("moz-richlistitem", {
         is: "mozapps-handler",
       });
       elm.setAttribute("name", app.name);
       elm.obj = app;
 
       if (app instanceof Ci.nsILocalHandlerApp) {
         // See if we have an nsILocalHandlerApp and set the icon
         let uri = Services.io.newFileURI(app.executable);
@@ -220,17 +220,17 @@ var dialog = {
 
       items.insertBefore(elm, this._itemChoose);
       if (preferredHandler && app == preferredHandler) {
         this.selectedItem = elm;
       }
     }
 
     if (this._handlerInfo.hasDefaultHandler) {
-      let elm = document.createXULElement("richlistitem", {
+      let elm = document.createElement("moz-richlistitem", {
         is: "mozapps-handler",
       });
       elm.id = "os-default-handler";
       elm.setAttribute("name", this._handlerInfo.defaultDescription);
 
       items.insertBefore(elm, items.firstChild);
       if (
         this._handlerInfo.preferredAction == Ci.nsIHandlerInfo.useSystemDefault
@@ -256,17 +256,17 @@ var dialog = {
           let app = possibleHandlers.queryElementAt(i, Ci.nsIHandlerApp);
           // nsGIOMimeApp::Equals is able to compare with nsILocalHandlerApp
           if (handler.equals(app)) {
             appAlreadyInHandlers = true;
             break;
           }
         }
         if (!appAlreadyInHandlers) {
-          let elm = document.createXULElement("richlistitem", {
+          let elm = document.createElement("moz-richlistitem", {
             is: "mozapps-handler",
           });
           elm.setAttribute("name", handler.name);
           elm.obj = handler;
           items.insertBefore(elm, this._itemChoose);
         }
       }
     }
@@ -303,17 +303,17 @@ var dialog = {
             elm.obj.equals(handlerApp)
           ) {
             parent.selectedItem = elm;
             parent.ensureSelectedElementIsVisible();
             return;
           }
         }
 
-        let elm = document.createXULElement("richlistitem", {
+        let elm = document.createElement("moz-richlistitem", {
           is: "mozapps-handler",
         });
         elm.setAttribute("name", fp.file.leafName);
         elm.setAttribute("image", "moz-icon://" + uri.spec + "?size=32");
         elm.obj = handlerApp;
 
         parent.selectedItem = parent.insertBefore(elm, parent.firstChild);
         parent.ensureSelectedElementIsVisible();
diff --git a/toolkit/mozapps/handling/content/dialog.xul b/toolkit/mozapps/handling/content/dialog.xul
--- a/toolkit/mozapps/handling/content/dialog.xul
+++ b/toolkit/mozapps/handling/content/dialog.xul
@@ -28,17 +28,17 @@
     <description id="description-text"/>
   </hbox>
 
   <vbox flex="1">
     <label id="item-action-text" control="items"/>
     <richlistbox id="items" flex="1"
                  ondblclick="dialog.onDblClick();"
                  onselect="dialog.updateOKButton();">
-      <richlistitem id="item-choose" orient="horizontal" selected="true">
+      <html:moz-richlistitem id="item-choose" orient="horizontal" selected="true">
         <label value="&ChooseOtherApp.description;" flex="1"/>
         <button oncommand="dialog.chooseApplication();"
                 label="&ChooseApp.label;" accesskey="&ChooseApp.accessKey;"/>
       </richlistitem>
     </richlistbox>
   </vbox>
 
   <checkbox id="remember" aria-describedby="remember-text" oncommand="dialog.onCheck();"/>
diff --git a/toolkit/mozapps/update/content/history.js b/toolkit/mozapps/update/content/history.js
--- a/toolkit/mozapps/update/content/history.js
+++ b/toolkit/mozapps/update/content/history.js
@@ -29,17 +29,17 @@ var gUpdateHistory = {
         }
 
         // Don't display updates that are downloading since they don't have
         // valid statusText for the UI (bug 485493).
         if (!update.statusText) {
           continue;
         }
 
-        var element = document.createXULElement("richlistitem");
+        var element = document.createElement("moz-richlistitem");
         element.className = "update";
 
         const topLine = document.createXULElement("hbox");
         const nameLabel = document.createXULElement("label");
         nameLabel.className = "update-name";
         document.l10n.setAttributes(nameLabel, "update-full-build-name", {
           name: update.name,
           buildID: update.buildID,
diff --git a/toolkit/profile/content/profileSelection.js b/toolkit/profile/content/profileSelection.js
--- a/toolkit/profile/content/profileSelection.js
+++ b/toolkit/profile/content/profileSelection.js
@@ -194,17 +194,17 @@ function onProfilesKey(aEvent) {
       break;
     case KeyEvent.DOM_VK_F2:
       RenameProfile();
       break;
   }
 }
 
 function onProfilesDblClick(aEvent) {
-  if (aEvent.target.closest("richlistitem")) {
+  if (aEvent.target.closest("moz-richlistitem")) {
     document.documentElement.acceptDialog();
   }
 }
 
 // invoke the createProfile Wizard
 function CreateProfileWizard() {
   window.openDialog(
     "chrome://mozapps/content/profile/createProfileWizard.xul",
diff --git a/toolkit/themes/linux/global/autocomplete.css b/toolkit/themes/linux/global/autocomplete.css
--- a/toolkit/themes/linux/global/autocomplete.css
+++ b/toolkit/themes/linux/global/autocomplete.css
@@ -28,17 +28,17 @@ panel[type="autocomplete-richlistbox"] {
 /* ::::: richlistbox autocomplete ::::: */
 
 .autocomplete-richlistbox {
   -moz-appearance: none;
   margin: 1px;
   background-color: transparent;
 }
 
-.autocomplete-richlistitem[selected] {
+.autocomplete-moz-richlistitem[selected] {
   background-color: Highlight;
   color: HighlightText;
 }
 
 .ac-type-icon {
   display: none;
   width: 16px;
   height: 16px;
diff --git a/toolkit/themes/linux/global/richlistbox.css b/toolkit/themes/linux/global/richlistbox.css
--- a/toolkit/themes/linux/global/richlistbox.css
+++ b/toolkit/themes/linux/global/richlistbox.css
@@ -11,50 +11,50 @@ richlistbox {
   color: -moz-FieldText;
   overflow: auto;
 }
 
 richlistbox[disabled="true"] {
   color: GrayText;
 }
 
-richlistitem[selected="true"] {
+moz-richlistitem[selected="true"] {
   background-color: -moz-cellhighlight;
   color: -moz-cellhighlighttext;
 }
 
-richlistbox:focus > richlistitem[selected="true"] {
+richlistbox:focus > moz-richlistitem[selected="true"] {
   background-color: Highlight;
   color: HighlightText;
 }
 
-richlistbox[seltype="multiple"]:focus > richlistitem[current="true"] {
+richlistbox[seltype="multiple"]:focus > moz-richlistitem[current="true"] {
   outline: 1px dotted Highlight;
   outline-offset: -1px;
 }
 
-richlistbox[seltype="multiple"]:focus > richlistitem[current="true"][selected="true"] {
+richlistbox[seltype="multiple"]:focus > moz-richlistitem[current="true"][selected="true"] {
   outline: 1px dotted #F3D982; /* TODO: find a suitable system color */
 }
 
-richlistbox.theme-listbox:focus > richlistitem[selected="true"][current="true"] {
+richlistbox.theme-listbox:focus > moz-richlistitem[selected="true"][current="true"] {
   outline: 1px dotted #F3D982;
 }
 
-richlistbox.theme-listbox:focus > richlistitem[current="true"] {
+richlistbox.theme-listbox:focus > moz-richlistitem[current="true"] {
   outline: 1px dotted Highlight;
   outline-offset: -1px;
 }
 
-richlistbox.theme-listbox:not(:focus) > richlistitem[selected="true"] {
+richlistbox.theme-listbox:not(:focus) > moz-richlistitem[selected="true"] {
   background-color: -moz-cellhighlight;
   color: -moz-cellhighlighttext;
 }
 
-richlistbox.theme-listbox > richlistitem > label {
+richlistbox.theme-listbox > moz-richlistitem > label {
   margin: 0px;
   padding-top: 0px;
   padding-bottom: 1px;
   padding-inline-start: 4px;
   padding-inline-end: 0px;
   white-space: nowrap;
 }
 
diff --git a/toolkit/themes/osx/global/richlistbox.css b/toolkit/themes/osx/global/richlistbox.css
--- a/toolkit/themes/osx/global/richlistbox.css
+++ b/toolkit/themes/osx/global/richlistbox.css
@@ -11,35 +11,35 @@ richlistbox {
   color: -moz-FieldText;
   overflow: auto;
 }
 
 richlistbox[disabled="true"] {
   color: GrayText;
 }
 
-richlistitem[selected="true"] {
+moz-richlistitem[selected="true"] {
   background-color: -moz-Dialog;
   color: -moz-DialogText;
 }
 
-richlistbox:focus > richlistitem[selected="true"] {
+richlistbox:focus > moz-richlistitem[selected="true"] {
   background-color: Highlight;
   color: HighlightText;
 }
 
-richlistbox.theme-listbox > richlistitem {
+richlistbox.theme-listbox > moz-richlistitem {
   border: 1px solid transparent;
 }
 
-richlistbox.theme-listbox:not(:focus) > richlistitem[selected="true"] {
+richlistbox.theme-listbox:not(:focus) > moz-richlistitem[selected="true"] {
   background-color: -moz-mac-secondaryhighlight;
 }
 
-richlistbox.theme-listbox > richlistitem > label {
+richlistbox.theme-listbox > moz-richlistitem > label {
   margin: 0px;
   padding-bottom: 1px;
   padding-inline-start: 4px;
   white-space: nowrap;
 }
 
 listheader {
   color: -moz-DialogText;
diff --git a/toolkit/themes/osx/mozapps/extensions/blocklist.css b/toolkit/themes/osx/mozapps/extensions/blocklist.css
--- a/toolkit/themes/osx/mozapps/extensions/blocklist.css
+++ b/toolkit/themes/osx/mozapps/extensions/blocklist.css
@@ -1,13 +1,13 @@
 /* This Source Code Form is subject to the terms of the Mozilla Public
  * License, v. 2.0. If a copy of the MPL was not distributed with this
  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
 
-richlistitem {
+moz-richlistitem {
   padding-top: 6px;
   padding-bottom: 6px;
   padding-inline-start: 7px;
   padding-inline-end: 7px;
   border-bottom: 1px solid #C0C0C0;
 }
 
 .addon-name-version {
diff --git a/toolkit/themes/osx/mozapps/handling/handling.css b/toolkit/themes/osx/mozapps/handling/handling.css
--- a/toolkit/themes/osx/mozapps/handling/handling.css
+++ b/toolkit/themes/osx/mozapps/handling/handling.css
@@ -2,22 +2,22 @@
  * License, v. 2.0. If a copy of the MPL was not distributed with this
  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
 
 #description-image:not([src]) {
   height: 32px;
   width: 32px;
 }
 
-richlistitem[type] {
+moz-richlistitem[type] {
   min-height: 36px; /* Don't forget to update the richlistbox height! */
   padding-inline-start: 2px;
  }
 
-richlistitem {
+moz-richlistitem {
   -moz-box-align: center;
 }
 
 richlistbox {
   /* 3 items high, plus 4px for top and bottom margins, less 2px for border */
   min-height: 110px;
 }
 
diff --git a/toolkit/themes/shared/appPicker.css b/toolkit/themes/shared/appPicker.css
--- a/toolkit/themes/shared/appPicker.css
+++ b/toolkit/themes/shared/appPicker.css
@@ -10,24 +10,24 @@
 #content-description {
   font-weight: bold;
 }
 
 #app-picker-listbox {
   height: 212px;
 }
 
-#app-picker-listbox > richlistitem {
+#app-picker-listbox > moz-richlistitem {
   -moz-box-align: center;
 }
 
 #content-icon,
-#app-picker-listbox > richlistitem > image {
+#app-picker-listbox > moz-richlistitem > image {
   margin: 5px;
   width: 32px;
   height: 32px;
 }
 
-#app-picker-listbox > richlistitem > label {
+#app-picker-listbox > moz-richlistitem > label {
   margin: 0px;
   padding: 5px;
   white-space: nowrap;
 }
diff --git a/toolkit/themes/shared/in-content/common.inc.css b/toolkit/themes/shared/in-content/common.inc.css
--- a/toolkit/themes/shared/in-content/common.inc.css
+++ b/toolkit/themes/shared/in-content/common.inc.css
@@ -617,17 +617,17 @@ xul|label[disabled="true"] {
 }
 
 xul|checkbox[disabled="true"],
 html|input[type="checkbox"]:disabled,
 xul|label[disabled="true"] {
   opacity: 0.5;
 }
 
-xul|richlistitem > xul|*.checkbox-check {
+moz-richlistitem > xul|*.checkbox-check {
   margin: 3px 6px;
 }
 
 html|*.toggle-container-with-text {
   display: flex;
   align-items: center;
 }
 
diff --git a/toolkit/themes/windows/global/autocomplete.css b/toolkit/themes/windows/global/autocomplete.css
--- a/toolkit/themes/windows/global/autocomplete.css
+++ b/toolkit/themes/windows/global/autocomplete.css
@@ -26,17 +26,17 @@ panel[type="autocomplete-richlistbox"] {
 
 /* ::::: richlistbox autocomplete ::::: */
 
 .autocomplete-richlistbox {
   -moz-appearance: none;
   margin: 0;
 }
 
-.autocomplete-richlistitem[selected] {
+.autocomplete-moz-richlistitem[selected] {
   background-color: Highlight;
   color: HighlightText;
 }
 
 .ac-type-icon {
   display: none;
   width: 16px;
   height: 16px;
diff --git a/toolkit/themes/windows/global/richlistbox.css b/toolkit/themes/windows/global/richlistbox.css
--- a/toolkit/themes/windows/global/richlistbox.css
+++ b/toolkit/themes/windows/global/richlistbox.css
@@ -11,69 +11,69 @@ richlistbox {
   color: -moz-FieldText;
   overflow: auto;
 }
 
 richlistbox[disabled="true"] {
   color: GrayText;
 }
 
-richlistitem[selected="true"] {
+moz-richlistitem[selected="true"] {
   background-color: -moz-cellhighlight;
   color: -moz-cellhighlighttext;
 }
 
-richlistbox:focus > richlistitem[selected="true"] {
+richlistbox:focus > moz-richlistitem[selected="true"] {
   background-color: Highlight;
   color: HighlightText;
 }
 
-richlistbox[seltype="multiple"]:focus > richlistitem[current="true"] {
+richlistbox[seltype="multiple"]:focus > moz-richlistitem[current="true"] {
   outline: 1px dotted Highlight;
   outline-offset: -1px;
 }
 
-richlistbox[seltype="multiple"]:focus > richlistitem[current="true"][selected="true"] {
+richlistbox[seltype="multiple"]:focus > moz-richlistitem[current="true"][selected="true"] {
   outline: 1px dotted #F3D982; /* TODO: find a suitable system color */
 }
 
-richlistbox.theme-listbox > richlistitem {
+richlistbox.theme-listbox > moz-richlistitem {
   border: 1px solid transparent;
 }
 
-richlistbox.theme-listbox:focus > richlistitem[selected="true"][current="true"] {
+richlistbox.theme-listbox:focus > moz-richlistitem[selected="true"][current="true"] {
   outline: 1px dotted #F3D982;
 }
 
-richlistbox.theme-listbox:focus > richlistitem[current="true"] {
+richlistbox.theme-listbox:focus > moz-richlistitem[current="true"] {
   outline: 1px dotted Highlight;
   outline-offset: -1px;
 }
 
-richlistbox.theme-listbox > richlistitem[selected="true"] {
+richlistbox.theme-listbox > moz-richlistitem[selected="true"] {
   background-color: -moz-cellhighlight;
   color: -moz-cellhighlighttext;
 }
 
-richlistbox.theme-listbox:focus > richlistitem[selected="true"] {
+richlistbox.theme-listbox:focus > moz-richlistitem[selected="true"] {
   background-color: Highlight;
   color: HighlightText;
 }
 
-richlistbox.theme-listbox > richlistitem > label {
+richlistbox.theme-listbox > moz-richlistitem > label {
   margin: 0px;
   padding-top: 0px;
   padding-bottom: 1px;
   padding-inline-start: 4px;
   padding-inline-end: 0px;
   white-space: nowrap;
 }
 
 @media (-moz-windows-default-theme) {
-  richlistbox.theme-listbox > richlistitem {
+  richlistbox.theme-listbox > moz-richlistitem {
     --listitem-selectedColor: rgb(217,217,217);
     --listitem-selectedBorder: var(--listitem-selectedColor);
     --listitem-selectedBottomBorder: rgb(204,204,204);
     --listitem-selectedBackground: var(--listitem-selectedColor);
     --listitem-selectedImage: none;
     --listitem-selectedCurrentBorder: rgb(123,195,255);
     --listitem-selectedFocusColor: rgb(205,232,255);
     --listitem-selectedFocusBorder: var(--listitem-selectedFocusColor);
@@ -89,69 +89,69 @@ richlistbox.theme-listbox > richlistitem
     margin-inline-end: 1px;
     padding-top: 1px;
     padding-bottom: 1px;
     border-width: 1px;
     background-repeat: no-repeat;
     background-size: 100% 100%;
   }
 
-  richlistbox.theme-listbox > richlistitem[selected="true"] {
+  richlistbox.theme-listbox > moz-richlistitem[selected="true"] {
     border-top-color: var(--listitem-selectedBorder);
     border-right-color: var(--listitem-selectedBorder);
     border-left-color: var(--listitem-selectedBorder);
     border-bottom-color: var(--listitem-selectedBottomBorder);
     background-image: var(--listitem-selectedImage);
     background-color: var(--listitem-selectedBackground);
     color: -moz-DialogText;
   }
 
-  richlistbox.theme-listbox:focus > richlistitem[selected="true"] {
+  richlistbox.theme-listbox:focus > moz-richlistitem[selected="true"] {
     border-top-color: var(--listitem-selectedFocusBorder);
     border-right-color: var(--listitem-selectedFocusBorder);
     border-left-color: var(--listitem-selectedFocusBorder);
     border-bottom-color: var(--listitem-selectedFocusBottomBorder);
     background-image: var(--listitem-selectedFocusImage);
     background-color: var(--listitem-selectedFocusBackground);
     color: -moz-DialogText;
   }
 
-  richlistbox.theme-listbox:focus > richlistitem[current="true"] {
+  richlistbox.theme-listbox:focus > moz-richlistitem[current="true"] {
     border-color: var(--listitem-selectedCurrentBorder);
     outline: none;
   }
 
-  richlistbox.theme-listbox:focus > richlistitem[selected="true"][current="true"] {
+  richlistbox.theme-listbox:focus > moz-richlistitem[selected="true"][current="true"] {
     border-top-color: var(--listitem-selectedFocusCurrentBorder);
     border-right-color: var(--listitem-selectedFocusCurrentBorder);
     border-left-color: var(--listitem-selectedFocusCurrentBorder);
     border-bottom-color: var(--listitem-selectedFocusCurrentBottomBorder);
     background-color: var(--listitem-selectedFocusCurrentBackground);
     outline: none;
   }
 
   @media (-moz-os-version: windows-win7) {
-    richlistbox.theme-listbox > richlistitem {
+    richlistbox.theme-listbox > moz-richlistitem {
       --listitem-selectedBottomBorder: var(--listitem-selectedColor);
       --listitem-selectedBackground: rgba(190,190,190,.15);
       --listitem-selectedImage: linear-gradient(rgba(190,190,190,.1), rgba(190,190,190,.4));
       --listitem-selectedCurrentBorder: rgb(125,162,206);
       --listitem-selectedFocusColor: rgb(132,172,221);
       --listitem-selectedFocusBottomBorder: var(--listitem-selectedFocusColor);
       --listitem-selectedFocusBackground: rgba(131,183,249,.02);
       --listitem-selectedFocusImage: linear-gradient(rgba(131,183,249,.16), rgba(131,183,249,.375));
       --listitem-selectedFocusCurrentBackground: rgba(131,183,249,.15);
 
       border-radius: 3px;
       box-shadow: inset 0 0 0 1px rgba(255,255,255,.4), inset 0 -1px 0 1px rgba(255,255,255,.2);
     }
   }
 
   @media (-moz-os-version: windows-win8) {
-    richlistbox.theme-listbox > richlistitem {
+    richlistbox.theme-listbox > moz-richlistitem {
       --listitem-selectedBottomBorder: var(--listitem-selectedColor);
       --listitem-selectedBackground: rgba(190,190,190,.15);
       --listitem-selectedImage: linear-gradient(rgba(190,190,190,.4), rgba(190,190,190,.4));
       --listitem-selectedCurrentBorder: rgb(125,162,206);
       --listitem-selectedFocusColor: rgb(132,172,221);
       --listitem-selectedFocusBottomBorder: var(--listitem-selectedFocusColor);
       --listitem-selectedFocusBackground: rgba(131,183,249,.02);
       --listitem-selectedFocusImage: linear-gradient(rgba(131,183,249,.375), rgba(131,183,249,.375));
diff --git a/toolkit/themes/windows/mozapps/extensions/blocklist.css b/toolkit/themes/windows/mozapps/extensions/blocklist.css
--- a/toolkit/themes/windows/mozapps/extensions/blocklist.css
+++ b/toolkit/themes/windows/mozapps/extensions/blocklist.css
@@ -1,13 +1,13 @@
 /* This Source Code Form is subject to the terms of the Mozilla Public
  * License, v. 2.0. If a copy of the MPL was not distributed with this
  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
 
-richlistitem {
+moz-richlistitem {
   padding-top: 6px;
   padding-bottom: 6px;
   padding-inline-start: 7px;
   padding-inline-end: 7px;
   border-bottom: 1px solid #C0C0C0;
 }
 
 .addonName {
diff --git a/toolkit/themes/windows/mozapps/handling/handling.css b/toolkit/themes/windows/mozapps/handling/handling.css
--- a/toolkit/themes/windows/mozapps/handling/handling.css
+++ b/toolkit/themes/windows/mozapps/handling/handling.css
@@ -2,22 +2,22 @@
  * License, v. 2.0. If a copy of the MPL was not distributed with this
  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
 
 #description-image:not([src]) {
   height: 32px;
   width: 32px;
 }
 
-richlistitem[type] {
+moz-richlistitem[type] {
   min-height: 36px; /* Don't forget to update the richlistbox height! */
   padding-inline-start: 2px;
  }
  
-richlistitem {
+moz-richlistitem {
   -moz-box-align: center;
 }
 
 richlistbox {
   /* 3 items high, plus 4px for top and bottom margins, less 2px for border */
   min-height: 110px;
 }
 
diff --git a/widget/windows/nsNativeThemeWin.cpp b/widget/windows/nsNativeThemeWin.cpp
--- a/widget/windows/nsNativeThemeWin.cpp
+++ b/widget/windows/nsNativeThemeWin.cpp
@@ -811,19 +811,20 @@ int32_t nsNativeThemeWin::StandardGetSta
     return TS_FOCUSED;
 
   return TS_NORMAL;
 }
 
 bool nsNativeThemeWin::IsMenuActive(nsIFrame* aFrame,
                                     StyleAppearance aAppearance) {
   nsIContent* content = aFrame->GetContent();
-  if (content->IsXULElement() &&
-      content->NodeInfo()->Equals(nsGkAtoms::richlistitem))
-    return CheckBooleanAttr(aFrame, nsGkAtoms::selected);
+  // XXX: Can we remove this check and atom?
+  // if (content->IsXULElement() &&
+  //     content->NodeInfo()->Equals(nsGkAtoms::richlistitem))
+  //   return CheckBooleanAttr(aFrame, nsGkAtoms::selected);
 
   return CheckBooleanAttr(aFrame, nsGkAtoms::menuactive);
 }
 
 /**
  * aPart is filled in with the UXTheme part code. On return, values > 0
  * are the actual UXTheme part code; -1 means the widget will be drawn by
  * us; 0 means that we should use part code 0, which isn't a real part code
