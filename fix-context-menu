# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  0ef7799ac0690db81c3b9c8c9b95b51d872be581
Bug 1492582 - Temporary frontend workaround for context menu not showing up

diff --git a/browser/base/content/browser.js b/browser/base/content/browser.js
--- a/browser/base/content/browser.js
+++ b/browser/base/content/browser.js
@@ -1447,16 +1447,23 @@ var gBrowserInit = {
     }
 
     // Call this after we set attributes that might change toolbars' computed
     // text color.
     ToolbarIconColor.init();
   },
 
   onDOMContentLoaded() {
+    // XXX: Force a reflow on the body to make the context menu show back up.
+    // There should be a platform fix for this.
+    document.body.style.display = "none";
+    document.body.getBoundingClientRect();
+    document.body.style.display = "block";
+    document.body.getBoundingClientRect();
+
     // This needs setting up before we create the first remote browser.
     window.docShell.treeOwner
           .QueryInterface(Ci.nsIInterfaceRequestor)
           .getInterface(Ci.nsIXULWindow)
           .XULBrowserWindow = window.XULBrowserWindow;
     window.browserDOMWindow = new nsBrowserAccess();
 
     gBrowser = window._gBrowser;
