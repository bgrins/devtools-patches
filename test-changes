# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  62d807644a4a10be8261c27b0c1807e3bb9037c5
Test change for addon interpos

diff --git a/browser/base/content/test/general/browser.ini b/browser/base/content/test/general/browser.ini
--- a/browser/base/content/test/general/browser.ini
+++ b/browser/base/content/test/general/browser.ini
@@ -462,16 +462,17 @@ skip-if = (os == "mac" && !e10s) # Bug 1
 support-files =
   close_beforeunload_opens_second_tab.html
   close_beforeunload.html
 # DO NOT ADD MORE TESTS HERE. USE A TOPICAL DIRECTORY INSTEAD.
 [browser_tabs_isActive.js]
 # DO NOT ADD MORE TESTS HERE. USE A TOPICAL DIRECTORY INSTEAD.
 [browser_tabs_owner.js]
 # DO NOT ADD MORE TESTS HERE. USE A TOPICAL DIRECTORY INSTEAD.
+[browser_test_interposition.js]
 [browser_testOpenNewRemoteTabsFromNonRemoteBrowsers.js]
 run-if = e10s
 # DO NOT ADD MORE TESTS HERE. USE A TOPICAL DIRECTORY INSTEAD.
 [browser_trackingUI_1.js]
 tags = trackingprotection
 support-files =
   trackingPage.html
   benignPage.html
diff --git a/browser/base/content/test/general/browser_test_interposition.js b/browser/base/content/test/general/browser_test_interposition.js
new file mode 100644
--- /dev/null
+++ b/browser/base/content/test/general/browser_test_interposition.js
@@ -0,0 +1,17 @@
+
+window.eval(`
+window.TabBrowser = function() {
+    this.requiresAddonInterpositions = true;
+  }
+`);
+
+add_task(async function() {
+  window.foo = new TabBrowser();
+  dump("Accessing foo\n");
+  foo.bar;
+  dump("Done accessing foo\n");
+
+  delete window.foo;
+  delete window.TabBrowser;
+  ok(true);
+});
