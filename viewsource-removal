# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  fd57ad58c75c4ada50b03c6d8ceb40aed3a18e9e
Bug 1416372 - Remove line line:col display in separate view source windows;r=jryans

This is the only consumer of <statusbar> and <statusbarpanel> in m-c, and isn't visible
without changing the view_source.tab pref.

diff --git a/toolkit/components/viewsource/content/viewSource.js b/toolkit/components/viewsource/content/viewSource.js
--- a/toolkit/components/viewsource/content/viewSource.js
+++ b/toolkit/components/viewsource/content/viewSource.js
@@ -622,18 +622,16 @@ ViewSourceChrome.prototype = {
    * Called when the frame script reports that a line was successfully gotten
    * to.
    *
    * @param lineNumber
    *        The line number that we successfully got to.
    */
   onGoToLineSuccess(lineNumber) {
     ViewSourceBrowser.prototype.onGoToLineSuccess.call(this, lineNumber);
-    document.getElementById("statusbar-line-col").label =
-      gViewSourceBundle.getFormattedString("statusBarLineCol", [lineNumber, 1]);
   },
 
   /**
    * Reloads the browser, bypassing the network cache.
    */
   reload() {
     this.browser.reloadWithFlags(Ci.nsIWebNavigation.LOAD_FLAGS_BYPASS_PROXY |
                                  Ci.nsIWebNavigation.LOAD_FLAGS_BYPASS_CACHE);
diff --git a/toolkit/components/viewsource/content/viewSource.xul b/toolkit/components/viewsource/content/viewSource.xul
--- a/toolkit/components/viewsource/content/viewSource.xul
+++ b/toolkit/components/viewsource/content/viewSource.xul
@@ -224,13 +224,9 @@
   <vbox id="appcontent" flex="1">
 
     <browser id="content" type="content" name="content" src="about:blank" flex="1"
              primary="true"
              context="viewSourceContextMenu" showcaret="true" tooltip="aHTMLTooltip" />
     <findbar id="FindToolbar" browserid="content"/>
   </vbox>
 
-  <statusbar id="status-bar" class="chromeclass-status">
-    <statusbarpanel id="statusbar-line-col" label="" flex="1"/>
-  </statusbar>
-
 </window>
diff --git a/toolkit/components/viewsource/test/browser/browser_gotoline.js b/toolkit/components/viewsource/test/browser/browser_gotoline.js
--- a/toolkit/components/viewsource/test/browser/browser_gotoline.js
+++ b/toolkit/components/viewsource/test/browser/browser_gotoline.js
@@ -14,23 +14,17 @@ add_task(async function() {
 
   win = await loadViewSourceWindow("data:text/plain," + encodeURIComponent(content));
   await checkViewSource(win);
   await BrowserTestUtils.closeWindow(win);
 });
 
 var checkViewSource = async function(aWindow) {
   is(aWindow.gBrowser.contentDocument.body.textContent, content, "Correct content loaded");
-  let statusPanel = aWindow.document.getElementById("statusbar-line-col");
-  is(statusPanel.getAttribute("label"), "", "Correct status bar text");
 
   for (let i = 1; i <= 3; i++) {
     aWindow.viewSourceChrome.goToLine(i);
     await ContentTask.spawn(aWindow.gBrowser, i, async function(i) {
       let selection = content.getSelection();
       Assert.equal(selection.toString(), "line " + i, "Correct text selected");
     });
-
-    await ContentTaskUtils.waitForCondition(() => {
-      return (statusPanel.getAttribute("label") == "Line " + i + ", Col 1");
-    }, "Correct status bar text");
   }
 };
