# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Date 1555865421 25200
#      Sun Apr 21 09:50:21 2019 -0700
# Node ID f248709c7850d25c473debd11721251b1bbc28c4
# Parent  5b2a282f73d3a6dfef9094f7f64eb72d0f227e13
Bug 1545983 - Update "Recent Closed Tabs" and "Recent Closed Windows" menus to reference their menupopup correctly

Differential Revision: https://phabricator.services.mozilla.com/D28298

diff --git a/browser/base/content/browser-places.js b/browser/base/content/browser-places.js
--- a/browser/base/content/browser-places.js
+++ b/browser/base/content/browser-places.js
@@ -597,17 +597,17 @@ HistoryMenu.prototype = {
     else
       this.undoTabMenu.removeAttribute("disabled");
   },
 
   /**
    * Populate when the history menu is opened
    */
   populateUndoSubmenu: function PHM_populateUndoSubmenu() {
-    var undoPopup = this.undoTabMenu.firstChild;
+    var undoPopup = this.undoTabMenu.menupopup;
 
     // remove existing menu items
     while (undoPopup.hasChildNodes())
       undoPopup.firstChild.remove();
 
     // no restorable tabs, so make sure menu is disabled, and return
     if (this._getClosedTabCount() == 0) {
       this.undoTabMenu.setAttribute("disabled", true);
@@ -630,17 +630,17 @@ HistoryMenu.prototype = {
     else
       this.undoWindowMenu.removeAttribute("disabled");
   },
 
   /**
    * Populate when the history menu is opened
    */
   populateUndoWindowSubmenu: function PHM_populateUndoWindowSubmenu() {
-    let undoPopup = this.undoWindowMenu.firstChild;
+    let undoPopup = this.undoWindowMenu.menupopup;
 
     // remove existing menu items
     while (undoPopup.hasChildNodes())
       undoPopup.firstChild.remove();
 
     // no restorable windows, so make sure menu is disabled, and return
     if (SessionStore.getClosedWindowCount() == 0) {
       this.undoWindowMenu.setAttribute("disabled", true);
