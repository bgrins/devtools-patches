# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  fd995039d89708923b5673ecebc652967d40bd4e
Bug 1425330 - Part 1 - set up talos configurations for tart and ts_paint with XUL flexbox emulation;r=rwood

MozReview-Commit-ID: 7hl8cafIaSz

diff --git a/testing/talos/talos.json b/testing/talos/talos.json
--- a/testing/talos/talos.json
+++ b/testing/talos/talos.json
@@ -17,16 +17,19 @@
         "dromaeojs-profiling-e10s": {
             "talos_options": ["--geckoProfile"],
             "tests": ["dromaeo_css", "kraken"]
         },
         "dromaeojs-stylo-disabled-e10s": {
             "talos_options": ["--disable-stylo"],
             "tests": ["dromaeo_css", "kraken"]
         },
+        "flex-e10s": {
+            "tests": ["tart_flex", "ts_paint_flex"]
+        },
         "other-e10s": {
             "tests": ["a11yr", "ts_paint", "tpaint", "sessionrestore", "sessionrestore_many_windows", "sessionrestore_no_auto_restore", "tabpaint", "cpstartup"]
         },
         "other-profiling-e10s": {
             "talos_options": ["--geckoProfile"],
             "tests": ["a11yr", "ts_paint", "tpaint", "sessionrestore", "sessionrestore_many_windows", "sessionrestore_no_auto_restore", "tabpaint", "cpstartup"]
         },
         "other-stylo-disabled-e10s": {
diff --git a/testing/talos/talos/test.py b/testing/talos/talos/test.py
--- a/testing/talos/talos/test.py
+++ b/testing/talos/talos/test.py
@@ -157,16 +157,21 @@ class ts_paint_webext(ts_paint):
 class ts_paint_heavy(ts_paint):
     """
     ts_paint test ran against a heavy-user profile
     """
     profile = 'simple'
 
 
 @register_test()
+class ts_paint_flex(ts_paint):
+    preferences = {'layout.css.emulate-moz-box-with-flex': True}
+
+
+@register_test()
 class sessionrestore(TsBase):
     """
     A start up test measuring the time it takes to load a sessionstore.js file.
 
     1. Set up Firefox to restore from a given sessionstore.js file.
     2. Launch Firefox.
     3. Measure the delta between firstPaint and sessionRestored.
     """
@@ -394,16 +399,21 @@ class tart(PageloaderTest):
     preferences = {'layout.frame_rate': 0,
                    'docshell.event_starvation_delay_hint': 1,
                    'dom.send_after_paint_to_content': False}
     filters = filter.ignore_first.prepare(1) + filter.median.prepare()
     unit = 'ms'
 
 
 @register_test()
+class tart_flex(tart):
+    preferences = {'layout.css.emulate-moz-box-with-flex': True}
+
+
+@register_test()
 class cart(PageloaderTest):
     """
     Customize Animation Regression Test
     Tests Australis customize animations (default DPI scaling). Uses the
     TART addon but with a different URL.
     Reports the same animation values as TART (.half/.all/.error).
     All comments for TART also apply here (e.g. for ASAP+OMTC, etc)
     Subtests are:
