# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Date 1578438400 28800
#      Tue Jan 07 15:06:40 2020 -0800
# Node ID 19df7564f81316af3c53e934d9d7208be472e97a
# Parent  9f55d547e196a6945636405c2b33afc87dd501ee
Bug 1596970 - Remove reference to MOZ_XBL in test_bug375314.html

Differential Revision: https://phabricator.services.mozilla.com/D59031

diff --git a/dom/base/test/test_bug375314.html b/dom/base/test/test_bug375314.html
--- a/dom/base/test/test_bug375314.html
+++ b/dom/base/test/test_bug375314.html
@@ -70,39 +70,28 @@ var componentManager = SpecialPowers.wra
                                                      .QueryInterface(Ci.nsIComponentRegistrar);
 
 componentManager.registerFactory(policyID, "Test content policy", policyName, policy);
 
 var categoryManager = Cc["@mozilla.org/categorymanager;1"].getService(Ci.nsICategoryManager);
 categoryManager.addCategoryEntry("content-policy", policyName, policyName, false, true);
 
 // Try creating different request types
-var tests = ["SCRIPT", "IMAGE", "STYLESHEET", "OBJECT", "DOCUMENT", "SUBDOCUMENT", "XBL", "XMLHTTPREQUEST"];
+var tests = ["SCRIPT", "IMAGE", "STYLESHEET", "OBJECT", "DOCUMENT", "SUBDOCUMENT", "XMLHTTPREQUEST"];
 var curTest = -1;
-
-if (!AppConstants.MOZ_XBL) {
-  tests.splice(tests.indexOf("XBL"), 1);
-}
-
 var div;
 
 SimpleTest.waitForExplicitFinish();
 setTimeout(runNextTest, 0);
 
 function runNextTest() {
 
   if (curTest >= 0) {
     var type = "TYPE_" + tests[curTest];
     is(lastContentType, Ci.nsIContentPolicy[type], "Content policies triggered for " + type);
-
-    if (tests[curTest] == "XBL")
-    {
-      //XXX Removing binding to work-around a memory leak (bugs 478528, 499735).
-      div.style.MozBinding = "";
-    }
   }
 
   curTest++;
   if (curTest < tests.length) {
     var method = "request_" + tests[curTest].toLowerCase();
     try {
       window[method]();
     } catch(e) {}
@@ -173,25 +162,16 @@ function request_document() {
 function request_subdocument() {
   var content = $("content");
 
   var frame = document.createElement("iframe");
   frame.setAttribute("src", testURL);
   content.appendChild(frame);
 }
 
-function request_xbl() {
-  var content = $("content");
-
-  div = document.createElement("div");
-  div.style.MozBinding = "url(" + testURL + ")";
-  $('test').appendChild(div);
-  div.offsetLeft; // Flush styles.
-}
-
 function request_xmlhttprequest() {
   var request = new XMLHttpRequest();
   request.open("GET", testURL, false);
   request.send(null);
 }
 
 </script>
 </pre>
