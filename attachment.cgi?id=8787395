# HG changeset patch
# User Tim Nguyen <ntim.bugs@gmail.com>
# Date 1472767515 -7200
#      Fri Sep 02 00:05:15 2016 +0200
# Node ID 06a1832a22c83a675a558b44d04731b6dc09ba45
# Parent  d667c9cd84f16752ae92c2b683afcc35e0483ec3
Bug 1299935 - Define SVG fills with CSS. r=bgrins

diff --git a/devtools/client/themes/common.css b/devtools/client/themes/common.css
--- a/devtools/client/themes/common.css
+++ b/devtools/client/themes/common.css
@@ -28,16 +28,52 @@
 .devtools-monospace {
   font-family: var(--monospace-font-family);
 }
 
 :root[platform="linux"] .devtools-monospace {
   font-size: 80%;
 }
 
+/* CSS Variables specific to the devtools toolbar that aren't defined by the themes */
+.theme-light {
+  --toolbar-tab-hover: rgba(170, 170, 170, .2);
+  --toolbar-tab-hover-active: rgba(170, 170, 170, .4);
+  --searchbox-background-color: #ffee99;
+  --searchbox-border-color: #ffbf00;
+  --searcbox-no-match-background-color: #ffe5e5;
+  --searcbox-no-match-border-color: #e52e2e;
+  --magnifying-glass-image: url(images/search.svg);
+  --filter-image: url(images/filter.svg);
+  --tool-options-image: url(images/tool-options.svg);
+  --checked-icon-fill: #38ACE6;
+  --toolbar-button-border-color: rgba(170, 170, 170, .5);
+}
+
+.theme-dark {
+  --toolbar-tab-hover: hsla(206, 37%, 4%, .2);
+  --toolbar-tab-hover-active: hsla(206, 37%, 4%, .4);
+  --searchbox-background-color: #4d4222;
+  --searchbox-border-color: #d99f2b;
+  --searcbox-no-match-background-color: #402325;
+  --searcbox-no-match-border-color: #cc3d3d;
+  --magnifying-glass-image: url(images/search.svg);
+  --filter-image: url(images/filter.svg);
+  --tool-options-image: url(images/tool-options.svg);
+  --checked-icon-fill: #2AFD7F;
+  --toolbar-button-border-color: rgba(0, 0, 0, .4);
+}
+
+.theme-firebug {
+  --magnifying-glass-image: url(images/search.svg);
+  --tool-options-image: url(images/firebug/tool-options.svg);
+  --checked-icon-fill: currentColor;
+  --toolbar-button-border-color: rgba(170, 170, 170, .5);
+}
+
 
 /* Autocomplete Popup */
 
 .devtools-autocomplete-popup {
   box-shadow: 0 1px 0 hsla(209,29%,72%,.25) inset;
   background-color: transparent;
   border-radius: 3px;
   overflow-x: hidden;
@@ -381,17 +417,17 @@ checkbox:-moz-focusring {
   opacity: 0.5 !important;
 }
 
 .devtools-button[checked]:empty::before,
 .devtools-button[open]:empty::before,
 .devtools-button.checked::before,
 .devtools-toolbarbutton:not([label])[checked=true] > image,
 .devtools-toolbarbutton:not([label])[open=true] > image {
-  filter: var(--checked-icon-filter);
+  fill: var(--checked-icon-fill);
 }
 
 /* Icon-and-text buttons */
 .devtools-toolbarbutton.icon-and-text .toolbarbutton-text {
   margin-inline-start: .5em !important;
   font-weight: 600;
 }
 
@@ -491,16 +527,33 @@ checkbox:-moz-focusring {
   background-color: var(--theme-selection-background-semitransparent);
 }
 
 .menu-filter-button:not(:active).checked {
   background-color: var(--theme-selection-background);
   color: var(--theme-selection-color);
 }
 
+/* Icons */
+
+.devtools-tab[icon-invertable] > image,
+.devtools-toolbarbutton > image,
+.devtools-button::before,
+#breadcrumb-separator-normal,
+.scrollbutton-up > .toolbarbutton-icon,
+.scrollbutton-down > .toolbarbutton-icon,
+#black-boxed-message-button .button-icon,
+#requests-menu-perf-notice-button .button-icon,
+#canvas-debugging-empty-notice-button .button-icon,
+#toggle-breakpoints[checked] > image,
+.event-tooltip-debugger-icon {
+  filter: url("filters.svg#fill");
+  fill: currentColor;
+}
+
 /* Text input */
 
 .devtools-textinput,
 .devtools-searchinput,
 .devtools-filterinput {
   -moz-appearance: none;
   margin: 1px 3px;
   border: 1px solid;
diff --git a/devtools/client/themes/images/filters.svg b/devtools/client/themes/images/filters.svg
--- a/devtools/client/themes/images/filters.svg
+++ b/devtools/client/themes/images/filters.svg
@@ -1,26 +1,15 @@
 <!-- This Source Code Form is subject to the terms of the Mozilla Public
    - License, v. 2.0. If a copy of the MPL was not distributed with this
    - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->
 
 <svg height="0" xmlns="http://www.w3.org/2000/svg">
-  <filter id="checked-icon-state">
-    <feColorMatrix in="SourceGraphic" type="matrix"
-      values="0 0 0 0 0.043
-              0 0 0 0 0.415
-              0 0 0 0 0.79
-              0 0 0 1 0"/>
-  </filter>
-  <filter id="dark-theme-checked-icon-state">
-    <feColorMatrix in="SourceGraphic" type="matrix"
-      values="0 0 0 0 0
-              0 0 0 0 1
-              0 0 0 0 0.212
-              0 0 0 1 0"/>
+  <filter id="fill">
+    <feComposite in="FillPaint" in2="SourceGraphic" operator="in"/>
   </filter>
 
   <!-- Web Audio Gradients -->
   <linearGradient id="bypass-light" x1="6%" y1="8%" x2="12%" y2="12%" spreadMethod="repeat">
     <stop offset="0%" stop-color="#f0f1f2"/> <!-- theme-toolbar-background -->
     <stop offset="50%" stop-color="#fff"/>
   </linearGradient>
 
diff --git a/devtools/client/themes/toolbars.css b/devtools/client/themes/toolbars.css
--- a/devtools/client/themes/toolbars.css
+++ b/devtools/client/themes/toolbars.css
@@ -1,53 +1,13 @@
 /* vim:set ts=2 sw=2 sts=2 et: */
 /* This Source Code Form is subject to the terms of the Mozilla Public
  * License, v. 2.0. If a copy of the MPL was not distributed with this
  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
 
-/* CSS Variables specific to the devtools toolbar that aren't defined by the themes */
-.theme-light {
-  --toolbar-tab-hover: rgba(170, 170, 170, .2);
-  --toolbar-tab-hover-active: rgba(170, 170, 170, .4);
-  --searchbox-background-color: #ffee99;
-  --searchbox-border-color: #ffbf00;
-  --searcbox-no-match-background-color: #ffe5e5;
-  --searcbox-no-match-border-color: #e52e2e;
-  --magnifying-glass-image: url(images/search.svg);
-  --filter-image: url(images/filter.svg);
-  --tool-options-image: url(images/tool-options.svg);
-  --icon-filter: none;
-  --checked-icon-filter: url(images/filters.svg#checked-icon-state);
-  --toolbar-button-border-color: rgba(170, 170, 170, .5);
-}
-
-.theme-dark {
-  --toolbar-tab-hover: hsla(206, 37%, 4%, .2);
-  --toolbar-tab-hover-active: hsla(206, 37%, 4%, .4);
-  --searchbox-background-color: #4d4222;
-  --searchbox-border-color: #d99f2b;
-  --searcbox-no-match-background-color: #402325;
-  --searcbox-no-match-border-color: #cc3d3d;
-  --magnifying-glass-image: url(images/search.svg);
-  --filter-image: url(images/filter.svg);
-  --tool-options-image: url(images/tool-options.svg);
-  --icon-filter: invert(1);
-  --checked-icon-filter: url(images/filters.svg#dark-theme-checked-icon-state);
-  --toolbar-button-border-color: rgba(0, 0, 0, .4);
-}
-
-.theme-firebug {
-  --magnifying-glass-image: url(images/search.svg);
-  --tool-options-image: url(images/firebug/tool-options.svg);
-  --icon-filter: none;
-  --checked-icon-filter: none;
-  --toolbar-button-border-color: rgba(170, 170, 170, .5);
-}
-
-
 /* Toolbars */
 .devtools-toolbar,
 .devtools-sidebar-tabs tabs {
   -moz-appearance: none;
   padding: 0;
   border-width: 0;
   border-bottom-width: 1px;
   border-style: solid;
@@ -179,33 +139,16 @@
 }
 
 .devtools-sidebar-tabs tabs > tab[selected],
 .devtools-sidebar-tabs tabs > tab[selected]:hover:active {
   color: var(--theme-selection-color);
   background: var(--theme-selection-background);
 }
 
-/* Invert the colors of certain light theme images for displaying
- * inside of the dark theme.
- */
-.devtools-tab[icon-invertable] > image,
-.devtools-toolbarbutton > image,
-.devtools-button::before,
-#breadcrumb-separator-normal,
-.scrollbutton-up > .toolbarbutton-icon,
-.scrollbutton-down > .toolbarbutton-icon,
-#black-boxed-message-button .button-icon,
-#requests-menu-perf-notice-button .button-icon,
-#canvas-debugging-empty-notice-button .button-icon,
-#toggle-breakpoints[checked] > image,
-.event-tooltip-debugger-icon {
-  filter: var(--icon-filter);
-}
-
 .hidden-labels-box:not(.visible) > label,
 .hidden-labels-box.visible ~ .hidden-labels-box > label:last-child {
   display: none;
 }
 
 .devtools-invisible-splitter {
   border-color: transparent;
   background-color: transparent;
