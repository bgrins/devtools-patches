# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  38b3c1d03a594664c6b32c35533734283c258f43
Bug XXX - What breaks in xhtml

MozReview-Commit-ID: Kg2i75BnHCe

diff --git a/browser/base/content/browser.js b/browser/base/content/browser.js
--- a/browser/base/content/browser.js
+++ b/browser/base/content/browser.js
@@ -2679,17 +2679,17 @@ function BrowserPageInfo(documentURL, in
     if (currentWindow.document.documentElement.getAttribute("relatedUrl") == documentURL) {
       currentWindow.focus();
       currentWindow.resetPageInfo(args);
       return currentWindow;
     }
   }
 
   // We didn't find a matching window, so open a new one.
-  return openDialog("chrome://browser/content/pageinfo/pageInfo.xul", "",
+  return openDialog("chrome://browser/content/pageinfo/pageInfo.xhtml", "",
                     "chrome,toolbar,dialog=no,resizable", args);
 }
 
 /**
  * Sets the URI to display in the location bar.
  *
  * @param aURI [optional]
  *        nsIURI to set. If this is unspecified, the current URI will be used.
diff --git a/browser/base/content/pageinfo/pageInfo.xhtml b/browser/base/content/pageinfo/pageInfo.xhtml
new file mode 100644
--- /dev/null
+++ b/browser/base/content/pageinfo/pageInfo.xhtml
@@ -0,0 +1,34 @@
+
+<html xmlns="http://www.w3.org/1999/xhtml"
+      xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
+<body>
+  <div id="container">
+  hi
+  </div>
+  <div>
+    <xul:hbox>above</xul:hbox>
+    <xul:splitter />
+    <xul:hbox>below</xul:hbox>
+  </div>
+  <xul:popupset>
+    <xul:panel id="panel" type="arrow" orient="vertical" noautofocus="true">
+      <div>hi</div>
+    </xul:panel>
+  </xul:popupset>
+  <xul:hbox>
+  inside xul
+  </xul:hbox>
+  <xul:keyset id="mainKeyset">
+    <xul:key id="key_newNavigator"
+         key="N"
+         oncommand='document.getElementById("container").textContent = "command";'
+         modifiers="accel" reserved="true"/>
+   </xul:keyset>
+</body>
+<script>
+console.log("Hi");
+var container = document.getElementById("container");
+container.textContent = "run";
+document.getElementById("panel").openPopup(container)
+</script>
+</html>
\ No newline at end of file
diff --git a/browser/base/jar.mn b/browser/base/jar.mn
--- a/browser/base/jar.mn
+++ b/browser/base/jar.mn
@@ -96,16 +96,17 @@ browser.jar:
         content/browser/defaultthemes/5.preview.jpg   (content/defaultthemes/5.preview.jpg)
         content/browser/defaultthemes/compact.header.png    (content/defaultthemes/compact.header.png)
         content/browser/defaultthemes/dark.icon.svg  (content/defaultthemes/dark.icon.svg)
         content/browser/defaultthemes/light.icon.svg (content/defaultthemes/light.icon.svg)
         content/browser/newtab/newTab.xhtml           (content/newtab/newTab.xhtml)
 *       content/browser/newtab/newTab.js              (content/newtab/newTab.js)
         content/browser/newtab/newTab.css             (content/newtab/newTab.css)
         content/browser/newtab/alternativeDefaultSites.json   (content/newtab/alternativeDefaultSites.json)
+        content/browser/pageinfo/pageInfo.xhtml       (content/pageinfo/pageInfo.xhtml)
 *       content/browser/pageinfo/pageInfo.xul         (content/pageinfo/pageInfo.xul)
         content/browser/pageinfo/pageInfo.js          (content/pageinfo/pageInfo.js)
         content/browser/pageinfo/pageInfo.css         (content/pageinfo/pageInfo.css)
         content/browser/pageinfo/feeds.js             (content/pageinfo/feeds.js)
         content/browser/pageinfo/feeds.xml            (content/pageinfo/feeds.xml)
         content/browser/pageinfo/permissions.js       (content/pageinfo/permissions.js)
         content/browser/pageinfo/security.js          (content/pageinfo/security.js)
         content/browser/robot.ico                     (content/robot.ico)
