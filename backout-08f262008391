# HG changeset patch
# Parent  d6b2e070b5d0eb986c12e35d7fde2baa48c3170c
Backed out changeset 08f262008391 (bug 1209342)

diff --git a/devtools/server/actors/inspector.js b/devtools/server/actors/inspector.js
--- a/devtools/server/actors/inspector.js
+++ b/devtools/server/actors/inspector.js
@@ -837,19 +837,18 @@ var NodeFront = protocol.FrontClass(Node
             attr.value = change.newValue;
           } else {
             this.attributes.splice(i, 1);
           }
           found = true;
           break;
         }
       }
-      // This is a new attribute. The null check is because of Bug 1192270,
-      // in the case of a newly added then removed attribute
-      if (!found && change.newValue !== null)  {
+      // This is a new attribute.
+      if (!found)  {
         this.attributes.push({
           name: change.attributeName,
           namespace: change.attributeNamespace,
           value: change.newValue
         });
       }
     } else if (change.type === "characterData") {
       this._form.shortValue = change.newValue;
diff --git a/devtools/server/tests/mochitest/test_inspector-mutations-attr.html b/devtools/server/tests/mochitest/test_inspector-mutations-attr.html
--- a/devtools/server/tests/mochitest/test_inspector-mutations-attr.html
+++ b/devtools/server/tests/mochitest/test_inspector-mutations-attr.html
@@ -121,29 +121,23 @@ function testQueuedMutations() {
 
   attrNode.removeAttribute("data-newattr3");
   attrNode.setAttribute("data-newattr3", "1");
   attrNode.removeAttribute("data-newattr3");
   attrNode.setAttribute("data-newattr3", "2");
   attrNode.removeAttribute("data-newattr3");
   attrNode.setAttribute("data-newattr3", "3");
 
-  // This shouldn't be added in the attribute set, since it's a new
-  // attribute that's been added and removed.
-  attrNode.setAttribute("data-newattr4", "4");
-  attrNode.removeAttribute("data-newattr4");
-
   gWalker.once("mutations", mutations => {
-    is(mutations.length, 4, "Only one mutation each is sent for multiple queued attribute changes");
+    is(mutations.length, 3, "Only one mutation each is sent for multiple queued attribute changes");
     is(attrFront.attributes.length, 3, "Should have id, data-newattr2, and data-newattr3.");
 
     is(attrFront.getAttribute("data-newattr2"), "1000", "Node front should still have the correct value");
     is(attrFront.getAttribute("data-newattr3"), "3", "Node front should still have the correct value");
     ok(!attrFront.hasAttribute("data-newattr"), "Attribute value should be removed.");
-    ok(!attrFront.hasAttribute("data-newattr4"), "Attribute value should be removed.");
 
     runNextTest();
   })
 }
 
 addTest(function cleanup() {
   delete gInspectee;
   delete gWalker;
