# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  e4107773cffb1baefd5446666fce22c4d6eb0517
Bug 1426492 - Test case with trivial binding attached to the span element

STR: ./mach run 'data:text/html,<span></span>'
MozReview-Commit-ID: 7CWfMztAymN

diff --git a/layout/style/res/html.css b/layout/style/res/html.css
--- a/layout/style/res/html.css
+++ b/layout/style/res/html.css
@@ -831,16 +831,21 @@ dialog {
   background: white;
   width: -moz-fit-content;
 }
 
 dialog:not([open]) {
   display: none;
 }
 
+span {
+  /* Apply a trivial binding to span elements to measure perf */
+  -moz-binding: url('chrome://xbl-marquee/content/xbl-marquee.xml#span');
+}
+
 /* emulation of non-standard HTML <marquee> tag */
 marquee {
   inline-size: -moz-available;
   display: inline-block;
   vertical-align: text-bottom;
   text-align: start;
   -moz-binding: url('chrome://xbl-marquee/content/xbl-marquee.xml#marquee-horizontal');
 }
diff --git a/layout/style/xbl-marquee/xbl-marquee.xml b/layout/style/xbl-marquee/xbl-marquee.xml
--- a/layout/style/xbl-marquee/xbl-marquee.xml
+++ b/layout/style/xbl-marquee/xbl-marquee.xml
@@ -5,16 +5,22 @@
 
 <bindings id="marqueeBindings"
           xmlns="http://www.mozilla.org/xbl"
           xmlns:html="http://www.w3.org/1999/xhtml"
           xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
           xmlns:xbl="http://www.mozilla.org/xbl">
 
 
+  <binding id="span" bindToUntrustedContent="true">
+    <implementation>
+      <constructor>void(0)</constructor>
+    </implementation>
+  </binding>
+
   <binding id="marquee" bindToUntrustedContent="true">
 
     <resources>
       <stylesheet src="chrome://xbl-marquee/content/xbl-marquee.css"/>
     </resources>
     <implementation>
 
       <property name="scrollAmount" exposeToUntrustedContent="true">
