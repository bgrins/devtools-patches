# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Date 1568929920 25200
#      Thu Sep 19 14:52:00 2019 -0700
# Node ID 7d28a166c7e932f301fd54a16e13c4984a25b1b6
# Parent  d24d00b719aac4882dc4b23e2a6220cf5d535ca2
Bug 1581914 - Set default margins for html|input in global.css

Differential Revision: https://phabricator.services.mozilla.com/D46531

diff --git a/browser/themes/shared/urlbar-searchbar.inc.css b/browser/themes/shared/urlbar-searchbar.inc.css
--- a/browser/themes/shared/urlbar-searchbar.inc.css
+++ b/browser/themes/shared/urlbar-searchbar.inc.css
@@ -166,16 +166,17 @@
 
 #urlbar-input,
 #urlbar-scheme {
   -moz-box-flex: 1;
   background-color: transparent;
   color: inherit;
   border: none;
   padding: 0;
+  margin: 0;
 }
 
 #urlbar-container {
   -moz-box-align: center;
 }
 
 #urlbar-search-splitter {
   /* The splitter width should equal the location and search bars' combined
diff --git a/devtools/client/themes/common.css b/devtools/client/themes/common.css
--- a/devtools/client/themes/common.css
+++ b/devtools/client/themes/common.css
@@ -74,16 +74,23 @@
  */
 .devtools-ellipsis-text {
   overflow: hidden;
   text-overflow: ellipsis;
   white-space: nowrap;
 }
 
 /**
+ * Override global.css input styles
+ */
+html|input {
+  margin: revert;
+}
+
+/**
  * Override wrong system font from forms.css
  * Bug 1458224: buttons use a wrong default font-size on Linux
  */
 html|button, html|select, html|input {
   font: message-box;
   font-size: var(--theme-body-font-size);
 }
 
diff --git a/security/manager/pki/resources/content/changepassword.xul b/security/manager/pki/resources/content/changepassword.xul
--- a/security/manager/pki/resources/content/changepassword.xul
+++ b/security/manager/pki/resources/content/changepassword.xul
@@ -8,22 +8,16 @@
 <!DOCTYPE dialog SYSTEM "chrome://pippki/locale/pippki.dtd">
 
 <dialog id="set_password" title="&setPassword.title;"
   xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
   xmlns:html="http://www.w3.org/1999/xhtml"
   buttons="accept,cancel"
   onload="onLoad();">
 
-<html:style>
-.input-row {
-  margin-block: 2px;
-}
-</html:style>
-
 <stringbundle id="pippki_bundle" src="chrome://pippki/locale/pippki.properties"/>
 
 <script src="chrome://global/content/globalOverlay.js"/>
 <script src="chrome://global/content/editMenuOverlay.js"/>
 
 <script src="chrome://pippki/content/changepassword.js"/>
 
 <hbox align="center">
diff --git a/security/manager/pki/resources/content/exceptionDialog.css b/security/manager/pki/resources/content/exceptionDialog.css
--- a/security/manager/pki/resources/content/exceptionDialog.css
+++ b/security/manager/pki/resources/content/exceptionDialog.css
@@ -30,11 +30,9 @@
 
 .description:empty,
 .longDescription:empty {
   display: none;
 }
 
 #locationTextBox {
   -moz-box-flex: 1;
-  /* This matches the label/description's margin in global.css`*/
-  margin-inline: 6px 5px;
 }
diff --git a/security/manager/pki/resources/content/setp12password.xul b/security/manager/pki/resources/content/setp12password.xul
--- a/security/manager/pki/resources/content/setp12password.xul
+++ b/security/manager/pki/resources/content/setp12password.xul
@@ -10,23 +10,16 @@
 <dialog id="setp12password"
         title="&pkcs12.setpassword.title;"
         xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
         xmlns:html="http://www.w3.org/1999/xhtml"
         style="width: 48em;"
         buttons="accept,cancel"
         onload="onLoad();">
 
-  <html:style>
-  .input-row {
-    margin-block: 2px;
-    margin-inline-end: 6px; /* align with password meter vbox */
-  }
-  </html:style>
-
   <script src="chrome://global/content/globalOverlay.js"/>
   <script src="chrome://global/content/editMenuOverlay.js"/>
 
   <script src="chrome://pippki/content/setp12password.js"/>
 
   <description>&pkcs12.setpassword.message;</description>
   <separator />
   <vbox>
diff --git a/toolkit/themes/linux/global/autocomplete.css b/toolkit/themes/linux/global/autocomplete.css
--- a/toolkit/themes/linux/global/autocomplete.css
+++ b/toolkit/themes/linux/global/autocomplete.css
@@ -6,20 +6,16 @@
   == Styles used by the autocomplete widget.
   ======================================================================= */
 
 @namespace url("http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul");
 @namespace html url("http://www.w3.org/1999/xhtml");
 
 /* ::::: autocomplete ::::: */
 
-html|input[is="autocomplete-input"] {
-  margin: 2px 4px; /* matches xul <textbox> default margin */
-}
-
 html|input[nomatch="true"][highlightnonmatches="true"] {
   color: red;
 }
 
 /* ::::: autocomplete popups ::::: */
 
 panel[type="autocomplete-richlistbox"] {
   border: 1px solid ThreeDShadow;
diff --git a/toolkit/themes/linux/global/global.css b/toolkit/themes/linux/global/global.css
--- a/toolkit/themes/linux/global/global.css
+++ b/toolkit/themes/linux/global/global.css
@@ -217,16 +217,20 @@ label[disabled="true"] {
 .text-link:hover {
   text-decoration: underline;
 }
 
 .text-link:-moz-focusring {
   outline: 1px dotted;
 }
 
+html|input {
+  margin: 2px 4px; /* matches xul <textbox> default margin */
+}
+
 notification > hbox > button {
   margin-top: 0;
   margin-bottom: 0;
 }
 
 popupnotificationcontent {
   margin-top: .5em;
 }
diff --git a/toolkit/themes/osx/global/autocomplete.css b/toolkit/themes/osx/global/autocomplete.css
--- a/toolkit/themes/osx/global/autocomplete.css
+++ b/toolkit/themes/osx/global/autocomplete.css
@@ -1,19 +1,15 @@
 /* This Source Code Form is subject to the terms of the Mozilla Public
  * License, v. 2.0. If a copy of the MPL was not distributed with this
  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
 
 @namespace url("http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul");
 @namespace html url("http://www.w3.org/1999/xhtml");
 
-html|input[is="autocomplete-input"] {
-  margin: 4px; /* matches xul <textbox> default margin */
-}
-
 html|input[nomatch="true"][highlightnonmatches="true"] {
   color: red;
 }
 
 /* ::::: autocomplete popups ::::: */
 
 panel[type="autocomplete-richlistbox"] {
   padding: 0px !important;
diff --git a/toolkit/themes/osx/global/global.css b/toolkit/themes/osx/global/global.css
--- a/toolkit/themes/osx/global/global.css
+++ b/toolkit/themes/osx/global/global.css
@@ -174,16 +174,20 @@ label[disabled="true"] {
 .text-link:hover {
   text-decoration: underline;
 }
 
 .text-link:-moz-focusring {
   box-shadow: var(--focus-ring-box-shadow);
 }
 
+html|input {
+  margin: 4px; /* matches xul <textbox> default margin */
+}
+
 notification > hbox > button {
   margin: 0 3px;
   padding: 1px 10px;
   min-width: 60px;
   min-height: 16px;
   -moz-appearance: none;
   border-radius: 10000px;
   border: @roundButtonBorderWidth@ @roundButtonBorderStyle@ @roundButtonBorderColor@;
diff --git a/toolkit/themes/osx/global/wizard.css b/toolkit/themes/osx/global/wizard.css
--- a/toolkit/themes/osx/global/wizard.css
+++ b/toolkit/themes/osx/global/wizard.css
@@ -1,14 +1,13 @@
 /* This Source Code Form is subject to the terms of the Mozilla Public
  * License, v. 2.0. If a copy of the MPL was not distributed with this
  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
 
 @namespace url("http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul");
-@namespace html url("http://www.w3.org/1999/xhtml");
 
 wizard {
   padding: 14px;
 }
 
 .wizard-header {
   -moz-appearance: dialog;
 }
@@ -34,21 +33,16 @@ wizard {
   margin-bottom: 0;
   margin-inline-start: 3px;
 }
 
 wizard[branded="true"] .wizard-header-icon {
   list-style-image: url("chrome://branding/content/icon48.png");
 }
 
-wizardpage > html|input {
-  /* This matches the label/description in global.css`*/
-  margin-inline: 6px 5px;
-}
-
 .wizard-page-box {
   padding: 15px 23px;
   -moz-appearance: dialog;
 }
 
 .wizard-buttons-separator {
   margin: 0 !important;
   border-bottom: 1px solid #fff !important;
diff --git a/toolkit/themes/windows/global/autocomplete.css b/toolkit/themes/windows/global/autocomplete.css
--- a/toolkit/themes/windows/global/autocomplete.css
+++ b/toolkit/themes/windows/global/autocomplete.css
@@ -6,20 +6,16 @@
   == Styles used by the autocomplete widget.
   ======================================================================= */
 
 @namespace url("http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul");
 @namespace html url("http://www.w3.org/1999/xhtml");
 
 /* ::::: autocomplete ::::: */
 
-html|input[is="autocomplete-input"] {
-  margin: 2px 4px; /* matches xul <textbox> default margin */
-}
-
 html|input[nomatch="true"][highlightnonmatches="true"] {
   color: red;
 }
 
 /* ::::: autocomplete popups ::::: */
 
 panel[type="autocomplete-richlistbox"] {
   -moz-appearance: none;
diff --git a/toolkit/themes/windows/global/global.css b/toolkit/themes/windows/global/global.css
--- a/toolkit/themes/windows/global/global.css
+++ b/toolkit/themes/windows/global/global.css
@@ -226,13 +226,17 @@ label[disabled="true"] {
 .text-link:hover {
   text-decoration: underline;
 }
 
 .text-link:-moz-focusring {
   outline: 1px dotted;
 }
 
+html|input {
+  margin: 2px 4px; /* matches xul <textbox> default margin */
+}
+
 popupnotificationcontent {
   margin-top: .5em;
 }
 
 %include ../../shared/notification-popup.inc.css
diff --git a/toolkit/themes/windows/global/wizard.css b/toolkit/themes/windows/global/wizard.css
--- a/toolkit/themes/windows/global/wizard.css
+++ b/toolkit/themes/windows/global/wizard.css
@@ -1,14 +1,13 @@
 /* This Source Code Form is subject to the terms of the Mozilla Public
  * License, v. 2.0. If a copy of the MPL was not distributed with this
  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
 
 @namespace url("http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul");
-@namespace html url("http://www.w3.org/1999/xhtml");
 
 .wizard-header {
   border-bottom: 2px groove ThreeDFace;
   background-color: Window;
   color: WindowText;
 }
 
 .wizard-header-box-1 {
@@ -28,21 +27,16 @@ wizard[description=""] .wizard-header-de
   margin-inline-start: 44px;
 }
 
 wizard[branded="true"] .wizard-header-icon {
   list-style-image: url("chrome://branding/content/icon48.png");
   margin-inline-end: 5px;
 }
 
-wizardpage > html|input {
-  /* This matches the label/description in global.css`*/
-  margin-inline: 6px 5px;
-}
-
 .wizard-page-box {
   margin: 10px 44px;
 }
 
 .wizard-buttons-separator {
   margin-bottom: 0px !important;
 }
 
