# HG changeset patch
# Parent ebcf116fae8d0d16dca5bb25a5f8b336e6862bae
# User Brian Grinstead <bgrinstead@mozilla.com>
Bug 968315 - Current / hovered node highlighting colors need to be higher contrast

diff --git a/browser/themes/linux/jar.mn b/browser/themes/linux/jar.mn
--- a/browser/themes/linux/jar.mn
+++ b/browser/themes/linux/jar.mn
@@ -155,17 +155,18 @@ browser.jar:
   skin/classic/browser/tabview/search.png             (tabview/search.png)
   skin/classic/browser/tabview/stack-expander.png     (tabview/stack-expander.png)
   skin/classic/browser/tabview/tabview.png            (tabview/tabview.png)
   skin/classic/browser/tabview/tabview.css            (tabview/tabview.css)
 * skin/classic/browser/devtools/common.css            (../shared/devtools/common.css)
 * skin/classic/browser/devtools/dark-theme.css        (../shared/devtools/dark-theme.css)
 * skin/classic/browser/devtools/light-theme.css       (../shared/devtools/light-theme.css)
   skin/classic/browser/devtools/filters.svg          (../shared/devtools/filters.svg)
-  skin/classic/browser/devtools/controls.png          (../shared/devtools/controls.png)
+  skin/classic/browser/devtools/controls.png          (../shared/devtools/images/controls.png)
+  skin/classic/browser/devtools/controls@2x.png       (../shared/devtools/images/controls@2x.png)
 * skin/classic/browser/devtools/widgets.css           (devtools/widgets.css)
   skin/classic/browser/devtools/commandline-icon.png  (devtools/commandline-icon.png)
   skin/classic/browser/devtools/command-paintflashing.png     (../shared/devtools/images/command-paintflashing.png)
   skin/classic/browser/devtools/command-paintflashing@2x.png  (../shared/devtools/images/command-paintflashing@2x.png)
   skin/classic/browser/devtools/command-responsivemode.png    (../shared/devtools/images/command-responsivemode.png)
   skin/classic/browser/devtools/command-responsivemode@2x.png (../shared/devtools/images/command-responsivemode@2x.png)
   skin/classic/browser/devtools/command-scratchpad.png        (../shared/devtools/images/command-scratchpad.png)
   skin/classic/browser/devtools/command-scratchpad@2x.png     (../shared/devtools/images/command-scratchpad@2x.png)
diff --git a/browser/themes/osx/jar.mn b/browser/themes/osx/jar.mn
--- a/browser/themes/osx/jar.mn
+++ b/browser/themes/osx/jar.mn
@@ -268,17 +268,18 @@ browser.jar:
   skin/classic/browser/tabview/search.png                   (tabview/search.png)
   skin/classic/browser/tabview/stack-expander.png           (tabview/stack-expander.png)
   skin/classic/browser/tabview/tabview.png                  (tabview/tabview.png)
   skin/classic/browser/tabview/tabview.css                  (tabview/tabview.css)
 * skin/classic/browser/devtools/common.css                  (../shared/devtools/common.css)
 * skin/classic/browser/devtools/dark-theme.css              (../shared/devtools/dark-theme.css)
 * skin/classic/browser/devtools/light-theme.css             (../shared/devtools/light-theme.css)
   skin/classic/browser/devtools/filters.svg                 (../shared/devtools/filters.svg)
-  skin/classic/browser/devtools/controls.png                (../shared/devtools/controls.png)
+  skin/classic/browser/devtools/controls.png                (../shared/devtools/images/controls.png)
+  skin/classic/browser/devtools/controls@2x.png             (../shared/devtools/images/controls@2x.png)
 * skin/classic/browser/devtools/widgets.css                 (devtools/widgets.css)
   skin/classic/browser/devtools/commandline-icon.png        (devtools/commandline-icon.png)
   skin/classic/browser/devtools/command-paintflashing.png     (../shared/devtools/images/command-paintflashing.png)
   skin/classic/browser/devtools/command-paintflashing@2x.png  (../shared/devtools/images/command-paintflashing@2x.png)
   skin/classic/browser/devtools/command-responsivemode.png    (../shared/devtools/images/command-responsivemode.png)
   skin/classic/browser/devtools/command-responsivemode@2x.png (../shared/devtools/images/command-responsivemode@2x.png)
   skin/classic/browser/devtools/command-scratchpad.png        (../shared/devtools/images/command-scratchpad.png)
   skin/classic/browser/devtools/command-scratchpad@2x.png     (../shared/devtools/images/command-scratchpad@2x.png)
diff --git a/browser/themes/shared/devtools/controls.png b/browser/themes/shared/devtools/controls.png
deleted file mode 100644
index ebba41cd794c88fb0b4c1795bed6525d85061bd5..0000000000000000000000000000000000000000
GIT binary patch
literal 0
Hc$@<O00001

diff --git a/browser/themes/shared/devtools/dark-theme.css b/browser/themes/shared/devtools/dark-theme.css
--- a/browser/themes/shared/devtools/dark-theme.css
+++ b/browser/themes/shared/devtools/dark-theme.css
@@ -49,17 +49,18 @@
   background-position: -28px 0;
 }
 
 .theme-checkbox[checked] {
   background-position: -42px 0;
 }
 
 .theme-selected {
-  background: #26394D;
+  background-color: #1d4f73;
+  color: #f5f7fa; /* Light foreground text */
 }
 
 .theme-bg-darker {
   background-color: rgba(0,0,0,0.5);
 }
 
 .theme-bg-contrast,
 .variable-or-property:not([overridden])[changed] { /* contrast bg color to attract attention on a container */
diff --git a/browser/themes/shared/devtools/images/controls.png b/browser/themes/shared/devtools/images/controls.png
new file mode 100644
index 0000000000000000000000000000000000000000..590613ee2e0cf6b45d3fba425fa639a580b2e943
GIT binary patch
literal 1617
zc$}S7drT8|950j=WPk>I%^{wLI&@y|uDxEl3$2s_(kc&2H(A`6ch_sV(CgLqpam6i
zMgjLgMSRU+rbGo)WFy%Uw`@)XOnl4*omqTq)j8upht3UUS4Z8l82{KW`8~eB`+UCN
z@9+D#x`Mp9vC)&FWinZ;DJRn+?WxjCj8aG|c4(Pi+FlW}io`;}F8U}BD>K*xngvWe
z<zOu=Wvf_nj7^it<X+BNBo^h)CmDfPQbCN;&%0&8kv7NgrkGMz1ZdX5xpd&KhrR&;
z&ZYwwYI2cWw~;O3aw<J+VP&3`sVrp(8#qS~r1?on0ndsQ;OCt#FX`8TPxX@0Id~0&
zz*C4=sssOaswlSrFbW<P&?q$!gQ!qIODItdMxf|yK!u=c7)4+e0ih^~X-O0ZMg}NZ
z^Vsa9B{O@(mL%!G5>a%MFzoaBls>gm@Hk+UAP5*y!73FbAs}ysOQige%bOh1kjZ)(
z59by+!36|miWbU59SDY=z`JvEpDA{EM*<~<4E9rQ7*!%L&%+_KSG2J97o)w_3O5T|
zSg%m#VWfQ6lmBJv#nd2B@`lX!a8gnzXQsfE@vKWUW$Hlbi_*r~NY;*_D%_4iG=ky~
zhT{Z8rJ@=LrD+;RC{$y|Z6Q6+;~TT_EUikTAu>`?6wOknYO*l{ff#X37N#;9v>~p^
z<rOIx!-lxrKV0mET+--aDN*oP1;H7rf`Sr36uc#Z8!#Gylw6A8TtRteFh?V<vL3FS
zwPkw*9(WpLl6#H=l-;hyQG|hLf{`9is}YF8?G!{~m{zMMP&JJc;0WLLe}e~0PQm}F
zoY0k2j=|%zK9GcGoy5AN_VGx4ve5CtEtxD_vTU&Wf1-zmhvyt|D`o>b!=iFdM-=8C
z(2r@z^ljK*|I+(`E^-67d|K)zaQXbs`AHMt;=cCwc44Uh$|~6>mS+7JZ8&;fzpbMG
z=BXWbAPCYdeR#L5YVdaB#K~zrab249J2725t%H|a3ilj0o6VI~!%t2`Cwz=D+1=NA
z>e+<&`0;yNS}yGT%yGQ>%gEZd)_19@i^kVZkPYyymHodDT-!AFqr{G_7-vbUUGeB1
zd!h05g=^YcTQ4dq)+svJQC)cY_Q=35;Y(8cn3oar0<)pK{6XKm&B~wm7k^D!7cKhp
z_RypI30t>pd2;6LS^V>Z2Zugg8M!CCBWX-c_`n-LUc}WE>E|Q5QXVXrt}rx}@cjN8
zfxzRKS<n>yvXuN?&7<T%zEwWpDB)(-H(@Qsy*W8KU+rycldlHku?;g+{;&^Gh11l~
zY8tC>^8DzY?rvqd&v(hRtGO;NPCh^b7weiZ?y8}vs@YrWoOO8jB;th9Jh=Y!9dO>1
zYi_}*Mq|9ly|mum-jwLBeWJJu>zr)*Vq&L^X2{APUaftnBw%{mWZihOY2)t3*9HQI
zsVk<8ak}FTj+JMQ3Ht_Pl9TriAI<u9dqVo-c2ocLq=L=yHQS<q8_A1Lz6n&Boik^x
zJ#Xv|Pm2G3^u2SD@r)&+ekeBl4@1&Yqgk_L^1HX>fxFdxmj@D0p6fZYV$EuOoI9*l
zvH4~Jy`wJb)P<?n!NjI%KYAzB7Sx<*$nTiW&oJw1jx==smWb!;k2VS&<5ZW@AFUmG
zYU<MXqFc)%0z`b;!%^GXmB_j{WxD)+?12ofvqRSxmR=nu+xOk$$eOldEclZ*W#wfa
I$XNW|UvynjBme*a

diff --git a/browser/themes/shared/devtools/images/controls@2x.png b/browser/themes/shared/devtools/images/controls@2x.png
new file mode 100644
index 0000000000000000000000000000000000000000..7bde925afe24544f376c0e0354c506f100312664
GIT binary patch
literal 2045
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

diff --git a/browser/themes/shared/devtools/light-theme.css b/browser/themes/shared/devtools/light-theme.css
--- a/browser/themes/shared/devtools/light-theme.css
+++ b/browser/themes/shared/devtools/light-theme.css
@@ -33,33 +33,43 @@
 .theme-twisty:-moz-focusring {
   outline-style: none;
 }
 
 .theme-twisty[open] {
   background-position: -14px -14px;
 }
 
+/* Use white twisty when next to a selected item in markup view */
+.theme-selected ~ .theme-twisty {
+  background-position: -28px -14px;
+}
+
+.theme-selected ~ .theme-twisty[open] {
+  background-position: -42px -14px;
+}
+
 .theme-checkbox {
   display: inline-block;
   border: 0;
   width: 14px;
   height: 14px;
   padding: 0;
   outline: none;
   background-image: url("chrome://browser/skin/devtools/controls.png");
   background-position: 0 0;
 }
 
 .theme-checkbox[checked] {
   background-position: -14px 0;
 }
 
 .theme-selected {
-  background-color: #CCC;
+  background-color: #4c9ed9;
+  color: #f5f7fa; /* Light foreground text */
 }
 
 .theme-bg-darker {
   background: #EFEFEF;
 }
 
 .theme-bg-contrast,
 .variable-or-property:not([overridden])[changed] { /* contrast bg color to attract attention on a container */
diff --git a/browser/themes/shared/devtools/markup-view.css b/browser/themes/shared/devtools/markup-view.css
--- a/browser/themes/shared/devtools/markup-view.css
+++ b/browser/themes/shared/devtools/markup-view.css
@@ -9,8 +9,23 @@
 
 .more-nodes {
   padding-left: 16px;
 }
 
 .styleinspector-propertyeditor {
   border: 1px solid #CCC;
 }
+
+
+/* Selected nodes in the tree should have light selected text.
+   theme-selected doesn't work in this case since the text is a
+   sibling of the class, not a child. */
+.theme-selected ~ .editor,
+.theme-selected ~ .editor .theme-fg-color1,
+.theme-selected ~ .editor .theme-fg-color2,
+.theme-selected ~ .editor .theme-fg-color3,
+.theme-selected ~ .editor .theme-fg-color4,
+.theme-selected ~ .editor .theme-fg-color5,
+.theme-selected ~ .editor .theme-fg-color6,
+.theme-selected ~ .editor .theme-fg-color7 {
+  color: #f5f7fa; /* Light foreground text */
+}
diff --git a/browser/themes/windows/jar.mn b/browser/themes/windows/jar.mn
--- a/browser/themes/windows/jar.mn
+++ b/browser/themes/windows/jar.mn
@@ -184,17 +184,18 @@ browser.jar:
         skin/classic/browser/tabview/stack-expander.png             (tabview/stack-expander.png)
         skin/classic/browser/tabview/tabview.png                    (tabview/tabview.png)
         skin/classic/browser/tabview/tabview-inverted.png           (tabview/tabview-inverted.png)
         skin/classic/browser/tabview/tabview.css                    (tabview/tabview.css)
 *       skin/classic/browser/devtools/common.css                    (../shared/devtools/common.css)
 *       skin/classic/browser/devtools/dark-theme.css                (../shared/devtools/dark-theme.css)
 *       skin/classic/browser/devtools/light-theme.css               (../shared/devtools/light-theme.css)
         skin/classic/browser/devtools/filters.svg                   (../shared/devtools/filters.svg)
-        skin/classic/browser/devtools/controls.png                  (../shared/devtools/controls.png)
+        skin/classic/browser/devtools/controls.png                  (../shared/devtools/images/controls.png)
+        skin/classic/browser/devtools/controls@2x.png               (../shared/devtools/images/controls@2x.png)
 *       skin/classic/browser/devtools/widgets.css                   (devtools/widgets.css)
         skin/classic/browser/devtools/commandline-icon.png          (devtools/commandline-icon.png)
         skin/classic/browser/devtools/alerticon-warning.png         (devtools/alerticon-warning.png)
         skin/classic/browser/devtools/ruleview.css                  (devtools/ruleview.css)
         skin/classic/browser/devtools/commandline.css               (devtools/commandline.css)
         skin/classic/browser/devtools/command-paintflashing.png     (../shared/devtools/images/command-paintflashing.png)
         skin/classic/browser/devtools/command-paintflashing@2x.png  (../shared/devtools/images/command-paintflashing@2x.png)
         skin/classic/browser/devtools/command-responsivemode.png    (../shared/devtools/images/command-responsivemode.png)
@@ -505,17 +506,18 @@ browser.jar:
         skin/classic/aero/browser/tabview/stack-expander.png         (tabview/stack-expander.png)
         skin/classic/aero/browser/tabview/tabview.png                (tabview/tabview.png)
         skin/classic/aero/browser/tabview/tabview-inverted.png       (tabview/tabview-inverted.png)
         skin/classic/aero/browser/tabview/tabview.css                (tabview/tabview.css)
 *       skin/classic/aero/browser/devtools/common.css                (../shared/devtools/common.css)
 *       skin/classic/aero/browser/devtools/dark-theme.css            (../shared/devtools/dark-theme.css)
 *       skin/classic/aero/browser/devtools/light-theme.css           (../shared/devtools/light-theme.css)
         skin/classic/aero/browser/devtools/filters.svg               (../shared/devtools/filters.svg)
-        skin/classic/aero/browser/devtools/controls.png              (../shared/devtools/controls.png)
+        skin/classic/aero/browser/devtools/controls.png              (../shared/devtools/images/controls.png)
+        skin/classic/aero/browser/devtools/controls@2x.png           (../shared/devtools/images/controls@2x.png)
 *       skin/classic/aero/browser/devtools/widgets.css               (devtools/widgets.css)
         skin/classic/aero/browser/devtools/commandline-icon.png      (devtools/commandline-icon.png)
         skin/classic/aero/browser/devtools/command-paintflashing.png    (../shared/devtools/images/command-paintflashing.png)
         skin/classic/aero/browser/devtools/command-paintflashing@2x.png (../shared/devtools/images/command-paintflashing@2x.png)
         skin/classic/aero/browser/devtools/command-responsivemode.png    (../shared/devtools/images/command-responsivemode.png)
         skin/classic/aero/browser/devtools/command-responsivemode@2x.png (../shared/devtools/images/command-responsivemode@2x.png)
         skin/classic/aero/browser/devtools/command-scratchpad.png    (../shared/devtools/images/command-scratchpad.png)
         skin/classic/aero/browser/devtools/command-scratchpad@2x.png (../shared/devtools/images/command-scratchpad@2x.png)
