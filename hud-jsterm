# HG changeset patch
# Parent da859562dc3b2e3f29bdf84eba1419b142797187
# User Brian Grinstead <bgrinstead@mozilla.com>
diff --git a/browser/devtools/itchpad/Makefile.in b/browser/devtools/itchpad/Makefile.in
--- a/browser/devtools/itchpad/Makefile.in
+++ b/browser/devtools/itchpad/Makefile.in
@@ -1,12 +1,12 @@
 # This Source Code Form is subject to the terms of the Mozilla Public
 # License, v. 2.0. If a copy of the MPL was not distributed with this
 # file, You can obtain one at http://mozilla.org/MPL/2.0/.
 
-itchpad_lib_FILES = $(wildcard $(srcdir)/lib/*)
-itchpad_lib_DEST = $(FINAL_TARGET)/modules/devtools/itchpad/lib
-INSTALL_TARGETS += itchpad_lib
+#itchpad_lib_FILES = $(wildcard $(srcdir)/lib/*)
+#itchpad_lib_DEST = $(FINAL_TARGET)/modules/devtools/itchpad/lib
+#INSTALL_TARGETS += itchpad_lib
 
 include $(topsrcdir)/config/rules.mk
 
 #libs::
-#	$(INSTALL) $(IFLAGS1) $(srcdir)/*.js $(FINAL_TARGET)/modules/devtools/itchpad
+#	$(INSTALL) $(srcdir)/*.js $(FINAL_TARGET)/modules/devtools/itchpad
diff --git a/browser/devtools/itchpad/lib/itchpad.js b/browser/devtools/itchpad/lib/itchpad.js
--- a/browser/devtools/itchpad/lib/itchpad.js
+++ b/browser/devtools/itchpad/lib/itchpad.js
@@ -1,14 +1,14 @@
 const { Class } = require("sdk/core/heritage");
 
 const { Project } = require("./project");
 const { PageCollection } = require("./page");
 const { TreeView } = require("./tree");
-const { ShellDeck } = require("./shells");
+const { ShellDeck } = require("itchpad/shells");
 const { Resource } = require("./stores/base");
 const { ResourceMap, Pair } = require("./resource-map");
 const { registeredPlugins } = require("./plugins/core");
 const { EventTarget } = require("sdk/event/target");
 const { on, forget } = require("./event/scope");
 const { emit } = require("sdk/event/core");
 const { merge } = require("sdk/util/object");
 const promise = require("./helpers/promise");
diff --git a/browser/devtools/itchpad/moz.build b/browser/devtools/itchpad/moz.build
--- a/browser/devtools/itchpad/moz.build
+++ b/browser/devtools/itchpad/moz.build
@@ -1,5 +1,4 @@
 # vim: set filetype=python:
 # This Source Code Form is subject to the terms of the Mozilla Public
 # License, v. 2.0. If a copy of the MPL was not distributed with this
 # file, You can obtain one at http://mozilla.org/MPL/2.0/.
-
diff --git a/toolkit/devtools/Loader.jsm b/toolkit/devtools/Loader.jsm
--- a/toolkit/devtools/Loader.jsm
+++ b/toolkit/devtools/Loader.jsm
@@ -69,16 +69,17 @@ BuiltinProvider.prototype = {
         "devtools/styleinspector/css-logic": "resource://gre/modules/devtools/styleinspector/css-logic",
         "devtools/css-color": "resource://gre/modules/devtools/css-color",
         "devtools/output-parser": "resource://gre/modules/devtools/output-parser",
         "devtools/touch-events": "resource://gre/modules/devtools/touch-events",
         "devtools/client": "resource://gre/modules/devtools/client",
         "devtools/pretty-fast": "resource://gre/modules/devtools/pretty-fast.js",
         "devtools/async-utils": "resource://gre/modules/devtools/async-utils",
         "gcli": "resource://gre/modules/devtools/gcli",
+        "itchpad": "resource://gre/browser/modules/devtools/itchpad/lib",
         "acorn": "resource://gre/modules/devtools/acorn",
         "acorn/util/walk": "resource://gre/modules/devtools/acorn/walk.js",
 
         // Allow access to xpcshell test items from the loader.
         "xpcshell-test": "resource://test"
       },
       globals: loaderGlobals,
       invisibleToDebugger: this.invisibleToDebugger
@@ -118,16 +119,17 @@ SrcdirProvider.prototype = {
     let cssLogicURI = this.fileURI(OS.Path.join(toolkitDir, "styleinspector", "css-logic"));
     let cssColorURI = this.fileURI(OS.Path.join(toolkitDir, "css-color"));
     let outputParserURI = this.fileURI(OS.Path.join(toolkitDir, "output-parser"));
     let touchEventsURI = this.fileURI(OS.Path.join(toolkitDir, "touch-events"));
     let clientURI = this.fileURI(OS.Path.join(toolkitDir, "client"));
     let prettyFastURI = this.fileURI(OS.Path.join(toolkitDir), "pretty-fast.js");
     let asyncUtilsURI = this.fileURI(OS.Path.join(toolkitDir), "async-utils.js");
     let gcliURI = this.fileURI(OS.Path.join(toolkitDir, "gcli", "source", "lib", "gcli"));
+    let itchpadURI = this.fileURI(OS.Path.join(devtoolsDir, "itchpad", "lib"));
     let acornURI = this.fileURI(OS.Path.join(toolkitDir, "acorn"));
     let acornWalkURI = OS.Path.join(acornURI, "walk.js");
     this.loader = new loader.Loader({
       id: "fx-devtools",
       prefixURI: "",
       name: "",
       modules: {
         "Services": Object.create(Services),
@@ -145,16 +147,17 @@ SrcdirProvider.prototype = {
         "devtools/styleinspector/css-logic": cssLogicURI,
         "devtools/css-color": cssColorURI,
         "devtools/output-parser": outputParserURI,
         "devtools/touch-events": touchEventsURI,
         "devtools/client": clientURI,
         "devtools/pretty-fast": prettyFastURI,
         "devtools/async-utils": asyncUtilsURI,
         "gcli": gcliURI,
+        "itchpad": itchpadURI,
         "acorn": acornURI,
         "acorn/util/walk": acornWalkURI
       },
       globals: loaderGlobals,
       invisibleToDebugger: this.invisibleToDebugger
     });
 
     return this._writeManifest(devtoolsDir).then(null, Cu.reportError);
