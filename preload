# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  4e6d22ab082d50c2893e54f069fa684c434e7c8e
Preload react if possible

diff --git a/devtools/client/inspector/inspector.js b/devtools/client/inspector/inspector.js
--- a/devtools/client/inspector/inspector.js
+++ b/devtools/client/inspector/inspector.js
@@ -415,20 +415,16 @@ Inspector.prototype = {
   get React() {
     return require("devtools/client/shared/vendor/react");
   },
 
   get ReactDOM() {
     return require("devtools/client/shared/vendor/react-dom");
   },
 
-  get ReactRedux() {
-    return require("devtools/client/shared/vendor/react-redux");
-  },
-
   get InspectorTabPanel() {
     if (!this._InspectorTabPanel) {
       this._InspectorTabPanel =
         this.React.createFactory(require("devtools/client/inspector/components/inspector-tab-panel"));
     }
     return this._InspectorTabPanel;
   },
 
diff --git a/devtools/client/inspector/inspector.xhtml b/devtools/client/inspector/inspector.xhtml
--- a/devtools/client/inspector/inspector.xhtml
+++ b/devtools/client/inspector/inspector.xhtml
@@ -27,16 +27,26 @@
   <script type="application/javascript;version=1.8"
           src="chrome://devtools/content/shared/theme-switching.js"></script>
   <script type="application/javascript;version=1.8">
     const { BrowserLoader } = Components.utils.import("resource://devtools/client/shared/browser-loader.js", {});
     const { require } = BrowserLoader({
       window,
       baseURI: "resource://devtools/client/inspector/",
     });
+
+    // Preload react if possible
+    requestIdleCallback(function preloadRequire(timing) {
+      if (timing.timeRemaining() > 10) {
+        require("devtools/client/shared/vendor/react");
+        require("devtools/client/shared/vendor/react-dom");
+      } else {
+        requestIdleCallback(preloadRequire);
+      }
+    });
     </script>
   <script type="application/javascript;version=1.8" src="inspector.js" defer="true"></script>
 </head>
 <body class="theme-body" role="application">
   <div class="inspector-responsive-container theme-body inspector">
 
     <!-- Main Panel Content -->
     <div id="inspector-main-content" class="devtools-main-content">
