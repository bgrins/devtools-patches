# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  7801d028a93ca0f6dde68a4b163594acd994576f
Add devtools page load test

diff --git a/talos/page_load_test/devtools/devtools.manifest b/talos/page_load_test/devtools/devtools.manifest
new file mode 100644
--- /dev/null
+++ b/talos/page_load_test/devtools/devtools.manifest
@@ -0,0 +1,3 @@
+% http://localhost/page_load_test/devtools/index.html?auto=true
+
+
diff --git a/talos/page_load_test/devtools/index.html b/talos/page_load_test/devtools/index.html
new file mode 100644
--- /dev/null
+++ b/talos/page_load_test/devtools/index.html
@@ -0,0 +1,25 @@
+<!DOCTYPE html>
+<html lang="en">
+   <head>
+      <title>Devtools</title>
+   </head>
+   <body>
+      <script>
+netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
+Components.utils.import("resource:///modules/devtools/gDevTools.jsm");
+const {devtools} =
+  Components.utils.import("resource://gre/modules/devtools/Loader.jsm", {});
+const { getActiveTab } = devtools.require("sdk/tabs/utils");
+const { getMostRecentBrowserWindow } = devtools.require("sdk/window/utils");
+
+const targetFor = target => {
+  target = target || getActiveTab(getMostRecentBrowserWindow());
+  return devtools.TargetFactory.forTab(target);
+};
+
+gDevTools.showToolbox(targetFor(), "inspector");
+      </script>
+
+      talos -n -d --develop --executablePath /Users/bgrinstead/Code/fx-team/obj-x86_64-apple-darwin14.1.0/dist/Nightly.app/Contents/MacOS/firefox --activeTests devtools --output ts_desktop.yml
+   </body>
+</html>
diff --git a/talos/test.py b/talos/test.py
--- a/talos/test.py
+++ b/talos/test.py
@@ -640,16 +640,25 @@ class tscrollr(PageloaderTest):
     """
     Like tscroll, this test does some scrolly thing. Unlike tscroll, this
     test is row-based instead of column based.
     """
     tpmanifest = '${talos}/page_load_test/scroll/scroll.manifest'
     tpcycles = 1
     tppagecycles = 25
 
+class devtools(PageloaderTest):
+    """
+    XXXX
+    """
+    tpmanifest = '${talos}/page_load_test/devtools/devtools.manifest'
+    tpcycles = 1
+    mobile = False
+    tppagecycles = 25
+
 class tscrollx(PageloaderTest):
     """
     Like tscroll, this test does some scrolly thing. Unlike tscroll, this
     test is row-based instead of column based.
     """
     tpmanifest = '${talos}/page_load_test/scroll/scroll.manifest'
     tpcycles = 1
     tppagecycles = 25
@@ -677,11 +686,12 @@ class a11yr(PageloaderTest):
 
 # global test data
 tests = [ts_paint, ts, tsvg, tdhtml, ts_paint_cold,
          tp4m, tp5n, tp5o, tpaint, tresize, tp5o_scroll,
          trobopan, tcheckerboard, tprovider, tcheck2, tcanvasmark,
          dromaeo_css, dromaeo_dom, v8_7, kraken, media_tests,
          tdhtmlr, tsvgr, tsvgr_opacity, tscrollr, a11yr,
          tsvgx, tscrollx, tart, cart, glterrain,
-         sessionrestore, sessionrestore_no_auto_restore
+         sessionrestore, sessionrestore_no_auto_restore,
+         devtools
          ]
 test_dict = dict([(i.name(), i) for i in tests])
