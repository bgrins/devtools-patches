# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  f6e6b7cd2e28c0ea79b5b429d23eb8f25f1a0c3a

diff --git a/toolkit/content/widgets/browser.xml b/toolkit/content/widgets/browser.xml
--- a/toolkit/content/widgets/browser.xml
+++ b/toolkit/content/widgets/browser.xml
@@ -384,19 +384,18 @@
           return this._webBrowserFind;
         ]]>
         </getter>
       </property>
 
       <method name="getTabBrowser">
         <body>
           <![CDATA[
-            for (let node = this.parentNode; node instanceof Element; node = node.parentNode) {
-              if (node.localName == "tabbrowser")
-                return node;
+            if (this.ownerGlobal.gBrowser && this.ownerGlobal.gBrowser.getTabForBrowser(this)) {
+              return this.ownerGlobal.gBrowser;
             }
             return null;
           ]]>
         </body>
       </method>
 
       <field name="_finder">null</field>
 
