# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  5d454884042578616b3776001d520c9cb9aee0d0
Debug issue for loading browser toolbox

diff --git a/browser/devtools/framework/ToolboxProcess.jsm b/browser/devtools/framework/ToolboxProcess.jsm
--- a/browser/devtools/framework/ToolboxProcess.jsm
+++ b/browser/devtools/framework/ToolboxProcess.jsm
@@ -213,16 +213,20 @@ BrowserToolboxProcess.prototype = {
     // was present in order to also clear the child profile's startup cache as
     // well.
     //
     // As an approximation of "isLocalBuild", check for an unofficial build.
     if (!Services.appinfo.isOfficial) {
       args.push("-purgecaches");
     }
 
+    const {console} = Components.utils.import("resource://gre/modules/devtools/Console.jsm", {});
+    console.log(args.join(" "));
+    // XXX: ./mach run --no-remote --foreground --profile /Users/bgrinstead/Library/Caches/Firefox/Profiles/ddby3ds8.dev/rome_debugger_profile --chrome chrome://browser/content/devtools/framework/toolbox-process-window.xul --purgecaches
+
     // Disable safe mode for the new process in case this was opened via the
     // keyboard shortcut.
     let nsIEnvironment = Components.classes["@mozilla.org/process/environment;1"].getService(Components.interfaces.nsIEnvironment);
     let originalValue = nsIEnvironment.get("MOZ_DISABLE_SAFE_MODE_KEY");
     nsIEnvironment.set("MOZ_DISABLE_SAFE_MODE_KEY", "1");
 
     process.runwAsync(args, args.length, { observe: () => this.close() });
 
diff --git a/browser/devtools/framework/toolbox-process-window.xul b/browser/devtools/framework/toolbox-process-window.xul
--- a/browser/devtools/framework/toolbox-process-window.xul
+++ b/browser/devtools/framework/toolbox-process-window.xul
@@ -32,10 +32,11 @@
          command="toolbox-cmd-close"
          modifiers="accel"/>
   </keyset>
 
   <!-- This will be used by the Web Console to hold any popups it may create,
        for example when viewing network request details. -->
   <popupset id="mainPopupSet"></popupset>
 
+  Loading browser toolbox
   <iframe id="toolbox-iframe" flex="1"></iframe>
 </window>
