# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  1cc6294c9a50e2c79563e8ec22a12f15a78aa886

diff --git a/toolkit/content/widgets/panel.js b/toolkit/content/widgets/panel.js
--- a/toolkit/content/widgets/panel.js
+++ b/toolkit/content/widgets/panel.js
@@ -3,35 +3,30 @@
  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
 
 "use strict";
 
 // This is loaded into all XUL windows. Wrap in a block to prevent
 // leaking to window scope.
 {
   class MozPanel extends MozElements.MozElementMixin(XULPopupElement) {
-    constructor() {
-      super();
-
+    connectedCallback() {
+      if (this.hasConnected) {
+        return;
+      }
+      this.hasConnected = true;
       this._prevFocus = 0;
 
       this.addEventListener("popupshowing", this);
       this.addEventListener("popupshown", this);
       this.addEventListener("popuphiding", this);
       this.addEventListener("popuphidden", this);
       this.addEventListener("popuppositioned", this);
 
       this.attachShadow({ mode: "open" });
-    }
-
-    connectedCallback() {
-      if (this.delayConnectedCallback()) {
-        return;
-      }
-
       if (!this.isArrowPanel) {
         this.shadowRoot.appendChild(document.createElement("slot"));
         return;
       }
 
       this.shadowRoot.appendChild(this.fragment);
 
       if (!this.hasAttribute("flip")) {
