# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  56188620cce00b19700fbb8efaafea65e6ca8c61
Bug 1374837 - See if this works

diff --git a/toolkit/modules/subprocess/subprocess_worker_win.js b/toolkit/modules/subprocess/subprocess_worker_win.js
--- a/toolkit/modules/subprocess/subprocess_worker_win.js
+++ b/toolkit/modules/subprocess/subprocess_worker_win.js
@@ -368,22 +368,22 @@ class Process extends BaseProcess {
     };
 
     their_pipes[0] = pipe(false);
     their_pipes[1] = pipe(true);
 
     if (stderr == "pipe") {
       their_pipes[2] = pipe(true);
     } else {
-      let srcHandle;
-      if (stderr == "stdout") {
-        srcHandle = their_pipes[1];
-      } else {
-        srcHandle = libc.GetStdHandle(win32.STD_ERROR_HANDLE);
-      }
+      let srcHandle = their_pipes[1];
+      // if (stderr == "stdout") {
+      //   srcHandle = their_pipes[1];
+      // } else {
+      //   srcHandle = libc.GetStdHandle(win32.STD_ERROR_HANDLE);
+      // }
 
       // If we don't have a valid stderr handle, just pass it along without duplicating.
       if (String(srcHandle) == win32.INVALID_HANDLE_VALUE ||
           String(srcHandle) == win32.NULL_HANDLE_VALUE) {
         their_pipes[2] = srcHandle;
       } else {
         let handle = win32.HANDLE();
 
