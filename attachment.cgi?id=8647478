# HG changeset patch
# User Tim Nguyen <ntim.bugs@gmail.com>
# Parent  72a33a7ef744928f3595c7a52ed2d892c06ddffc
Bug 1194196 - Make TableWidget cells selectable. r=bgrins

diff --git a/browser/devtools/shared/widgets/TableWidget.js b/browser/devtools/shared/widgets/TableWidget.js
--- a/browser/devtools/shared/widgets/TableWidget.js
+++ b/browser/devtools/shared/widgets/TableWidget.js
@@ -954,35 +954,35 @@ Cell.prototype = {
 
   get id() {
     return this._id;
   },
 
   set value(value) {
     this._value = value;
     if (value == null) {
-      this.label.setAttribute("value", "");
+      this.label.textContent = "";
       return;
     }
 
     if (!(value instanceof Ci.nsIDOMNode) &&
         value.length > MAX_VISIBLE_STRING_SIZE) {
-      value = value .substr(0, MAX_VISIBLE_STRING_SIZE) + "\u2026"; // …
+      value = value.substr(0, MAX_VISIBLE_STRING_SIZE) + "\u2026"; // …
     }
 
     if (value instanceof Ci.nsIDOMNode) {
-      this.label.removeAttribute("value");
+      this.label.textContent = "";
 
       while (this.label.firstChild) {
         this.label.removeChild(this.label.firstChild);
       }
 
       this.label.appendChild(value);
     } else {
-      this.label.setAttribute("value", value + "");
+      this.label.textContent = value;
     }
   },
 
   get value() {
     return this._value;
   },
 
   toggleClass: function(className) {
diff --git a/browser/themes/shared/devtools/widgets.inc.css b/browser/themes/shared/devtools/widgets.inc.css
--- a/browser/themes/shared/devtools/widgets.inc.css
+++ b/browser/themes/shared/devtools/widgets.inc.css
@@ -1268,21 +1268,29 @@
 /* Cells */
 
 .table-widget-cell {
   width: 100%;
   padding: 3px 4px;
   background-clip: padding-box;
   min-width: 100px;
   -moz-user-focus: normal;
+  -moz-user-select: text;
+  white-space: nowrap;
+  text-overflow: ellipsis;
+  overflow: hidden;
   margin-bottom: -1px !important;
   border-bottom: 1px solid transparent;
   color: var(--theme-body-color);
 }
 
+.table-widget-cell::-moz-selection {
+  background-color: var(--theme-highlight-orange);
+  color: var(--theme-selection-color);
+}
 .table-widget-cell:last-child {
   border-bottom: 1px solid var(--table-splitter-color);
 }
 
 :root:not(.filtering) .table-widget-cell:nth-child(odd):not(.theme-selected),
 .table-widget-cell:not(.theme-selected)[odd] {
   background: var(--table-zebra-background);
 }
