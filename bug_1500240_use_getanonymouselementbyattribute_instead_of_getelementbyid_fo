# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Date 1539895449 25200
#      Thu Oct 18 13:44:09 2018 -0700
# Node ID dfb274c07336d161926777c3e72b7828cf6485c0
# Parent  733484af9034cb0372ed1fd745ec3d321d48e8b9
Bug 1500240 - Use getAnonymousElementByAttribute instead of getElementByID for XBL anonymous search element;r=dao

Differential Revision: https://phabricator.services.mozilla.com/D9150

diff --git a/browser/base/content/test/urlbar/browser_urlbarSearchSuggestions_opt-out.js b/browser/base/content/test/urlbar/browser_urlbarSearchSuggestions_opt-out.js
--- a/browser/base/content/test/urlbar/browser_urlbarSearchSuggestions_opt-out.js
+++ b/browser/base/content/test/urlbar/browser_urlbarSearchSuggestions_opt-out.js
@@ -50,17 +50,17 @@ add_task(async function focus() {
   // Start searching.
   EventUtils.sendString("rnd");
   await promiseSearchComplete();
   Assert.ok(suggestionsPresent());
   assertVisible(true);
   assertFooterVisible(true);
 
   // Check the Change Options link.
-  let changeOptionsLink = document.getElementById("search-suggestions-change-settings");
+  let changeOptionsLink = document.getAnonymousElementByAttribute(gURLBar.popup, "id", "search-suggestions-change-settings");
   let prefsPromise = BrowserTestUtils.waitForLocationChange(gBrowser, "about:preferences#search");
   changeOptionsLink.click();
   await prefsPromise;
   Assert.ok(!gURLBar.popup.popupOpen, "popup should be closed");
   // The preferences page does fancy stuff with focus, ensure to unload it.
   await BrowserTestUtils.loadURI(gBrowser.selectedBrowser, "about:blank");
 });
 
