# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  c511ad826fe71ba2bb956d2e1c119e86d2266aba
Bug 1370442 - Update keybindings test to always use the new debugger frontend;r=pbro

This is a workaround for one release of the old debugger frontend which swallows
the netmonitor shortcut.

diff --git a/devtools/client/framework/test/browser_keybindings_01.js b/devtools/client/framework/test/browser_keybindings_01.js
--- a/devtools/client/framework/test/browser_keybindings_01.js
+++ b/devtools/client/framework/test/browser_keybindings_01.js
@@ -3,16 +3,24 @@
 /* Any copyright is dedicated to the Public Domain.
  * http://creativecommons.org/publicdomain/zero/1.0/ */
 
 // Tests that the keybindings for opening and closing the inspector work as expected
 // Can probably make this a shared test that tests all of the tools global keybindings
 const TEST_URL = "data:text/html,<html><head><title>Test for the " +
                  "highlighter keybindings</title></head><body>" +
                  "<h1>Keybindings!</h1></body></html>"
+
+// Use the new debugger frontend because the old one swallows the netmonitor shortcut:
+// https://bugzilla.mozilla.org/show_bug.cgi?id=1370442#c7
+Services.prefs.setBoolPref("devtools.debugger.new-debugger-frontend", true);
+registerCleanupFunction(function* () {
+  Services.prefs.clearUserPref("devtools.debugger.new-debugger-frontend");
+});
+
 function test()
 {
   waitForExplicitFinish();
 
   let doc;
   let node;
   let inspector;
   let keysetMap = { };
