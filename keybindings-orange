# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  4dd1d17ba22660b8f5869a707f2e4e9f9dd5be5b
Bug 1370442 - Update keybindings test to work around old debugger frontend;r=pbro

The old debugger frontend swallows the new netmonitor keyboard shortcut. Since it's
off in nightly and on by default in beta this would cause a perma orange. This is just
a workaround since the new debugger is planned to ship next release

diff --git a/devtools/client/framework/test/browser_keybindings_01.js b/devtools/client/framework/test/browser_keybindings_01.js
--- a/devtools/client/framework/test/browser_keybindings_01.js
+++ b/devtools/client/framework/test/browser_keybindings_01.js
@@ -80,36 +80,33 @@ function test()
     });
   }
 
   function webconsoleShouldBeSelected(aToolbox)
   {
     is(aToolbox.currentToolId, "webconsole", "webconsole should be selected.");
 
     gDevTools.once("select-tool-command", () => {
-      jsdebuggerShouldBeSelected(aToolbox);
+      netmonitorShouldBeSelected(aToolbox);
     });
-    keysetMap.jsdebugger.synthesizeKey();
+    keysetMap.netmonitor.synthesizeKey();
   }
 
   function jsdebuggerShouldBeSelected(aToolbox)
   {
     is(aToolbox.currentToolId, "jsdebugger", "jsdebugger should be selected.");
-
-    gDevTools.once("select-tool-command", () => {
-      netmonitorShouldBeSelected(aToolbox);
-    });
-
-    keysetMap.netmonitor.synthesizeKey();
+    finishUp();
   }
 
   function netmonitorShouldBeSelected(aToolbox, panel)
   {
-    is(aToolbox.currentToolId, "netmonitor", "netmonitor should be selected.");
-    finishUp();
+    gDevTools.once("select-tool-command", () => {
+      jsdebuggerShouldBeSelected(aToolbox);
+    });
+    keysetMap.jsdebugger.synthesizeKey();
   }
 
   function finishUp() {
     doc = node = inspector = keysetMap = null;
     gBrowser.removeCurrentTab();
     finish();
   }
 }
diff --git a/devtools/client/preferences/debugger.js b/devtools/client/preferences/debugger.js
--- a/devtools/client/preferences/debugger.js
+++ b/devtools/client/preferences/debugger.js
@@ -1,15 +1,15 @@
 /* Any copyright is dedicated to the Public Domain.
  * http://creativecommons.org/publicdomain/zero/1.0/ */
 
 #ifdef RELEASE_OR_BETA
 pref("devtools.debugger.new-debugger-frontend", false);
 #else
-pref("devtools.debugger.new-debugger-frontend", true);
+pref("devtools.debugger.new-debugger-frontend", false);
 #endif
 
 // Enable the Debugger
 pref("devtools.debugger.enabled", true);
 pref("devtools.debugger.chrome-debugging-host", "localhost");
 pref("devtools.debugger.chrome-debugging-port", 6080);
 pref("devtools.debugger.chrome-debugging-websocket", false);
 pref("devtools.debugger.remote-host", "localhost");
