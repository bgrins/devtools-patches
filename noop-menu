# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  b72102b34c04f9b66bd79f359a16cd8f0563c2f1

diff --git a/toolkit/content/widgets/menu.js b/toolkit/content/widgets/menu.js
--- a/toolkit/content/widgets/menu.js
+++ b/toolkit/content/widgets/menu.js
@@ -178,70 +178,79 @@ class MozMenu extends MozMenuBaseMixin(M
     return this.matches("menupopup menu");
   }
 
   get isIconic() {
     return this.classList.contains("menu-iconic");
   }
 
   get fragment() {
-    let {isMenubarChild, isIconic} = this;
-    let fragment = null;
-    // Add aria-hidden="true" on all DOM, since XULMenuAccessible handles accessibility here.
-    if (isMenubarChild && isIconic) {
-      if (!MozMenu.menubarIconicFrag) {
-        MozMenu.menubarIconicFrag = MozXULElement.parseXULToFragment(`
-          <image class="menubar-left" aria-hidden="true"/>
-          <label class="menubar-text" crop="right" aria-hidden="true"/>
-        `);
-      }
-      fragment = document.importNode(MozMenu.menubarIconicFrag, true);
-    }
-    if (isMenubarChild && !isIconic) {
-      if (!MozMenu.menubarFrag) {
-        MozMenu.menubarFrag = MozXULElement.parseXULToFragment(`
-          <label class="menubar-text" crop="right" aria-hidden="true"/>
-        `);
-      }
-      fragment = document.importNode(MozMenu.menubarFrag, true);
-    }
-    if (!isMenubarChild && isIconic) {
-      if (!MozMenu.normalIconicFrag) {
-        MozMenu.normalIconicFrag = MozXULElement.parseXULToFragment(`
-          <hbox class="menu-iconic-left" align="center" pack="center" aria-hidden="true">
-            <image class="menu-iconic-icon"/>
-          </hbox>
-          <label class="menu-iconic-text" flex="1" crop="right" aria-hidden="true"/>
-          <label class="menu-iconic-highlightable-text" crop="right" aria-hidden="true"/>
-          <hbox class="menu-accel-container" anonid="accel" aria-hidden="true">
-            <label class="menu-iconic-accel"/>
-          </hbox>
-          <hbox align="center" class="menu-right" aria-hidden="true">
-            <image/>
-          </hbox>
-       `);
-      }
+    // let {isMenubarChild, isIconic} = this;
+    let fragment = document.createDocumentFragment();
+    let img = document.createXULElement("image");
+    img.setAttribute("aria-hidden", "true");
+    img.setAttribute("class", "menubar-left");
+    let label = document.createXULElement("image");
+    label.setAttribute("aria-hidden", "true");
+    label.setAttribute("crop", "right");
+    label.setAttribute("class", "menubar-text");
+    fragment.appendChild(img);
+    fragment.appendChild(label);
+    // // Add aria-hidden="true" on all DOM, since XULMenuAccessible handles accessibility here.
+    // if (isMenubarChild && isIconic) {
+    //   if (!MozMenu.menubarIconicFrag) {
+    //     MozMenu.menubarIconicFrag = MozXULElement.parseXULToFragment(`
+    //       <image class="menubar-left" aria-hidden="true"/>
+    //       <label class="menubar-text" crop="right" aria-hidden="true"/>
+    //     `);
+    //   }
+    //   fragment = document.importNode(MozMenu.menubarIconicFrag, true);
+    // }
+    // if (isMenubarChild && !isIconic) {
+    //   if (!MozMenu.menubarFrag) {
+    //     MozMenu.menubarFrag = MozXULElement.parseXULToFragment(`
+    //       <label class="menubar-text" crop="right" aria-hidden="true"/>
+    //     `);
+    //   }
+    //   fragment = document.importNode(MozMenu.menubarFrag, true);
+    // }
+    // if (!isMenubarChild && isIconic) {
+    //   if (!MozMenu.normalIconicFrag) {
+    //     MozMenu.normalIconicFrag = MozXULElement.parseXULToFragment(`
+    //       <hbox class="menu-iconic-left" align="center" pack="center" aria-hidden="true">
+    //         <image class="menu-iconic-icon"/>
+    //       </hbox>
+    //       <label class="menu-iconic-text" flex="1" crop="right" aria-hidden="true"/>
+    //       <label class="menu-iconic-highlightable-text" crop="right" aria-hidden="true"/>
+    //       <hbox class="menu-accel-container" anonid="accel" aria-hidden="true">
+    //         <label class="menu-iconic-accel"/>
+    //       </hbox>
+    //       <hbox align="center" class="menu-right" aria-hidden="true">
+    //         <image/>
+    //       </hbox>
+    //    `);
+    //   }
 
-      fragment = document.importNode(MozMenu.normalIconicFrag, true);
-    }
-    if (!isMenubarChild && !isIconic) {
-      if (!MozMenu.normalFrag) {
-        MozMenu.normalFrag = MozXULElement.parseXULToFragment(`
-          <label class="menu-text" crop="right" aria-hidden="true"/>
-          <hbox class="menu-accel-container" anonid="accel" aria-hidden="true">
-            <label class="menu-accel"/>
-          </hbox>
-          <hbox align="center" class="menu-right" aria-hidden="true">
-            <image/>
-          </hbox>
-       `);
-      }
+    //   fragment = document.importNode(MozMenu.normalIconicFrag, true);
+    // }
+    // if (!isMenubarChild && !isIconic) {
+    //   if (!MozMenu.normalFrag) {
+    //     MozMenu.normalFrag = MozXULElement.parseXULToFragment(`
+    //       <label class="menu-text" crop="right" aria-hidden="true"/>
+    //       <hbox class="menu-accel-container" anonid="accel" aria-hidden="true">
+    //         <label class="menu-accel"/>
+    //       </hbox>
+    //       <hbox align="center" class="menu-right" aria-hidden="true">
+    //         <image/>
+    //       </hbox>
+    //    `);
+    //   }
 
-      fragment = document.importNode(MozMenu.normalFrag, true);
-    }
+    //   fragment = document.importNode(MozMenu.normalFrag, true);
+    // }
     return fragment;
   }
 
   render() {
     // There are 2 main types of menus:
     //  (1) direct descendant of a menubar
     //  (2) all other menus
     // There is also an "iconic" variation of (1) and (2) based on the class.
