# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  de5e26d481cd5ffab32f9b268672befc6c384edc
Bug 1360282 - Use querySelectorAll instead of getElementsByAttribute and a condition

MozReview-Commit-ID: Fq6pXxiSZ7b

diff --git a/browser/base/content/browser-sidebar.js b/browser/base/content/browser-sidebar.js
--- a/browser/base/content/browser-sidebar.js
+++ b/browser/base/content/browser-sidebar.js
@@ -289,24 +289,18 @@ var SidebarUI = {
         reject(new Error("Invalid sidebar broadcaster specified: " + commandID));
         return;
       }
 
       if (this.isOpen && commandID != this.currentID) {
         BrowserUITelemetry.countSidebarEvent(this.currentID, "hide");
       }
 
-      let broadcasters = document.getElementsByAttribute("group", "sidebar");
+      let broadcasters = document.querySelectorAll("broadcaster[group=sidebar]");
       for (let broadcaster of broadcasters) {
-        // skip elements that observe sidebar broadcasters and random
-        // other elements
-        if (broadcaster.localName != "broadcaster") {
-          continue;
-        }
-
         if (broadcaster != sidebarBroadcaster) {
           broadcaster.removeAttribute("checked");
         } else {
           sidebarBroadcaster.setAttribute("checked", "true");
         }
       }
 
       this._setVisibility(true);
