# HG changeset patch
# User Tim Nguyen <ntim.bugs@gmail.com>
# Parent  0edf9ec8ff4cf3c92f7a3eda908212868d81e14f
Bug 1183280 - Remove unnecessary platform specific preprocessor directives. r=bgrins

diff --git a/devtools/client/jar.mn b/devtools/client/jar.mn
--- a/devtools/client/jar.mn
+++ b/devtools/client/jar.mn
@@ -144,17 +144,17 @@ devtools.jar:
     content/shared/widgets/filter-widget.css (shared/widgets/filter-widget.css)
     content/eyedropper/eyedropper.xul (eyedropper/eyedropper.xul)
     content/eyedropper/crosshairs.css (eyedropper/crosshairs.css)
     content/eyedropper/nocursor.css (eyedropper/nocursor.css)
     content/aboutdebugging/aboutdebugging.xhtml (aboutdebugging/aboutdebugging.xhtml)
     content/aboutdebugging/aboutdebugging.css (aboutdebugging/aboutdebugging.css)
     content/aboutdebugging/aboutdebugging.js (aboutdebugging/aboutdebugging.js)
 %   skin devtools classic/1.0 %skin/
-*   skin/common.css (themes/common.css)
+    skin/common.css (themes/common.css)
     skin/dark-theme.css (themes/dark-theme.css)
     skin/light-theme.css (themes/light-theme.css)
     skin/toolbars.css (themes/toolbars.css)
     skin/variables.css (themes/variables.css)
     skin/images/add.svg (themes/images/add.svg)
     skin/images/filters.svg (themes/images/filters.svg)
     skin/images/filter-swatch.svg (themes/images/filter-swatch.svg)
     skin/images/pseudo-class.svg (themes/images/pseudo-class.svg)
@@ -171,17 +171,17 @@ devtools.jar:
     skin/images/filetypes/dir-close.svg (themes/images/filetypes/dir-close.svg)
     skin/images/filetypes/dir-open.svg (themes/images/filetypes/dir-open.svg)
     skin/images/filetypes/globe.svg (themes/images/filetypes/globe.svg)
     skin/images/filetypes/store.svg (themes/images/filetypes/store.svg)
     skin/images/commandline-icon.png (themes/images/commandline-icon.png)
     skin/images/commandline-icon@2x.png (themes/images/commandline-icon@2x.png)
     skin/images/alerticon-warning.png (themes/images/alerticon-warning.png)
     skin/images/alerticon-warning@2x.png (themes/images/alerticon-warning@2x.png)
-*   skin/ruleview.css (themes/ruleview.css)
+    skin/ruleview.css (themes/ruleview.css)
     skin/commandline.css (themes/commandline.css)
     skin/images/command-paintflashing.png (themes/images/command-paintflashing.png)
     skin/images/command-paintflashing@2x.png (themes/images/command-paintflashing@2x.png)
     skin/images/command-screenshot.png (themes/images/command-screenshot.png)
     skin/images/command-screenshot@2x.png (themes/images/command-screenshot@2x.png)
     skin/images/command-responsivemode.png (themes/images/command-responsivemode.png)
     skin/images/command-responsivemode@2x.png (themes/images/command-responsivemode@2x.png)
     skin/images/command-scratchpad.png (themes/images/command-scratchpad.png)
@@ -201,26 +201,26 @@ devtools.jar:
     skin/images/command-measure.png (themes/images/command-measure.png)
     skin/images/command-measure@2x.png (themes/images/command-measure@2x.png)
     skin/markup-view.css (themes/markup-view.css)
     skin/images/editor-error.png (themes/images/editor-error.png)
     skin/images/editor-breakpoint.png (themes/images/editor-breakpoint.png)
     skin/images/editor-breakpoint@2x.png (themes/images/editor-breakpoint@2x.png)
     skin/images/editor-debug-location.png (themes/images/editor-debug-location.png)
     skin/images/editor-debug-location@2x.png (themes/images/editor-debug-location@2x.png)
-*   skin/webconsole.css (themes/webconsole.css)
+    skin/webconsole.css (themes/webconsole.css)
     skin/images/webconsole.svg (themes/images/webconsole.svg)
     skin/images/breadcrumbs-divider@2x.png (themes/images/breadcrumbs-divider@2x.png)
     skin/images/breadcrumbs-scrollbutton.png (themes/images/breadcrumbs-scrollbutton.png)
     skin/images/breadcrumbs-scrollbutton@2x.png (themes/images/breadcrumbs-scrollbutton@2x.png)
     skin/animationinspector.css (themes/animationinspector.css)
     skin/eyedropper.css (themes/eyedropper.css)
     skin/canvasdebugger.css (themes/canvasdebugger.css)
     skin/debugger.css (themes/debugger.css)
-*   skin/netmonitor.css (themes/netmonitor.css)
+    skin/netmonitor.css (themes/netmonitor.css)
     skin/performance.css (themes/performance.css)
     skin/memory.css (themes/memory.css)
     skin/promisedebugger.css (themes/promisedebugger.css)
     skin/images/timeline-filter.svg (themes/images/timeline-filter.svg)
     skin/scratchpad.css (themes/scratchpad.css)
     skin/shadereditor.css (themes/shadereditor.css)
     skin/storage.css (themes/storage.css)
 *   skin/splitview.css (themes/splitview.css)
@@ -279,19 +279,19 @@ devtools.jar:
     skin/images/responsivemode/responsiveui-screenshot@2x.png (themes/images/responsivemode/responsiveui-screenshot@2x.png)
     skin/images/responsivemode/responsiveui-home.png (themes/images/responsivemode/responsiveui-home.png)
     skin/images/toggle-tools.png (themes/images/toggle-tools.png)
     skin/images/toggle-tools@2x.png (themes/images/toggle-tools@2x.png)
     skin/images/dock-bottom@2x.png (themes/images/dock-bottom@2x.png)
     skin/images/dock-bottom-minimize@2x.png (themes/images/dock-bottom-minimize@2x.png)
     skin/images/dock-bottom-maximize@2x.png (themes/images/dock-bottom-maximize@2x.png)
     skin/images/dock-side@2x.png (themes/images/dock-side@2x.png)
-*   skin/floating-scrollbars.css (themes/floating-scrollbars.css)
+    skin/floating-scrollbars.css (themes/floating-scrollbars.css)
     skin/floating-scrollbars-light.css (themes/floating-scrollbars-light.css)
-*   skin/inspector.css (themes/inspector.css)
+    skin/inspector.css (themes/inspector.css)
     skin/images/profiler-stopwatch.svg (themes/images/profiler-stopwatch.svg)
     skin/images/profiler-stopwatch-checked.svg (themes/images/profiler-stopwatch-checked.svg)
     skin/images/tool-options.svg (themes/images/tool-options.svg)
     skin/images/tool-webconsole.svg (themes/images/tool-webconsole.svg)
     skin/images/tool-canvas.svg (themes/images/tool-canvas.svg)
     skin/images/tool-debugger.svg (themes/images/tool-debugger.svg)
     skin/images/tool-debugger-paused.svg (themes/images/tool-debugger-paused.svg)
     skin/images/tool-inspector.svg (themes/images/tool-inspector.svg)
diff --git a/devtools/client/themes/common.css b/devtools/client/themes/common.css
--- a/devtools/client/themes/common.css
+++ b/devtools/client/themes/common.css
@@ -1,30 +1,31 @@
-%if 0
 /* This Source Code Form is subject to the terms of the Mozilla Public
  * License, v. 2.0. If a copy of the MPL was not distributed with this
  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
-%endif
 
 :root {
   font: message-box;
-%ifdef XP_MACOSX
+  --monospace-font-family: monospace;
+}
+
+:root[platform="mac"] {
   --monospace-font-family: Menlo, monospace;
-%elifdef XP_WIN
+}
+
+:root[platform="win"] {
   --monospace-font-family: Consolas, monospace;
-%else
-  --monospace-font-family: monospace;
-%endif
 }
 
 .devtools-monospace {
   font-family: var(--monospace-font-family);
-%if defined(MOZ_WIDGET_GTK) || defined(MOZ_WIDGET_QT)
+}
+
+:root[platform="linux"] .devtools-monospace {
   font-size: 80%;
-%endif
 }
 
 /* Bottom-docked toolbox minimize transition */
 .devtools-toolbox-bottom-iframe {
   transition: margin-bottom .1s;
 }
 
 /* Splitters */
diff --git a/devtools/client/themes/floating-scrollbars.css b/devtools/client/themes/floating-scrollbars.css
--- a/devtools/client/themes/floating-scrollbars.css
+++ b/devtools/client/themes/floating-scrollbars.css
@@ -2,48 +2,43 @@
 
 scrollbar {
   -moz-appearance: none !important;
   position: relative;
   background-color: transparent;
   background-image: none;
   z-index: 2147483647;
   padding: 2px;
-%ifdef XP_MACOSX
-  border: 0px solid transparent;
-%endif
+  border: none;
 }
 
 /* Scrollbar code will reset the margin to the correct side depending on
    where layout actually puts the scrollbar */
 scrollbar[orient="vertical"] {
   margin-left: -10px;
   min-width: 10px;
   max-width: 10px;
 }
 
 scrollbar[orient="horizontal"] {
   margin-top: -10px;
   min-height: 10px;
   max-height: 10px;
 }
 
-%ifdef XP_MACOSX
-slider {
+scrollbar slider {
   -moz-appearance: none !important;
 }
 
-thumb {
-  -moz-appearance: none !important;
-  background-color: rgba(0,0,0,0.2);
-  border-radius: 3px;
-}
-%else
 scrollbar thumb {
   -moz-appearance: none !important;
-  border-width: 0px !important;
+  border: none !important;
   background-color: rgba(170,170,170,0.2) !important;
   border-radius: 3px !important;
 }
+
+*|*[platform="mac"]:root scrollbar thumb {
+  background-color: rgba(0,0,0,0.2) !important;
+}
+
 scrollbar scrollbarbutton, scrollbar gripper {
   display: none;
 }
-%endif
diff --git a/devtools/client/themes/inspector.css b/devtools/client/themes/inspector.css
--- a/devtools/client/themes/inspector.css
+++ b/devtools/client/themes/inspector.css
@@ -1,25 +1,21 @@
 /* vim:set ts=2 sw=2 sts=2 et: */
 /* This Source Code Form is subject to the terms of the Mozilla Public
  * License, v. 2.0. If a copy of the MPL was not distributed with this
  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
 
-%ifdef XP_MACOSX
-
-#inspector-toolbar:-moz-locale-dir(ltr) {
+:root[platform="mac"] #inspector-toolbar:-moz-locale-dir(ltr) {
   padding-left: 2px;
 }
 
-#inspector-toolbar:-moz-locale-dir(rtl) {
+:root[platform="mac"] #inspector-toolbar:-moz-locale-dir(rtl) {
   padding-left: 4px;
 }
 
-%endif
-
 #inspector-searchbox {
   transition-property: max-width, -moz-padding-end, -moz-padding-start;
   transition-duration: 250ms;
   transition-timing-function: ease;
 }
 
 #inspector-searchbox:not([focused]):not([filled]) > .textbox-input-box {
   overflow: hidden;
diff --git a/devtools/client/themes/netmonitor.css b/devtools/client/themes/netmonitor.css
--- a/devtools/client/themes/netmonitor.css
+++ b/devtools/client/themes/netmonitor.css
@@ -831,60 +831,58 @@ box.requests-menu-status[code^="5"] {
     border-width: 0 !important;
     box-shadow: none !important;
     /* The "Timeline" header is not visible anymore, and thus the
        right border and box-shadow of "Size" column should be hidden. */
   }
 }
 
 /* Platform overrides (copied in from the old platform specific files) */
-%ifdef XP_WIN
-.requests-menu-header-button > .button-box {
+:root[platform="win"] .requests-menu-header-button > .button-box {
   padding: 0;
 }
 
-.requests-menu-timings-division {
+:root[platform="win"] .requests-menu-timings-division {
   padding-top: 1px;
   font-size: 90%;
 }
 
-.requests-menu-footer-button,
-.requests-menu-footer-label {
+:root[platform="win"] .requests-menu-footer-button,
+:root[platform="win"] .requests-menu-footer-label {
   padding-top: 0px;
   padding-bottom: 0px;
 }
 
 /* Responsive sidebar */
 @media (max-width: 700px) {
-  .requests-menu-footer-button,
-  .requests-menu-footer-label {
+  :root[platform="win"] .requests-menu-footer-button,
+  :root[platform="win"] .requests-menu-footer-label {
     padding-top: 0px;
     padding-bottom: 0px;
   }
 }
-%elifdef XP_LINUX
-#headers-summary-resend {
+
+:root[platform="linux"] #headers-summary-resend {
   padding: 4px;
 }
 
-#toggle-raw-headers {
+:root[platform="linux"] #toggle-raw-headers {
   padding: 4px;
 }
 
-.requests-menu-status-and-method {
+:root[platform="linux"] .requests-menu-status-and-method {
   width: 9em;
 }
 
-.requests-menu-security-and-domain {
+:root[platform="linux"] .requests-menu-security-and-domain {
   width: 16vw;
 }
 
-.requests-menu-size {
+:root[platform="linux"] .requests-menu-size {
   width: 6em;
 }
 
 /* Responsive sidebar */
 @media (max-width: 700px) {
-  .requests-menu-header-button {
+  :root[platform="linux"] .requests-menu-header-button {
     font-size: 85%;
   }
 }
-%endif
diff --git a/devtools/client/themes/ruleview.css b/devtools/client/themes/ruleview.css
--- a/devtools/client/themes/ruleview.css
+++ b/devtools/client/themes/ruleview.css
@@ -41,19 +41,20 @@
 .ruleview-header {
   border-top-width: 1px;
   border-bottom-width: 1px;
   border-top-style: solid;
   border-bottom-style: solid;
   padding: 1px 4px;
   -moz-user-select: none;
   word-wrap: break-word;
-%ifndef XP_MACOSX
+}
+
+:root:not([platform="osx"]) .ruleview-header {
   margin-top: 4px;
-%endif
 }
 
 .ruleview-rule-pseudo-element {
   padding-left:20px;
   border-left: solid 10px;
 }
 
 .ruleview-rule,
diff --git a/devtools/client/themes/webconsole.css b/devtools/client/themes/webconsole.css
--- a/devtools/client/themes/webconsole.css
+++ b/devtools/client/themes/webconsole.css
@@ -568,18 +568,16 @@ a {
     margin-top: 3px;
   }
   .hud-console-filter-toolbar .hud-filter-box,
   .hud-console-filter-toolbar .devtools-toolbarbutton {
     margin-top: 5px;
   }
 }
 
-%ifdef XP_WIN
 /*
  * This hardcoded width likely due to a toolkit Windows specific bug.
  * See http://hg.mozilla.org/mozilla-central/annotate/f38d6df93cad/toolkit/themes/winstripe/global/textbox-aero.css#l7
  */
 
-.hud-filter-box {
+:root[platform="win"] .hud-filter-box {
   width: 200px;
 }
-%endif
diff --git a/devtools/client/themes/widgets.css b/devtools/client/themes/widgets.css
--- a/devtools/client/themes/widgets.css
+++ b/devtools/client/themes/widgets.css
@@ -215,21 +215,20 @@
 }
 
 .breadcrumbs-widget-item > .button-box {
   border: none;
   padding-top: 0;
   padding-bottom: 0;
 }
 
-%ifdef XP_WIN
 .breadcrumbs-widget-item:-moz-focusring > .button-box {
-  border-width: 0;
+  /* !important is needed to override focus ring on Windows */
+  border: none !important;
 }
-%endif
 
 .breadcrumbs-widget-item:not([checked]) {
   background: -moz-element(#breadcrumb-separator-normal) no-repeat center left;
 }
 
 .breadcrumbs-widget-item[checked] + .breadcrumbs-widget-item {
   background: -moz-element(#breadcrumb-separator-after) no-repeat 0 0;
 }
