# HG changeset patch
# Parent ab1842664b6215a70843bcc87193fef985666b1c
# User Brian Grinstead <bgrinstead@mozilla.com>
Bug 1055333 - Prevent `this.webconsolePanel is undefined` errors on styleeditor test shutdown in e10s;r=harth


diff --git a/browser/devtools/framework/toolbox.js b/browser/devtools/framework/toolbox.js
--- a/browser/devtools/framework/toolbox.js
+++ b/browser/devtools/framework/toolbox.js
@@ -1359,19 +1359,21 @@ Toolbox.prototype = {
     this.off("host-changed", this._refreshHostTitle);
 
     gDevTools.off("tool-registered", this._toolRegistered);
     gDevTools.off("tool-unregistered", this._toolUnregistered);
 
     gDevTools.off("pref-changed", this._prefChanged);
 
     this._lastFocusedElement = null;
-    this._saveSplitConsoleHeight();
-    this.webconsolePanel.removeEventListener("resize",
-      this._saveSplitConsoleHeight);
+    if (this.webconsolePanel) {
+      this._saveSplitConsoleHeight();
+      this.webconsolePanel.removeEventListener("resize",
+        this._saveSplitConsoleHeight);
+    }
     this.closeButton.removeEventListener("command", this.destroy, true);
 
     let outstanding = [];
     for (let [id, panel] of this._toolPanels) {
       try {
         outstanding.push(panel.destroy());
       } catch (e) {
         // We don't want to stop here if any panel fail to close.
