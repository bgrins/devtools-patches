# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  e2a738c9d1c37f2d00dd1e7f3192efa486aae0c1
H:G Enter commit message.  Lines beginning with 'HG:' are removed.
rt

diff --git a/dom/base/nsIDocument.h b/dom/base/nsIDocument.h
--- a/dom/base/nsIDocument.h
+++ b/dom/base/nsIDocument.h
@@ -1834,16 +1834,20 @@ public:
   bool IsSVGDocument() const
   {
     return mType == eSVG;
   }
   bool IsXULDocument() const
   {
     return mType == eXUL;
   }
+  bool IsXULOrXHTML() const
+  {
+    return mType == eXUL || mType == eXHTML;
+  }
   bool IsUnstyledDocument()
   {
     return IsLoadedAsData() || IsLoadedAsInteractiveData();
   }
   bool LoadsFullXULStyleSheetUpFront()
   {
     return IsXULDocument() || AllowXULXBL();
   }
diff --git a/layout/base/nsDocumentViewer.cpp b/layout/base/nsDocumentViewer.cpp
--- a/layout/base/nsDocumentViewer.cpp
+++ b/layout/base/nsDocumentViewer.cpp
@@ -2432,17 +2432,17 @@ nsDocumentViewer::CreateStyleSet(nsIDocu
       styleSet->PrependStyleSheet(SheetType::Agent, sheet);
     }
 
     sheet = cache->FormsSheet();
     if (sheet) {
       styleSet->PrependStyleSheet(SheetType::Agent, sheet);
     }
 
-    if (aDocument->LoadsFullXULStyleSheetUpFront()) {
+    if (aDocument->LoadsFullXULStyleSheetUpFront() && aDocument->IsXULOrXHTML()) {
       // nsXULElement::BindToTree loads xul.css on-demand if we don't load it
       // up-front here.
       sheet = cache->XULSheet();
       if (sheet) {
         styleSet->PrependStyleSheet(SheetType::Agent, sheet);
       }
 
       // This is the only place components.css gets loaded, unlike xul.css
