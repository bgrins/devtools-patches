# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Date 1567096904 25200
#      Thu Aug 29 09:41:44 2019 -0700
# Node ID b8f6e6b97c2edc0826539d3c8744ab0db6a6e866
# Parent  0715c4c7c3bfeb600c81b6255e7bdedf32b577bf
Bug 1573158 - Remove inline styles targeting BMB_bookmarksPopup in places-popup

We were originally going to port these into document sheets, but after inspecting
visually removing these aren't changing the UI.

Differential Revision: https://phabricator.services.mozilla.com/D43845

diff --git a/browser/components/places/content/places-menupopup.js b/browser/components/places/content/places-menupopup.js
--- a/browser/components/places/content/places-menupopup.js
+++ b/browser/components/places/content/places-menupopup.js
@@ -29,68 +29,19 @@
       ];
       for (let event_name of event_names) {
         this.addEventListener(event_name, ev => this[`on_${event_name}`](ev));
       }
 
       this.attachShadow({ mode: "open" });
     }
 
-    get commonStyles() {
-      if (this.closest("#BMB_bookmarksPopup")) {
-        return `
-        /* Remove padding on xul:arrowscrollbox to avoid extra padding on footer */
-        arrowscrollbox.popup-internal-box {
-          padding-bottom: 0px;
-        }
-        .panel-arrowcontainer > .panel-arrowcontent > .popup-internal-box > .scrollbutton-up,
-        .panel-arrowcontainer > .panel-arrowcontent > .popup-internal-box > .scrollbutton-down {
-          -moz-appearance: none;
-          margin-top: 0;
-          margin-bottom: 0;
-        }
-      `;
-      }
-      return "";
-    }
-
-    get styles() {
-      if (!this.closest("#BMB_bookmarksPopup")) {
-        return "";
-      }
-
-      let s = `
-      /* Popups with only one item don't have a footer */
-      :host([singleitempopup=true]) > hbox > .popup-internal-box > .arrowscrollbox-scrollbox,
-      /* These popups never have a footer */
-      :host(#BMB_bookmarksToolbarPopup) > hbox > .popup-internal-box > .arrowscrollbox-scrollbox,
-      :host(#BMB_unsortedBookmarksPopup) > hbox > .popup-internal-box > .arrowscrollbox-scrollbox,
-      :host(#BMB_mobileBookmarksPopup) > hbox > .popup-internal-box > .arrowscrollbox-scrollbox {
-        /* And so they need some bottom padding: */
-        padding-bottom: 4px;
-      }
-    `;
-      switch (AppConstants.platform) {
-        case "linux":
-        case "win":
-          return `${s}
-          /* Add some space at the top because there are no headers: */
-          :host > hbox > .popup-internal-box > .arrowscrollbox-scrollbox  {
-            padding-top: 4px;
-          }
-        `;
-        default:
-          return s;
-      }
-    }
-
     get markup() {
       return `
       <html:link rel="stylesheet" href="chrome://global/skin/global.css" />
-      <html:style>${this.commonStyles}${this.styles}</html:style>
       <hbox flex="1" part="innerbox">
         <vbox part="drop-indicator-bar" hidden="true">
           <image part="drop-indicator" mousethrough="always"></image>
         </vbox>
         <arrowscrollbox class="popup-internal-box" flex="1" orient="vertical"
                         smoothscroll="false" part="popupbox">
           <html:slot></html:slot>
         </arrowscrollbox>
@@ -643,17 +594,16 @@
         ".panel-arrow": "side",
         ".panel-arrowcontent": "side,align,dir,orient,pack",
       };
     }
 
     get markup() {
       return `
       <html:link rel="stylesheet" href="chrome://global/skin/global.css" />
-      <html:style>${this.commonStyles}</html:style>
       <vbox class="panel-arrowcontainer" flex="1">
         <box class="panel-arrowbox">
           <image class="panel-arrow"></image>
         </box>
         <box class="panel-arrowcontent" part="arrowcontent" flex="1">
           <vbox part="drop-indicator-bar" hidden="true">
             <image part="drop-indicator" mousethrough="always"></image>
           </vbox>
diff --git a/browser/themes/shared/customizableui/panelUI.inc.css b/browser/themes/shared/customizableui/panelUI.inc.css
--- a/browser/themes/shared/customizableui/panelUI.inc.css
+++ b/browser/themes/shared/customizableui/panelUI.inc.css
@@ -232,16 +232,21 @@ panelview {
 #BMB_bookmarksPopup {
   max-width: @standaloneSubviewWidth@;
 }
 
 #BMB_bookmarksPopup::part(popupbox) {
   padding: 0;
 }
 
+/* Remove padding on xul:arrowscrollbox to avoid extra padding on footer */
+#BMB_bookmarksPopup menupopup::part(popupbox) {
+  padding-bottom: 0px;
+}
+
 #confirmation-hint {
   --arrowpanel-background: #0060df;
   --arrowpanel-border-color: #0060df;
   --arrowpanel-color: #fff;
   --arrowpanel-padding: 6px 10px;
   font-weight: 400;
   font-size: 1.1rem;
 }
