# HG changeset patch
# Parent 46d13f4a771f1d7334c2d331d74c680236d54f41
# User Brian Grinstead <bgrinstead@mozilla.com>
Bug 1096413 - Draw border around url bar, search box, and back/forward buttons

diff --git a/browser/themes/linux/devedition.css b/browser/themes/linux/devedition.css
--- a/browser/themes/linux/devedition.css
+++ b/browser/themes/linux/devedition.css
@@ -25,17 +25,18 @@
 #PlacesToolbar toolbarbutton.bookmark-item:-moz-any(:hover, [open="true"]) {
   color: initial;
 }
 
 /* Square back and forward buttons */
 #back-button:not(:-moz-lwtheme) > .toolbarbutton-icon,
 #forward-button:not(:-moz-lwtheme) > .toolbarbutton-icon {
   margin: 0;
-  border: none;
+  border: solid 1px var(--chrome-nav-bar-controls-border-color);
+  -moz-border-end: none;
   padding: 2px 6px;
   background: var(--chrome-nav-buttons-background);
   box-shadow: none !important;
 }
 
 /* Override a box shadow for disabled back button */
 #main-window:not([customizing]) #back-button[disabled] > .toolbarbutton-icon {
   box-shadow: none !important;
diff --git a/browser/themes/osx/devedition.css b/browser/themes/osx/devedition.css
--- a/browser/themes/osx/devedition.css
+++ b/browser/themes/osx/devedition.css
@@ -36,27 +36,33 @@
   margin-top: 6px;
 }
 
 /* Square back and forward buttons.  Need !important on these because there
    are a lot of more specific selectors sprinkled around elsewhere for changing
    background / shadows for different states */
 #back-button,
 #forward-button {
-  height: 22px !important;
+  height: 24px !important;
   box-shadow: none !important;
-  border: none !important;
+  border: solid 1px var(--chrome-nav-bar-controls-border-color) !important;
+  -moz-border-end: none !important;
   background: var(--chrome-nav-buttons-background) !important;
 }
 
 #back-button:hover:not([disabled="true"]),
 #forward-button:hover:not([disabled="true"]) {
   background: var(--chrome-nav-buttons-hover-background) !important;
 }
 
+#forward-button > .toolbarbutton-icon {
+  margin-left: 0;
+  margin-right: 0;
+}
+
 #back-button {
   border-radius: 3px 0 0 3px !important;
   padding: 0 !important;
   margin: 0 !important;
 }
 
 #back-button:hover:active:not([disabled="true"]) {
   -moz-image-region: rect(18px, 54px, 36px, 36px);
diff --git a/browser/themes/shared/devedition.inc.css b/browser/themes/shared/devedition.inc.css
--- a/browser/themes/shared/devedition.inc.css
+++ b/browser/themes/shared/devedition.inc.css
@@ -19,16 +19,17 @@
   --chrome-color: #F5F7FA;
   --chrome-secondary-background-color: #39424D;
   --chrome-navigator-toolbox-separator-color: rgba(0,0,0,.2);
   --chrome-nav-bar-separator-color: rgba(0,0,0,.2);
   --chrome-nav-buttons-background: #252C33;
   --chrome-nav-buttons-hover-background: #1B2127;
   --chrome-selection-color: #fff;
   --chrome-selection-background-color: #074D75;
+  --chrome-nav-bar-controls-border-color: #1D2328;
 
   /* Tabs */
   --tabs-toolbar-color: #F5F7FA;
   --tab-background-color: #1C2126;
   --tab-hover-background-color: #07090a;
   --tab-separator-color: #474C50;
   --tab-selection-color: #f5f7fa;
   --tab-selection-background-color: #1a4666;
@@ -74,43 +75,44 @@
   --searchbar-dropmarker-2x-url: url("chrome://browser/skin/devtools/dropmarker.svg");
 }
 
 :root[devtoolstheme="light"] {
   --url-and-searchbar-background-color: #fff;
 
   --chrome-background-color: #E3E4E6;
   --chrome-color: #18191a;
-  --chrome-secondary-background-color: #f0f1f2;
+  --chrome-secondary-background-color: #f5f6f7;
   --chrome-navigator-toolbox-separator-color: #cccccc;
   --chrome-nav-bar-separator-color: #B6B6B8;
-  --chrome-nav-buttons-background: #f0f1f2;
+  --chrome-nav-buttons-background: #FCFCFC;
   --chrome-nav-buttons-hover-background: #DADBDB;
   --chrome-selection-color: #f5f7fa;
   --chrome-selection-background-color: #4c9ed9;
+  --chrome-nav-bar-controls-border-color: #ccc;
 
   --tab-background-color: #E3E4E6;
   --tab-hover-background-color: #D7D8DA;
   --tab-separator-color: #C6C6C7;
   --tab-selection-color: #f5f7fa;
   --tab-selection-background-color: #4c9ed9;
   --tab-selection-box-shadow: 0 2px 0 #d7f1ff inset,
                               0 8px 3px -5px #319BDB inset,
                               0 -1px 0 #2A7CB1 inset;
   --pinned-tab-glow: radial-gradient(22px at center calc(100% - 2px), rgba(76,158,217,0.9) 13%, transparent 16%);
 
 
   /* Toolbar buttons */
-  --toolbarbutton-hover-background: #D7D7D8;
+  --toolbarbutton-hover-background: #FCFCFC;
   --toolbarbutton-hover-boxshadow: none;
   --toolbarbutton-hover-bordercolor: rgba(0,0,0,0.1);
-  --toolbarbutton-active-background: rgba(76,158,217,.5) linear-gradient(rgba(76,158,217,.5), rgba(76,158,217,.5)) border-box
+  --toolbarbutton-active-background: #D7D7D8 linear-gradient(#D7D7D8, #D7D7D8) border-box;
   --toolbarbutton-active-boxshadow: none;
-  --toolbarbutton-active-bordercolor: rgba(0,0,0,0.3);
-  --toolbarbutton-checkedhover-backgroundcolor: rgba(0,0,0,0.2);
+  --toolbarbutton-active-bordercolor: rgba(0,0,0,0.1);
+  --toolbarbutton-checkedhover-backgroundcolor: #D7D7D8;
   --toolbarbutton-combined-boxshadow: none;
   --toolbarbutton-combined-backgroundimage: linear-gradient(rgba(0,0,0,0.1) 0, rgba(0,0,0,0.1) 18px);
 
   /* Url and search bars */
   --search-button-image: url("chrome://browser/skin/devedition/search.svg#search-icon");
 
   /* Menu button separator */
   --panel-ui-button-background-image: linear-gradient(to bottom, transparent, rgba(0,0,0,0.1) 30%, rgba(0,0,0,0.1) 70%, transparent);
@@ -195,25 +197,25 @@ toolbar[brighttext] #downloads-indicator
 }
 
 #TabsToolbar {
   text-shadow: none !important;
   color: var(--chrome-color) !important; /* Make sure that the brighttext attribute is added */
 }
 
 /* URL bar and search bar*/
-/* XXX :root[devtoolstheme="dark"] is a workaround for bug 1096413 on the findbar. */
 #urlbar,
 #navigator-toolbox .searchbar-textbox,
-:root[devtoolstheme="dark"] .browserContainer > findbar .findbar-textbox {
+.browserContainer > findbar .findbar-textbox {
   background-color: var(--url-and-searchbar-background-color) !important;
   background-image: none !important;
   color: var(--url-and-searchbar-color);
-  border: none !important;
+  border: solid 1px var(--chrome-nav-bar-controls-border-color) !important;
   box-shadow: none !important;
+  border-radius: 2px;
 }
 
 window:not([chromehidden~="toolbar"]) #urlbar-wrapper {
   overflow: -moz-hidden-unscrollable;
   clip-path: none;
   -moz-margin-start: 0;
 }
 
diff --git a/browser/themes/windows/devedition.css b/browser/themes/windows/devedition.css
--- a/browser/themes/windows/devedition.css
+++ b/browser/themes/windows/devedition.css
@@ -11,17 +11,18 @@
 #back-button > .toolbarbutton-icon,
 #forward-button > .toolbarbutton-icon {
   background: var(--chrome-nav-buttons-background) !important;
   border-radius: 0 !important;
   width: auto !important;
   height: auto !important;
   padding: 2px 6px !important;
   margin: 0 !important;
-  border: none !important;
+  border: solid 1px var(--chrome-nav-bar-controls-border-color) !important;
+  -moz-border-end: none !important;
   box-shadow: none !important;
 }
 
 /* Override a box shadow for disabled back button */
 #main-window:not([customizing]) #back-button[disabled] > .toolbarbutton-icon {
   box-shadow: none !important;
 }
 
