# HG changeset patch
# User Alexandre Poirot <poirot.alex@gmail.com>

Bug 1235781 - Remove preprocessing from common.css. r=bgrins

diff --git a/browser/base/content/browser.xul b/browser/base/content/browser.xul
index 428a977..ff6a4ba 100644
--- a/browser/base/content/browser.xul
+++ b/browser/base/content/browser.xul
@@ -3,17 +3,17 @@
 # -*- Mode: HTML -*-
 #
 # This Source Code Form is subject to the terms of the Mozilla Public
 # License, v. 2.0. If a copy of the MPL was not distributed with this
 # file, You can obtain one at http://mozilla.org/MPL/2.0/.
 
 <?xml-stylesheet href="chrome://browser/content/browser.css" type="text/css"?>
 <?xml-stylesheet href="chrome://browser/content/places/places.css" type="text/css"?>
-<?xml-stylesheet href="chrome://devtools/skin/common.css" type="text/css"?>
+<?xml-stylesheet href="chrome://devtools/skin/browser.css" type="text/css"?>
 <?xml-stylesheet href="chrome://browser/skin/controlcenter/panel.css" type="text/css"?>
 <?xml-stylesheet href="chrome://browser/skin/customizableui/panelUIOverlay.css" type="text/css"?>
 <?xml-stylesheet href="chrome://browser/skin/" type="text/css"?>
 <?xml-stylesheet href="chrome://browser/skin/browser-lightweightTheme.css" type="text/css"?>
 
 <?xul-overlay href="chrome://global/content/editMenuOverlay.xul"?>
 <?xul-overlay href="chrome://browser/content/baseMenuOverlay.xul"?>
 <?xul-overlay href="chrome://browser/content/places/placesOverlay.xul"?>
diff --git a/devtools/client/jar.mn b/devtools/client/jar.mn
index c45489c..42543e2 100644
--- a/devtools/client/jar.mn
+++ b/devtools/client/jar.mn
@@ -146,17 +146,19 @@ devtools.jar:
     content/shared/widgets/filter-widget.css (shared/widgets/filter-widget.css)
     content/eyedropper/eyedropper.xul (eyedropper/eyedropper.xul)
     content/eyedropper/crosshairs.css (eyedropper/crosshairs.css)
     content/eyedropper/nocursor.css (eyedropper/nocursor.css)
     content/aboutdebugging/aboutdebugging.xhtml (aboutdebugging/aboutdebugging.xhtml)
     content/aboutdebugging/aboutdebugging.css (aboutdebugging/aboutdebugging.css)
     content/aboutdebugging/aboutdebugging.js (aboutdebugging/aboutdebugging.js)
 %   skin devtools classic/1.0 %skin/
-*   skin/common.css (themes/common.css)
+    skin/browser.css (themes/browser.css)
+    skin/common.css (themes/common.css)
+    skin/splitters.css (themes/splitters.css)
     skin/dark-theme.css (themes/dark-theme.css)
     skin/light-theme.css (themes/light-theme.css)
     skin/toolbars.css (themes/toolbars.css)
     skin/variables.css (themes/variables.css)
     skin/images/add.svg (themes/images/add.svg)
     skin/images/filters.svg (themes/images/filters.svg)
     skin/images/filter-swatch.svg (themes/images/filter-swatch.svg)
     skin/images/pseudo-class.svg (themes/images/pseudo-class.svg)
diff --git a/devtools/client/themes/browser.css b/devtools/client/themes/browser.css
new file mode 100644
index 0000000..b6f2f04
--- /dev/null
+++ b/devtools/client/themes/browser.css
@@ -0,0 +1,15 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+@import url("splitters.css");
+
+/* Bottom-docked toolbox minimize transition */
+.devtools-toolbox-bottom-iframe {
+  transition: margin-bottom .1s;
+}
+
+.devtools-toolbox-side-iframe {
+  min-width: 465px;
+}
+
diff --git a/devtools/client/themes/common.css b/devtools/client/themes/common.css
index b298d47..9759c49 100644
--- a/devtools/client/themes/common.css
+++ b/devtools/client/themes/common.css
@@ -1,86 +1,53 @@
-%if 0
 /* This Source Code Form is subject to the terms of the Mozilla Public
  * License, v. 2.0. If a copy of the MPL was not distributed with this
  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
-%endif
+
+@import url("splitters.css");
 
 :root {
   font: message-box;
-%ifdef XP_MACOSX
+}
+
+:root[platform="mac"] {
   --monospace-font-family: Menlo, monospace;
-%elifdef XP_WIN
+}
+
+:root[platform="win"] {
   --monospace-font-family: Consolas, monospace;
-%else
+}
+
+:root[platform="linux"] {
   --monospace-font-family: monospace;
-%endif
 }
 
 .devtools-monospace {
   font-family: var(--monospace-font-family);
-%if defined(MOZ_WIDGET_GTK) || defined(MOZ_WIDGET_QT)
+}
+
+:root[platform="linux"] .devtools-monospace {
   font-size: 80%;
-%endif
 }
 
-/* Bottom-docked toolbox minimize transition */
-.devtools-toolbox-bottom-iframe {
-  transition: margin-bottom .1s;
-}
-
-/* Splitters */
-.devtools-horizontal-splitter {
-  -moz-appearance: none;
-  background-image: none;
-  background-color: transparent;
-  border: 0;
-  border-bottom: 1px solid rgba(118, 121, 125, .5);
-  min-height: 3px;
-  height: 3px;
-  margin-top: -3px;
-  position: relative;
-}
-
-.devtools-side-splitter {
-  -moz-appearance: none;
-  background-image: none;
-  background-color: transparent;
-  border: 0;
-  -moz-border-end: 1px solid rgba(118, 121, 125, .5);
-  min-width: 3px;
-  width: 3px;
-  -moz-margin-start: -3px;
-  position: relative;
-  cursor: e-resize;
-}
-
-.devtools-horizontal-splitter.disabled,
-.devtools-side-splitter.disabled {
-  pointer-events: none;
-}
-
-.devtools-toolbox-side-iframe {
-  min-width: 465px;
-}
 
 /* Autocomplete Popup */
 /* Dark and light theme */
 
 .devtools-autocomplete-popup {
   -moz-appearance: none !important;
   box-shadow: 0 1px 0 hsla(209,29%,72%,.25) inset;
   background-color: transparent;
   border-radius: 3px;
   overflow-x: hidden;
-%if defined(MOZ_WIDGET_GTK) || defined(MOZ_WIDGET_QT)
-  max-height: 32rem;
-%else
   max-height: 40rem;
-%endif
+}
+
+:root[platform="linux"] .devtools-autocomplete-popup {
+  max-height: 32rem;
 }
 
 .devtools-autocomplete-listbox {
   -moz-appearance: none !important;
   background-color: transparent;
   border-width: 0px !important;
 }
 
diff --git a/devtools/client/themes/splitters.css b/devtools/client/themes/splitters.css
new file mode 100644
index 0000000..c712186
--- /dev/null
+++ b/devtools/client/themes/splitters.css
@@ -0,0 +1,34 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+/* Splitters */
+.devtools-horizontal-splitter {
+  -moz-appearance: none;
+  background-image: none;
+  background-color: transparent;
+  border: 0;
+  border-bottom: 1px solid rgba(118, 121, 125, .5);
+  min-height: 3px;
+  height: 3px;
+  margin-top: -3px;
+  position: relative;
+}
+
+.devtools-side-splitter {
+  -moz-appearance: none;
+  background-image: none;
+  background-color: transparent;
+  border: 0;
+  -moz-border-end: 1px solid rgba(118, 121, 125, .5);
+  min-width: 3px;
+  width: 3px;
+  -moz-margin-start: -3px;
+  position: relative;
+  cursor: e-resize;
+}
+
+.devtools-horizontal-splitter.disabled,
+.devtools-side-splitter.disabled {
+  pointer-events: none;
+}

