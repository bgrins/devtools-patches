# HG changeset patch
# Parent 7e2b73a07cc850de43f6e7b9e444a52944371350
# User Kay Plößer <mail@kay.is>
Bug 960730 - Rewrite inline script / style in devtools/framework/connect/connect.xhtml;r=bgrins

diff --git a/browser/devtools/framework/connect/connect.js b/browser/devtools/framework/connect/connect.js
--- a/browser/devtools/framework/connect/connect.js
+++ b/browser/devtools/framework/connect/connect.js
@@ -32,16 +32,20 @@ window.addEventListener("DOMContentLoade
   if (host) {
     document.getElementById("host").value = host;
   }
 
   if (port) {
     document.getElementById("port").value = port;
   }
 
+  let form = document.querySelector("#connection-form form");
+  form.addEventListener("submit", function() {
+    window.submit();
+  });
 }, true);
 
 /**
  * Called when the "connect" button is clicked.
  */
 function submit() {
   // Show the "connecting" screen
   document.body.classList.add("connecting");
diff --git a/browser/devtools/framework/connect/connect.xhtml b/browser/devtools/framework/connect/connect.xhtml
--- a/browser/devtools/framework/connect/connect.xhtml
+++ b/browser/devtools/framework/connect/connect.xhtml
@@ -14,17 +14,17 @@
     <title>&title;</title>
     <link rel="stylesheet" href="chrome://browser/skin/devtools/dark-theme.css" type="text/css"/>
     <link rel="stylesheet" href="chrome://browser/content/devtools/connect.css" type="text/css"/>
     <script type="application/javascript;version=1.8" src="connect.js"></script>
   </head>
   <body>
     <h1>&header;</h1>
     <section id="connection-form">
-      <form validate="validate" onsubmit="window.submit()" action="#">
+      <form validate="validate" action="#">
         <label>
           <span>&host;</span>
           <input required="required" class="devtools-textinput" id="host" type="text"></input>
         </label>
         <label>
           <span>&port;</span>
           <input required="required" class="devtools-textinput" id="port" type="number" pattern="\d+"></input>
         </label>
