# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  64fc74a36a1606092a3cf23b949773b0518908cb
Include line number when sliding breakpoints

diff --git a/devtools/server/actors/script.js b/devtools/server/actors/script.js
--- a/devtools/server/actors/script.js
+++ b/devtools/server/actors/script.js
@@ -2789,17 +2789,17 @@ SourceActor.prototype = {
           // To perform breakpoint sliding for line breakpoints, we need to
           // build a map from line numbers to a list of entry points for each
           // line, implemented as a sparse array. An entry point is a (script,
           // offsets) pair, and represents all offsets in that script that are
           // entry points for the corresponding line.
           let lineToEntryPointsMap = [];
 
           // Iterate over all scripts that correspond to this source actor.
-          let scripts = this.scripts.getScriptsBySourceActor(this);
+          let scripts = this.scripts.getScriptsBySourceActorAndLine(this, originalLine);
           for (let script of scripts) {
             // Get all offsets for each line in the current script. This returns
             // a map from line numbers fo a list of offsets for each line,
             // implemented as a sparse array.
             let lineToOffsetsMap = script.getAllOffsets();
 
             // Iterate over each line, and add their list of offsets to the map
             // from line numbers to entry points by forming a (script, offsets)
