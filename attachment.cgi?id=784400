exporting patch:
# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Date 1375367635 25200
#      Thu Aug 01 07:33:55 2013 -0700
# Node ID 8ce42d6228b26e60116d82b1e5c70bb1eecfabaf
# Parent 8ead44298a4cd8529ed5e3c45fd040076f8c9a1e
Bug 899380: Do not encode ' to &apos; in attribute values

diff --git a/browser/devtools/markupview/markup-view.js b/browser/devtools/markupview/markup-view.js
--- a/browser/devtools/markupview/markup-view.js
+++ b/browser/devtools/markupview/markup-view.js
@@ -1462,18 +1462,17 @@ function escapeAttributeValues(attr) {
  * @param  {String} value
  *         Value to escape.
  * @return {String}
  *         Escaped value.
  */
 function simpleEscape(value) {
   return value.replace(/</g, "&lt;")
               .replace(/>/g, "&gt;")
-              .replace(/"/g, "&quot;")
-              .replace(/'/g, "&apos;");
+              .replace(/"/g, "&quot;");
 }
 
 /**
  * A tree walker filter for avoiding empty whitespace text nodes.
  */
 function whitespaceTextFilter(aNode)
 {
     if (aNode.nodeType == Ci.nsIDOMNode.TEXT_NODE &&
diff --git a/browser/devtools/markupview/test/browser_inspector_markup_edit.js b/browser/devtools/markupview/test/browser_inspector_markup_edit.js
--- a/browser/devtools/markupview/test/browser_inspector_markup_edit.js
+++ b/browser/devtools/markupview/test/browser_inspector_markup_edit.js
@@ -225,22 +225,22 @@ function test() {
         assertAttributes(doc.querySelector("#node25"), {
           id: "node25",
         });
       },
       execute: function(after) {
         inspector.once("markupmutation", after);
         let editor = getContainerForRawNode(markup, doc.querySelector("#node25")).editor;
         let attr = editor.newAttr;
-        editField(attr, 'src="somefile.html?param1=<a>&param2=&uuml;"bl\'ah"');
+        editField(attr, 'src="somefile.html?param1=<a>&param2=&uuml;"bl\'ah&apos;"');
       },
       after: function() {
         assertAttributes(doc.querySelector("#node25"), {
           id: "node25",
-          src: "somefile.html?param1=&lt;a&gt;&param2=&uuml;&quot;bl&apos;ah"
+          src: "somefile.html?param1=&lt;a&gt;&param2=&uuml;&quot;bl'ah&apos;"
         });
       }
     },
   ];
 
   // Create the helper tab for parsing...
   gBrowser.selectedTab = gBrowser.addTab();
   gBrowser.selectedBrowser.addEventListener("load", function onload() {
