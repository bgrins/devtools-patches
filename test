# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  0ed19e957851d478634227e1362ffad5bf22bd9d
asdf

diff --git a/browser/devtools/markupview/test/browser_markupview_links_07.js b/browser/devtools/markupview/test/browser_markupview_links_07.js
--- a/browser/devtools/markupview/test/browser_markupview_links_07.js
+++ b/browser/devtools/markupview/test/browser_markupview_links_07.js
@@ -11,23 +11,30 @@ const TEST_URL = TEST_URL_ROOT + "doc_ma
 
 add_task(function*() {
   let {inspector} = yield addTab(TEST_URL).then(openInspector);
 
   info("Select a node with a URI attribute");
   yield selectNode("video", inspector);
 
   info("Find the link element from the markup-view");
-  let {editor} = yield getContainerForSelector("video", inspector);
+  let container = yield getContainerForSelector("video", inspector);
+  let editor = container.editor;
   let linkEl = editor.attrElements.get("poster").querySelector(".link");
 
   info("Follow the link with middle-click and wait for the new tab to open");
   yield followLinkWaitForTab(linkEl, false,
                              TEST_URL_ROOT + "doc_markup_tooltip.png");
 
+  info("Waiting " + (GRAB_DELAY + 1) + "ms");
+  yield wait(GRAB_DELAY + 1);
+  ok(el.isDragging, "isDragging true after GRAB_DELAY has passed");
+  is(container.isDragging, false, "isDragging should not be set to true immedietly");
+
+
   info("Follow the link with meta/ctrl-click and wait for the new tab to open");
   yield followLinkWaitForTab(linkEl, true,
                              TEST_URL_ROOT + "doc_markup_tooltip.png");
 
   info("Select a node with a IDREF attribute");
   yield selectNode("label", inspector);
 
   info("Find the link element from the markup-view that contains the ref");
