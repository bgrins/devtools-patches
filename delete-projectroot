# HG changeset patch
# Parent 1390e6a4db0545bbdda126af87cf804719daff2e
# User Brian Grinstead <bgrinstead@mozilla.com>
Bug 1033855 - Do not show delete context menu item for project root;r=paul


diff --git a/browser/devtools/projecteditor/lib/plugins/delete/delete.js b/browser/devtools/projecteditor/lib/plugins/delete/delete.js
--- a/browser/devtools/projecteditor/lib/plugins/delete/delete.js
+++ b/browser/devtools/projecteditor/lib/plugins/delete/delete.js
@@ -12,33 +12,41 @@ const { getLocalizedString } = require("
 var DeletePlugin = Class({
   extends: Plugin,
   shouldConfirm: true,
 
   init: function(host) {
     this.host.addCommand(this, {
       id: "cmd-delete"
     });
-    this.host.createMenuItem({
+    this.contextMenuItem = this.host.createMenuItem({
       parent: this.host.contextMenuPopup,
       label: getLocalizedString("projecteditor.deleteLabel"),
       command: "cmd-delete"
     });
   },
 
   confirmDelete: function(resource) {
     let deletePromptMessage = resource.isDir ?
       getLocalizedString("projecteditor.deleteFolderPromptMessage") :
       getLocalizedString("projecteditor.deleteFilePromptMessage");
     return !this.shouldConfirm || confirm(
       getLocalizedString("projecteditor.deletePromptTitle"),
       deletePromptMessage
     );
   },
 
+  onTreeSelected: function(resource) {
+    if (!resource.parent) {
+      this.contextMenuItem.setAttribute("hidden", "true");
+    } else {
+      this.contextMenuItem.removeAttribute("hidden");
+    }
+  },
+
   onCommand: function(cmd) {
     if (cmd === "cmd-delete") {
       let tree = this.host.projectTree;
       let resource = tree.getSelectedResource();
 
       if (!this.confirmDelete(resource)) {
         return;
       }
