# vim: se ft=diff :
# HG changeset patch
# User Gabriel Luong <gabriel.luong@gmail.com>
# Date 2015-09-25 03:02
Bug 1132557 - Part 10: Make Debugger breadrumbs keyboard access test by refocusing the stack frame r=bgrins

diff --git a/devtools/client/debugger/test/mochitest/browser_dbg_breadcrumbs-access.js b/devtools/client/debugger/test/mochitest/browser_dbg_breadcrumbs-access.js
--- a/devtools/client/debugger/test/mochitest/browser_dbg_breadcrumbs-access.js
+++ b/devtools/client/debugger/test/mochitest/browser_dbg_breadcrumbs-access.js
@@ -51,31 +51,38 @@ function test() {
       yield promise.all([
         waitForDebuggerEvents(gPanel, gDebugger.EVENTS.FETCHED_SCOPES),
         waitForSourceAndCaret(gPanel, "-01.js", 5),
         waitForEditorLocationSet(gPanel),
         EventUtils.sendKey("UP", gDebugger)
       ]);
       checkState({ frame: 0, source: 0, line: 5 });
 
+      // Need to refocus the stack frame due to a focus bug in e10s
+      // (See Bug 1205482)
+      focusCurrentStackFrame();
+
       yield promise.all([
         waitForDebuggerEvents(gPanel, gDebugger.EVENTS.FETCHED_SCOPES),
         waitForSourceAndCaret(gPanel, "-02.js", 6),
         waitForEditorLocationSet(gPanel),
         EventUtils.sendKey("END", gDebugger)
       ]);
       checkState({ frame: 1, source: 1, line: 6 });
 
+      // Need to refocus the stack frame due to a focus bug in e10s
+      // (See Bug 1205482)
+      focusCurrentStackFrame();
+
       yield promise.all([
         waitForDebuggerEvents(gPanel, gDebugger.EVENTS.FETCHED_SCOPES),
         waitForSourceAndCaret(gPanel, "-01.js", 5),
         waitForEditorLocationSet(gPanel),
         EventUtils.sendKey("HOME", gDebugger)
       ]);
-
       checkState({ frame: 0, source: 0, line: 5 });
     });
   }
 
   function checkState({ frame, source, line, column }) {
     is(gFrames.selectedIndex, frame,
       "The currently selected stackframe is incorrect.");
     is(gSources.selectedIndex, source,
