# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  bfc7b187005cabbc828ed9f5b61daf139c3cfd90
Bug 1361429 - Grab only the filterBarVisible property to limit number of re-renders for FilterBar;r=nchevobbe

MozReview-Commit-ID: JJMPDEDNbhZ

diff --git a/devtools/client/webconsole/new-console-output/components/filter-bar.js b/devtools/client/webconsole/new-console-output/components/filter-bar.js
--- a/devtools/client/webconsole/new-console-output/components/filter-bar.js
+++ b/devtools/client/webconsole/new-console-output/components/filter-bar.js
@@ -29,17 +29,17 @@ const FilterBar = createClass({
   displayName: "FilterBar",
 
   propTypes: {
     dispatch: PropTypes.func.isRequired,
     filter: PropTypes.object.isRequired,
     serviceContainer: PropTypes.shape({
       attachRefToHud: PropTypes.func.isRequired,
     }).isRequired,
-    ui: PropTypes.object.isRequired,
+    filterBarVisible: PropTypes.bool.isRequired,
   },
 
   componentDidMount() {
     this.props.serviceContainer.attachRefToHud("filterBox",
       this.wrapperNode.querySelector(".text-filter"));
   },
 
   onClickMessagesClear: function () {
@@ -54,18 +54,17 @@ const FilterBar = createClass({
     this.props.dispatch(filtersClear());
   },
 
   onSearchInput: function (e) {
     this.props.dispatch(filterTextSet(e.target.value));
   },
 
   render() {
-    const {dispatch, filter, ui} = this.props;
-    let filterBarVisible = ui.filterBarVisible;
+    const {dispatch, filter, filterBarVisible} = this.props;
     let children = [];
 
     children.push(dom.div({className: "devtools-toolbar webconsole-filterbar-primary"},
       dom.button({
         className: "devtools-button devtools-clear-icon",
         title: l10n.getStr("webconsole.clearButton.tooltip"),
         onClick: this.onClickMessagesClear
       }),
@@ -152,13 +151,13 @@ const FilterBar = createClass({
       )
     );
   }
 });
 
 function mapStateToProps(state) {
   return {
     filter: getAllFilters(state),
-    ui: getAllUi(state)
+    filterBarVisible: getAllUi(state).filterBarVisible,
   };
 }
 
 module.exports = connect(mapStateToProps)(FilterBar);
