# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  65a693623cee0837b4ad0d23241c84cd3ea23e3a
Bug 1549931 -

diff --git a/toolkit/content/widgets/tree.js b/toolkit/content/widgets/tree.js
--- a/toolkit/content/widgets/tree.js
+++ b/toolkit/content/widgets/tree.js
@@ -173,23 +173,25 @@
       this.addEventListener("command", (event) => {
         if (event.originalTarget == this) {
           var popup = this.querySelector("[anonid=\"popup\"]");
           this.buildPopup(popup);
           popup.openPopup(this, "after_end");
         } else {
           var tree = this.parentNode.parentNode;
           tree.stopEditing(true);
+          var menuitemTarget = event.originalTarget.closest("menuitem");
+          console.log(event.originalTarget, menuitemTarget);
           var menuitem = this.querySelector("[anonid=\"menuitem\"]");
-          if (event.originalTarget == menuitem) {
+          if (menuitemTarget == menuitem) {
             tree.columns.restoreNaturalOrder();
             this.removeAttribute("ordinal");
             tree._ensureColumnOrder();
           } else {
-            var colindex = event.originalTarget.getAttribute("colindex");
+            var colindex = menuitemTarget.getAttribute("colindex");
             var column = tree.columns[colindex];
             if (column) {
               var element = column.element;
               if (element.getAttribute("hidden") == "true")
                 element.setAttribute("hidden", "false");
               else
                 element.setAttribute("hidden", "true");
             }
