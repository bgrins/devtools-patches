# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  5fe4554ddf5ef7c75c74232d94a59e9ae3ae02df
temp

diff --git a/browser/components/controlcenter/content/panel.inc.xul b/browser/components/controlcenter/content/panel.inc.xul
--- a/browser/components/controlcenter/content/panel.inc.xul
+++ b/browser/components/controlcenter/content/panel.inc.xul
@@ -33,16 +33,61 @@
           <label class="identity-popup-connection-internal identity-popup-text"
                  value="&identity.connectionInternal;"/>
         </vbox>
         <button class="identity-popup-expander"
                 oncommand="gIdentityHandler.showSubView('security', this)"/>
       </hbox>
 
       <!-- Tracking Protection Section -->
+      <hbox id="tracking-protection-container" class="identity-popup-section">
+        <hbox align="top">
+          <box style="display:block">
+            <vbox>
+              <label class="identity-popup-text identity-popup-headline"
+                     crop="end"
+                     value="&trackingProtection.title;">
+              </label>
+
+              <label id="tracking-blocked"
+                     class="identity-popup-text tracking-protection-label"
+                     crop="end">
+                &trackingProtection.detectedBlocked;
+              </label>
+              <label id="tracking-loaded"
+                     class="identity-popup-text tracking-protection-label"
+                     crop="end">
+                &trackingProtection.detectedNotBlocked;
+              </label>
+              <label id="tracking-not-detected"
+                     class="identity-popup-text tracking-protection-label"
+                     crop="end">
+                &trackingProtection.notDetected;
+              </label>
+
+              <button id="tracking-actions"
+                type="menu" label="&trackingContentBlocked.options;"
+                sizetopopup="none">
+                <menupopup>
+                  <menuitem
+                    id="tracking-action-unblock"
+                    label="&trackingProtection.unblock.label;"
+                    accesskey="&trackingProtection.unblock.accesskey;"
+                    oncommand="TrackingProtection.disableForCurrentPage();"/>
+                  <menuitem
+                    id="tracking-action-block"
+                    label="&trackingProtection.block.label;"
+                    accesskey="&trackingProtection.block.accesskey;"
+                    oncommand="TrackingProtection.enableForCurrentPage();"/>
+                </menupopup>
+              </button>
+            </vbox>
+          </box>
+        </hbox>
+      </hbox>
 
 
       <!-- Permissions Section -->
       <hbox id="identity-popup-permissions" class="identity-popup-section">
         <vbox id="identity-popup-permissions-content" flex="1">
           <label class="identity-popup-text identity-popup-headline"
                  value="&identity.permissions;"/>
           <vbox id="identity-popup-permission-list"/>
@@ -71,65 +116,16 @@
                    class="identity-popup-text"/>
       <description id="identity-popup-content-supplemental"
                    class="identity-popup-text"/>
       <description id="identity-popup-content-verifier"
                    class="identity-popup-text"/>
     </panelview>
   </panelmultiview>
 
-  <separator class="groove" />
-
-  <!-- Tracking protection -->
-  <hbox id="tracking-protection-container">
-    <hbox align="top">
-      <image id="tracking-protection-image" />
-      <box style="display:block">
-        <vbox id="tracking-protection-content-box">
-          <label class="identity-popup-headline"
-                 crop="end"
-                 value="&trackingProtection.title;">
-          </label>
-
-          <label id="tracking-blocked"
-                 class="tracking-protection-label"
-                 crop="end">
-            &trackingProtection.detectedBlocked;
-          </label>
-          <label id="tracking-loaded"
-                 class="tracking-protection-label"
-                 crop="end">
-            &trackingProtection.detectedNotBlocked;
-          </label>
-          <label id="tracking-not-detected"
-                 class="tracking-protection-label"
-                 crop="end">
-            &trackingProtection.notDetected;
-          </label>
-
-          <button id="tracking-actions"
-            type="menu" label="&trackingContentBlocked.options;"
-            sizetopopup="none">
-            <menupopup>
-              <menuitem
-                id="tracking-action-unblock"
-                label="&trackingProtection.unblock.label;"
-                accesskey="&trackingProtection.unblock.accesskey;"
-                oncommand="TrackingProtection.disableForCurrentPage();"/>
-              <menuitem
-                id="tracking-action-block"
-                label="&trackingProtection.block.label;"
-                accesskey="&trackingProtection.block.accesskey;"
-                oncommand="TrackingProtection.enableForCurrentPage();"/>
-            </menupopup>
-          </button>
-        </vbox>
-      </box>
-    </hbox>
-  </hbox>
 
   <spacer flex="1"/>
 
   <!-- More Information Button -->
   <hbox id="identity-popup-button-container" align="center">
     <button id="identity-popup-more-info-button" flex="1"
             label="&identity.moreInfoLinkText2;"
             oncommand="gIdentityHandler.handleMoreInfoClick(event);"/>
diff --git a/browser/themes/shared/controlcenter/panel.inc.css b/browser/themes/shared/controlcenter/panel.inc.css
--- a/browser/themes/shared/controlcenter/panel.inc.css
+++ b/browser/themes/shared/controlcenter/panel.inc.css
@@ -51,28 +51,30 @@
 }
 
 .identity-popup-section:not(:first-child) {
   border-top: 1px solid rgb(229,229,229);
 }
 
 #identity-popup-securityView,
 #identity-popup-security-content,
-#identity-popup-permissions-content {
+#identity-popup-permissions-content,
+#tracking-protection-container {
   padding: 0.75em 0 1em;
   -moz-padding-start: calc(2em + 24px);
   -moz-padding-end: 1em;
   background-repeat: no-repeat;
   background-position: 1em 1em;
   background-size: 24px auto;
 }
 
 #identity-popup-securityView:-moz-locale-dir(rtl),
 #identity-popup-security-content:-moz-locale-dir(rtl),
-#identity-popup-permissions-content:-moz-locale-dir(rtl) {
+#identity-popup-permissions-content:-moz-locale-dir(rtl),
+#tracking-protection-container:-moz-locale-dir(rtl) {
   background-position: calc(100% - 1em) 1em;
 }
 
 /* EXPAND BUTTON */
 
 .identity-popup-expander {
   margin: 0;
   padding: 4px 0;
@@ -231,47 +233,28 @@
 }
 
 #identity-popup-more-info-button:hover:active {
   color: inherit;
   background-color: hsla(210,4%,10%,.12);
   box-shadow: 0 1px 0 hsla(210,4%,10%,.05) inset;
 }
 
-#identity-popup separator {
-  margin: 0;
+/* Tracking protection section */
+
+#tracking-protection-container {
+  background-image: url("chrome://browser/skin/controlcenter/tracking-protection.svg");
 }
 
-/* Tracking protection changes */
-
-#identity-popup-multiView[viewtype="subview"] ~ * {
-  display: none;
-}
-
-#tracking-protection-container {
-  padding: 10px;
+#tracking-protection-container[block-disabled]  {
+  background-image: url("chrome://browser/skin/controlcenter/tracking-protection-disabled.svg");
 }
 
 .tracking-protection-label {
-  font-size: 110%;
+  white-space: normal;
   max-width: 260px;
   margin: 5px 0;
 }
 
-#tracking-protection-content-box {
-  -moz-padding-start: 10px;
-}
-
 #tracking-actions {
   margin: 0;
 }
 
-/* Tracking protection icons */
-#tracking-protection-image {
-  height: 24px;
-  width: 24px;
-  padding: 0;
-  list-style-image: url("chrome://browser/skin/controlcenter/tracking-protection.svg");
-}
-
-#tracking-protection-container[block-disabled] #tracking-protection-image  {
-  list-style-image: url("chrome://browser/skin/controlcenter/tracking-protection-disabled.svg");
-}
