# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  35992e6334dac755e841566f8c63c31b63e4f18d
Bug 1259603 - Use ConsoleEvents for cached messages and observing messages when webconsole actor is running in a worker

diff --git a/devtools/server/actors/webconsole.js b/devtools/server/actors/webconsole.js
--- a/devtools/server/actors/webconsole.js
+++ b/devtools/server/actors/webconsole.js
@@ -9,16 +9,24 @@
 const Services = require("Services");
 const { Cc, Ci, Cu } = require("chrome");
 const { DebuggerServer, ActorPool } = require("devtools/server/main");
 const { EnvironmentActor } = require("devtools/server/actors/environment");
 const { ThreadActor } = require("devtools/server/actors/script");
 const { ObjectActor, LongStringActor, createValueGrip, stringIsLong } = require("devtools/server/actors/object");
 const DevToolsUtils = require("devtools/shared/DevToolsUtils");
 
+// STR log not showing up in stdout:
+// 1) Set devtools.debugger.workers
+// 2) Load https://bgrins.github.io/devtools-demos/worker/webworker.html
+// 3) Open debugger and click on hello-worker.js?0
+// 4) Switch to console panel in new window that's popped up
+console.log("Creating webconsole actor", isWorker);
+dump("Console object: " + console + " console.log: " + console.log + "\n");
+
 loader.lazyRequireGetter(this, "NetworkMonitor", "devtools/shared/webconsole/network-monitor", true);
 loader.lazyRequireGetter(this, "NetworkMonitorChild", "devtools/shared/webconsole/network-monitor", true);
 loader.lazyRequireGetter(this, "ConsoleProgressListener", "devtools/shared/webconsole/network-monitor", true);
 loader.lazyRequireGetter(this, "events", "sdk/event/core");
 loader.lazyRequireGetter(this, "ServerLoggingListener", "devtools/shared/webconsole/server-logger", true);
 loader.lazyRequireGetter(this, "JSPropertyProvider", "devtools/shared/webconsole/js-property-provider", true);
 loader.lazyRequireGetter(this, "Parser", "resource://devtools/shared/Parser.jsm", true);
 
