# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  56b5c1a87dcb2c0391e7f642f99e6638dcf235c0
Remove message-body-wrapper node

diff --git a/devtools/client/themes/webconsole.css b/devtools/client/themes/webconsole.css
--- a/devtools/client/themes/webconsole.css
+++ b/devtools/client/themes/webconsole.css
@@ -917,16 +917,24 @@ a.learn-more-link.webconsole-learn-more-
 .theme-dark .webconsole-output-wrapper .message.warn .arrayRightBracket {
   color: var(--theme-body-color);
 }
 .theme-dark .webconsole-output-wrapper .message.error .tree.object-inspector,
 .theme-dark .webconsole-output-wrapper .message.warn .tree.object-inspector {
   --tree-indent-border-color: var(--theme-body-color);
 }
 
+/* message-body-wrapper doesn't exist in the new frontend (Bug 1409097), so copy
+   the styles onto message-flex-body: */
+.webconsole-output-wrapper .message > .message-flex-body {
+  flex: auto;
+  min-width: 0px;
+  margin: 3px;
+}
+
 .webconsole-output-wrapper .message-flex-body > .message-body {
   display: flex;
   flex-wrap: wrap;
   max-width: 100%;
 }
 
 .webconsole-output-wrapper .message-body > * {
   flex-shrink: 0;
diff --git a/devtools/client/webconsole/new-console-output/components/Message.js b/devtools/client/webconsole/new-console-output/components/Message.js
--- a/devtools/client/webconsole/new-console-output/components/Message.js
+++ b/devtools/client/webconsole/new-console-output/components/Message.js
@@ -236,31 +236,29 @@ const Message = createClass({
       ref: node => {
         this.messageNode = node;
       }
     },
       timestampEl,
       MessageIndent({indent}),
       icon,
       collapse,
-      dom.span({ className: "message-body-wrapper" },
-        dom.span({ className: "message-flex-body" },
-          // Add whitespaces for formatting when copying to the clipboard.
-          timestampEl ? " " : null,
-          dom.span({ className: "message-body devtools-monospace" },
-            ...bodyElements,
-            learnMore
-          ),
-          repeat ? " " : null,
-          repeat,
-          " ", location
+      dom.span({ className: "message-flex-body" },
+        // Add whitespaces for formatting when copying to the clipboard.
+        timestampEl ? " " : null,
+        dom.span({ className: "message-body devtools-monospace" },
+          ...bodyElements,
+          learnMore
         ),
-        // Add a newline for formatting when copying to the clipboard.
-        "\n",
-        // If an attachment is displayed, the final newline is handled by the attachment.
-        attachment,
-        ...notesNodes
-      )
+        repeat ? " " : null,
+        repeat,
+        " ", location
+      ),
+      // Add a newline for formatting when copying to the clipboard.
+      "\n",
+      // If an attachment is displayed, the final newline is handled by the attachment.
+      attachment,
+      ...notesNodes,
     );
   }
 });
 
 module.exports = Message;
