
# HG changeset patch
# User Paolo Amadini <paolo.mozmail@amadzone.org>
# Date 1525691604 -3600
# Node ID fddcc955ead8e125bc9f9670ac8429ecb2717592
# Parent  66f180126bb275c1bc187f42146ef188250ecfed
Bug 1459556 - Part 2 - Copy the content of the "handler" binding to "main.js". r=bgrins

MozReview-Commit-ID: 2mMks5bDcpn

diff --git a/browser/components/preferences/handlers.xml b/browser/components/preferences/handlers.xml
--- a/browser/components/preferences/handlers.xml
+++ b/browser/components/preferences/handlers.xml
@@ -7,16 +7,17 @@
 
 <bindings id="handlerBindings"
           xmlns="http://www.mozilla.org/xbl"
           xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
           xmlns:xbl="http://www.mozilla.org/xbl">
 
   <binding id="handler" extends="chrome://global/content/bindings/richlistbox.xml#richlistitem">
     <content>
+      <!-- This has been copied to "main.js" -->
       <xul:hbox flex="1" equalsize="always">
         <xul:hbox flex="1" align="center" xbl:inherits="tooltiptext=typeDescription">
           <xul:image src="moz-icon://goat?size=16" class="typeIcon"
                      xbl:inherits="src=typeIcon" height="16" width="16"/>
           <xul:label flex="1" crop="end" xbl:inherits="value=typeDescription"/>
         </xul:hbox>
         <xul:hbox anonid="not-selected" flex="1" align="center" xbl:inherits="tooltiptext=actionDescription">
           <xul:image xbl:inherits="src=actionIcon" height="16" width="16" class="actionIcon"/>
diff --git a/browser/components/preferences/in-content/main.js b/browser/components/preferences/in-content/main.js
--- a/browser/components/preferences/in-content/main.js
+++ b/browser/components/preferences/in-content/main.js
@@ -2454,16 +2454,36 @@
 class HandlerListItem {
   static forNode(node) {
     return gNodeToObjectMap.get(node);
   }
 
   constructor(handlerInfoWrapper) {
     this.handlerInfoWrapper = handlerInfoWrapper;
     this.node = document.createElement("richlistitem");
+    /*
+      <xul:hbox flex="1" equalsize="always">
+        <xul:hbox flex="1" align="center" xbl:inherits="tooltiptext=typeDescription">
+          <xul:image src="moz-icon://goat?size=16" class="typeIcon"
+                     xbl:inherits="src=typeIcon" height="16" width="16"/>
+          <xul:label flex="1" crop="end" xbl:inherits="value=typeDescription"/>
+        </xul:hbox>
+        <xul:hbox anonid="not-selected" flex="1" align="center" xbl:inherits="tooltiptext=actionDescription">
+          <xul:image xbl:inherits="src=actionIcon" height="16" width="16" class="actionIcon"/>
+          <xul:label flex="1" crop="end" xbl:inherits="value=actionDescription"/>
+        </xul:hbox>
+        <xul:hbox hidden="true" anonid="selected" flex="1">
+          <xul:menulist class="actionsMenu" flex="1" crop="end" selectedIndex="1"
+                        xbl:inherits="tooltiptext=actionDescription"
+                        oncommand="gMainPane.onSelectAction(event.originalTarget)">
+            <xul:menupopup/>
+          </xul:menulist>
+        </xul:hbox>
+      </xul:hbox>
+    */
     gNodeToObjectMap.set(this.node, this);
 
     this.node.setAttribute("type", this.handlerInfoWrapper.type);
     this.node.setAttribute("typeDescription",
                            this.handlerInfoWrapper.typeDescription);
     if (this.handlerInfoWrapper.smallIcon) {
       this.node.setAttribute("typeIcon", this.handlerInfoWrapper.smallIcon);
     } else {

