# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  c4e4613dbe32bb218957a140e5d0bd4fe7d1e98c
Bug 1420934 - Ensure `npm install` on netmonitor before installing in webconsole;r=Honza

If the netmonitor hasn't had `npm install` ran, then running the webconsole tests fail,
because the webconsole depends on netmonitor, and the babel plugin "transform-object-rest-spread"
defined in netmonitor/.babelrc cannot be resolved unless if it's been installed.

diff --git a/devtools/client/webconsole/package.json b/devtools/client/webconsole/package.json
--- a/devtools/client/webconsole/package.json
+++ b/devtools/client/webconsole/package.json
@@ -1,15 +1,16 @@
 {
   "name": "webconsole",
   "version": "0.0.1",
   "engines": {
     "node": ">=6.9.0"
   },
   "scripts": {
+    "preinstall": "cd ../netmonitor && npm install && cd ../webconsole",
     "start": "cross-env NODE_ENV=production node bin/dev-server",
     "dev": "node bin/dev-server",
     "test": "cross-env NODE_ENV=test NODE_PATH=../../../ mocha new-console-output/test/**/*.test.js --compilers js:babel-register -r jsdom-global/register -r ./new-console-output/test/require-helper.js"
   },
   "dependencies": {
     "amd-loader": "0.0.5",
     "babel-preset-es2015": "^6.6.0",
     "babel-preset-es2017": "^6.24.1",
