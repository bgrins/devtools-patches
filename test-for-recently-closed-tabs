# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  15cf86a0658a5d0b829e87016261a1657bc758c5
Bug 1546099 - Add a mochitest for "Recently Closed Tabs" and "Recently Closed Windows" menus

diff --git a/browser/base/content/test/menubar/browser.ini b/browser/base/content/test/menubar/browser.ini
--- a/browser/base/content/test/menubar/browser.ini
+++ b/browser/base/content/test/menubar/browser.ini
@@ -1,3 +1,4 @@
 [DEFAULT]
 
 [browser_file_menu_import_wizard.js]
+[browser_menu_recently_closed.js]
diff --git a/browser/base/content/test/menubar/browser_menu_recently_closed.js b/browser/base/content/test/menubar/browser_menu_recently_closed.js
new file mode 100644
--- /dev/null
+++ b/browser/base/content/test/menubar/browser_menu_recently_closed.js
@@ -0,0 +1,30 @@
+/* Any copyright is dedicated to the Public Domain.
+   http://creativecommons.org/publicdomain/zero/1.0/ */
+
+"use strict";
+
+async function addAndRemoveWindow(url) {
+}
+async function addAndRemoveTab(url) {
+  let tab = BrowserTestUtils.addTab(gBrowser, url);
+  gBrowser.selectedTab = tab;
+
+  let browser = gBrowser.getBrowserForTab(tab);
+  await BrowserTestUtils.browserLoaded(browser);
+
+  BrowserTestUtils.removeTab(tab);
+}
+
+add_task(async function() {
+  ok(true, "XXXX: Check that both menu items are disabled");
+  await addAndRemoveTab("http://mochi.test:8888");
+  await addAndRemoveTab("https://example.com:443");
+  await addAndRemoveTab("http://example.com");
+  ok(true, "XXXX: Check that both recently closed tabs list matches");
+  await addAndRemoveWindow("http://mochi.test:8888");
+  await addAndRemoveWindow("https://example.com:443");
+  await addAndRemoveWindow("http://example.com");
+  ok(true, "XXXX: Check that both recently closed tabs list matches");
+
+  await new Promise(r=>r);
+});
