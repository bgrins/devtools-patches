# HG changeset patch
# User Alexandre Poirot <poirot.alex@gmail.com>
# Parent  e2fbd9e0afeac6a72cf3a857f11b339f9d8d42f8

Bug 1183280 - Remove most devtools preprocessing rule in CSS files. r=bgrins

diff --git a/devtools/client/jar.mn b/devtools/client/jar.mn
--- a/devtools/client/jar.mn
+++ b/devtools/client/jar.mn
@@ -156,27 +156,27 @@ devtools.jar:
     skin/images/add.svg (themes/images/add.svg)
     skin/images/filters.svg (themes/images/filters.svg)
     skin/images/filter-swatch.svg (themes/images/filter-swatch.svg)
     skin/images/pseudo-class.svg (themes/images/pseudo-class.svg)
     skin/images/controls.png (themes/images/controls.png)
     skin/images/controls@2x.png (themes/images/controls@2x.png)
     skin/images/animation-fast-track.svg (themes/images/animation-fast-track.svg)
     skin/images/performance-icons.svg (themes/images/performance-icons.svg)
-*   skin/widgets.css (themes/widgets.css)
+    skin/widgets.css (themes/widgets.css)
     skin/images/power.svg (themes/images/power.svg)
     skin/images/filetypes/dir-close.svg (themes/images/filetypes/dir-close.svg)
     skin/images/filetypes/dir-open.svg (themes/images/filetypes/dir-open.svg)
     skin/images/filetypes/globe.svg (themes/images/filetypes/globe.svg)
     skin/images/filetypes/store.svg (themes/images/filetypes/store.svg)
     skin/images/commandline-icon.png (themes/images/commandline-icon.png)
     skin/images/commandline-icon@2x.png (themes/images/commandline-icon@2x.png)
     skin/images/alerticon-warning.png (themes/images/alerticon-warning.png)
     skin/images/alerticon-warning@2x.png (themes/images/alerticon-warning@2x.png)
-*   skin/rules.css (themes/rules.css)
+    skin/rules.css (themes/rules.css)
     skin/commandline.css (themes/commandline.css)
     skin/images/command-paintflashing.png (themes/images/command-paintflashing.png)
     skin/images/command-paintflashing@2x.png (themes/images/command-paintflashing@2x.png)
     skin/images/command-screenshot.png (themes/images/command-screenshot.png)
     skin/images/command-screenshot@2x.png (themes/images/command-screenshot@2x.png)
     skin/images/command-responsivemode.png (themes/images/command-responsivemode.png)
     skin/images/command-responsivemode@2x.png (themes/images/command-responsivemode@2x.png)
     skin/images/command-scratchpad.png (themes/images/command-scratchpad.png)
@@ -196,34 +196,34 @@ devtools.jar:
     skin/images/command-measure.png (themes/images/command-measure.png)
     skin/images/command-measure@2x.png (themes/images/command-measure@2x.png)
     skin/markup.css (themes/markup.css)
     skin/images/editor-error.png (themes/images/editor-error.png)
     skin/images/editor-breakpoint.png (themes/images/editor-breakpoint.png)
     skin/images/editor-breakpoint@2x.png (themes/images/editor-breakpoint@2x.png)
     skin/images/editor-debug-location.png (themes/images/editor-debug-location.png)
     skin/images/editor-debug-location@2x.png (themes/images/editor-debug-location@2x.png)
-*   skin/webconsole.css (themes/webconsole.css)
+    skin/webconsole.css (themes/webconsole.css)
     skin/images/webconsole.svg (themes/images/webconsole.svg)
     skin/images/breadcrumbs-divider@2x.png (themes/images/breadcrumbs-divider@2x.png)
     skin/images/breadcrumbs-scrollbutton.png (themes/images/breadcrumbs-scrollbutton.png)
     skin/images/breadcrumbs-scrollbutton@2x.png (themes/images/breadcrumbs-scrollbutton@2x.png)
     skin/animationinspector.css (themes/animationinspector.css)
     skin/eyedropper.css (themes/eyedropper.css)
     skin/canvasdebugger.css (themes/canvasdebugger.css)
     skin/debugger.css (themes/debugger.css)
-*   skin/netmonitor.css (themes/netmonitor.css)
+    skin/netmonitor.css (themes/netmonitor.css)
     skin/performance.css (themes/performance.css)
     skin/memory.css (themes/memory.css)
     skin/promisedebugger.css (themes/promisedebugger.css)
     skin/images/timeline-filter.svg (themes/images/timeline-filter.svg)
     skin/scratchpad.css (themes/scratchpad.css)
     skin/shadereditor.css (themes/shadereditor.css)
     skin/storage.css (themes/storage.css)
-*   skin/splitview.css (themes/splitview.css)
+    skin/splitview.css (themes/splitview.css)
     skin/styleeditor.css (themes/styleeditor.css)
     skin/webaudioeditor.css (themes/webaudioeditor.css)
     skin/images/magnifying-glass.png (themes/images/magnifying-glass.png)
     skin/images/magnifying-glass@2x.png (themes/images/magnifying-glass@2x.png)
     skin/images/magnifying-glass-light.png (themes/images/magnifying-glass-light.png)
     skin/images/magnifying-glass-light@2x.png (themes/images/magnifying-glass-light@2x.png)
     skin/images/itemToggle.png (themes/images/itemToggle.png)
     skin/images/itemToggle@2x.png (themes/images/itemToggle@2x.png)
@@ -276,17 +276,17 @@ devtools.jar:
     skin/images/toggle-tools.png (themes/images/toggle-tools.png)
     skin/images/toggle-tools@2x.png (themes/images/toggle-tools@2x.png)
     skin/images/dock-bottom@2x.png (themes/images/dock-bottom@2x.png)
     skin/images/dock-bottom-minimize@2x.png (themes/images/dock-bottom-minimize@2x.png)
     skin/images/dock-bottom-maximize@2x.png (themes/images/dock-bottom-maximize@2x.png)
     skin/images/dock-side@2x.png (themes/images/dock-side@2x.png)
 *   skin/floating-scrollbars.css (themes/floating-scrollbars.css)
     skin/floating-scrollbars-light.css (themes/floating-scrollbars-light.css)
-*   skin/inspector.css (themes/inspector.css)
+    skin/inspector.css (themes/inspector.css)
     skin/images/profiler-stopwatch.svg (themes/images/profiler-stopwatch.svg)
     skin/images/emojis/emoji-command-pick.svg (themes/images/emojis/emoji-command-pick.svg)
     skin/images/emojis/emoji-tool-webconsole.svg (themes/images/emojis/emoji-tool-webconsole.svg)
     skin/images/emojis/emoji-tool-canvas.svg (themes/images/emojis/emoji-tool-canvas.svg)
     skin/images/emojis/emoji-tool-debugger.svg (themes/images/emojis/emoji-tool-debugger.svg)
     skin/images/emojis/emoji-tool-inspector.svg (themes/images/emojis/emoji-tool-inspector.svg)
     skin/images/emojis/emoji-tool-shadereditor.svg (themes/images/emojis/emoji-tool-shadereditor.svg)
     skin/images/emojis/emoji-tool-styleeditor.svg (themes/images/emojis/emoji-tool-styleeditor.svg)
diff --git a/devtools/client/themes/inspector.css b/devtools/client/themes/inspector.css
--- a/devtools/client/themes/inspector.css
+++ b/devtools/client/themes/inspector.css
@@ -1,25 +1,22 @@
 /* vim:set ts=2 sw=2 sts=2 et: */
 /* This Source Code Form is subject to the terms of the Mozilla Public
  * License, v. 2.0. If a copy of the MPL was not distributed with this
  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
 
-%ifdef XP_MACOSX
 
-#inspector-toolbar:-moz-locale-dir(ltr) {
+:root[platform="mac"] #inspector-toolbar:-moz-locale-dir(ltr) {
   padding-left: 2px;
 }
 
-#inspector-toolbar:-moz-locale-dir(rtl) {
+:root[platform="mac"] #inspector-toolbar:-moz-locale-dir(rtl) {
   padding-left: 4px;
 }
 
-%endif
-
 #inspector-searchlabel {
   overflow: hidden;
 }
 
 #inspector-searchbox {
   transition-property: max-width, -moz-padding-end, -moz-padding-start;
   transition-duration: 250ms;
   transition-timing-function: ease;
diff --git a/devtools/client/themes/netmonitor.css b/devtools/client/themes/netmonitor.css
--- a/devtools/client/themes/netmonitor.css
+++ b/devtools/client/themes/netmonitor.css
@@ -820,48 +820,45 @@
 
   .requests-menu-transferred,
   .requests-menu-size {
     width: 12vw;
   }
 }
 
 /* Platform overrides (copied in from the old platform specific files) */
-%ifdef XP_WIN
-.requests-menu-header-button > .button-box {
+:root[platform="win"] .requests-menu-header-button > .button-box {
   padding: 0;
 }
 
-.requests-menu-timings-division {
+:root[platform="win"] .requests-menu-timings-division {
   padding-top: 1px;
   font-size: 90%;
 }
 
-.requests-menu-footer-button,
-.requests-menu-footer-label {
+:root[platform="win"] .requests-menu-footer-button,
+:root[platform="win"] .requests-menu-footer-label {
   padding-top: 0px;
   padding-bottom: 0px;
 }
 
 /* Responsive sidebar */
 @media (max-width: 700px) {
-  .requests-menu-footer-button,
-  .requests-menu-footer-label {
+  :root[platform="win"] .requests-menu-footer-button,
+  :root[platform="win"] .requests-menu-footer-label {
     padding-top: 0px;
     padding-bottom: 0px;
   }
 }
-%elifdef XP_LINUX
-#headers-summary-resend {
+:root[platform="linux"] #headers-summary-resend {
   padding: 4px;
 }
 
-#toggle-raw-headers {
+:root[platform="linux"] #toggle-raw-headers {
   padding: 4px;
 }
 
 /* Responsive sidebar */
 @media (max-width: 700px) {
-  .requests-menu-header-button {
+  :root[platform="linux"] .requests-menu-header-button {
     font-size: 85%;
   }
 }
-%endif
diff --git a/devtools/client/themes/rules.css b/devtools/client/themes/rules.css
--- a/devtools/client/themes/rules.css
+++ b/devtools/client/themes/rules.css
@@ -41,19 +41,21 @@
 .ruleview-header {
   border-top-width: 1px;
   border-bottom-width: 1px;
   border-top-style: solid;
   border-bottom-style: solid;
   padding: 1px 4px;
   -moz-user-select: none;
   word-wrap: break-word;
-%ifndef XP_MACOSX
+}
+
+:root[platform="win"] .ruleview-header,
+:root[platform="linux"] .ruleview-header {
   margin-top: 4px;
-%endif
 }
 
 .ruleview-rule-pseudo-element {
   padding-left:20px;
   border-left: solid 10px;
 }
 
 .ruleview-rule,
diff --git a/devtools/client/themes/splitview.css b/devtools/client/themes/splitview.css
--- a/devtools/client/themes/splitview.css
+++ b/devtools/client/themes/splitview.css
@@ -1,20 +1,23 @@
 /* vim:set ts=2 sw=2 sts=2 et: */
 /* This Source Code Form is subject to the terms of the Mozilla Public
  * License, v. 2.0. If a copy of the MPL was not distributed with this
  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
 
-%filter substitution
-%define smw_marginDark #000
-%define smw_marginLight #aaa
-%define smw_itemDarkTopBorder rgba(0,0,0,0.2)
-%define smw_itemDarkBottomBorder rgba(128,128,128,0.15)
-%define smw_itemLightTopBorder rgba(128,128,128,0.15)
-%define smw_itemLightBottomBorder transparent
+.theme-dark {
+  --smw-margin: #000;
+  --smw-item-top-border: rgba(0,0,0,0.2);
+  --smw-item-bottom-border: rgba(128,128,128,0.15);
+}
+.theme-light {
+  --smw-margin: #aaa;
+  --smw-item-top-border: rgba(128,128,128,0.15);
+  --smw-item-bottom-border: transparent;
+}
 
 .splitview-nav-container .devtools-throbber {
   display: none;
   text-align: center;
 }
 
 .loading .splitview-nav-container .devtools-throbber {
   display: block;
@@ -25,60 +28,40 @@
 }
 
 .splitview-nav {
   -moz-appearance: none;
   list-style-image: none;
   list-style: none;
   padding: 0;
   margin: 0;
+  box-shadow: inset -1px 0 0 var(--smw-margin);
 }
 
-.theme-dark .splitview-nav {
-  box-shadow: inset -1px 0 0 @smw_marginDark@;
-}
-
-.theme-dark .splitview-nav:-moz-locale-dir(rtl) {
-  box-shadow: inset 1px 0 0 @smw_marginDark@;
-}
-
-.theme-light .splitview-nav {
-  box-shadow: inset -1px 0 0 @smw_marginLight@;
-}
-
-.theme-light .splitview-nav:-moz-locale-dir(rtl) {
-  box-shadow: inset 1px 0 0 @smw_marginLight@;
+.splitview-nav:-moz-locale-dir(rtl) {
+  box-shadow: inset 1px 0 0 var(--smw-margin);
 }
 
 .splitview-nav > li {
   /* To compensate for the top and bottom borders */
   margin-top: -1px;
   margin-bottom: -1px;
   -moz-padding-end: 8px;
   -moz-box-align: center;
   outline: 0;
   vertical-align: bottom;
 }
 
-.theme-dark .splitview-nav > li {
-  border-top: 1px solid @smw_itemDarkTopBorder@;
-  border-bottom: 1px solid @smw_itemDarkBottomBorder@;
+.splitview-nav > li {
+  border-top: 1px solid var(--smw-item-top-border);
+  border-bottom: 1px solid var(--smw-item-bottom-border);
 }
 
-.theme-dark .splitview-nav > li:last-of-type {
-  box-shadow: inset 0 -1px 0 @smw_itemDarkTopBorder@;
-}
-
-.theme-light  .splitview-nav > li {
-  border-top: 1px solid @smw_itemLightTopBorder@;
-  border-bottom: 1px solid @smw_itemLightBottomBorder@;
-}
-
-.theme-light .splitview-nav > li:last-of-type {
-  box-shadow: inset 0 -1px 0 @smw_itemLightTopBorder@;
+.splitview-nav > li:last-of-type {
+  box-shadow: inset 0 -1px 0 var(--smw-item-top-border);
 }
 
 .placeholder {
   -moz-box-flex: 1;
   text-align: center;
 }
 
 .splitview-nav > li.splitview-active {
@@ -89,53 +72,48 @@
 
 .splitview-nav > li.splitview-active:-moz-locale-dir(rtl) {
   background-repeat: no-repeat, no-repeat, repeat-x;
   background-position: center left, center left, top right;
 }
 
 .theme-dark .splitview-nav > li.splitview-active {
   background-image: url(images/itemArrow-dark-ltr.svg),
-                    linear-gradient(@smw_marginDark@, @smw_marginDark@),
+                    linear-gradient(var(--smw-margin), var(--smw-margin)),
                     linear-gradient(#1d4f73, #1d4f73);
 }
 
 .theme-dark .splitview-nav > li.splitview-active:-moz-locale-dir(rtl) {
   background-image: url(images/itemArrow-dark-rtl.svg),
-                    linear-gradient(@smw_marginDark@, @smw_marginDark@),
+                    linear-gradient(var(--smw-margin), var(--smw-margin)),
                     linear-gradient(#1d4f73, #1d4f73);
 }
 
 .theme-light .splitview-nav > li.splitview-active {
   background-image: url(images/itemArrow-ltr.svg),
-                    linear-gradient(@smw_marginLight@, @smw_marginLight@),
+                    linear-gradient(var(--smw-margin), var(--smw-margin)),
                     linear-gradient(#4c9ed9, #4c9ed9);
 }
 
 .theme-light .splitview-nav > li.splitview-active:-moz-locale-dir(rtl) {
   background-image: url(images/itemArrow-rtl.svg),
-                    linear-gradient(@smw_marginLight@, @smw_marginLight@),
+                    linear-gradient(var(--smw-margin), var(--smw-margin)),
                     linear-gradient(#4c9ed9, #4c9ed9);
 }
 
 /* Toolbars */
 
 .splitview-main > .devtools-toolbar {
   background-origin: border-box;
   background-clip: border-box;
 }
 
-.theme-dark .splitview-main > toolbar,
-.theme-dark .loading .splitview-nav-container {
-  -moz-border-end: 1px solid @smw_marginDark@;
-}
-
-.theme-light .splitview-main > toolbar,
-.theme-light .loading .splitview-nav-container {
-  -moz-border-end: 1px solid @smw_marginLight@;
+.splitview-main > toolbar,
+.loading .splitview-nav-container {
+  -moz-border-end: 1px solid var(--smw-margin);
 }
 
 .splitview-main > .devtools-toolbarbutton {
   font-size: 11px;
   padding: 0 8px;
   width: auto;
   min-width: 48px;
   min-height: 0;
diff --git a/devtools/client/themes/webconsole.css b/devtools/client/themes/webconsole.css
--- a/devtools/client/themes/webconsole.css
+++ b/devtools/client/themes/webconsole.css
@@ -569,18 +569,16 @@ a {
     margin-top: 3px;
   }
   .hud-console-filter-toolbar .hud-filter-box,
   .hud-console-filter-toolbar .devtools-toolbarbutton {
     margin-top: 5px;
   }
 }
 
-%ifdef XP_WIN
 /*
  * This hardcoded width likely due to a toolkit Windows specific bug.
  * See http://hg.mozilla.org/mozilla-central/annotate/f38d6df93cad/toolkit/themes/winstripe/global/textbox-aero.css#l7
  */
 
-.hud-filter-box {
+:root[platform="win"] .hud-filter-box {
   width: 200px;
 }
-%endif
diff --git a/devtools/client/themes/widgets.css b/devtools/client/themes/widgets.css
--- a/devtools/client/themes/widgets.css
+++ b/devtools/client/themes/widgets.css
@@ -1,27 +1,26 @@
 /* vim:set ts=2 sw=2 sts=2 et: */
 /* This Source Code Form is subject to the terms of the Mozilla Public
  * License, v. 2.0. If a copy of the MPL was not distributed with this
  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
 
-%filter substitution
-%define smw_marginDark #000
-%define smw_marginLight #aaa
-%define smw_itemDarkTopBorder rgba(0,0,0,0.2)
-%define smw_itemDarkBottomBorder rgba(128,128,128,0.15)
-%define smw_itemLightTopBorder rgba(128,128,128,0.15)
-%define smw_itemLightBottomBorder transparent
 .theme-dark {
   --table-splitter-color: rgba(255,255,255,0.15);
   --table-zebra-background: rgba(255,255,255,0.05);
+  --smw-margin: #000;
+  --smw-item-top-border: rgba(0,0,0,0.2);
+  --smw-item-bottom-border: rgba(128,128,128,0.15);
 }
 .theme-light {
   --table-splitter-color: rgba(0,0,0,0.15);
   --table-zebra-background: rgba(0,0,0,0.05);
+  --smw-margin: #aaa;
+  --smw-item-top-border: rgba(128,128,128,0.15);
+  --smw-item-bottom-border: transparent;
 }
 
 /* Generic pane helpers */
 
 .generic-toggled-side-pane {
   -moz-margin-start: 0 !important;
   /* Unfortunately, transitions don't work properly with locale-aware properties,
      so both the left and right margins are set via js, while the start margin
@@ -215,21 +214,19 @@
 }
 
 .breadcrumbs-widget-item > .button-box {
   border: none;
   padding-top: 0;
   padding-bottom: 0;
 }
 
-%ifdef XP_WIN
-.breadcrumbs-widget-item:-moz-focusring > .button-box {
+:root[platform="win"] .breadcrumbs-widget-item:-moz-focusring > .button-box {
   border-width: 0;
 }
-%endif
 
 .breadcrumbs-widget-item:not([checked]) {
   background: -moz-element(#breadcrumb-separator-normal) no-repeat center left;
 }
 
 .breadcrumbs-widget-item[checked] + .breadcrumbs-widget-item {
   background: -moz-element(#breadcrumb-separator-after) no-repeat 0 0;
 }
@@ -353,34 +350,24 @@
 
 .side-menu-widget-container {
   /* Hack: force hardware acceleration */
   transform: translateZ(1px);
 }
 
 /* SideMenuWidget container */
 
-.theme-dark .side-menu-widget-container:-moz-locale-dir(ltr),
-.theme-dark .side-menu-widget-empty-text:-moz-locale-dir(ltr) {
-  box-shadow: inset -1px 0 0 @smw_marginDark@;
-}
-
-.theme-dark .side-menu-widget-container:-moz-locale-dir(rtl),
-.theme-dark .side-menu-widget-empty-text:-moz-locale-dir(rtl) {
-  box-shadow: inset 1px 0 0 @smw_marginDark@;
-}
-
 .side-menu-widget-container:-moz-locale-dir(ltr),
 .side-menu-widget-empty-text:-moz-locale-dir(ltr) {
-  box-shadow: inset -1px 0 0 @smw_marginLight@;
+  box-shadow: inset -1px 0 0 var(--smw-margin);
 }
 
 .side-menu-widget-container:-moz-locale-dir(rtl),
 .side-menu-widget-empty-text:-moz-locale-dir(rtl) {
-  box-shadow: inset 1px 0 0 @smw_marginLight@;
+  box-shadow: inset 1px 0 0 var(--smw-margin);
 }
 
 .side-menu-widget-group {
   /* To allow visibility of the dark margin shadow. */
   -moz-margin-end: 1px;
 }
 
 .side-menu-widget-container[with-arrows=true] .side-menu-widget-item {
@@ -407,36 +394,33 @@
 
 .side-menu-widget-item {
   /* To compensate for the top and bottom borders */
   margin-top: -1px;
   margin-bottom: -1px;
   background-clip: padding-box;
 }
 
+.side-menu-widget-item {
+  border-top: 1px solid var(--smw-item-top-border);
+  border-bottom: 1px solid var(--smw-item-bottom-border);
+}
+
+.side-menu-widget-item:last-of-type {
+  box-shadow: inset 0 -1px 0 var(--smw-item-top-border);
+}
+
 .theme-dark .side-menu-widget-item {
-  border-top: 1px solid @smw_itemDarkTopBorder@;
-  border-bottom: 1px solid @smw_itemDarkBottomBorder@;
   color: var(--theme-selection-color);
 }
 
-.theme-dark .side-menu-widget-item:last-of-type {
-  box-shadow: inset 0 -1px 0 @smw_itemDarkTopBorder@;
-}
-
 .theme-light .side-menu-widget-item {
-  border-top: 1px solid @smw_itemLightTopBorder@;
-  border-bottom: 1px solid @smw_itemLightBottomBorder@;
   color: var(--theme-body-color);
 }
 
-.theme-light .side-menu-widget-item:last-of-type {
-  box-shadow: inset 0 -1px 0 @smw_itemLightTopBorder@;
-}
-
 .side-menu-widget-item.selected {
   background-color: var(--theme-selection-background);
   color: var(--theme-selection-color);
 }
 
 .side-menu-widget-item-arrow {
   -moz-margin-start: -7px;
   width: 7px; /* The image's width is 7 pixels */
@@ -454,29 +438,29 @@
   background-position: center right, top right;
 }
 
 .side-menu-widget-item.selected > .side-menu-widget-item-arrow:-moz-locale-dir(rtl) {
   background-position: center left, top left;
 }
 
 .theme-dark .side-menu-widget-item.selected > .side-menu-widget-item-arrow:-moz-locale-dir(ltr) {
-  background-image: url(images/itemArrow-dark-ltr.svg), linear-gradient(to right, @smw_marginDark@, @smw_marginDark@);
+  background-image: url(images/itemArrow-dark-ltr.svg), linear-gradient(to right, var(--smw-margin), var(--smw-margin));
 }
 
 .theme-dark .side-menu-widget-item.selected > .side-menu-widget-item-arrow:-moz-locale-dir(rtl) {
-  background-image: url(images/itemArrow-dark-rtl.svg), linear-gradient(to right, @smw_marginDark@, @smw_marginDark@);
+  background-image: url(images/itemArrow-dark-rtl.svg), linear-gradient(to right, var(--smw-margin), var(--smw-margin));
 }
 
 .theme-light .side-menu-widget-item.selected > .side-menu-widget-item-arrow:-moz-locale-dir(ltr) {
-  background-image: url(images/itemArrow-ltr.svg), linear-gradient(to right, @smw_marginLight@, @smw_marginLight@);
+  background-image: url(images/itemArrow-ltr.svg), linear-gradient(to right, var(--smw-margin), var(--smw-margin));
 }
 
 .theme-light .side-menu-widget-item.selected > .side-menu-widget-item-arrow:-moz-locale-dir(rtl) {
-  background-image: url(images/itemArrow-rtl.svg), linear-gradient(to right, @smw_marginLight@, @smw_marginLight@);
+  background-image: url(images/itemArrow-rtl.svg), linear-gradient(to right, var(--smw-margin), var(--smw-margin));
 }
 
 /* SideMenuWidget items contents */
 
 .side-menu-widget-item-contents {
   padding: 4px;
   /* To avoid having content overlapping the arrow image. */
   -moz-padding-end: 8px;
