
# HG changeset patch
# User Bianca Danforth <bdanforth@mozilla.com>
# Date 1548368163 28800
# Node ID 3592b25e3ffc000727533aa3a44b12168130fb06
# Parent  2c5eb9d8b8e2680e7ff3d8fe2714bfd78ef0c7d0
Bug 1517083 - Enable running custom tests on extension-based experiments; r=rhelmer

Building off the work from Bug 1451159, this creates a new ./testing/extensions directory and adds it to the list of directories to check for moz.build files in ./toolkit/toolkit.mozbuild.

This will enable developers to run custom tests on their extensions locally and on the Try server by following the steps in the ./testing/extensions/README.txt file.

Differential Revision: https://phabricator.services.mozilla.com/D17568

diff --git a/testing/extensions/README.txt b/testing/extensions/README.txt
new file mode 100644
--- /dev/null
+++ b/testing/extensions/README.txt
@@ -0,0 +1,4 @@
+To run custom Mozilla tests on an extension (Bug 1517083):
+1. Drop an extension XPI into testing/profiles/common/extensions (Bug 145119); this extension will be installed with the testing profile.
+2. Drop a moz.build file in this directory that registers any relevant manifests for any tests to be run for the extension
+3. Drop those tests into this directory
diff --git a/toolkit/toolkit.mozbuild b/toolkit/toolkit.mozbuild
--- a/toolkit/toolkit.mozbuild
+++ b/toolkit/toolkit.mozbuild
@@ -181,16 +181,17 @@ if CONFIG['ENABLE_TESTS']:
         '/testing/mochitest',
         '/testing/xpcshell',
         '/testing/tools/minidumpwriter',
         '/testing/tools/screenshot',
         '/testing/profiles',
         '/testing/modules',
         '/testing/runtimes',
         '/testing/web-platform',
+        '/testing/extensions',
     ]
 
     # The file id utility requires breakpad libraries.
     if CONFIG['MOZ_CRASHREPORTER']:
         DIRS += ['/testing/tools/fileid']
 
     if CONFIG['MOZ_MEMORY']:
         DIRS += ['/memory/gtest']

