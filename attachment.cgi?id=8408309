#HG changeset patch
# Parent 6196c121c4f4f7241931e7ce1608c8c97c7433d6
# User Albert Juh√© Lluveras <aljullu@gmail.com>
Bug 951714 - DevTools Themes: Update network panel table headers to match new theme. f=bgrins
* * *
Bug 951714 - DevTools Themes: Update network panel table headers to match new theme. f=bgrins

diff --git a/browser/devtools/netmonitor/netmonitor-view.js b/browser/devtools/netmonitor/netmonitor-view.js
--- a/browser/devtools/netmonitor/netmonitor-view.js
+++ b/browser/devtools/netmonitor/netmonitor-view.js
@@ -764,29 +764,33 @@ RequestsMenuView.prototype = Heritage.ex
   sortBy: function(aType = "waterfall") {
     let target = $("#requests-menu-" + aType + "-button");
     let headers = document.querySelectorAll(".requests-menu-header-button");
 
     for (let header of headers) {
       if (header != target) {
         header.removeAttribute("sorted");
         header.removeAttribute("tooltiptext");
+        header.parentNode.removeAttribute("active");
       }
     }
 
     let direction = "";
     if (target) {
       if (target.getAttribute("sorted") == "ascending") {
         target.setAttribute("sorted", direction = "descending");
         target.setAttribute("tooltiptext", L10N.getStr("networkMenu.sortedDesc"));
       } else {
         target.setAttribute("sorted", direction = "ascending");
         target.setAttribute("tooltiptext", L10N.getStr("networkMenu.sortedAsc"));
       }
     }
+    if (target.id !== "requests-menu-status-button") {
+     target.parentNode.setAttribute("active", "true");
+    }
 
     // Sort by whatever was requested.
     switch (aType) {
       case "status":
         if (direction == "ascending") {
           this.sortContents(this._byStatus);
         } else {
           this.sortContents((a, b) => !this._byStatus(a, b));
diff --git a/browser/themes/linux/jar.mn b/browser/themes/linux/jar.mn
--- a/browser/themes/linux/jar.mn
+++ b/browser/themes/linux/jar.mn
@@ -271,16 +271,18 @@ browser.jar:
   skin/classic/browser/devtools/tool-network.svg            (../shared/devtools/images/tool-network.svg)
   skin/classic/browser/devtools/tool-scratchpad.svg         (../shared/devtools/images/tool-scratchpad.svg)
   skin/classic/browser/devtools/close.png                   (../shared/devtools/images/close.png)
   skin/classic/browser/devtools/close@2x.png                (../shared/devtools/images/close@2x.png)
   skin/classic/browser/devtools/vview-delete.png            (../shared/devtools/images/vview-delete.png)
   skin/classic/browser/devtools/vview-lock.png              (../shared/devtools/images/vview-lock.png)
   skin/classic/browser/devtools/vview-edit.png              (../shared/devtools/images/vview-edit.png)
   skin/classic/browser/devtools/vview-open-inspector.png    (../shared/devtools/images/vview-open-inspector.png)
+  skin/classic/browser/devtools/sort-arrows.png             (../shared/devtools/images/sort-arrows.png)
+  skin/classic/browser/devtools/sort-arrows@2x.png          (../shared/devtools/images/sort-arrows@2x.png)
   skin/classic/browser/devtools/undock@2x.png               (../shared/devtools/images/undock@2x.png)
   skin/classic/browser/devtools/font-inspector.css          (devtools/font-inspector.css)
   skin/classic/browser/devtools/computedview.css            (devtools/computedview.css)
   skin/classic/browser/devtools/arrow-e.png                 (devtools/arrow-e.png)
   skin/classic/browser/devtools/responsiveui-rotate.png     (../shared/devtools/responsiveui-rotate.png)
   skin/classic/browser/devtools/responsiveui-touch.png      (../shared/devtools/responsiveui-touch.png)
   skin/classic/browser/devtools/responsiveui-screenshot.png (../shared/devtools/responsiveui-screenshot.png)
   skin/classic/browser/devtools/app-manager/connection-footer.css     (../shared/devtools/app-manager/connection-footer.css)
diff --git a/browser/themes/osx/jar.mn b/browser/themes/osx/jar.mn
--- a/browser/themes/osx/jar.mn
+++ b/browser/themes/osx/jar.mn
@@ -392,16 +392,18 @@ browser.jar:
   skin/classic/browser/devtools/tool-network.svg            (../shared/devtools/images/tool-network.svg)
   skin/classic/browser/devtools/tool-scratchpad.svg         (../shared/devtools/images/tool-scratchpad.svg)
   skin/classic/browser/devtools/close.png                   (../shared/devtools/images/close.png)
   skin/classic/browser/devtools/close@2x.png                (../shared/devtools/images/close@2x.png)
   skin/classic/browser/devtools/vview-delete.png            (../shared/devtools/images/vview-delete.png)
   skin/classic/browser/devtools/vview-lock.png              (../shared/devtools/images/vview-lock.png)
   skin/classic/browser/devtools/vview-edit.png              (../shared/devtools/images/vview-edit.png)
   skin/classic/browser/devtools/vview-open-inspector.png    (../shared/devtools/images/vview-open-inspector.png)
+  skin/classic/browser/devtools/sort-arrows.png             (../shared/devtools/images/sort-arrows.png)
+  skin/classic/browser/devtools/sort-arrows@2x.png          (../shared/devtools/images/sort-arrows@2x.png)
   skin/classic/browser/devtools/undock@2x.png               (../shared/devtools/images/undock@2x.png)
   skin/classic/browser/devtools/font-inspector.css          (devtools/font-inspector.css)
   skin/classic/browser/devtools/computedview.css            (devtools/computedview.css)
   skin/classic/browser/devtools/arrow-e.png                 (devtools/arrow-e.png)
   skin/classic/browser/devtools/responsiveui-rotate.png     (../shared/devtools/responsiveui-rotate.png)
   skin/classic/browser/devtools/responsiveui-touch.png      (../shared/devtools/responsiveui-touch.png)
   skin/classic/browser/devtools/responsiveui-screenshot.png (../shared/devtools/responsiveui-screenshot.png)
   skin/classic/browser/devtools/app-manager/connection-footer.css     (../shared/devtools/app-manager/connection-footer.css)
diff --git a/browser/themes/shared/devtools/images/sort-arrows.png b/browser/themes/shared/devtools/images/sort-arrows.png
new file mode 100644
index 0000000000000000000000000000000000000000..702e74bc13d2421525270f0fc41418e64c99607b
GIT binary patch
literal 262
zc$@(S0r~!kP)<h;3K|Lk000e1NJLTq000&M000XJ1^@s6d;EQV0002ZNkl<ZC>8CH
zu?~VT5Qb^f#J+$Fabt0G>D1_;D-Xpp@F)=241=i)Jb>(M8UhP}q-pI9N5s)M(&fAR
z?`zYX=dI@-8z_o`*L8gXe!oXBaDs649(t{{WsDIZ=ll@_L4_VNiXs+<;h7M!b=fOT
z)2qug&gX}%wWKV|Bc*hQLt{)Mgt)oO7Be8YN+~&x<LtT*G*U{1F2xHF<avH~^0VtY
z1B4z$^ngi{9QwZZr)e_7Fc@Ilwm#&a-lC4<c#~z>3Ah-n&957H18t3Di|PAdH~;_u
M07*qoM6N<$g4Ydj6#xJL

diff --git a/browser/themes/shared/devtools/images/sort-arrows@2x.png b/browser/themes/shared/devtools/images/sort-arrows@2x.png
new file mode 100644
index 0000000000000000000000000000000000000000..5cf6b41c2a707ec038344570668f2ed28cfdfa59
GIT binary patch
literal 560
zc$@(+0?+-4P)<h;3K|Lk000e1NJLTq001li000&U1^@s6yJddL0005^Nkl<ZNDb{%
z!D<>&6dfIB1{Z@al2w{4lmuHh;vy~rNgy-`A};(A|G?jIp&%kipv8own}TE`2yP^8
zv*-jwRM63kIVa?m*O97O6kN=O$9?y{^X{B`-W^5p%u~Qqz*AtW73lSPAG_V|r%g%v
zHU<6<T)W*qK;6@~+Bfld{9)a9mI$NBv0)f7UR=O@F#1)6{C<BY8jXHmg>j#?TCH7G
zRWBUJQF(?M&#*7aWYThD<#>rOId(doQxw{lf!qu7^o(uWW>Y^BiNrNhE1M!-80wqD
z;qY=cn;9ZUuW8!UG|j76EH;$$^4>28-1EbwQt1xGED&1AYdW1ejOn?c$nR>kdix%-
zm{-HHtn<-mq~ZQTUX#g0=NU0>ULt;d4iO07Y&M-#D)lQI4)24wKA+DO_rixp7@x0&
zLctdI*7;(w7zl+zXJ|T%`wCu>g8cDp9N*IhgTZbj5_upGcg>}dkO5H71nJM1ufICR
z7}))O|0<Wu{qyPMI^1*A8jZ#Y{2uDPjt>a?xR*V#%)uVh>GYlZ^;Qz*<yx(_qwD%P
zeh?L^5I=`1&1^RN#Pdz9Uau$cN{2FD5EVIh90&xunM~$hoYSu*Oi;O8{tyfXPuTf*
yJpPu?=YKN4)mEugj<~j(q({zEz*E3eKzRXX7$@q6krqe*0000<MNUMnLSTX>&IkYi

diff --git a/browser/themes/shared/devtools/netmonitor.inc.css b/browser/themes/shared/devtools/netmonitor.inc.css
--- a/browser/themes/shared/devtools/netmonitor.inc.css
+++ b/browser/themes/shared/devtools/netmonitor.inc.css
@@ -29,26 +29,30 @@
   display: none;
 }
 
 %filter substitution
 %define table_itemDarkStartBorder rgba(0,0,0,0.2)
 %define table_itemDarkEndBorder rgba(128,128,128,0.15)
 %define table_itemLightStartBorder rgba(128,128,128,0.25)
 %define table_itemLightEndBorder transparent
+%define smallSeparatorDark linear-gradient(transparent 15%, #5a6169 15%, #5a6169 85%, transparent 85%)
+%define smallSeparatorLight linear-gradient(transparent 15%, #aaa 15%, #aaa 85%, transparent 85%)
+%define solidSeparatorDark linear-gradient(#2d5b7d, #2d5b7d)
+%define solidSeparatorLight linear-gradient(#aaa, #aaa)
 
 /* Network requests table */
 
 #requests-menu-toolbar {
   padding: 0;
 }
 
-.requests-menu-header:first-child,
-.requests-menu-subitem:first-child {
-  -moz-padding-start: 6px;
+#toolbar-labels .requests-menu-header {
+  border-width: 0;
+  box-shadow: none;
 }
 
 .requests-menu-subitem {
   padding: 3px;
 }
 
 .theme-dark .requests-menu-header:not(:last-child),
 .theme-dark .requests-menu-subitem:not(:last-child) {
@@ -69,66 +73,104 @@
 
 .theme-light .requests-menu-header:not(:last-child):-moz-locale-dir(rtl),
 .theme-light .requests-menu-subitem:not(:last-child):-moz-locale-dir(rtl) {
   box-shadow: -1px 0 0 @table_itemLightEndBorder@;
 }
 
 .requests-menu-header-button {
   -moz-appearance: none;
-  background: none;
+  background-color: transparent;
+  border-width: 0 0 0 1px;
   min-width: 1px;
-  min-height: 32px;
+  min-height: 26px;
   margin: 0;
-  border: none;
-  padding: 0;
+  padding: 0 17px;
   color: inherit;
   font-weight: inherit !important;
-  transition: background-color 0.1s ease-in-out;
 }
 
-.requests-menu-header-button:hover {
-  background: rgba(0,0,0,0.10);
+.theme-dark .requests-menu-header-button {
+  border-image: @smallSeparatorDark@ 1 1;
 }
 
-.requests-menu-header-button:hover:active {
-  background: rgba(0,0,0,0.25);
+.theme-light .requests-menu-header-button {
+  border-image: @smallSeparatorLight@ 1 1;
 }
 
-.requests-menu-header-button:not(:active)[sorted] {
-  background: rgba(0,0,0,0.15);
+#requests-menu-status-and-method-header-box .requests-menu-header-button:first-child {
+  border-width: 0;
 }
 
-.requests-menu-header-button:not(:active)[sorted=ascending] {
-  background-image: radial-gradient(farthest-side at center top, hsla(200,100%,70%,.7), hsla(200,100%,70%,0.3));
-  background-size: 100% 1px;
-  background-repeat: no-repeat;
+.theme-dark .requests-menu-header-button:hover {
+  background-color: hsla(206,37%,4%,.2);
 }
 
-.requests-menu-header-button:not(:active)[sorted=descending] {
-  background-image: radial-gradient(farthest-side at center bottom, hsla(200,100%,70%,.7), hsla(200,100%,70%,0.3));
-  background-size: 100% 1px;
-  background-repeat: no-repeat;
-  background-position: bottom;
+.theme-light .requests-menu-header-button:hover {
+  background-color: #ddd;
+}
+
+.requests-menu-header-button::after {
+  content: "";
+  display: block;
+  height: 4px;
+  margin-top: 11px;
+  margin-right: -10px;
+  width: 7px;
+}
+
+.requests-menu-header-button[sorted=ascending]::after {
+  background: url('chrome://browser/skin/devtools/sort-arrows.png') no-repeat -13px -3px;
+}
+
+.requests-menu-header-button[sorted=descending]::after {
+  background: url('chrome://browser/skin/devtools/sort-arrows.png') no-repeat -2px -4px;
+}
+
+.theme-dark .requests-menu-header-button[sorted] {
+  background-color: #1d4f73;
+  border-image: @solidSeparatorDark@ 1 1;
+}
+
+.theme-light .requests-menu-header-button[sorted] {
+  background-color: #4c9ed9;
+  border-image: @solidSeparatorLight@ 1 1;
+  color: #f5f7fa;
+}
+
+.theme-dark .requests-menu-header-button[sorted] + .requests-menu-header-button,
+.theme-dark .requests-menu-header[active] + .requests-menu-header .requests-menu-header-button {
+  border-image: @solidSeparatorDark@ 1 1;
+}
+
+.theme-light .requests-menu-header-button[sorted] + .requests-menu-header-button,
+.theme-light .requests-menu-header[active] + .requests-menu-header .requests-menu-header-button {
+  border-image: @solidSeparatorLight@ 1 1;
 }
 
 /* Network requests table: specific column dimensions */
 
+.requests-menu-header-button {
+  min-width: 40px;
+}
+
 .requests-menu-status-and-method {
-  width: 12em;
+  width: 8em;
 }
 
 .requests-menu-status {
+  padding-left: 0;
   width: 20px;
   height: 10px;
 }
 
 .requests-menu-method {
   text-align: center;
   font-weight: 600;
+  width: 6em;
 }
 
 .requests-menu-icon-and-file {
   width: 20vw;
   min-width: 4em;
 }
 
 .requests-menu-icon {
@@ -153,17 +195,17 @@
 
 .requests-menu-domain {
   width: 14vw;
   min-width: 10em;
 }
 
 .requests-menu-type {
   text-align: center;
-  width: 4em;
+  width: 5em;
 }
 
 .requests-menu-size {
   text-align: center;
   width: 8em;
 }
 
 /* Network requests table: status codes */
@@ -262,53 +304,38 @@ label.requests-menu-status-code {
   width: 100px;
   padding-top: 2px;
   -moz-padding-start: 4px;
   font-size: 75%;
   pointer-events: none;
 }
 
 .requests-menu-timings-division:not(:first-child) {
-  -moz-border-start: 1px dotted;
+  -moz-border-start: 1px dashed;
   -moz-margin-start: -100px !important; /* Don't affect layout. */
 }
 
 .requests-menu-timings-division:-moz-locale-dir(ltr) {
   transform-origin: left center;
 }
 
 .requests-menu-timings-division:-moz-locale-dir(rtl) {
   transform-origin: right center;
 }
 
-.theme-dark .requests-menu-timings-division[division-scale=millisecond] {
-  -moz-border-start-color: #f5f7fa !important; /* Light foreground text */
+.theme-dark .requests-menu-timings-division {
+  -moz-border-start-color: #5a6169 !important; /* Light foreground text */
 }
 
-.theme-light .requests-menu-timings-division[division-scale=millisecond] {
+.theme-light .requests-menu-timings-division {
   -moz-border-start-color: #585959 !important; /* Grey foreground text */
 }
 
-.theme-dark .requests-menu-timings-division[division-scale=second] {
-  -moz-border-start-color: #f5f7fa !important; /* Light foreground text */
-  font-weight: 600;
-}
-
-.theme-light .requests-menu-timings-division[division-scale=second] {
-  -moz-border-start-color: #585959 !important; /* Grey foreground text */
-  font-weight: 600;
-}
-
-.theme-dark .requests-menu-timings-division[division-scale=minute] {
-  -moz-border-start-color: #f5f7fa !important; /* Light foreground text */
-  font-weight: 600;
-}
-
-.theme-light .requests-menu-timings-division[division-scale=minute] {
-  -moz-border-start-color: #585959 !important; /* Grey foreground text */
+.requests-menu-timings-division[division-scale=second]
+.requests-menu-timings-division[division-scale=minute] {
   font-weight: 600;
 }
 
 /* Network requests table: waterfall items */
 
 .requests-menu-subitem.requests-menu-waterfall {
   -moz-padding-start: 0px;
   -moz-padding-end: 4px;
diff --git a/browser/themes/shared/devtools/toolbars.inc.css b/browser/themes/shared/devtools/toolbars.inc.css
--- a/browser/themes/shared/devtools/toolbars.inc.css
+++ b/browser/themes/shared/devtools/toolbars.inc.css
@@ -771,17 +771,19 @@
 .theme-light .devtools-toolbarbutton > image,
 .theme-light .devtools-option-toolbarbutton > image,
 .theme-light #breadcrumb-separator-normal,
 .theme-light .scrollbutton-up > .toolbarbutton-icon,
 .theme-light .scrollbutton-down > .toolbarbutton-icon,
 .theme-light #black-boxed-message-button .button-icon,
 .theme-light #canvas-debugging-empty-notice-button .button-icon,
 .theme-light #requests-menu-perf-notice-button .button-icon,
-.theme-light #requests-menu-network-summary-button .button-icon {
+.theme-light #requests-menu-network-summary-button .button-icon,
+.theme-light .requests-menu-header-button[sorted=ascending]::after,
+.theme-light .requests-menu-header-button[sorted=descending]::after {
   filter: url(filters.svg#invert);
 }
 
 /* Since selected backgrounds are blue, we want to use the normal
  * (light) icons. */
 .theme-light .command-button-invertable[checked=true]:not(:active) > image,
 .theme-light .devtools-tab[icon-invertable][selected] > image,
 .theme-light .devtools-tab[icon-invertable][highlighted] > image,
diff --git a/browser/themes/windows/jar.mn b/browser/themes/windows/jar.mn
--- a/browser/themes/windows/jar.mn
+++ b/browser/themes/windows/jar.mn
@@ -307,16 +307,18 @@ browser.jar:
         skin/classic/browser/devtools/tool-network.svg              (../shared/devtools/images/tool-network.svg)
         skin/classic/browser/devtools/tool-scratchpad.svg           (../shared/devtools/images/tool-scratchpad.svg)
         skin/classic/browser/devtools/close.png                     (../shared/devtools/images/close.png)
         skin/classic/browser/devtools/close@2x.png                  (../shared/devtools/images/close@2x.png)
         skin/classic/browser/devtools/vview-delete.png              (../shared/devtools/images/vview-delete.png)
         skin/classic/browser/devtools/vview-lock.png                (../shared/devtools/images/vview-lock.png)
         skin/classic/browser/devtools/vview-edit.png                (../shared/devtools/images/vview-edit.png)
         skin/classic/browser/devtools/vview-open-inspector.png      (../shared/devtools/images/vview-open-inspector.png)
+        skin/classic/browser/devtools/sort-arrows.png               (../shared/devtools/images/sort-arrows.png)
+        skin/classic/browser/devtools/sort-arrows@2x.png            (../shared/devtools/images/sort-arrows@2x.png)
         skin/classic/browser/devtools/undock@2x.png                 (../shared/devtools/images/undock@2x.png)
         skin/classic/browser/devtools/font-inspector.css            (devtools/font-inspector.css)
         skin/classic/browser/devtools/computedview.css              (devtools/computedview.css)
         skin/classic/browser/devtools/arrow-e.png                   (devtools/arrow-e.png)
         skin/classic/browser/devtools/responsiveui-rotate.png       (../shared/devtools/responsiveui-rotate.png)
         skin/classic/browser/devtools/responsiveui-touch.png        (../shared/devtools/responsiveui-touch.png)
         skin/classic/browser/devtools/responsiveui-screenshot.png   (../shared/devtools/responsiveui-screenshot.png)
         skin/classic/browser/devtools/app-manager/connection-footer.css     (../shared/devtools/app-manager/connection-footer.css)
@@ -669,16 +671,18 @@ browser.jar:
         skin/classic/aero/browser/devtools/tool-network.svg          (../shared/devtools/images/tool-network.svg)
         skin/classic/aero/browser/devtools/tool-scratchpad.svg       (../shared/devtools/images/tool-scratchpad.svg)
         skin/classic/aero/browser/devtools/close.png                 (../shared/devtools/images/close.png)
         skin/classic/aero/browser/devtools/close@2x.png              (../shared/devtools/images/close@2x.png)
         skin/classic/aero/browser/devtools/vview-delete.png          (../shared/devtools/images/vview-delete.png)
         skin/classic/aero/browser/devtools/vview-lock.png            (../shared/devtools/images/vview-lock.png)
         skin/classic/aero/browser/devtools/vview-edit.png            (../shared/devtools/images/vview-edit.png)
         skin/classic/aero/browser/devtools/vview-open-inspector.png  (../shared/devtools/images/vview-open-inspector.png)
+        skin/classic/aero/browser/devtools/sort-arrows.png           (../shared/devtools/images/sort-arrows.png)
+        skin/classic/aero/browser/devtools/sort-arrows@2x.png        (../shared/devtools/images/sort-arrows@2x.png)
         skin/classic/aero/browser/devtools/undock@2x.png             (../shared/devtools/images/undock@2x.png)
         skin/classic/aero/browser/devtools/font-inspector.css        (devtools/font-inspector.css)
         skin/classic/aero/browser/devtools/computedview.css          (devtools/computedview.css)
         skin/classic/aero/browser/devtools/arrow-e.png               (devtools/arrow-e.png)
         skin/classic/aero/browser/devtools/responsiveui-rotate.png   (../shared/devtools/responsiveui-rotate.png)
         skin/classic/aero/browser/devtools/responsiveui-touch.png    (../shared/devtools/responsiveui-touch.png)
         skin/classic/aero/browser/devtools/responsiveui-screenshot.png (../shared/devtools/responsiveui-screenshot.png)
         skin/classic/aero/browser/devtools/app-manager/connection-footer.css     (../shared/devtools/app-manager/connection-footer.css)
