# HG changeset patch
# Parent 5925b5f3fe1b2894e63c058a218f4763d699f6e5
# User Tim Nguyen <ntim.bugs@gmail.com>
Bug 1087618 - Update about:tabcrashed, about:sessionrestore, about:welcomeback to the new in-content style. r=Unfocused

diff --git a/browser/base/content/aboutTabCrashed.xhtml b/browser/base/content/aboutTabCrashed.xhtml
--- a/browser/base/content/aboutTabCrashed.xhtml
+++ b/browser/base/content/aboutTabCrashed.xhtml
@@ -18,29 +18,42 @@
   <!ENTITY % brandDTD SYSTEM "chrome://branding/locale/brand.dtd" >
   %brandDTD;
 
 ]>
 
 <html xmlns="http://www.w3.org/1999/xhtml">
   <head>
     <link rel="stylesheet" type="text/css" media="all"
+          href="chrome://global/skin/netError.css"/>
+    <link rel="stylesheet" type="text/css" media="all"
           href="chrome://browser/skin/aboutTabCrashed.css"/>
   </head>
 
   <body dir="&locale.dir;">
-    <div id="error-box">
-      <p id="main-error-msg">&tabCrashed.header;</p>
-      <p id="helper-error-msg">&tabCrashed.message;</p>
-    </div>
+    <div id="errorPageContainer">
 
-    <div id="report-box">
-      <input type="checkbox" id="checkSendReport" checked="checked"/>
-      <label for="checkSendReport">&tabCrashed.checkSendReport;</label>
-    </div>
+      <div id="errorTitle">
+        <h1 id="main-error-msg">&tabCrashed.header;</h1>
+      </div>
 
-    <div id="button-box">
-      <button id="tryAgain">&tabCrashed.tryAgain;</button>
+      <div id="errorLongContent">
+        <div id="errorShortDesc">
+          <p id="helper-error-msg">&tabCrashed.message;</p>
+        </div>
+
+        <div id="errorLongDesc">
+          <div id="report-box">
+            <input type="checkbox" id="checkSendReport" checked="checked"/>
+            <label for="checkSendReport">&tabCrashed.checkSendReport;</label>
+          </div>
+
+          <div id="button-box">
+            <button id="tryAgain">&tabCrashed.tryAgain;</button>
+          </div>
+        </div>
+      </div>
+
     </div>
   </body>
 
   <script type="text/javascript;version=1.8" src="chrome://browser/content/aboutTabCrashed.js"/>
 </html>
diff --git a/browser/components/migration/content/aboutWelcomeBack.xhtml b/browser/components/migration/content/aboutWelcomeBack.xhtml
--- a/browser/components/migration/content/aboutWelcomeBack.xhtml
+++ b/browser/components/migration/content/aboutWelcomeBack.xhtml
@@ -79,16 +79,17 @@
           </tree>
         </div>
       </div>
 
       <!-- Buttons -->
       <hbox xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul" id="buttons">
         <button id="errorTryAgain" label="&welcomeback2.restoreButton;"
                 accesskey="&welcomeback2.restoreButton.access;"
-                oncommand="restoreSession();"/>
+                oncommand="restoreSession();"
+                class="primary"/>
       </hbox>
       <!-- holds the session data for when the tab is closed -->
       <input type="text" id="sessionData" style="display: none;"/>
     </div>
 
   </body>
 </html>
diff --git a/browser/components/sessionstore/content/aboutSessionRestore.xhtml b/browser/components/sessionstore/content/aboutSessionRestore.xhtml
--- a/browser/components/sessionstore/content/aboutSessionRestore.xhtml
+++ b/browser/components/sessionstore/content/aboutSessionRestore.xhtml
@@ -71,21 +71,23 @@
       <!-- Buttons -->
       <hbox xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul" id="buttons">
 #ifdef XP_UNIX
         <button id="errorCancel" label="&restorepage.closeButton;"
                 accesskey="&restorepage.close.access;"
                 oncommand="startNewSession();"/>
         <button id="errorTryAgain" label="&restorepage.tryagainButton;"
                 accesskey="&restorepage.restore.access;"
-                oncommand="restoreSession();"/>
+                oncommand="restoreSession();"
+                class="primary"/>
 #else
         <button id="errorTryAgain" label="&restorepage.tryagainButton;"
                 accesskey="&restorepage.restore.access;"
-                oncommand="restoreSession();"/>
+                oncommand="restoreSession();"
+                class="primary"/>
         <button id="errorCancel" label="&restorepage.closeButton;"
                 accesskey="&restorepage.close.access;"
                 oncommand="startNewSession();"/>
 #endif
       </hbox>
       <!-- holds the session data for when the tab is closed -->
       <input type="text" id="sessionData" style="display: none;"/>
     </div>
diff --git a/browser/themes/linux/aboutSessionRestore.css b/browser/themes/linux/aboutSessionRestore.css
deleted file mode 100644
--- a/browser/themes/linux/aboutSessionRestore.css
+++ /dev/null
@@ -1,85 +0,0 @@
-%if 0
-/* This Source Code Form is subject to the terms of the Mozilla Public
- * License, v. 2.0. If a copy of the MPL was not distributed with this
- * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
-%endif
-
-html {
-  height: 100%;
-}
-
-body {
-  height: 100%;
-  text-align: center;
-}
-
-#errorPageContainer {
-  background-image: url("moz-icon://stock/gtk-dialog-warning?size=dialog");
-  display: -moz-box;
-  width: -moz-available;
-  height: 70%;
-  -moz-box-orient: vertical;
-  text-align: start;
-}
-
-#errorShortDesc > p {
-  margin-top: 0.4em;
-  margin-bottom: 0;
-}
-
-#errorLongContent, #errorTrailerDesc {
-  display: -moz-box;
-  -moz-box-flex: 1;
-  -moz-box-orient: vertical;
-}
-
-#tabList {
-  margin-top: 2.5em;
-  width: 100%;
-  min-height: 12em;
-}
-
-treechildren::-moz-tree-image(icon),
-treechildren::-moz-tree-image(noicon) {
-  padding-right: 2px;
-  margin: 0px 2px;
-  width: 16px;
-  height: 16px;
-}
-
-treechildren::-moz-tree-image(noicon) {
-  list-style-image: url("chrome://mozapps/skin/places/defaultFavicon.png");
-}
-treechildren::-moz-tree-image(container, noicon) {
-  list-style-image: url("chrome://browser/skin/aboutSessionRestore-window-icon.png");
-}
-treechildren::-moz-tree-image(checked) {
-  list-style-image: url("chrome://global/skin/checkbox/cbox-check.gif");
-}
-treechildren::-moz-tree-image(partial) {
-  list-style-image: url("chrome://global/skin/checkbox/cbox-check-dis.gif");
-}
-
-/* undo odd row highlighting from tree.css */
-treechildren::-moz-tree-row(odd) {
-  background-color: transparent;
-}
-treechildren::-moz-tree-row(odd, selected, focus) {
-  background-color: Highlight;
-}
-
-/* highlight "windows" instead */
-treechildren::-moz-tree-row(alternate) {
-  background-color: -moz-oddtreerow;
-}
-treechildren::-moz-tree-row(alternate, selected) {
-  background-color: Highlight;
-}
-
-#buttons {
-  -moz-margin-start: 80px; /* same as #errorLongContent in netError.css */
-}
-#buttons > button {
-  margin-top: 2em;
-  -moz-margin-start: 5px;
-}
diff --git a/browser/themes/linux/aboutTabCrashed.css b/browser/themes/linux/aboutTabCrashed.css
deleted file mode 100644
--- a/browser/themes/linux/aboutTabCrashed.css
+++ /dev/null
@@ -1,108 +0,0 @@
-body {
-  background-color: rgb(241, 244, 248);
-  margin-top: 2em;
-  font: message-box;
-  font-size: 100%;
-}
-
-p {
-  font-size: .8em;
-}
-
-#error-box {
-  background: url('chrome://global/skin/icons/information-24.png') no-repeat left 4px;
-  -moz-padding-start: 30px;
-}
-
-#error-box:-moz-locale-dir(rtl) {
-  background-position: right 4px;
-}
-
-#main-error-msg {
-  color: #4b4b4b;
-  font-weight: bold;
-}
-
-#report-box {
-  text-align: center;
-  width: 75%;
-  margin: 0 auto;
-  display: none;
-}
-
-.crashDumpAvailable #report-box {
-  display: block
-}
-
-#button-box {
-  text-align: center;
-  width: 75%;
-  margin: 0 auto;
-}
-
-@media all and (min-width: 300px) {
-  #error-box {
-    max-width: 50%;
-    margin: 0 auto;
-    background-image: url('chrome://global/skin/icons/information-32.png');
-    min-height: 36px;
-    -moz-padding-start: 38px;
-  }
-
-  button {
-    width: auto !important;
-    min-width: 150px;
-  }
-}
-
-@media all and (min-width: 780px) {
-  #error-box {
-    max-width: 30%;
-  }
-}
-
-button {
-  font: message-box;
-  font-size: 0.6875em;
-  -moz-appearance: none;
-  -moz-user-select: none;
-  width: 100%;
-  margin: 2px 0;
-  padding: 2px 6px;
-  line-height: 1.2;
-  background-color: hsla(210,30%,95%,.1);
-  background-image: linear-gradient(hsla(0,0%,100%,.6), hsla(0,0%,100%,.1));
-  background-clip: padding-box;
-  border: 1px solid hsla(210,15%,25%,.4);
-  border-color: hsla(210,15%,25%,.3) hsla(210,15%,25%,.35) hsla(210,15%,25%,.4);
-  border-radius: 3px;
-  box-shadow: 0 1px 0 hsla(0,0%,100%,.3) inset,
-              0 0 0 1px hsla(0,0%,100%,.3) inset,
-              0 1px 0 hsla(0,0%,100%,.1);
-
-  transition-property: background-color, border-color, box-shadow;
-  transition-duration: 150ms;
-  transition-timing-function: ease;
-
-}
-
-button:hover {
-  background-color: hsla(210,30%,95%,.8);
-  border-color: hsla(210,15%,25%,.45) hsla(210,15%,25%,.5) hsla(210,15%,25%,.55);
-  box-shadow: 0 1px 0 hsla(0,0%,100%,.3) inset,
-              0 0 0 1px hsla(0,0%,100%,.3) inset,
-              0 1px 0 hsla(0,0%,100%,.1),
-              0 0 3px hsla(210,15%,25%,.1);
-  transition-property: background-color, border-color, box-shadow;
-  transition-duration: 150ms;
-  transition-timing-function: ease;
-}
-
-button:hover:active {
-  background-color: hsla(210,15%,25%,.2);
-  box-shadow: 0 1px 1px hsla(210,15%,25%,.2) inset,
-              0 0 2px hsla(210,15%,25%,.4) inset;
-  transition-property: background-color, border-color, box-shadow;
-  transition-duration: 10ms;
-  transition-timing-function: linear;
-}
diff --git a/browser/themes/linux/jar.mn b/browser/themes/linux/jar.mn
--- a/browser/themes/linux/jar.mn
+++ b/browser/themes/linux/jar.mn
@@ -1,47 +1,50 @@
 # This Source Code Form is subject to the terms of the Mozilla Public
 # License, v. 2.0. If a copy of the MPL was not distributed with this
 # file, You can obtain one at http://mozilla.org/MPL/2.0/.
 
 browser.jar:
 % skin browser classic/1.0 %skin/classic/browser/
 % override chrome://global/skin/icons/warning-16.png moz-icon://stock/gtk-dialog-warning?size=menu
   skin/classic/browser/sanitizeDialog.css
-* skin/classic/browser/aboutSessionRestore.css
+* skin/classic/browser/aboutSessionRestore.css                  (../shared/aboutSessionRestore.css)
   skin/classic/browser/aboutSessionRestore-window-icon.png
   skin/classic/browser/aboutWelcomeBack.css                     (../shared/aboutWelcomeBack.css)
   skin/classic/browser/aboutCertError.css
   skin/classic/browser/aboutCertError_sectionCollapsed.png
   skin/classic/browser/aboutCertError_sectionCollapsed-rtl.png
   skin/classic/browser/aboutCertError_sectionExpanded.png
   skin/classic/browser/aboutNetError.css                        (../shared/aboutNetError.css)
   skin/classic/browser/aboutNetError_info.svg                   (../shared/aboutNetError_info.svg)
   skin/classic/browser/aboutSocialError.css                     (../shared/aboutSocialError.css)
 * skin/classic/browser/aboutProviderDirectory.css               (../shared/aboutProviderDirectory.css)
 #ifdef MOZ_SERVICES_SYNC
   skin/classic/browser/aboutSyncTabs.css
 #endif
-  skin/classic/browser/aboutTabCrashed.css
+  skin/classic/browser/aboutTabCrashed.css                  (../shared/aboutTabCrashed.css)
   skin/classic/browser/actionicon-tab.png
 * skin/classic/browser/browser.css
 * skin/classic/browser/devedition.css
 * skin/classic/browser/browser-lightweightTheme.css
   skin/classic/browser/click-to-play-warning-stripes.png
 * skin/classic/browser/content-contextmenu.svg
 * skin/classic/browser/engineManager.css
   skin/classic/browser/fullscreen-darknoise.png
   skin/classic/browser/Geolocation-16.png
   skin/classic/browser/Geolocation-64.png
   skin/classic/browser/identity.png
   skin/classic/browser/identity-icons-generic.png
   skin/classic/browser/identity-icons-https.png
   skin/classic/browser/identity-icons-https-ev.png
   skin/classic/browser/identity-icons-https-mixed-active.png
   skin/classic/browser/identity-icons-https-mixed-display.png
+  skin/classic/browser/in-content/session-restore.svg       (../shared/incontent-icons/session-restore.svg)
+  skin/classic/browser/in-content/tab-crashed.svg           (../shared/incontent-icons/tab-crashed.svg)
+  skin/classic/browser/in-content/welcome-back.svg          (../shared/incontent-icons/welcome-back.svg)
   skin/classic/browser/Info.png
   skin/classic/browser/mask.png                             (../shared/mask.png)
   skin/classic/browser/mask@2x.png                          (../shared/mask@2x.png)
   skin/classic/browser/menuPanel.png
   skin/classic/browser/menuPanel-customize.png
   skin/classic/browser/menuPanel-exit.png
   skin/classic/browser/menuPanel-help.png
   skin/classic/browser/menuPanel-small.png
diff --git a/browser/themes/osx/aboutSessionRestore.css b/browser/themes/osx/aboutSessionRestore.css
deleted file mode 100644
--- a/browser/themes/osx/aboutSessionRestore.css
+++ /dev/null
@@ -1,69 +0,0 @@
-%if 0
-/* This Source Code Form is subject to the terms of the Mozilla Public
- * License, v. 2.0. If a copy of the MPL was not distributed with this
- * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
-%endif
-
-html {
-  height: 100%;
-}
-
-body {
-  height: 100%;
-  text-align: center;
-}
-
-#errorPageContainer {
-  background-image: url("chrome://global/skin/icons/warning-64.png");
-  display: -moz-box;
-  width: -moz-available;
-  height: 70%;
-  -moz-box-orient: vertical;
-  text-align: start;
-}
-
-#errorShortDesc > p {
-  margin-top: 0.4em;
-  margin-bottom: 0;
-}
-
-#errorLongContent, #errorTrailerDesc {
-  display: -moz-box;
-  -moz-box-flex: 1;
-  -moz-box-orient: vertical;
-}
-
-#tabList {
-  margin-top: 2.5em;
-  width: 100%;
-  min-height: 12em;
-}
-
-treechildren::-moz-tree-image(icon),
-treechildren::-moz-tree-image(noicon) {
-  padding-right: 2px;
-  margin: 0px 2px;
-  width: 16px;
-  height: 16px;
-}
-
-treechildren::-moz-tree-image(noicon) {
-  list-style-image: url("chrome://mozapps/skin/places/defaultFavicon.png");
-}
-treechildren::-moz-tree-image(container, noicon) {
-  list-style-image: url("chrome://browser/skin/aboutSessionRestore-window-icon.png");
-}
-treechildren::-moz-tree-image(checked) {
-  list-style-image: url("chrome://global/skin/checkbox/cbox-check.gif");
-}
-treechildren::-moz-tree-image(partial) {
-  list-style-image: url("chrome://global/skin/checkbox/cbox-check-dis.gif");
-}
-
-#buttons {
-  -moz-margin-start: 80px; /* same as #errorLongContent in netError.css */
-}
-#buttons > button {
-  margin-top: 2em;
-  -moz-margin-start: 6px;
-}
diff --git a/browser/themes/osx/aboutTabCrashed.css b/browser/themes/osx/aboutTabCrashed.css
deleted file mode 100644
--- a/browser/themes/osx/aboutTabCrashed.css
+++ /dev/null
@@ -1,108 +0,0 @@
-body {
-  background-color: rgb(241, 244, 248);
-  margin-top: 2em;
-  font: message-box;
-  font-size: 100%;
-}
-
-p {
-  font-size: .8em;
-}
-
-#error-box {
-  background: url('chrome://global/skin/icons/information-24.png') no-repeat left 4px;
-  -moz-padding-start: 30px;
-}
-
-#error-box:-moz-locale-dir(rtl) {
-  background-position: right 4px;
-}
-
-#main-error-msg {
-  color: #4b4b4b;
-  font-weight: bold;
-}
-
-#report-box {
-  text-align: center;
-  width: 75%;
-  margin: 0 auto;
-  display: none;
-}
-
-.crashDumpAvailable #report-box {
-  display: block
-}
-
-#button-box {
-  text-align: center;
-  width: 75%;
-  margin: 0 auto;
-}
-
-@media all and (min-width: 300px) {
-  #error-box {
-    max-width: 50%;
-    margin: 0 auto;
-    background-image: url('chrome://global/skin/icons/information-32.png');
-    min-height: 36px;
-    -moz-padding-start: 38px;
-  }
-
-  button {
-    width: auto !important;
-    min-width: 150px;
-  }
-}
-
-@media all and (min-width: 780px) {
-  #error-box {
-    max-width: 30%;
-  }
-}
-
-button {
-  font: message-box;
-  font-size: 0.6875em;
-  -moz-appearance: none;
-  -moz-user-select: none;
-  width: 100%;
-  margin: 2px 0;
-  padding: 2px 6px;
-  line-height: 1.2;
-  background-color: hsla(210,30%,95%,.1);
-  background-image: linear-gradient(hsla(0,0%,100%,.6), hsla(0,0%,100%,.1));
-  background-clip: padding-box;
-  border: 1px solid hsla(210,15%,25%,.4);
-  border-color: hsla(210,15%,25%,.3) hsla(210,15%,25%,.35) hsla(210,15%,25%,.4);
-  border-radius: 3px;
-  box-shadow: 0 1px 0 hsla(0,0%,100%,.3) inset,
-              0 0 0 1px hsla(0,0%,100%,.3) inset,
-              0 1px 0 hsla(0,0%,100%,.1);
-
-  transition-property: background-color, border-color, box-shadow;
-  transition-duration: 150ms;
-  transition-timing-function: ease;
-
-}
-
-button:hover {
-  background-color: hsla(210,30%,95%,.8);
-  border-color: hsla(210,15%,25%,.45) hsla(210,15%,25%,.5) hsla(210,15%,25%,.55);
-  box-shadow: 0 1px 0 hsla(0,0%,100%,.3) inset,
-              0 0 0 1px hsla(0,0%,100%,.3) inset,
-              0 1px 0 hsla(0,0%,100%,.1),
-              0 0 3px hsla(210,15%,25%,.1);
-  transition-property: background-color, border-color, box-shadow;
-  transition-duration: 150ms;
-  transition-timing-function: ease;
-}
-
-button:hover:active {
-  background-color: hsla(210,15%,25%,.2);
-  box-shadow: 0 1px 1px hsla(210,15%,25%,.2) inset,
-              0 0 2px hsla(210,15%,25%,.4) inset;
-  transition-property: background-color, border-color, box-shadow;
-  transition-duration: 10ms;
-  transition-timing-function: linear;
-}
diff --git a/browser/themes/osx/jar.mn b/browser/themes/osx/jar.mn
--- a/browser/themes/osx/jar.mn
+++ b/browser/themes/osx/jar.mn
@@ -2,29 +2,29 @@
 # License, v. 2.0. If a copy of the MPL was not distributed with this
 # file, You can obtain one at http://mozilla.org/MPL/2.0/.
 
 browser.jar:
 % skin browser classic/1.0 %skin/classic/browser/
   skin/classic/browser/sanitizeDialog.css                   (sanitizeDialog.css)
   skin/classic/browser/aboutNetError.css                    (../shared/aboutNetError.css)
   skin/classic/browser/aboutNetError_info.svg               (../shared/aboutNetError_info.svg)
-* skin/classic/browser/aboutSessionRestore.css              (aboutSessionRestore.css)
+* skin/classic/browser/aboutSessionRestore.css              (../shared/aboutSessionRestore.css)
   skin/classic/browser/aboutSessionRestore-window-icon.png
   skin/classic/browser/aboutWelcomeBack.css                 (../shared/aboutWelcomeBack.css)
   skin/classic/browser/aboutCertError.css
   skin/classic/browser/aboutCertError_sectionCollapsed.png
   skin/classic/browser/aboutCertError_sectionCollapsed-rtl.png
   skin/classic/browser/aboutCertError_sectionExpanded.png
   skin/classic/browser/aboutSocialError.css                 (../shared/aboutSocialError.css)
 * skin/classic/browser/aboutProviderDirectory.css           (../shared/aboutProviderDirectory.css)
 #ifdef MOZ_SERVICES_SYNC
   skin/classic/browser/aboutSyncTabs.css
 #endif
-  skin/classic/browser/aboutTabCrashed.css
+  skin/classic/browser/aboutTabCrashed.css                  (../shared/aboutTabCrashed.css)
   skin/classic/browser/actionicon-tab.png
   skin/classic/browser/actionicon-tab@2x.png
 * skin/classic/browser/browser.css                          (browser.css)
 * skin/classic/browser/devedition.css
 * skin/classic/browser/browser-lightweightTheme.css
   skin/classic/browser/click-to-play-warning-stripes.png
 * skin/classic/browser/content-contextmenu.svg
 * skin/classic/browser/engineManager.css                    (engineManager.css)
@@ -40,16 +40,19 @@ browser.jar:
   skin/classic/browser/identity-icons-https.png
   skin/classic/browser/identity-icons-https@2x.png
   skin/classic/browser/identity-icons-https-ev.png
   skin/classic/browser/identity-icons-https-ev@2x.png
   skin/classic/browser/identity-icons-https-mixed-active.png
   skin/classic/browser/identity-icons-https-mixed-active@2x.png
   skin/classic/browser/identity-icons-https-mixed-display.png
   skin/classic/browser/identity-icons-https-mixed-display@2x.png
+  skin/classic/browser/in-content/session-restore.svg         (../shared/incontent-icons/session-restore.svg)
+  skin/classic/browser/in-content/tab-crashed.svg             (../shared/incontent-icons/tab-crashed.svg)
+  skin/classic/browser/in-content/welcome-back.svg            (../shared/incontent-icons/welcome-back.svg)
   skin/classic/browser/Info.png
   skin/classic/browser/keyhole-circle.png
   skin/classic/browser/keyhole-circle@2x.png
   skin/classic/browser/KUI-background.png
   skin/classic/browser/subtle-pattern.png
   skin/classic/browser/menu-back.png
   skin/classic/browser/menu-forward.png
   skin/classic/browser/notification-16.png
diff --git a/browser/themes/shared/aboutSessionRestore.css b/browser/themes/shared/aboutSessionRestore.css
new file mode 100644
--- /dev/null
+++ b/browser/themes/shared/aboutSessionRestore.css
@@ -0,0 +1,78 @@
+%if 0
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+%endif
+
+html {
+  height: 100%;
+}
+
+body {
+  height: 100%;
+  text-align: center;
+}
+
+h1 {
+  margin-bottom: 0;
+}
+
+#errorPageContainer {
+  background-image: url("chrome://browser/skin/in-content/session-restore.svg");
+  display: -moz-box;
+  width: -moz-available;
+  -moz-box-orient: vertical;
+  text-align: start;
+}
+
+#errorShortDesc > p {
+  margin-top: 1.5em;
+  margin-bottom: 0;
+}
+
+#errorLongContent, #errorTrailerDesc {
+  display: -moz-box;
+  -moz-box-flex: 1;
+  -moz-box-orient: vertical;
+}
+
+#tabList {
+  margin-top: 2.5em;
+  width: 100%;
+  min-height: 12em;
+}
+
+treechildren::-moz-tree-image(icon),
+treechildren::-moz-tree-image(noicon) {
+  padding-right: 2px;
+  margin: 0px 2px;
+  width: 16px;
+  height: 16px;
+}
+
+treechildren::-moz-tree-image(noicon) {
+  list-style-image: url("chrome://mozapps/skin/places/defaultFavicon.png");
+}
+treechildren::-moz-tree-image(container, noicon) {
+  list-style-image: url("chrome://browser/skin/aboutSessionRestore-window-icon.png");
+}
+treechildren::-moz-tree-image(checked),
+treechildren::-moz-tree-image(partial) {
+  width: 12px;
+  height: 12px;
+  list-style-image: url("chrome://global/skin/in-content/check.png");
+}
+
+@media (min-resolution: 2dppx) {
+  treechildren::-moz-tree-image(checked),
+  treechildren::-moz-tree-image(partial) {
+    list-style-image: url("chrome://global/skin/in-content/check@2x.png");
+  }
+}
+
+#buttons {
+  width: 100%;
+}
+#buttons > button {
+  margin-top: 2em;
+}
diff --git a/browser/themes/shared/aboutTabCrashed.css b/browser/themes/shared/aboutTabCrashed.css
new file mode 100644
--- /dev/null
+++ b/browser/themes/shared/aboutTabCrashed.css
@@ -0,0 +1,21 @@
+#errorPageContainer {
+  background-image: url("chrome://browser/skin/in-content/tab-crashed.svg");
+  height: auto;
+}
+
+#report-box,
+#button-box {
+  margin: 1.5em 0;
+}
+
+#tryAgain {
+  min-width: 150px;
+}
+
+#report-box {
+  display: none;
+}
+
+.crashDumpAvailable #report-box {
+  display: block
+}
\ No newline at end of file
diff --git a/browser/themes/shared/aboutWelcomeBack.css b/browser/themes/shared/aboutWelcomeBack.css
--- a/browser/themes/shared/aboutWelcomeBack.css
+++ b/browser/themes/shared/aboutWelcomeBack.css
@@ -1,14 +1,14 @@
 /* This Source Code Form is subject to the terms of the Mozilla Public
  * License, v. 2.0. If a copy of the MPL was not distributed with this
  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
 
 #errorPageContainer {
-  background-image: url("chrome://global/skin/icons/information-64.png");
+  background-image: url("chrome://browser/skin/in-content/welcome-back.svg");
   height: auto;
 }
 
 /* tablist starts out hidden, but JS may make it visible in response to
    clicks on the radio buttons by setting an "available" attribute.
 */
 #tabList {
   display: none;
@@ -17,26 +17,30 @@
 #tabList[available] {
   display: -moz-box;
 }
 
 .radioRestoreContainer {
   display: flex;
 }
 
+.radioRestoreContainer:not(:last-of-type) {
+  margin-bottom: 0.5em;
+}
+
 .radioRestoreButton {
   flex: 0 0 auto;
 }
 
 .radioRestoreButton:-moz-focusring {
   outline: 1px dotted black;
 }
 
 .radioChooseLabel {
   flex: 1 1 auto;
 }
 
 /* We want errorTrailerDesc to have the same padding-top as errorShortDesc
    has padding-bottom
 */
 #errorTrailerDesc {
-  padding-top: 1em;
+  padding-top: 1.5em;
 }
diff --git a/browser/themes/shared/incontent-icons/session-restore.svg b/browser/themes/shared/incontent-icons/session-restore.svg
new file mode 100644
--- /dev/null
+++ b/browser/themes/shared/incontent-icons/session-restore.svg
@@ -0,0 +1,13 @@
+<?xml version="1.0" encoding="utf-8"?>
+<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
+	 viewBox="0 0 60 60" enable-background="new 0 0 60 60" xml:space="preserve">
+<linearGradient id="gradient" gradientUnits="userSpaceOnUse" x1="30" y1="10" x2="30" y2="50">
+	<stop offset="0" style="stop-color:#FEDB00"/>
+	<stop offset="1" style="stop-color:#FCCE00"/>
+</linearGradient>
+<path fill="url(#gradient)" d="M49.316,42.867L33.829,12.7c-0.879-1.715-2.274-2.7-3.828-2.7c-1.554,0-2.949,0.985-3.829,2.702
+	L10.685,42.864c-0.869,1.69-0.913,3.482-0.121,4.909C11.35,49.187,12.817,50,14.591,50h30.82c1.772,0,3.24-0.81,4.023-2.224
+	C50.227,46.349,50.185,44.56,49.316,42.867z M32.176,22.304l-0.48,14.304h-3.424L27.76,22.304H32.176z M30,44.896
+	c-1.44,0-2.592-1.184-2.592-2.592c0-1.44,1.152-2.592,2.592-2.592c1.472,0,2.592,1.152,2.592,2.592
+	C32.592,43.712,31.472,44.896,30,44.896z"/>
+</svg>
diff --git a/browser/themes/shared/incontent-icons/tab-crashed.svg b/browser/themes/shared/incontent-icons/tab-crashed.svg
new file mode 100644
--- /dev/null
+++ b/browser/themes/shared/incontent-icons/tab-crashed.svg
@@ -0,0 +1,20 @@
+<?xml version="1.0" encoding="utf-8"?>
+<!-- Generator: Adobe Illustrator 18.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
+<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
+	 viewBox="0 0 60 60" enable-background="new 0 0 60 60" xml:space="preserve">
+<g>
+	<linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1="30" y1="12.8499" x2="30" y2="47.1501">
+		<stop  offset="0" style="stop-color:#E63B2E"/>
+		<stop  offset="1" style="stop-color:#C33931"/>
+	</linearGradient>
+	<path fill-rule="evenodd" clip-rule="evenodd" fill="url(#SVGID_1_)" d="M49.048,17.648H29.004
+		c-2.289-0.016-2.809-1.142-3.165-2.401c-0.359-1.269-1.076-2.397-3.229-2.397c-5.775,0-5.42,0-6.167,0
+		c-2.153,0-2.87,1.127-3.229,2.397c-0.359,1.269-0.882,2.403-3.214,2.403h0.94c-0.519,0.008-0.937,0.433-0.937,0.958v27.583
+		c0,0.53,0.426,0.959,0.952,0.959h38.093c0.526,0,0.952-0.429,0.952-0.959V18.607C50,18.077,49.574,17.648,49.048,17.648z
+		 M18.441,27.932c0-2.119,1.705-3.837,3.809-3.837c2.103,0,3.809,1.718,3.809,3.837c0,2.119-1.705,3.837-3.809,3.837
+		C20.146,31.769,18.441,30.051,18.441,27.932z M36.717,41.83c-1.525,0-1.525-2.305-6.864-2.305c-5.339,0-5.339,2.305-6.864,2.305
+		c-0.842,0-1.526-0.512-1.526-1.537c0-1.024,1.271-3.842,8.39-3.842c7.119,0,8.39,2.804,8.39,3.842
+		C38.243,41.331,37.56,41.83,36.717,41.83z M37.485,31.769c-2.104,0-3.809-1.718-3.809-3.837c0-2.119,1.705-3.837,3.809-3.837
+		c2.104,0,3.809,1.718,3.809,3.837C41.294,30.051,39.588,31.769,37.485,31.769z"/>
+</g>
+</svg>
diff --git a/browser/themes/shared/incontent-icons/welcome-back.svg b/browser/themes/shared/incontent-icons/welcome-back.svg
new file mode 100644
--- /dev/null
+++ b/browser/themes/shared/incontent-icons/welcome-back.svg
@@ -0,0 +1,18 @@
+<?xml version="1.0" encoding="utf-8"?>
+<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
+	 viewBox="0 0 60 60" enable-background="new 0 0 60 60" xml:space="preserve">
+<linearGradient id="gradient" gradientUnits="userSpaceOnUse" x1="-1.714161e-07" y1="30" x2="60" y2="30">
+	<stop offset="0" style="stop-color:#FD6B0C"/>
+	<stop offset="1" style="stop-color:#E65206"/>
+</linearGradient>
+<path fill="url(#gradient)" d="M45.844,41.272c0.018-0.08,0.039-0.156,0.055-0.239c0.097-0.35,0.164-0.735,0.215-1.136
+	c0.375-0.835,0.747-2.172,0.5-3.936c-0.021-0.326-0.073-0.669-0.14-1.018c4.957-3.957,24.499-20.957,5.137-29.039
+	c0,0,4.23,6.9-2.898,13.92c-4.332,4.266-5.37,8.436-5.058,11.538c0,0,0.036,0.21,0.096,0.564c-1.62-2.178-5.652-4.53-14.256-2.022
+	c-8.736,2.544-7.476,4.518-9.234,3.606c0,0-0.93-2.166-3.564-4.452c0,0,0.726-4.416-0.42-5.472
+	c-1.146-1.062-2.628,2.244-5.346,3.432c-2.712,1.188-6.234,2.928-6.57,6.024l-3.39,2.328c0,0-1.446,0.684-0.81,1.32
+	c0.636,0.636,1.698,1.44,3.012,1.314c1.314-0.126,2.928-0.51,4.158-0.168c1.23,0.336,2.202,2.67,4.872,6.102
+	c0,0,2.142,4.542,6.936,5.412c0.036,0.024,0.072,0.054,0.108,0.078c1.404,1.026,4.584,3.336,5.148,3.834
+	c0.744,0.636,7.422,1.158,9.486,0.474c0,0-0.6-3.408-5.04-1.944c0,0-2.082,0.078-4.59-2.892c0.228-0.072,0.456-0.156,0.69-0.252
+	c1.056-0.402,2.184-0.966,3.39-1.728c0,0,1.542-0.774,3.846-1.356c0,0,2.497-0.555,4.376,0.455c2.542,1.829,6.483,2.442,12.58-0.566
+	c0,0,5.357,5.102,7.575,8.644c0,0,4.916-1.89-5.065-11.76C51.643,42.336,47.455,42.801,45.844,41.272z"/>
+</svg>
diff --git a/browser/themes/shared/incontentprefs/preferences.css b/browser/themes/shared/incontentprefs/preferences.css
--- a/browser/themes/shared/incontentprefs/preferences.css
+++ b/browser/themes/shared/incontentprefs/preferences.css
@@ -133,94 +133,16 @@ treecol {
 #applicationsContent {
   padding: 15px 0;
 }
 
 #filter {
   -moz-margin-start: 0;
 }
 
-#handlersView {
-  -moz-appearance: none;
-  -moz-margin-start: 0;
-  font-size: 1.25rem;
-  line-height: 22px;
-  color: #333333;
-  border: 1px solid #C1C1C1;
-  border-radius: 2px;
-  background-color: #FBFBFB;
-  overflow-y: auto;
-  height: 500px;
-}
-
-#handlersView > listheader {
-  -moz-appearance: none;
-  border: 0;
-  padding: 0;
-}
-
-#typeColumn,
-#actionColumn {
-  -moz-appearance: none;
-  line-height: 20px;
-  color: #333333;
-  height: 36px;
-  padding: 0 10px;
-  background-color: #FBFBFB;
-  border: 1px solid #C1C1C1;
-  -moz-border-top-colors: none;
-  -moz-border-right-colors: none;
-  -moz-border-bottom-colors: none;
-  -moz-border-left-colors: none;
-}
-
-#typeColumn:-moz-locale-dir(ltr),
-#actionColumn:-moz-locale-dir(rtl) {
-  border-top-left-radius: 2px;
-}
-
-#typeColumn:-moz-locale-dir(rtl),
-#actionColumn:-moz-locale-dir(ltr) {
-  border-top-right-radius: 2px;
-}
-
-#typeColumn:hover,
-#actionColumn:hover {
-  border-color: #0095DD;
-}
-
-#typeColumn:hover:active,
-#actionColumn:hover:active {
-  padding: 0 10px;
-}
-
-#typeColumn > .treecol-sortdirection[sortDirection=ascending],
-#actionColumn > .treecol-sortdirection[sortDirection=ascending],
-#typeColumn > .treecol-sortdirection[sortDirection=descending],
-#actionColumn > .treecol-sortdirection[sortDirection=descending] {
-  -moz-appearance: none;
-  list-style-image: url("chrome://global/skin/in-content/sorter.png");
-}
-
-#typeColumn > .treecol-sortdirection[sortDirection=descending],
-#actionColumn > .treecol-sortdirection[sortDirection=descending] {
-  transform: scaleY(-1);
-}
-
-@media (min-resolution: 2dppx) {
-  #typeColumn > .treecol-sortdirection[sortDirection=ascending],
-  #actionColumn > .treecol-sortdirection[sortDirection=ascending],
-  #typeColumn > .treecol-sortdirection[sortDirection=descending],
-  #actionColumn > .treecol-sortdirection[sortDirection=descending] {
-    width: 12px;
-    height: 8px;
-    list-style-image: url("chrome://global/skin/in-content/sorter@2x.png");
-  }
-}
-
 #handlersView > richlistitem {
   min-height: 40px !important;
 }
 
 .typeIcon {
   -moz-margin-start: 10px !important;
   -moz-margin-end: 9px !important;
 }
diff --git a/browser/themes/windows/aboutSessionRestore.css b/browser/themes/windows/aboutSessionRestore.css
deleted file mode 100644
--- a/browser/themes/windows/aboutSessionRestore.css
+++ /dev/null
@@ -1,68 +0,0 @@
-%if 0
-/* This Source Code Form is subject to the terms of the Mozilla Public
- * License, v. 2.0. If a copy of the MPL was not distributed with this
- * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
-%endif
-
-html {
-  height: 100%;
-}
-
-body {
-  height: 100%;
-  text-align: center;
-}
-
-#errorPageContainer {
-  background-image: url("chrome://global/skin/icons/warning-large.png");
-  display: -moz-box;
-  width: -moz-available;
-  height: 70%;
-  -moz-box-orient: vertical;
-  text-align: start;
-}
-
-#errorShortDesc > p {
-  margin-top: 0.4em;
-  margin-bottom: 0;
-}
-
-#errorLongContent, #errorTrailerDesc {
-  display: -moz-box;
-  -moz-box-flex: 1;
-  -moz-box-orient: vertical;
-}
-
-#tabList {
-  margin-top: 2.5em;
-  width: 100%;
-  min-height: 12em;
-}
-
-treechildren::-moz-tree-image(icon),
-treechildren::-moz-tree-image(noicon) {
-  padding-right: 2px;
-  margin: 0px 2px;
-  width: 16px;
-  height: 16px;
-}
-
-treechildren::-moz-tree-image(noicon) {
-  list-style-image: url("chrome://mozapps/skin/places/defaultFavicon.png");
-}
-treechildren::-moz-tree-image(container, noicon) {
-  list-style-image: url("chrome://browser/skin/aboutSessionRestore-window-icon.png");
-}
-treechildren::-moz-tree-image(checked) {
-  list-style-image: url("chrome://global/skin/checkbox/cbox-check.gif");
-}
-treechildren::-moz-tree-image(partial) {
-  list-style-image: url("chrome://global/skin/checkbox/cbox-check-dis.gif");
-}
-
-#buttons {
-  width: 100%;
-}
-#buttons > button {
-  margin-top: 2em;
-}
diff --git a/browser/themes/windows/aboutTabCrashed.css b/browser/themes/windows/aboutTabCrashed.css
deleted file mode 100644
--- a/browser/themes/windows/aboutTabCrashed.css
+++ /dev/null
@@ -1,108 +0,0 @@
-body {
-  background-color: rgb(241, 244, 248);
-  margin-top: 2em;
-  font: message-box;
-  font-size: 100%;
-}
-
-p {
-  font-size: .8em;
-}
-
-#error-box {
-  background: url('chrome://global/skin/icons/information-24.png') no-repeat left 4px;
-  -moz-padding-start: 30px;
-}
-
-#error-box:-moz-locale-dir(rtl) {
-  background-position: right 4px;
-}
-
-#main-error-msg {
-  color: #4b4b4b;
-  font-weight: bold;
-}
-
-#report-box {
-  text-align: center;
-  width: 75%;
-  margin: 0 auto;
-  display: none;
-}
-
-.crashDumpAvailable #report-box {
-  display: block
-}
-
-#button-box {
-  text-align: center;
-  width: 75%;
-  margin: 0 auto;
-}
-
-@media all and (min-width: 300px) {
-  #error-box {
-    max-width: 50%;
-    margin: 0 auto;
-    background-image: url('chrome://global/skin/icons/information-32.png');
-    min-height: 36px;
-    -moz-padding-start: 38px;
-  }
-
-  button {
-    width: auto !important;
-    min-width: 150px;
-  }
-}
-
-@media all and (min-width: 780px) {
-  #error-box {
-    max-width: 30%;
-  }
-}
-
-button {
-  font: message-box;
-  font-size: 0.6875em;
-  -moz-appearance: none;
-  -moz-user-select: none;
-  width: 100%;
-  margin: 2px 0;
-  padding: 2px 6px;
-  line-height: 1.2;
-  background-color: hsla(210,30%,95%,.1);
-  background-image: linear-gradient(hsla(0,0%,100%,.6), hsla(0,0%,100%,.1));
-  background-clip: padding-box;
-  border: 1px solid hsla(210,15%,25%,.4);
-  border-color: hsla(210,15%,25%,.3) hsla(210,15%,25%,.35) hsla(210,15%,25%,.4);
-  border-radius: 3px;
-  box-shadow: 0 1px 0 hsla(0,0%,100%,.3) inset,
-              0 0 0 1px hsla(0,0%,100%,.3) inset,
-              0 1px 0 hsla(0,0%,100%,.1);
-
-  transition-property: background-color, border-color, box-shadow;
-  transition-duration: 150ms;
-  transition-timing-function: ease;
-
-}
-
-button:hover {
-  background-color: hsla(210,30%,95%,.8);
-  border-color: hsla(210,15%,25%,.45) hsla(210,15%,25%,.5) hsla(210,15%,25%,.55);
-  box-shadow: 0 1px 0 hsla(0,0%,100%,.3) inset,
-              0 0 0 1px hsla(0,0%,100%,.3) inset,
-              0 1px 0 hsla(0,0%,100%,.1),
-              0 0 3px hsla(210,15%,25%,.1);
-  transition-property: background-color, border-color, box-shadow;
-  transition-duration: 150ms;
-  transition-timing-function: ease;
-}
-
-button:hover:active {
-  background-color: hsla(210,15%,25%,.2);
-  box-shadow: 0 1px 1px hsla(210,15%,25%,.2) inset,
-              0 0 2px hsla(210,15%,25%,.4) inset;
-  transition-property: background-color, border-color, box-shadow;
-  transition-duration: 10ms;
-  transition-timing-function: linear;
-}
diff --git a/browser/themes/windows/jar.mn b/browser/themes/windows/jar.mn
--- a/browser/themes/windows/jar.mn
+++ b/browser/themes/windows/jar.mn
@@ -3,41 +3,44 @@
 # file, You can obtain one at http://mozilla.org/MPL/2.0/.
 
 browser.jar:
 % skin browser classic/1.0 %skin/classic/browser/ os=WINNT osversion<6
 % skin browser classic/1.0 %skin/classic/browser/ os!=WINNT
 # NOTE: If you add a new file here, you'll need to add it to the aero
 # section at the bottom of this file
         skin/classic/browser/sanitizeDialog.css
-*       skin/classic/browser/aboutSessionRestore.css
+*       skin/classic/browser/aboutSessionRestore.css                 (../shared/aboutSessionRestore.css)
         skin/classic/browser/aboutSessionRestore-window-icon.png     (preferences/application.png)
         skin/classic/browser/aboutWelcomeBack.css                    (../shared/aboutWelcomeBack.css)
         skin/classic/browser/aboutCertError.css
         skin/classic/browser/aboutCertError_sectionCollapsed.png
         skin/classic/browser/aboutCertError_sectionCollapsed-rtl.png
         skin/classic/browser/aboutCertError_sectionExpanded.png
         skin/classic/browser/aboutNetError.css                       (../shared/aboutNetError.css)
         skin/classic/browser/aboutNetError_info.svg                  (../shared/aboutNetError_info.svg)
         skin/classic/browser/aboutSocialError.css                    (../shared/aboutSocialError.css)
 *       skin/classic/browser/aboutProviderDirectory.css              (../shared/aboutProviderDirectory.css)
 #ifdef MOZ_SERVICES_SYNC
         skin/classic/browser/aboutSyncTabs.css
 #endif
-        skin/classic/browser/aboutTabCrashed.css
+        skin/classic/browser/aboutTabCrashed.css                     (../shared/aboutTabCrashed.css)
         skin/classic/browser/actionicon-tab.png
 *       skin/classic/browser/browser.css
 *       skin/classic/browser/devedition.css
 *       skin/classic/browser/browser-lightweightTheme.css
         skin/classic/browser/click-to-play-warning-stripes.png
 *       skin/classic/browser/content-contextmenu.svg
 *       skin/classic/browser/engineManager.css
         skin/classic/browser/fullscreen-darknoise.png
         skin/classic/browser/Geolocation-16.png
         skin/classic/browser/Geolocation-64.png
+        skin/classic/browser/in-content/session-restore.svg         (../shared/incontent-icons/session-restore.svg)
+        skin/classic/browser/in-content/tab-crashed.svg             (../shared/incontent-icons/tab-crashed.svg)
+        skin/classic/browser/in-content/welcome-back.svg            (../shared/incontent-icons/welcome-back.svg)
         skin/classic/browser/Info.png
         skin/classic/browser/identity.png
         skin/classic/browser/identity-icons-generic.png
         skin/classic/browser/identity-icons-https.png
         skin/classic/browser/identity-icons-https-ev.png
         skin/classic/browser/identity-icons-https-mixed-active.png
         skin/classic/browser/identity-icons-https-mixed-display.png
         skin/classic/browser/keyhole-forward-mask.svg
@@ -434,41 +437,44 @@ browser.jar:
 #ifdef E10S_TESTING_ONLY
         skin/classic/browser/e10s-64@2x.png (../shared/e10s-64@2x.png)
 #endif
 
 #ifdef XP_WIN
 browser.jar:
 % skin browser classic/1.0 %skin/classic/aero/browser/ os=WINNT osversion>=6
         skin/classic/aero/browser/sanitizeDialog.css                       (sanitizeDialog.css)
-*       skin/classic/aero/browser/aboutSessionRestore.css            (aboutSessionRestore.css)
+*       skin/classic/aero/browser/aboutSessionRestore.css             (../shared/aboutSessionRestore.css)
         skin/classic/aero/browser/aboutSessionRestore-window-icon.png (aboutSessionRestore-window-icon-aero.png)
         skin/classic/aero/browser/aboutCertError.css
         skin/classic/aero/browser/aboutCertError_sectionCollapsed.png
         skin/classic/aero/browser/aboutCertError_sectionCollapsed-rtl.png
         skin/classic/aero/browser/aboutCertError_sectionExpanded.png
         skin/classic/aero/browser/aboutNetError.css                   (../shared/aboutNetError.css)
         skin/classic/aero/browser/aboutNetError_info.svg              (../shared/aboutNetError_info.svg)
         skin/classic/aero/browser/aboutSocialError.css                (../shared/aboutSocialError.css)
 *       skin/classic/aero/browser/aboutProviderDirectory.css          (../shared/aboutProviderDirectory.css)
 #ifdef MOZ_SERVICES_SYNC
         skin/classic/aero/browser/aboutSyncTabs.css
 #endif
-        skin/classic/aero/browser/aboutTabCrashed.css
+        skin/classic/aero/browser/aboutTabCrashed.css                (../shared/aboutTabCrashed.css)
         skin/classic/aero/browser/aboutWelcomeBack.css               (../shared/aboutWelcomeBack.css)
         skin/classic/aero/browser/actionicon-tab.png
 *       skin/classic/aero/browser/browser.css                        (browser-aero.css)
 *       skin/classic/aero/browser/devedition.css                     (devedition-aero.css)
 *       skin/classic/aero/browser/browser-lightweightTheme.css
         skin/classic/aero/browser/click-to-play-warning-stripes.png
 *       skin/classic/aero/browser/content-contextmenu.svg
 *       skin/classic/aero/browser/engineManager.css
         skin/classic/aero/browser/fullscreen-darknoise.png
         skin/classic/aero/browser/Geolocation-16.png
         skin/classic/aero/browser/Geolocation-64.png
+        skin/classic/aero/browser/in-content/session-restore.svg     (../shared/incontent-icons/session-restore.svg)
+        skin/classic/aero/browser/in-content/tab-crashed.svg         (../shared/incontent-icons/tab-crashed.svg)
+        skin/classic/aero/browser/in-content/welcome-back.svg        (../shared/incontent-icons/welcome-back.svg)
         skin/classic/aero/browser/Info.png                           (Info-aero.png)
         skin/classic/aero/browser/identity.png                       (identity-aero.png)
         skin/classic/aero/browser/identity-icons-generic.png
         skin/classic/aero/browser/identity-icons-https.png
         skin/classic/aero/browser/identity-icons-https-ev.png
         skin/classic/aero/browser/identity-icons-https-mixed-active.png
         skin/classic/aero/browser/identity-icons-https-mixed-display.png
         skin/classic/aero/browser/keyhole-forward-mask.svg
@@ -613,17 +619,17 @@ browser.jar:
         skin/classic/aero/browser/preferences/mail.png               (preferences/mail-aero.png)
         skin/classic/aero/browser/preferences/Options.png            (preferences/Options-aero.png)
 #ifdef MOZ_SERVICES_SYNC
         skin/classic/aero/browser/preferences/Options-sync.png       (preferences/Options-sync.png)
 #endif
         skin/classic/aero/browser/preferences/saveFile.png           (preferences/saveFile-aero.png)
 *       skin/classic/aero/browser/preferences/preferences.css        (preferences/preferences.css)
 *       skin/classic/aero/browser/preferences/in-content/preferences.css (preferences/in-content/preferences.css)
-        skin/classic/aero/browser/preferences/in-content/favicon.ico      (../shared/incontentprefs/favicon.ico)
+        skin/classic/aero/browser/preferences/in-content/favicon.ico     (../shared/incontentprefs/favicon.ico)
         skin/classic/aero/browser/preferences/in-content/icons.png       (../shared/incontentprefs/icons.png)
         skin/classic/aero/browser/preferences/in-content/icons@2x.png    (../shared/incontentprefs/icons@2x.png)
         skin/classic/aero/browser/preferences/applications.css       (preferences/applications.css)
         skin/classic/aero/browser/preferences/aboutPermissions.css   (preferences/aboutPermissions.css)
         skin/classic/aero/browser/social/services-16.png             (social/services-16.png)
         skin/classic/aero/browser/social/services-64.png             (social/services-64.png)
         skin/classic/aero/browser/social/chat-icons.svg              (../shared/social/chat-icons.svg)
         skin/classic/aero/browser/social/gear_default.png            (../shared/social/gear_default.png)
diff --git a/toolkit/themes/linux/global/jar.mn b/toolkit/themes/linux/global/jar.mn
--- a/toolkit/themes/linux/global/jar.mn
+++ b/toolkit/themes/linux/global/jar.mn
@@ -13,17 +13,17 @@ toolkit.jar:
 +  skin/classic/global/Filepicker.png                          (filepicker/Filepicker.png)
 +  skin/classic/global/findBar.css
 +  skin/classic/global/global.css
 +  skin/classic/global/groupbox.css
 +  skin/classic/global/inContentUI.css
 +  skin/classic/global/listbox.css
 +  skin/classic/global/menu.css
 +  skin/classic/global/menulist.css
-+  skin/classic/global/netError.css
+*  skin/classic/global/netError.css
 +  skin/classic/global/notification.css
 +  skin/classic/global/numberbox.css
 +  skin/classic/global/popup.css
 +  skin/classic/global/preferences.css
 +  skin/classic/global/printPageSetup.css
 +  skin/classic/global/printPreview.css
 +  skin/classic/global/radio.css
 +  skin/classic/global/scrollbox.css
diff --git a/toolkit/themes/linux/global/netError.css b/toolkit/themes/linux/global/netError.css
--- a/toolkit/themes/linux/global/netError.css
+++ b/toolkit/themes/linux/global/netError.css
@@ -1,145 +1,1 @@
-/* This Source Code Form is subject to the terms of the Mozilla Public
- * License, v. 2.0. If a copy of the MPL was not distributed with this
- * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
-
-/*
- *  This defines the look-and-feel styling of the error pages.
- *  (see: netError.xhtml)
- *
- *  Original styling by William Price <bugzilla@mob.rice.edu>
- *  Updated by: Michael Ventnor <m.ventnor@gmail.com>
- */
-
-html {
-  background: -moz-Dialog;
-}
-
-body {
-  margin: 0;
-  padding: 0 1em;
-  color: -moz-FieldText;
-  font: message-box;
-}
-
-h1 {
-  margin: 0 0 .6em 0;
-  border-bottom: 1px solid ThreeDLightShadow;
-  font-size: 160%;
-}
-
-ul, ol {
-  margin: 0;
-  -moz-margin-start: 1.5em;
-  padding: 0;
-}
-
-ul > li, ol > li {
-  margin-bottom: .5em;
-}
-
-ul {
-  list-style: square;
-}
-
-#errorPageContainer {
-  position: relative;
-  min-width: 13em;
-  max-width: 52em;
-  margin: 4em auto;
-  border: 1px solid ThreeDShadow;
-  border-radius: 10px;
-  padding: 3em;
-  -moz-padding-start: 30px;
-  background: url("moz-icon://stock/gtk-dialog-warning?size=dialog") left 0 no-repeat -moz-Field;
-  background-origin: content-box;
-}
-
-#errorPageContainer.certerror {
-  background-image: url("chrome://global/skin/icons/sslWarning.png");
-}
-
-#errorPageContainer:-moz-dir(rtl) {
-  background-position: right 0;
-}
-
-#errorTitle {
-  -moz-margin-start: 80px;
-}
-
-#errorLongContent {
-  -moz-margin-start: 80px;
-}
-
-#errorShortDesc > p {
-  overflow: auto;
-  border-bottom: 1px solid ThreeDLightShadow;
-  padding-bottom: 1em;
-  font-size: 130%;
-  white-space: pre-wrap;
-}
-
-#errorLongDesc {
-  -moz-padding-end: 3em;
-  font-size: 110%;
-}
-
-#errorLongDesc > p {
-}
-
-#errorTryAgain {
-  margin-top: 2em;
-  -moz-margin-start: 80px;
-}
-
-#brand {
-  position: absolute;
-  right: 0;
-  bottom: -1.5em;
-  -moz-margin-end: 10px;
-  opacity: .4;
-}
-
-#brand:-moz-dir(rtl) {
-  right: auto;
-  left: 0;
-}
-
-#brand > p {
-  margin: 0;
-}
-
-#errorContainer {
-  display: none;
-}
-
-#securityOverrideDiv {
-  padding-top: 10px;
-}
-
-#securityOverrideContent {
-  background-color: InfoBackground;
-  color: InfoText;
-  padding: 10px;
-  border-radius: 10px;
-}
-
-/* Custom styling for 'blacklist' error class */
-:root.blacklist #errorTitle, :root.blacklist #errorLongContent,
-:root.blacklist #errorShortDesc, :root.blacklist #errorLongDesc,
-:root.blacklist a {
-  background-color: #722; /* Dark red */
-  color: white;
-}
-
-:root.blacklist #errorPageContainer {
-  background-image: url("chrome://global/skin/icons/blacklist_large.png");
-  background-color: #722;
-}
-
-:root.blacklist {
-  background: #333;
-}
-
-:root.blacklist #errorTryAgain {
-  display: none;
-}
+%include ../../shared/netError.inc.css
\ No newline at end of file
diff --git a/toolkit/themes/osx/global/jar.mn b/toolkit/themes/osx/global/jar.mn
--- a/toolkit/themes/osx/global/jar.mn
+++ b/toolkit/themes/osx/global/jar.mn
@@ -29,17 +29,17 @@ toolkit.jar:
 * skin/classic/global/global.css
   skin/classic/global/groupbox.css
 * skin/classic/global/inContentUI.css
   skin/classic/global/linkTree.css
   skin/classic/global/listbox.css
   skin/classic/global/menu.css
   skin/classic/global/menulist.css
 * skin/classic/global/notification.css
-  skin/classic/global/netError.css
+* skin/classic/global/netError.css
   skin/classic/global/numberbox.css
   skin/classic/global/passwordmgr.css
   skin/classic/global/popup.css
   skin/classic/global/preferences.css
   skin/classic/global/progressmeter.css
   skin/classic/global/radio.css
   skin/classic/global/resizer.css
   skin/classic/global/richlistbox.css
diff --git a/toolkit/themes/osx/global/netError.css b/toolkit/themes/osx/global/netError.css
--- a/toolkit/themes/osx/global/netError.css
+++ b/toolkit/themes/osx/global/netError.css
@@ -1,145 +1,1 @@
-/* This Source Code Form is subject to the terms of the Mozilla Public
- * License, v. 2.0. If a copy of the MPL was not distributed with this
- * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
-
-/*
- *  This defines the look-and-feel styling of the error pages.
- *  (see: netError.xhtml)
- *
- *  Original styling by William Price <bugzilla@mob.rice.edu>
- *  Updated by: Steven Garrity <steven@silverorange.com>
- *              Henrik Skupin  <mozilla@hskupin.info>
- */
-
-html {
-  background: -moz-Dialog;
-}
-
-body {
-  margin: 0;
-  padding: 0 1em;
-  color: -moz-FieldText;
-  font: message-box;
-}
-
-h1 {
-  margin: 0 0 .6em 0;
-  border-bottom: 1px solid ThreeDLightShadow;
-  font-size: 160%;
-}
-
-ul, ol {
-  margin: 0;
-  -moz-margin-start: 1.5em;
-  padding: 0;
-}
-
-ul > li, ol > li {
-  margin-bottom: .5em;
-}
-
-ul {
-  list-style: square;
-}
-
-#errorPageContainer {
-  position: relative;
-  min-width: 13em;
-  max-width: 52em;
-  margin: 4em auto;
-  border: 1px solid ThreeDShadow;
-  border-radius: 10px;
-  padding: 3em;
-  -moz-padding-start: 30px;
-  background: url("chrome://global/skin/icons/warning-large.png") left 0 no-repeat -moz-Field;
-  background-origin: content-box;
-}
-
-#errorPageContainer.certerror {
-  background-image: url("chrome://global/skin/icons/sslWarning.png");
-}
-
-#errorPageContainer:-moz-dir(rtl) {
-  background-position: right 0;
-}
-
-#errorTitle {
-  -moz-margin-start: 80px;
-}
-
-#errorLongContent {
-  -moz-margin-start: 80px;
-}
-
-#errorShortDesc > p {
-  overflow: auto;
-  border-bottom: 1px solid ThreeDLightShadow;
-  padding-bottom: 1em;
-  font-size: 130%;
-  white-space: pre-wrap;
-}
-
-#errorLongDesc {
-  -moz-padding-end: 3em;
-  font-size: 110%;
-}
-
-#errorLongDesc > p {
-}
-
-#errorTryAgain {
-  margin-top: 2em;
-  -moz-margin-start: 80px;
-}
-
-#brand {
-  position: absolute;
-  right: 0;
-  bottom: -1.5em;
-  -moz-margin-end: 10px;
-  opacity: .4;
-}
-
-#brand:-moz-dir(rtl) {
-  right: auto;
-  left: 0;
-}
-
-#brand > p {
-  margin: 0;
-}
-
-#errorContainer {
-  display: none;
-}
-
-#securityOverrideDiv {
-  padding-top: 10px;
-}
-
-#securityOverrideContent {
-  background-color: #FFF090; /* Pale yellow */
-  padding: 10px;
-  border-radius: 10px;
-}
-
-/* Custom styling for 'blacklist' error class */
-:root.blacklist #errorTitle, :root.blacklist #errorLongContent,
-:root.blacklist #errorShortDesc, :root.blacklist #errorLongDesc,
-:root.blacklist a {
-  background-color: #722; /* Dark red */
-  color: white;
-}
-
-:root.blacklist #errorPageContainer {
-  background-image: url("chrome://global/skin/icons/blacklist_64.png");
-  background-color: #722;
-}
-
-:root.blacklist {
-  background: #333;
-}
-
-:root.blacklist #errorTryAgain {
-  display: none;
-}
+%include ../../shared/netError.inc.css
\ No newline at end of file
diff --git a/toolkit/themes/shared/in-content/common.inc.css b/toolkit/themes/shared/in-content/common.inc.css
--- a/toolkit/themes/shared/in-content/common.inc.css
+++ b/toolkit/themes/shared/in-content/common.inc.css
@@ -128,17 +128,16 @@ html|button {
 
 *|button,
 xul|colorpicker[type="button"],
 xul|menulist {
   -moz-appearance: none;
   height: 30px;
   color: #333;
   line-height: 20px;
-  text-shadow: 0 1px 1px #fefffe;
   border: 1px solid #c1c1c1;
   -moz-border-top-colors: none !important;
   -moz-border-right-colors: none !important;
   -moz-border-bottom-colors: none !important;
   -moz-border-left-colors: none !important;
   border-radius: 2px;
   background-color: #fbfbfb;
 }
@@ -160,16 +159,32 @@ xul|menulist[open="true"]:not([disabled=
 html|button:disabled,
 xul|button[disabled="true"],
 xul|colorpicker[type="button"][disabled="true"],
 xul|menulist[disabled="true"] {
   cursor: not-allowed;
   opacity: 0.5;
 }
 
+*|button.primary {
+  background-color: #0095DD;
+  border-color: transparent;
+  color: #FFF;
+}
+
+html|button.primary:enabled:hover,
+xul|button.primary:not([disabled="true"]):hover {
+  background-color: #008ACB;
+}
+
+html|button.primary:enabled:hover:active,
+xul|button.primary:not([disabled="true"]):hover:active {
+  background-color: #006B9D;
+}
+
 xul|colorpicker[type="button"] {
   padding: 6px;
   width: 50px;
 }
 
 xul|button > xul|*.button-box,
 xul|menulist > xul|*.menulist-label-box {
   padding-right: 10px !important;
@@ -579,9 +594,84 @@ xul|textbox + xul|button:-moz-locale-dir
 xul|filefield + xul|button:-moz-locale-dir(rtl) {
   border-top-right-radius: 0;
   border-bottom-right-radius: 0;
 }
 
 xul|textbox + xul|button,
 xul|filefield + xul|button {
   -moz-border-start: none;
+}
+
+/* List boxes */
+
+xul|richlistbox,
+xul|listbox {
+  -moz-appearance: none;
+  border: 1px solid #C1C1C1;
+}
+
+xul|treechildren::-moz-tree-row,
+xul|listbox xul|listitem {
+  padding: 5px;
+  margin: 0;
+  border: none;
+  background-image: none;
+}
+
+xul|treechildren::-moz-tree-row(selected),
+xul|listbox xul|listitem[selected="true"] {
+  background-color: #f1f1f1;
+}
+
+/* Trees */
+
+xul|tree {
+  -moz-appearance: none;
+  font-size: 1.25rem;
+  border: 1px solid #C1C1C1;
+}
+
+xul|listheader,
+xul|treecols {
+  -moz-appearance: none;
+  border: none;
+  border-bottom: 1px solid #C1C1C1;
+  padding: 0;
+}
+
+xul|treecol:not([hideheader="true"]),
+xul|treecolpicker {
+  -moz-appearance: none;
+  border: none;
+  background-color: #EBEBEB;
+  color: #808080;
+  padding: 5px 10px;
+}
+
+xul|treecol:not([hideheader="true"]):hover,
+xul|treecolpicker:hover {
+  background-color: #dadada;
+  color: #333;
+}
+
+xul|treecol:not([hideheader="true"]):not(:first-child),
+xul|treecolpicker {
+  -moz-border-start-width: 1px;
+  -moz-border-start-style: solid;
+  border-image: linear-gradient(transparent 0%, transparent 20%, #C1C1C1 20%, #C1C1C1 80%, transparent 80%, transparent 100%) 1 1;
+}
+
+xul|treecol:not([hideheader="true"]) > xul|*.treecol-sortdirection[sortDirection] {
+  list-style-image: url("chrome://global/skin/in-content/sorter.png");
+  width: 12px;
+  height: 8px;
+}
+
+xul|treecol:not([hideheader="true"]) > xul|*.treecol-sortdirection[sortDirection="descending"] {
+  transform: scaleY(-1);
+}
+
+@media (min-resolution: 2dppx) {
+  xul|treecol:not([hideheader="true"]) > xul|*.treecol-sortdirection[sortDirection] {
+    list-style-image: url("chrome://global/skin/in-content/sorter@2x.png");
+  }
 }
\ No newline at end of file
diff --git a/toolkit/themes/windows/global/jar.mn b/toolkit/themes/windows/global/jar.mn
--- a/toolkit/themes/windows/global/jar.mn
+++ b/toolkit/themes/windows/global/jar.mn
@@ -31,17 +31,17 @@ toolkit.jar:
 *       skin/classic/global/global.css
         skin/classic/global/globalBindings.xml
         skin/classic/global/groupbox.css
 *       skin/classic/global/inContentUI.css
         skin/classic/global/linkTree.css
         skin/classic/global/listbox.css
 *       skin/classic/global/menu.css
         skin/classic/global/menulist.css
-        skin/classic/global/netError.css
+*       skin/classic/global/netError.css
         skin/classic/global/numberbox.css
 *       skin/classic/global/notification.css
         skin/classic/global/passwordmgr.css
 *       skin/classic/global/popup.css
         skin/classic/global/preferences.css
         skin/classic/global/printPageSetup.css
         skin/classic/global/printPreview.css
         skin/classic/global/progressmeter.css
@@ -230,17 +230,17 @@ toolkit.jar:
 *       skin/classic/aero/global/global.css
         skin/classic/aero/global/globalBindings.xml
         skin/classic/aero/global/groupbox.css
 *       skin/classic/aero/global/inContentUI.css                         (inContentUI-aero.css)
         skin/classic/aero/global/linkTree.css
 *       skin/classic/aero/global/listbox.css                             (listbox-aero.css)
 *       skin/classic/aero/global/menu.css                                (menu-aero.css)
 *       skin/classic/aero/global/menulist.css                            (menulist-aero.css)
-        skin/classic/aero/global/netError.css
+*       skin/classic/aero/global/netError.css
         skin/classic/aero/global/numberbox.css
 *       skin/classic/aero/global/notification.css                        (notification-aero.css)
         skin/classic/aero/global/passwordmgr.css
 *       skin/classic/aero/global/popup.css                               (popup-aero.css)
         skin/classic/aero/global/preferences.css
         skin/classic/aero/global/printPageSetup.css
         skin/classic/aero/global/printPreview.css
         skin/classic/aero/global/progressmeter.css
diff --git a/toolkit/themes/windows/global/netError.css b/toolkit/themes/windows/global/netError.css
--- a/toolkit/themes/windows/global/netError.css
+++ b/toolkit/themes/windows/global/netError.css
@@ -1,146 +1,1 @@
-/* This Source Code Form is subject to the terms of the Mozilla Public
- * License, v. 2.0. If a copy of the MPL was not distributed with this
- * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
-
-/*
- *  This defines the look-and-feel styling of the error pages.
- *  (see: netError.xhtml)
- *
- *  Original styling by William Price <bugzilla@mob.rice.edu>
- *  Updated by: Steven Garrity <steven@silverorange.com>
- *              Henrik Skupin  <mozilla@hskupin.info>
- */
-
-html {
-  background: -moz-Dialog;
-}
-
-body {
-  margin: 0;
-  padding: 0 1em;
-  color: -moz-FieldText;
-  font: message-box;
-}
-
-h1 {
-  margin: 0 0 .6em 0;
-  border-bottom: 1px solid ThreeDLightShadow;
-  font-size: 160%;
-}
-
-ul, ol {
-  margin: 0;
-  -moz-margin-start: 1.5em;
-  padding: 0;
-}
-
-ul > li, ol > li {
-  margin-bottom: .5em;
-}
-
-ul {
-  list-style: square;
-}
-
-#errorPageContainer {
-  position: relative;
-  min-width: 13em;
-  max-width: 52em;
-  margin: 4em auto;
-  border: 1px solid ThreeDShadow;
-  border-radius: 10px;
-  padding: 3em;
-  -moz-padding-start: 30px;
-  background: url("chrome://global/skin/icons/warning-large.png") left 0 no-repeat -moz-Field;
-  background-origin: content-box;
-}
-
-#errorPageContainer.certerror {
-  background-image: url("chrome://global/skin/icons/sslWarning.png");
-}
-
-#errorPageContainer:-moz-dir(rtl) {
-  background-position: right 0;
-}
-
-#errorTitle {
-  -moz-margin-start: 80px;
-}
-
-#errorLongContent {
-  -moz-margin-start: 80px;
-}
-
-#errorShortDesc > p {
-  overflow: auto;
-  border-bottom: 1px solid ThreeDLightShadow;
-  padding-bottom: 1em;
-  font-size: 130%;
-  white-space: pre-wrap;
-}
-
-#errorLongDesc {
-  -moz-padding-end: 3em;
-  font-size: 110%;
-}
-
-#errorLongDesc > p {
-}
-
-#errorTryAgain {
-  margin-top: 2em;
-  -moz-margin-start: 80px;
-}
-
-#brand {
-  position: absolute;
-  right: 0;
-  bottom: -1.5em;
-  -moz-margin-end: 10px;
-  opacity: .4;
-}
-
-#brand:-moz-dir(rtl) {
-  right: auto;
-  left: 0;
-}
-
-#brand > p {
-  margin: 0;
-}
-
-#errorContainer {
-  display: none;
-}
-
-#securityOverrideDiv {
-  padding-top: 10px;
-}
-
-#securityOverrideContent {
-  background-color: InfoBackground;
-  color: InfoText;
-  padding: 10px;
-  border-radius: 10px;
-}
-
-/* Custom styling for 'blacklist' error class */
-:root.blacklist #errorTitle, :root.blacklist #errorLongContent,
-:root.blacklist #errorShortDesc, :root.blacklist #errorLongDesc,
-:root.blacklist a {
-  background-color: #722; /* Dark red */
-  color: white;
-}
-
-:root.blacklist #errorPageContainer {
-  background-image: url("chrome://global/skin/icons/blacklist_large.png");
-  background-color: #722;
-}
-
-:root.blacklist {
-  background: #333;
-}
-
-:root.blacklist #errorTryAgain {
-  display: none;
-}
+%include ../../shared/netError.inc.css
\ No newline at end of file
