# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Date 1572031091 25200
#      Fri Oct 25 12:18:11 2019 -0700
# Node ID f2b53f83431e93d185fa7b3794fa2e959ec4e460
# Parent  53b7303e29486cd84114f6d6542003a1ddba6a37
Bug 1587142 - Remove miscellaneous XBL tests

Differential Revision: https://phabricator.services.mozilla.com/D50652

diff --git a/docshell/base/crashtests/403574-1.xhtml b/docshell/base/crashtests/403574-1.xhtml
deleted file mode 100644
--- a/docshell/base/crashtests/403574-1.xhtml
+++ /dev/null
@@ -1,23 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" class="reftest-wait">
-<head>
-
-<bindings xmlns="http://www.mozilla.org/xbl"><binding id="foo"><content>
-<frame xmlns="http://www.w3.org/1999/xhtml"><children xmlns="http://www.mozilla.org/xbl"/></frame>
-</content></binding></bindings>
-
-<script>
-
-function boom()
-{
-  document.getElementById("span").style.MozBinding = "url('#foo')";
-  document.documentElement.removeAttribute("class");
-}
-
-</script>
-</head>
-
-<body onload="setTimeout(boom, 100);">
-<span id="span"></span>
-</body>
-
-</html>
diff --git a/docshell/base/crashtests/crashtests.list b/docshell/base/crashtests/crashtests.list
--- a/docshell/base/crashtests/crashtests.list
+++ b/docshell/base/crashtests/crashtests.list
@@ -1,11 +1,10 @@
 load 40929-1.html
 load 369126-1.html
-skip-if(!xbl) load 403574-1.xhtml
 load 430124-1.html
 load 430628-1.html
 load 432114-1.html
 load 432114-2.html
 load 436900-1.html
 asserts(0-1) load 436900-2.html # bug 566159
 load 443655.html
 load 500328-1.html
diff --git a/gfx/tests/crashtests/483120-1.xhtml b/gfx/tests/crashtests/483120-1.xhtml
deleted file mode 100644
--- a/gfx/tests/crashtests/483120-1.xhtml
+++ /dev/null
@@ -1,23 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" style="font-family: monospace;">
-<head>
-
-<bindings xmlns="http://www.mozilla.org/xbl">
-  <binding id="w"><content><div xmlns="http://www.w3.org/1999/xhtml"><children xmlns="http://www.mozilla.org/xbl"/></div></content></binding>
-  <binding id="empty"><content/></binding>
-</bindings>
-
-<script type="text/javascript">
-
-function boom()
-{
-  document.createElementNS("http://www.w3.org/2000/svg", "rect");
-  document.getElementById("d").previousSibling.data += "C";
-  document.getElementById("d").style.MozBinding = "url('#empty')";
-}
-
-</script>
-
-</head>
-
-<body onload="boom();"><span>A&#x202E;<span style="-moz-binding: url('#w');"></span>B<span id="d" style="font-size: 80%; color: green;">D</span></span></body>
-</html>
diff --git a/gfx/tests/crashtests/483120-2.xhtml b/gfx/tests/crashtests/483120-2.xhtml
deleted file mode 100644
--- a/gfx/tests/crashtests/483120-2.xhtml
+++ /dev/null
@@ -1,22 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" style="font-family: monospace;">
-<head>
-
-<bindings xmlns="http://www.mozilla.org/xbl">
-  <binding id="w"><content><div xmlns="http://www.w3.org/1999/xhtml"><children xmlns="http://www.mozilla.org/xbl"/></div></content></binding>
-  <binding id="empty"><content/></binding>
-</bindings>
-
-<script type="text/javascript">
-
-function boom()
-{
-  document.getElementById("d").previousSibling.data += "C";
-  document.getElementById("d").style.MozBinding = "url('#empty')";
-}
-
-</script>
-
-</head>
-
-<body onload="boom();"><span>A&#x202E;<span style="-moz-binding: url('#w');"></span>B<span id="d" style="font-size: 80%; color: green;">D</span></span></body>
-</html>
diff --git a/gfx/tests/crashtests/crashtests.list b/gfx/tests/crashtests/crashtests.list
--- a/gfx/tests/crashtests/crashtests.list
+++ b/gfx/tests/crashtests/crashtests.list
@@ -67,18 +67,16 @@ load 428633.html
 load 429899-1.html
 load 441360.html
 load 445711.html
 load 463307-1.html
 load 467703-1.xhtml
 load 467873-1.html
 load 470418-1.html
 load 474410-1.html
-skip-if(!xbl) load 483120-1.xhtml
-skip-if(!xbl) load 483120-2.xhtml
 load 487549-1.html
 load 487724-1.html
 load 490777-1.html
 load 516512-1.html
 load 532726-1.html
 load 538065-1.html
 load 546870-1.html
 load 557348-1.html
diff --git a/js/xpconnect/tests/chrome/chrome.ini b/js/xpconnect/tests/chrome/chrome.ini
--- a/js/xpconnect/tests/chrome/chrome.ini
+++ b/js/xpconnect/tests/chrome/chrome.ini
@@ -1,16 +1,15 @@
 [DEFAULT]
 skip-if = os == 'android'
 support-files =
   bug503926.xhtml
   file_bug484459.html
   file_bug618176.xhtml
   file_bug996069.html
-  file_bug1050049.xml
   file_bug1281071.html
   file_discardSystemSource.html
   file_empty.html
   file_evalInSandbox.html
   file_expandosharing.jsm
   outoflinexulscript.js
   subscript.js
   utf8_subscript.js
@@ -74,18 +73,16 @@ skip-if = os == 'win' || os == 'mac' || 
 [test_bug860494.xhtml]
 [test_bug865948.xhtml]
 [test_bug866823.xhtml]
 [test_bug895340.xhtml]
 [test_bug932906.xhtml]
 [test_bug996069.xhtml]
 [test_bug1041626.xhtml]
 [test_bug1042436.xhtml]
-[test_bug1050049.html]
-skip-if = !xbl
 [test_bug1065185.html]
 [test_bug1074863.html]
 [test_bug1092477.xhtml]
 [test_bug1124898.html]
 [test_bug1126911.html]
 [test_bug1281071.xhtml]
 [test_bug1390159.xhtml]
 [test_bug1430164.html]
diff --git a/js/xpconnect/tests/chrome/file_bug1050049.xml b/js/xpconnect/tests/chrome/file_bug1050049.xml
deleted file mode 100644
--- a/js/xpconnect/tests/chrome/file_bug1050049.xml
+++ /dev/null
@@ -1,10 +0,0 @@
-<?xml version="1.0"?>
-<bindings id="testBindings" xmlns="http://www.mozilla.org/xbl"
-          xmlns:html="http://www.w3.org/1999/xhtml">
-  <binding id="regularChromeBinding">
-    <content><html:p>Anonymous Paragraph</html:p></content>
-  </binding>
-  <binding id="whitelistedChromeBinding" bindToUntrustedContent="true">
-    <content><html:p>Anonymous Paragraph</html:p></content>
-  </binding>
-</bindings>
diff --git a/js/xpconnect/tests/chrome/test_bug1050049.html b/js/xpconnect/tests/chrome/test_bug1050049.html
deleted file mode 100644
--- a/js/xpconnect/tests/chrome/test_bug1050049.html
+++ /dev/null
@@ -1,56 +0,0 @@
-<!DOCTYPE HTML>
-<html>
-<!--
-https://bugzilla.mozilla.org/show_bug.cgi?id=1050049
--->
-<head>
-  <meta charset="utf-8">
-  <title>Test for Bug 1050049</title>
-  <script src="chrome://mochikit/content/tests/SimpleTest/SimpleTest.js"></script>
-  <link rel="stylesheet" type="text/css" href="chrome://global/skin"/>
-  <link rel="stylesheet" type="text/css" href="chrome://mochikit/content/tests/SimpleTest/test.css"/>
-  <script type="application/javascript">
-
-  /** Test for Bug 1050049 **/
-  SimpleTest.waitForExplicitFinish();
-
-  var regularBindingURI = window.location.toString().replace("test_bug1050049.html", "file_bug1050049.xml") + "#regularChromeBinding";
-  var whitelistedBindingURI = window.location.toString().replace("test_bug1050049.html", "file_bug1050049.xml") + "#whitelistedChromeBinding";
-
-  function testApplyBinding(doc, bindingURI, expectBind) {
-    var d = doc.createElement('div');
-    doc.body.appendChild(d);
-    d.style.MozBinding = "url(" + bindingURI + ")";
-
-    return new Promise(function(resolve, reject) {
-      // Wait two ticks of the refresh driver for the binding to be applied.
-      function onceBindingWouldBeApplied() {
-        is(!!doc.getAnonymousNodes(d), expectBind, "Binding " + (expectBind ? "should" : "shouldn't") +
-                                                   " be applied: " + bindingURI + ", " + doc.location);
-        resolve();
-      }
-      window.requestAnimationFrame(function() { window.requestAnimationFrame(onceBindingWouldBeApplied); });
-    });
-  }
-
-  function go() {
-    testApplyBinding(document, regularBindingURI, true)
-      .then(testApplyBinding.bind(null, window[0].document, regularBindingURI, false))
-      .then(testApplyBinding.bind(null, document, whitelistedBindingURI, true))
-      .then(testApplyBinding.bind(null, window[0].document, whitelistedBindingURI, true))
-      .then(SimpleTest.finish.bind(SimpleTest));
-  }
-
-  </script>
-</head>
-<body>
-<a target="_blank" href="https://bugzilla.mozilla.org/show_bug.cgi?id=1050049">Mozilla Bug 1050049</a>
-<p id="display"></p>
-<div id="content" style="display: none">
-
-</div>
-<pre id="test">
-</pre>
-<iframe onload="go();" src="http://example.org/tests/js/xpconnect/tests/mochitest/file_empty.html"></iframe>
-</body>
-</html>
