# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  a0bc8d0a810cceefb13c9ad6f44a82206e8bb49b
Test

diff --git a/browser/devtools/styleeditor/test/browser_styleeditor_opentab.js b/browser/devtools/styleeditor/test/browser_styleeditor_opentab.js
--- a/browser/devtools/styleeditor/test/browser_styleeditor_opentab.js
+++ b/browser/devtools/styleeditor/test/browser_styleeditor_opentab.js
@@ -36,17 +36,20 @@ add_task(function*() {
 
 function onNewTabOpened() {
   let tabOpened = promise.defer();
   gBrowser.tabContainer.addEventListener("TabOpen", function open(e) {
     gBrowser.tabContainer.removeEventListener("TabOpen", open, false);
     let browser = gBrowser.getBrowserForTab(e.target);
     browser.addEventListener("load", function load() {
       browser.removeEventListener("load", load, true);
-      tabOpened.resolve();
+      // tabOpened.resolve();
+      executeSoon(() => {
+        tabOpened.resolve();
+      });
     }, true);
   }, false);
 
   return tabOpened.promise;
 }
 
 function onPopupShow(contextMenu) {
   let defer = promise.defer();
