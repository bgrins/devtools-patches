# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  0da2b2e89deba4f4a9da7075d956d479c47879c8

diff --git a/browser/base/content/tabbrowser-tab.js b/browser/base/content/tabbrowser-tab.js
--- a/browser/base/content/tabbrowser-tab.js
+++ b/browser/base/content/tabbrowser-tab.js
@@ -67,17 +67,17 @@
           "soundplaying,soundplaying-scheduledremoval,pinned,muted,blocked,selected=visuallyselected,activemedia-blocked,pictureinpicture",
         ".tab-close-button": "fadein,pinned,selected=visuallyselected",
       };
     }
 
     get fragment() {
       if (!this._fragment) {
         this._fragment = MozXULElement.parseXULToFragment(`
-        <stack class="tab-stack" flex="1">
+        <stack class="tab-stack" flex="1" hidden="true">
           <vbox class="tab-background">
             <hbox class="tab-line"/>
             <spacer flex="1" class="tab-background-inner"/>
             <hbox class="tab-bottom-line"/>
           </vbox>
           <hbox class="tab-loading-burst"/>
           <hbox class="tab-content" align="center">
             <hbox class="tab-throbber" layer="true"/>
@@ -104,16 +104,17 @@
       if (this._initialized) {
         return;
       }
 
       this.textContent = "";
       this.appendChild(this.fragment);
       this.initializeAttributeInheritance();
       this.setAttribute("context", "tabContextMenu");
+      this.lastElementChild.hidden = false;
       this._initialized = true;
 
       if (!("_lastAccessed" in this)) {
         this.updateLastAccessed();
       }
     }
 
     get container() {
diff --git a/browser/themes/shared/tabs.inc.css b/browser/themes/shared/tabs.inc.css
--- a/browser/themes/shared/tabs.inc.css
+++ b/browser/themes/shared/tabs.inc.css
@@ -50,16 +50,19 @@
 #tabbrowser-tabs,
 #tabbrowser-tabs > .tabbrowser-arrowscrollbox,
 #tabbrowser-tabs[positionpinnedtabs] > .tabbrowser-arrowscrollbox > .tabbrowser-tab[pinned] {
   min-height: var(--tab-min-height);
 }
 
 .tab-stack {
   min-height: inherit;
+  /* position: absolute; */
+  height: 100%;
+  width: 100%;
 }
 
 @supports -moz-bool-pref("layout.css.emulate-moz-box-with-flex") {
   .tab-stack {
     /* Needed to allow tabs to shrink to be skinnier than their page-title: */
     min-width: 0;
   }
 
@@ -67,16 +70,17 @@
     /* Needed to prevent tabstrip from growing as wide as the sum of the tabs'
        page-title widths (when we'd rather have it be as wide as the window and
        compress the tabs to their minimum size): */
     max-width: 100%;
   }
 }
 
 .tabbrowser-tab {
+  position: relative;
   -moz-appearance: none;
   background-color: transparent;
   border-radius: 0;
   border-width: 0;
   margin: 0 !important /* override tabbox.css */;
   padding: 0 !important /* override tabbox.css */;
   -moz-box-align: stretch;
 }
