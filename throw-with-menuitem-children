# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  b482c6618d72ac38a9a82fbccf425e0a7f8b6129

diff --git a/toolkit/content/widgets/menu.xml b/toolkit/content/widgets/menu.xml
--- a/toolkit/content/widgets/menu.xml
+++ b/toolkit/content/widgets/menu.xml
@@ -36,16 +36,24 @@
           for (var parent = this.parentNode; parent; parent = parent.parentNode) {
             if (parent instanceof XULMenuElement) {
               return parent;
             }
           }
           return null;
         </getter>
       </property>
+
+      <constructor><![CDATA[
+      if (this.tagName == "menuitem") {
+        if (this.childNodes.length > 0) {
+          throw new Error(`Construcing menuitem with children (id=${this.id})`);
+        }
+      }
+      ]]></constructor>
     </implementation>
   </binding>
 
   <binding id="menu-base"
            extends="chrome://global/content/bindings/menu.xml#menuitem-base">
 
     <implementation implements="nsIDOMXULContainerElement">
       <property name="open" onget="return this.hasAttribute('open');">
