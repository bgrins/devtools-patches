# HG changeset patch
# User Brian Grinstead <bgrinstead@mozilla.com>
# Parent  6ac54392fbe1473fed70d80694a682dbd4f304ee
Bug 1138781 - Prevent javascript.options.strict logging in devtools subsuite;r=jmaher

diff --git a/testing/mochitest/runtests.py b/testing/mochitest/runtests.py
--- a/testing/mochitest/runtests.py
+++ b/testing/mochitest/runtests.py
@@ -1363,16 +1363,21 @@ class Mochitest(MochitestUtilsMixin):
 
         # preferences
         preferences = [
             os.path.join(
                 SCRIPT_DIR,
                 'profile_data',
                 'prefs_general.js')]
 
+        if options.subsuite == 'devtools':
+            preferences += [os.path.join(SCRIPT_DIR,
+                                         'profile_data',
+                                         'prefs_devtools.js')]
+
         # TODO: Let's include those prefs until bug 1072443 is fixed
         if mozinfo.info.get('buildapp') == 'mulet':
             preferences += [os.path.join(SCRIPT_DIR,
                                          'profile_data',
                                          'prefs_b2g_unittest.js')]
 
         prefs = {}
         for path in preferences:
diff --git a/testing/profiles/moz.build b/testing/profiles/moz.build
--- a/testing/profiles/moz.build
+++ b/testing/profiles/moz.build
@@ -1,14 +1,15 @@
 # -*- Mode: python; c-basic-offset: 4; indent-tabs-mode: nil; tab-width: 40 -*-
 # vim: set filetype=python:
 # This Source Code Form is subject to the terms of the Mozilla Public
 # License, v. 2.0. If a copy of the MPL was not distributed with this
 # file, You can obtain one at http://mozilla.org/MPL/2.0/.
 
 mochitest_profile_files = [
     'prefs_b2g_unittest.js',
+    'prefs_devtools.js',
     'prefs_general.js',
     'webapps_mochitest.json',
 ]
 
 TEST_HARNESS_FILES.testing.mochitest.profile_data += mochitest_profile_files
 TEST_HARNESS_FILES['web-platform'].prefs += mochitest_profile_files
diff --git a/testing/profiles/prefs_devtools.js b/testing/profiles/prefs_devtools.js
new file mode 100644
--- /dev/null
+++ b/testing/profiles/prefs_devtools.js
@@ -0,0 +1,3 @@
+// Prefs specific to devtools mochitests
+
+user_pref("javascript.options.strict.debug", false);
